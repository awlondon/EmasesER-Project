var Uee=Object.defineProperty;var Q3=t=>{throw TypeError(t)};var Fee=(t,e,n)=>e in t?Uee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var kt=(t,e,n)=>Fee(t,typeof e!="symbol"?e+"":e,n),ZI=(t,e,n)=>e.has(t)||Q3("Cannot "+n);var Pe=(t,e,n)=>(ZI(t,e,"read from private field"),n?n.call(t):e.get(t)),Bn=(t,e,n)=>e.has(t)?Q3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),hn=(t,e,n,r)=>(ZI(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),xi=(t,e,n)=>(ZI(t,e,"access private method"),n);var HT=(t,e,n,r)=>({set _(i){hn(t,e,i,n)},get _(){return Pe(t,e,r)}});try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="fa89c3ff-0658-4ce7-9c67-8e6532c458be",t._sentryDebugIdIdentifier="sentry-dbid-fa89c3ff-0658-4ce7-9c67-8e6532c458be")}catch{}function Bee(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"5bbec6b79e5a45a2471e0b28470d1fd781cd11e4"}}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var JI={exports:{}},nS={},QI={exports:{}},Ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eU;function zee(){if(eU)return Ln;eU=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(Z){return Z===null||typeof Z!="object"?null:(Z=p&&Z[p]||Z["@@iterator"],typeof Z=="function"?Z:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,E={};function S(Z,le,ae){this.props=Z,this.context=le,this.refs=E,this.updater=ae||_}S.prototype.isReactComponent={},S.prototype.setState=function(Z,le){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,le,"setState")},S.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function w(){}w.prototype=S.prototype;function R(Z,le,ae){this.props=Z,this.context=le,this.refs=E,this.updater=ae||_}var C=R.prototype=new w;C.constructor=R,y(C,S.prototype),C.isPureReactComponent=!0;var k=Array.isArray,M=Object.prototype.hasOwnProperty,N={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function D(Z,le,ae){var Ee,ke={},$e=null,Le=null;if(le!=null)for(Ee in le.ref!==void 0&&(Le=le.ref),le.key!==void 0&&($e=""+le.key),le)M.call(le,Ee)&&!O.hasOwnProperty(Ee)&&(ke[Ee]=le[Ee]);var We=arguments.length-2;if(We===1)ke.children=ae;else if(1<We){for(var ot=Array(We),Mt=0;Mt<We;Mt++)ot[Mt]=arguments[Mt+2];ke.children=ot}if(Z&&Z.defaultProps)for(Ee in We=Z.defaultProps,We)ke[Ee]===void 0&&(ke[Ee]=We[Ee]);return{$$typeof:t,type:Z,key:$e,ref:Le,props:ke,_owner:N.current}}function L(Z,le){return{$$typeof:t,type:Z.type,key:le,ref:Z.ref,props:Z.props,_owner:Z._owner}}function B(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function ee(Z){var le={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ae){return le[ae]})}var te=/\/+/g;function ne(Z,le){return typeof Z=="object"&&Z!==null&&Z.key!=null?ee(""+Z.key):le.toString(36)}function H(Z,le,ae,Ee,ke){var $e=typeof Z;($e==="undefined"||$e==="boolean")&&(Z=null);var Le=!1;if(Z===null)Le=!0;else switch($e){case"string":case"number":Le=!0;break;case"object":switch(Z.$$typeof){case t:case e:Le=!0}}if(Le)return Le=Z,ke=ke(Le),Z=Ee===""?"."+ne(Le,0):Ee,k(ke)?(ae="",Z!=null&&(ae=Z.replace(te,"$&/")+"/"),H(ke,le,ae,"",function(Mt){return Mt})):ke!=null&&(B(ke)&&(ke=L(ke,ae+(!ke.key||Le&&Le.key===ke.key?"":(""+ke.key).replace(te,"$&/")+"/")+Z)),le.push(ke)),1;if(Le=0,Ee=Ee===""?".":Ee+":",k(Z))for(var We=0;We<Z.length;We++){$e=Z[We];var ot=Ee+ne($e,We);Le+=H($e,le,ae,ot,ke)}else if(ot=m(Z),typeof ot=="function")for(Z=ot.call(Z),We=0;!($e=Z.next()).done;)$e=$e.value,ot=Ee+ne($e,We++),Le+=H($e,le,ae,ot,ke);else if($e==="object")throw le=String(Z),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.");return Le}function V(Z,le,ae){if(Z==null)return Z;var Ee=[],ke=0;return H(Z,Ee,"","",function($e){return le.call(ae,$e,ke++)}),Ee}function W(Z){if(Z._status===-1){var le=Z._result;le=le(),le.then(function(ae){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ae)},function(ae){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ae)}),Z._status===-1&&(Z._status=0,Z._result=le)}if(Z._status===1)return Z._result.default;throw Z._result}var J={current:null},X={transition:null},ie={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:X,ReactCurrentOwner:N};function pe(){throw Error("act(...) is not supported in production builds of React.")}return Ln.Children={map:V,forEach:function(Z,le,ae){V(Z,function(){le.apply(this,arguments)},ae)},count:function(Z){var le=0;return V(Z,function(){le++}),le},toArray:function(Z){return V(Z,function(le){return le})||[]},only:function(Z){if(!B(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Ln.Component=S,Ln.Fragment=n,Ln.Profiler=i,Ln.PureComponent=R,Ln.StrictMode=r,Ln.Suspense=l,Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Ln.act=pe,Ln.cloneElement=function(Z,le,ae){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var Ee=y({},Z.props),ke=Z.key,$e=Z.ref,Le=Z._owner;if(le!=null){if(le.ref!==void 0&&($e=le.ref,Le=N.current),le.key!==void 0&&(ke=""+le.key),Z.type&&Z.type.defaultProps)var We=Z.type.defaultProps;for(ot in le)M.call(le,ot)&&!O.hasOwnProperty(ot)&&(Ee[ot]=le[ot]===void 0&&We!==void 0?We[ot]:le[ot])}var ot=arguments.length-2;if(ot===1)Ee.children=ae;else if(1<ot){We=Array(ot);for(var Mt=0;Mt<ot;Mt++)We[Mt]=arguments[Mt+2];Ee.children=We}return{$$typeof:t,type:Z.type,key:ke,ref:$e,props:Ee,_owner:Le}},Ln.createContext=function(Z){return Z={$$typeof:a,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:s,_context:Z},Z.Consumer=Z},Ln.createElement=D,Ln.createFactory=function(Z){var le=D.bind(null,Z);return le.type=Z,le},Ln.createRef=function(){return{current:null}},Ln.forwardRef=function(Z){return{$$typeof:o,render:Z}},Ln.isValidElement=B,Ln.lazy=function(Z){return{$$typeof:f,_payload:{_status:-1,_result:Z},_init:W}},Ln.memo=function(Z,le){return{$$typeof:c,type:Z,compare:le===void 0?null:le}},Ln.startTransition=function(Z){var le=X.transition;X.transition={};try{Z()}finally{X.transition=le}},Ln.unstable_act=pe,Ln.useCallback=function(Z,le){return J.current.useCallback(Z,le)},Ln.useContext=function(Z){return J.current.useContext(Z)},Ln.useDebugValue=function(){},Ln.useDeferredValue=function(Z){return J.current.useDeferredValue(Z)},Ln.useEffect=function(Z,le){return J.current.useEffect(Z,le)},Ln.useId=function(){return J.current.useId()},Ln.useImperativeHandle=function(Z,le,ae){return J.current.useImperativeHandle(Z,le,ae)},Ln.useInsertionEffect=function(Z,le){return J.current.useInsertionEffect(Z,le)},Ln.useLayoutEffect=function(Z,le){return J.current.useLayoutEffect(Z,le)},Ln.useMemo=function(Z,le){return J.current.useMemo(Z,le)},Ln.useReducer=function(Z,le,ae){return J.current.useReducer(Z,le,ae)},Ln.useRef=function(Z){return J.current.useRef(Z)},Ln.useState=function(Z){return J.current.useState(Z)},Ln.useSyncExternalStore=function(Z,le,ae){return J.current.useSyncExternalStore(Z,le,ae)},Ln.useTransition=function(){return J.current.useTransition()},Ln.version="18.3.1",Ln}var tU;function G1(){return tU||(tU=1,QI.exports=zee()),QI.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nU;function jee(){if(nU)return nS;nU=1;var t=G1(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var f,p={},m=null,_=null;c!==void 0&&(m=""+c),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(_=l.ref);for(f in l)r.call(l,f)&&!s.hasOwnProperty(f)&&(p[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)p[f]===void 0&&(p[f]=l[f]);return{$$typeof:e,type:o,key:m,ref:_,props:p,_owner:i.current}}return nS.Fragment=n,nS.jsx=a,nS.jsxs=a,nS}var rU;function Hee(){return rU||(rU=1,JI.exports=jee()),JI.exports}var U=Hee();const Pr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,fg="9.17.0",br=globalThis;function UM(){return FM(br),br}function FM(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||fg,e[fg]=e[fg]||{}}function BM(t,e,n=br){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[fg]=r[fg]||{};return i[t]||(i[t]=e())}const k7=Object.prototype.toString;function jL(t){switch(k7.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Wh(t,Error)}}function m0(t,e){return k7.call(t)===`[object ${e}]`}function O7(t){return m0(t,"ErrorEvent")}function iU(t){return m0(t,"DOMError")}function Vee(t){return m0(t,"DOMException")}function Nd(t){return m0(t,"String")}function HL(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function VL(t){return t===null||HL(t)||typeof t!="object"&&typeof t!="function"}function Hb(t){return m0(t,"Object")}function zM(t){return typeof Event<"u"&&Wh(t,Event)}function Gee(t){return typeof Element<"u"&&Wh(t,Element)}function $ee(t){return m0(t,"RegExp")}function jM(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function Wee(t){return Hb(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Wh(t,e){try{return t instanceof e}catch{return!1}}function P7(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function qee(t){return typeof Request<"u"&&Wh(t,Request)}const GL=br,Xee=80;function L7(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,a=0;const o=" > ",l=o.length;let c;const f=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||Xee;for(;n&&s++<r&&(c=Kee(n,f),!(c==="html"||s>1&&a+i.length*l+c.length>=p));)i.push(c),a+=c.length,n=n.parentNode;return i.reverse().join(o)}catch{return"<unknown>"}}function Kee(t,e){const n=t,r=[];if(!(n!=null&&n.tagName))return"";if(GL.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e!=null&&e.length?e.filter(a=>n.getAttribute(a)).map(a=>[a,n.getAttribute(a)]):null;if(i!=null&&i.length)i.forEach(a=>{r.push(`[${a[0]}="${a[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const a=n.className;if(a&&Nd(a)){const o=a.split(/\s+/);for(const l of o)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const a of s){const o=n.getAttribute(a);o&&r.push(`[${a}="${o}"]`)}return r.join("")}function $L(){try{return GL.document.location.href}catch{return""}}function Yee(t){if(!GL.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}const Kg=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Zee="Sentry Logger ",CO=["debug","info","warn","error","log","assert","trace"],zC={};function g0(t){if(!("console"in br))return t();const e=br.console,n={},r=Object.keys(zC);r.forEach(i=>{const s=zC[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function Jee(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return Kg?CO.forEach(n=>{e[n]=(...r)=>{t&&g0(()=>{br.console[n](`${Zee}[${n}]:`,...r)})}}):CO.forEach(n=>{e[n]=()=>{}}),e}const fn=BM("logger",Jee);function jC(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function sU(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{P7(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Qee(t,e,n=!1){return Nd(t)?$ee(e)?e.test(t):Nd(e)?n?t===e:t.includes(e):!1:!1}function HM(t,e=[],n=!1){return e.some(r=>Qee(t,r,n))}function Bo(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const i=n(r);typeof i=="function"&&N7(i,r);try{t[e]=i}catch{Kg&&fn.log(`Failed to replace method "${e}" in object`,t)}}function Cg(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Kg&&fn.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function N7(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Cg(t,"__sentry_original__",e)}catch{}}function WL(t){return t.__sentry_original__}function D7(t){if(jL(t))return{message:t.message,name:t.name,stack:t.stack,...oU(t)};if(zM(t)){const e={type:t.type,target:aU(t.target),currentTarget:aU(t.currentTarget),...oU(t)};return typeof CustomEvent<"u"&&Wh(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function aU(t){try{return Gee(t)?L7(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function oU(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function ete(t,e=40){const n=Object.keys(D7(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return jC(r,e);for(let i=n.length;i>0;i--){const s=n.slice(0,i).join(", ");if(!(s.length>e))return i===n.length?s:jC(s,e)}return""}function tte(){const t=br;return t.crypto||t.msCrypto}function Il(t=tte()){let e=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(e=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(e()&15)>>n/4).toString(16))}function U7(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}function Gm(t){const{message:e,event_id:n}=t;if(e)return e;const r=U7(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function RO(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function Gy(t,e){const n=U7(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i==null?void 0:i.data,...e.data};n.mechanism.data=s}}function lU(t){if(nte(t))return!0;try{Cg(t,"__sentry_captured__",!0)}catch{}return!1}function nte(t){try{return t.__sentry_captured__}catch{}}const F7=1e3;function $1(){return Date.now()/F7}function rte(){const{performance:t}=br;if(!(t!=null&&t.now))return $1;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/F7}const Dd=rte();function ite(t){const e=Dd(),n={sid:Il(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>ate(n)};return $y(n,t),n}function $y(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Dd(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Il()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function ste(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),$y(t,n)}function ate(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function W1(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=W1(r[i],e[i],n-1));return r}const MO="_sentrySpan";function uU(t,e){e?Cg(t,MO,e):delete t[MO]}function cU(t){return t[MO]}function dU(){return Il()}function B7(){return Il().substring(16)}const ote=100;class Wd{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:dU(),sampleRand:Math.random()}}clone(){const e=new Wd;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,uU(e,cU(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&$y(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof Wd?n.getScopeData():Hb(n)?e:void 0,{tags:i,extra:s,user:a,contexts:o,level:l,fingerprint:c=[],propagationContext:f}=r||{};return this._tags={...this._tags,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...o},a&&Object.keys(a).length&&(this._user=a),l&&(this._level=l),c.length&&(this._fingerprint=c),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,uU(this,void 0),this._attachments=[],this.setPropagationContext({traceId:dU(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){var s;const r=typeof n=="number"?n:ote;if(r<=0)return this;const i={timestamp:$1(),...e,message:e.message?jC(e.message,2048):e.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:cU(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=W1(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(n==null?void 0:n.event_id)||Il();if(!this._client)return fn.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=(r==null?void 0:r.event_id)||Il();if(!this._client)return fn.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=(n==null?void 0:n.event_id)||Il();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(fn.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function lte(){return BM("defaultCurrentScope",()=>new Wd)}function ute(){return BM("defaultIsolationScope",()=>new Wd)}class cte{constructor(e,n){let r;e?r=e:r=new Wd;let i;n?i=n:i=new Wd,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return jM(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Wy(){const t=UM(),e=FM(t);return e.stack=e.stack||new cte(lte(),ute())}function dte(t){return Wy().withScope(t)}function fte(t,e){const n=Wy();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function fU(t){return Wy().withScope(()=>t(Wy().getIsolationScope()))}function hte(){return{withIsolationScope:fU,withScope:dte,withSetScope:fte,withSetIsolationScope:(t,e)=>fU(e),getCurrentScope:()=>Wy().getScope(),getIsolationScope:()=>Wy().getIsolationScope()}}function qL(t){const e=FM(t);return e.acs?e.acs:hte()}function pp(){const t=UM();return qL(t).getCurrentScope()}function _0(){const t=UM();return qL(t).getIsolationScope()}function pte(){return BM("globalScope",()=>new Wd)}function mte(...t){const e=UM(),n=qL(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function Na(){return pp().getClient()}function gte(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=e,s={trace_id:n,span_id:i||B7()};return r&&(s.parent_span_id=r),s}const _te="sentry.source",vte="sentry.sample_rate",yte="sentry.previous_trace_sample_rate",Ete="sentry.op",Ste="sentry.origin",z7="sentry.profile_id",j7="sentry.exclusive_time",bte=0,wte=1,Tte="_sentryScope",xte="_sentryIsolationScope";function H7(t){return{scope:t[Tte],isolationScope:t[xte]}}function Cte(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Rte="sentry-",Mte=/^sentry-/;function Ate(t){const e=Ite(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>{if(i.match(Mte)){const a=i.slice(Rte.length);r[a]=s}return r},{});if(Object.keys(n).length>0)return n}function Ite(t){if(!(!t||!Nd(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=hU(n);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):hU(t)}function hU(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}const V7=1;let pU=!1;function kte(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),i=r?e:XL(t).parent_span_id,s=H7(t).scope,a=r?(s==null?void 0:s.getPropagationContext().propagationSpanId)||B7():e;return{parent_span_id:i,span_id:a,trace_id:n}}function Ote(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...i},attributes:s})=>({span_id:e,trace_id:n,sampled:r===V7,attributes:s,...i}))}function mU(t){return typeof t=="number"?gU(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?gU(t.getTime()):Dd()}function gU(t){return t>9999999999?t/1e3:t}function XL(t){if(Lte(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(Pte(t)){const{attributes:r,startTime:i,name:s,endTime:a,parentSpanId:o,status:l,links:c}=t;return{span_id:e,trace_id:n,data:r,description:s,parent_span_id:o,start_timestamp:mU(i),timestamp:mU(a)||void 0,status:Dte(l),op:r[Ete],origin:r[Ste],links:Ote(c)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function Pte(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Lte(t){return typeof t.getSpanJSON=="function"}function Nte(t){const{traceFlags:e}=t.spanContext();return e===V7}function Dte(t){if(!(!t||t.code===bte))return t.code===wte?"ok":t.message||"unknown_error"}const Ute="_sentryRootSpan";function G7(t){return t[Ute]||t}function _U(){pU||(g0(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),pU=!0)}const $7=50,Rg="?",vU=/\(error: (.*)\)/,yU=/captureMessage|captureException/;function W7(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],a=n.split(`
`);for(let o=r;o<a.length;o++){const l=a[o];if(l.length>1024)continue;const c=vU.test(l)?l.replace(vU,"$1"):l;if(!c.match(/\S*Error: /)){for(const f of e){const p=f(c);if(p){s.push(p);break}}if(s.length>=$7+i)break}}return Bte(s.slice(i))}}function Fte(t){return Array.isArray(t)?W7(...t):t}function Bte(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(VT(e).function||"")&&e.pop(),e.reverse(),yU.test(VT(e).function||"")&&(e.pop(),yU.test(VT(e).function||"")&&e.pop()),e.slice(0,$7).map(n=>({...n,filename:n.filename||VT(e).filename,function:n.function||Rg}))}function VT(t){return t[t.length-1]||{}}const e2="<anonymous>";function qh(t){try{return!t||typeof t!="function"?e2:t.name||e2}catch{return e2}}function EU(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const tC={},SU={};function Yg(t,e){tC[t]=tC[t]||[],tC[t].push(e)}function Zg(t,e){if(!SU[t]){SU[t]=!0;try{e()}catch(n){Kg&&fn.error(`Error while instrumenting ${t}`,n)}}}function gu(t,e){const n=t&&tC[t];if(n)for(const r of n)try{r(e)}catch(i){Kg&&fn.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${qh(r)}
Error:`,i)}}let t2=null;function zte(t){const e="error";Yg(e,t),Zg(e,jte)}function jte(){t2=br.onerror,br.onerror=function(t,e,n,r,i){return gu("error",{column:r,error:i,line:n,msg:t,url:e}),t2?t2.apply(this,arguments):!1},br.onerror.__SENTRY_INSTRUMENTED__=!0}let n2=null;function Hte(t){const e="unhandledrejection";Yg(e,t),Zg(e,Vte)}function Vte(){n2=br.onunhandledrejection,br.onunhandledrejection=function(t){return gu("unhandledrejection",t),n2?n2.apply(this,arguments):!0},br.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Gte(t){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((n=Na())==null?void 0:n.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const KL="production",$te="_frozenDsc";function q7(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i={environment:n.environment||KL,release:n.release,public_key:r,trace_id:t};return e.emit("createDsc",i),i}function Wte(t,e){const n=e.getPropagationContext();return n.dsc||q7(n.traceId,t)}function qte(t){var y;const e=Na();if(!e)return{};const n=G7(t),r=XL(n),i=r.data,s=n.spanContext().traceState,a=(s==null?void 0:s.get("sentry.sample_rate"))??i[vte]??i[yte];function o(E){return(typeof a=="number"||typeof a=="string")&&(E.sample_rate=`${a}`),E}const l=n[$te];if(l)return o(l);const c=s==null?void 0:s.get("sentry.dsc"),f=c&&Ate(c);if(f)return o(f);const p=q7(t.spanContext().traceId,e),m=i[_te],_=r.description;return m!=="url"&&_&&(p.transaction=_),Gte()&&(p.sampled=String(Nte(n)),p.sample_rand=(s==null?void 0:s.get("sentry.sample_rand"))??((y=H7(n).scope)==null?void 0:y.getPropagationContext().sampleRand.toString())),o(p),e.emit("createDsc",p,n),p}const Xte=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Kte(t){return t==="http"||t==="https"}function VM(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:a,protocol:o,publicKey:l}=t;return`${o}://${l}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${a}`}function Yte(t){const e=Xte.exec(t);if(!e){g0(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,i="",s="",a="",o=""]=e.slice(1);let l="",c=o;const f=c.split("/");if(f.length>1&&(l=f.slice(0,-1).join("/"),c=f.pop()),c){const p=c.match(/^\d+/);p&&(c=p[0])}return X7({host:s,pass:i,path:l,projectId:c,port:a,protocol:n,publicKey:r})}function X7(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Zte(t){if(!Kg)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(fn.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:n.match(/^\d+$/)?Kte(r)?e&&isNaN(parseInt(e,10))?(fn.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(fn.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(fn.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Jte(t){const e=typeof t=="string"?Yte(t):X7(t);if(!(!e||!Zte(e)))return e}function Ed(t,e=100,n=1/0){try{return AO("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function K7(t,e=3,n=100*1024){const r=Ed(t,e);return nne(r)>n?K7(t,e-1,n):r}function AO(t,e,n=1/0,r=1/0,i=rne()){const[s,a]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const o=Qte(t,e);if(!o.startsWith("[object "))return o;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(l===0)return o.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const _=c.toJSON();return AO("",_,l-1,r,i)}catch{}const f=Array.isArray(e)?[]:{};let p=0;const m=D7(e);for(const _ in m){if(!Object.prototype.hasOwnProperty.call(m,_))continue;if(p>=r){f[_]="[MaxProperties ~]";break}const y=m[_];f[_]=AO(_,y,l-1,r,i),p++}return a(e),f}function Qte(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(P7(e))return"[VueViewModel]";if(Wee(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${qh(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=ene(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function ene(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function tne(t){return~-encodeURI(t).split(/%..|./).length}function nne(t){return tne(JSON.stringify(t))}function rne(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function q1(t,e=[]){return[t,e]}function ine(t,e){const[n,r]=t;return[n,[...r,e]]}function bU(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function IO(t){const e=FM(br);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function sne(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[IO(r),s]:r.push(typeof s=="string"?IO(s):s)}for(const s of n){const[a,o]=s;if(i(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)i(o);else{let l;try{l=JSON.stringify(o)}catch{l=JSON.stringify(Ed(o))}i(l)}}return typeof r=="string"?r:ane(r)}function ane(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function one(t){const e=typeof t.data=="string"?IO(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const lne={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function wU(t){return lne[t]}function Y7(t){if(!(t!=null&&t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function une(t,e,n,r){var s;const i=(s=t.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:VM(r)},...i&&{trace:i}}}function cne(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function dne(t,e,n,r){const i=Y7(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:VM(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return q1(s,[a])}function fne(t,e,n,r){const i=Y7(n),s=t.type&&t.type!=="replay_event"?t.type:"event";cne(t,n==null?void 0:n.sdk);const a=une(t,i,r,e);return delete t.sdkProcessingMetadata,q1(a,[[{type:s},t]])}var Sd;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(Sd||(Sd={}));function Mg(t){return new Xh(e=>{e(t)})}function HC(t){return new Xh((e,n)=>{n(t)})}class Xh{constructor(e){this._state=Sd.PENDING,this._handlers=[],this._runExecutor(e)}then(e,n){return new Xh((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(a){i(a)}},s=>{if(!n)i(s);else try{r(n(s))}catch(a){i(a)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Xh((n,r)=>{let i,s;return this.then(a=>{s=!1,i=a,e&&e()},a=>{s=!0,i=a,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}_executeHandlers(){if(this._state===Sd.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Sd.RESOLVED&&n[1](this._value),this._state===Sd.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(s,a)=>{if(this._state===Sd.PENDING){if(jM(a)){a.then(r,i);return}this._state=s,this._value=a,this._executeHandlers()}},r=s=>{n(Sd.RESOLVED,s)},i=s=>{n(Sd.REJECTED,s)};try{e(r,i)}catch(s){i(s)}}}function kO(t,e,n,r=0){return new Xh((i,s)=>{const a=t[r];if(e===null||typeof a!="function")i(e);else{const o=a({...e},n);Pr&&a.id&&o===null&&fn.log(`Event processor "${a.id}" dropped event`),jM(o)?o.then(l=>kO(t,l,n,r+1).then(i)).then(null,s):kO(t,o,n,r+1).then(i).then(null,s)}})}let GT,TU,$T;function hne(t){const e=br._sentryDebugIds;if(!e)return{};const n=Object.keys(e);return $T&&n.length===TU||(TU=n.length,$T=n.reduce((r,i)=>{GT||(GT={});const s=GT[i];if(s)r[s[0]]=s[1];else{const a=t(i);for(let o=a.length-1;o>=0;o--){const l=a[o],c=l==null?void 0:l.filename,f=e[i];if(c&&f){r[c]=f,GT[i]=[c,f];break}}}return r},{})),$T}function pne(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;mne(t,e),r&&vne(t,r),yne(t,n),gne(t,i),_ne(t,s)}function xU(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,sdkProcessingMetadata:o,breadcrumbs:l,fingerprint:c,eventProcessors:f,attachments:p,propagationContext:m,transactionName:_,span:y}=e;WT(t,"extra",n),WT(t,"tags",r),WT(t,"user",i),WT(t,"contexts",s),t.sdkProcessingMetadata=W1(t.sdkProcessingMetadata,o,2),a&&(t.level=a),_&&(t.transactionName=_),y&&(t.span=y),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),f.length&&(t.eventProcessors=[...t.eventProcessors,...f]),p.length&&(t.attachments=[...t.attachments,...p]),t.propagationContext={...t.propagationContext,...m}}function WT(t,e,n){t[e]=W1(t[e],n,1)}function mne(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,transactionName:o}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(i).length&&(t.user={...i,...t.user}),Object.keys(s).length&&(t.contexts={...s,...t.contexts}),a&&(t.level=a),o&&t.type!=="transaction"&&(t.transaction=o)}function gne(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function _ne(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function vne(t,e){t.contexts={trace:kte(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:qte(e),...t.sdkProcessingMetadata};const n=G7(e),r=XL(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function yne(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}function Ene(t,e,n,r,i,s){const{normalizeDepth:a=3,normalizeMaxBreadth:o=1e3}=t,l={...e,event_id:e.event_id||n.event_id||Il(),timestamp:e.timestamp||$1()},c=n.integrations||t.integrations.map(S=>S.name);Sne(l,t),Tne(l,c),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&bne(l,t.stackParser);const f=Cne(r,n.captureContext);n.mechanism&&Gy(l,n.mechanism);const p=i?i.getEventProcessors():[],m=pte().getScopeData();if(s){const S=s.getScopeData();xU(m,S)}if(f){const S=f.getScopeData();xU(m,S)}const _=[...n.attachments||[],...m.attachments];_.length&&(n.attachments=_),pne(l,m);const y=[...p,...m.eventProcessors];return kO(y,l,n).then(S=>(S&&wne(S),typeof a=="number"&&a>0?xne(S,a,o):S))}function Sne(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;t.environment=t.environment||n||KL,!t.release&&r&&(t.release=r),!t.dist&&i&&(t.dist=i);const a=t.request;a!=null&&a.url&&(a.url=jC(a.url,s))}function bne(t,e){var r,i;const n=hne(e);(i=(r=t.exception)==null?void 0:r.values)==null||i.forEach(s=>{var a,o;(o=(a=s.stacktrace)==null?void 0:a.frames)==null||o.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function wne(t){var r,i;const e={};if((i=(r=t.exception)==null?void 0:r.values)==null||i.forEach(s=>{var a,o;(o=(a=s.stacktrace)==null?void 0:a.frames)==null||o.forEach(l=>{l.debug_id&&(l.abs_path?e[l.abs_path]=l.debug_id:l.filename&&(e[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([s,a])=>{n.push({type:"sourcemap",code_file:s,debug_id:a})})}function Tne(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function xne(t,e,n){var i,s;if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(a=>({...a,...a.data&&{data:Ed(a.data,e,n)}}))},...t.user&&{user:Ed(t.user,e,n)},...t.contexts&&{contexts:Ed(t.contexts,e,n)},...t.extra&&{extra:Ed(t.extra,e,n)}};return(i=t.contexts)!=null&&i.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Ed(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(a=>({...a,...a.data&&{data:Ed(a.data,e,n)}}))),(s=t.contexts)!=null&&s.flags&&r.contexts&&(r.contexts.flags=Ed(t.contexts.flags,3,n)),r}function Cne(t,e){if(!e)return t;const n=t?t.clone():new Wd;return n.update(e),n}function Rne(t,e){return pp().captureException(t,void 0)}function Z7(t,e){return pp().captureEvent(t,e)}function Mne(t,e){_0().setContext(t,e)}function CU(t){const e=_0(),n=pp(),{userAgent:r}=br.navigator||{},i=ite({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),s=e.getSession();return(s==null?void 0:s.status)==="ok"&&$y(s,{status:"exited"}),J7(),e.setSession(i),i}function J7(){const t=_0(),n=pp().getSession()||t.getSession();n&&ste(n),Q7(),t.setSession()}function Q7(){const t=_0(),e=Na(),n=t.getSession();n&&e&&e.captureSession(n)}function RU(t=!1){if(t){J7();return}Q7()}const Ane="7";function Ine(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function kne(t){return`${Ine(t)}${t.projectId}/envelope/`}function One(t,e){const n={sentry_version:Ane};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function Pne(t,e,n){return e||`${kne(t)}?${One(t,n)}`}const MU=[];function Lne(t){const e={};return t.forEach(n=>{const{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function Nne(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(i=>{i.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const i=n(e);r=Array.isArray(i)?i:[i]}else r=e;return Lne(r)}function Dne(t,e){const n={};return e.forEach(r=>{r&&ez(t,r,n)}),n}function AU(t,e){for(const n of e)n!=null&&n.afterAllSetup&&n.afterAllSetup(t)}function ez(t,e,n){if(n[e.name]){Pr&&fn.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,MU.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),MU.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,a)=>r(s,a,t),{id:e.name});t.addEventProcessor(i)}Pr&&fn.log(`Integration installed: ${e.name}`)}function tz(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n!=null&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function Une(t){var l;const{trace_id:e,parent_span_id:n,span_id:r,status:i,origin:s,data:a,op:o}=((l=t.contexts)==null?void 0:l.trace)??{};return{data:a??{},description:t.transaction,op:o,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:i,timestamp:t.timestamp,trace_id:e??"",origin:s,profile_id:a==null?void 0:a[z7],exclusive_time:a==null?void 0:a[j7],measurements:t.measurements,is_segment:!0}}function Fne(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[z7]:t.profile_id},...t.exclusive_time&&{[j7]:t.exclusive_time}}}},measurements:t.measurements}}function Bne(t,e,n){const r=[{type:"client_report"},{timestamp:$1(),discarded_events:t}];return q1(e?{dsn:e}:{},[r])}const IU="Not capturing exception because it's already been captured.",kU="Discarded session because of missing or non-string release",nz=Symbol.for("SentryInternalError"),rz=Symbol.for("SentryDoNotSendEventError");function nC(t){return{message:t,[nz]:!0}}function r2(t){return{message:t,[rz]:!0}}function OU(t){return!!t&&typeof t=="object"&&nz in t}function PU(t){return!!t&&typeof t=="object"&&rz in t}class zne{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Jte(e.dsn):Pr&&fn.warn("No DSN provided, client will not send events."),this._dsn){const n=Pne(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){const i=Il();if(lU(e))return Pr&&fn.log(IU),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(a=>this._captureEvent(a,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:Il(),...r},a=HL(e)?e:String(e),o=VL(e)?this.eventFromMessage(a,n,s):this.eventFromException(e,s);return this._process(o.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,n,r){const i=Il();if(n!=null&&n.originalException&&lU(n.originalException))return Pr&&fn.log(IU),i;const s={event_id:i,...n},a=e.sdkProcessingMetadata||{},o=a.capturedSpanScope,l=a.capturedSpanIsolationScope;return this._process(this._captureEvent(e,s,o||r,l)),s.event_id}captureSession(e){this.sendSession(e),$y(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):Mg(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];ez(this,e,this._integrations),n||AU(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=fne(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=ine(r,one(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const{release:n,environment:r=KL}=this._options;if("aggregates"in e){const s=e.attrs||{};if(!s.release&&!n){Pr&&fn.warn(kU);return}s.release=s.release||n,s.environment=s.environment||r,e.attrs=s}else{if(!e.release&&!n){Pr&&fn.warn(kU);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const i=dne(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const i=`${e}:${n}`;Pr&&fn.log(`Recording outcome: "${i}"${r>1?` (${r} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(Pr&&fn.error("Error while sending envelope:",n),n)):(Pr&&fn.error("Transport disabled"),Mg({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Dne(this,e),AU(this,e)}_updateSessionFromEvent(e,n){var l;let r=n.level==="fatal",i=!1;const s=(l=n.exception)==null?void 0:l.values;if(s){i=!0;for(const c of s){const f=c.mechanism;if((f==null?void 0:f.handled)===!1){r=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&($y(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Xh(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,e&&r>=e&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,i){const s=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&(a!=null&&a.length)&&(n.integrations=a),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),Ene(s,e,n,r,this,i).then(o=>{if(o===null)return o;this.emit("postprocessEvent",o,n),o.contexts={trace:gte(r),...o.contexts};const l=Wte(this,r);return o.sdkProcessingMetadata={dynamicSamplingContext:l,...o.sdkProcessingMetadata},o})}_captureEvent(e,n={},r=pp(),i=_0()){return Pr&&OO(e)&&fn.log(`Captured error event \`${tz(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,i).then(s=>s.event_id,s=>{Pr&&(PU(s)?fn.log(s.message):OU(s)?fn.warn(s.message):fn.warn(s))})}_processEvent(e,n,r,i){const s=this.getOptions(),{sampleRate:a}=s,o=iz(e),l=OO(e),c=e.type||"error",f=`before send for type \`${c}\``,p=typeof a>"u"?void 0:Cte(a);if(l&&typeof p=="number"&&Math.random()>p)return this.recordDroppedEvent("sample_rate","error"),HC(r2(`Discarding event because it's not included in the random sample (sampling rate = ${a})`));const m=c==="replay_event"?"replay":c;return this._prepareEvent(e,n,r,i).then(_=>{if(_===null)throw this.recordDroppedEvent("event_processor",m),r2("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return _;const E=Hne(this,s,_,n);return jne(E,f)}).then(_=>{var S;if(_===null){if(this.recordDroppedEvent("before_send",m),o){const R=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",R)}throw r2(`${f} returned \`null\`, will not send event.`)}const y=r.getSession()||i.getSession();if(l&&y&&this._updateSessionFromEvent(y,_),o){const w=((S=_.sdkProcessingMetadata)==null?void 0:S.spanCountBeforeProcessing)||0,R=_.spans?_.spans.length:0,C=w-R;C>0&&this.recordDroppedEvent("before_send","span",C)}const E=_.transaction_info;if(o&&E&&_.transaction!==e.transaction){const w="custom";_.transaction_info={...E,source:w}}return this.sendEvent(_,n),_}).then(null,_=>{throw PU(_)||OU(_)?_:(this.captureException(_,{data:{__sentry__:!0},originalException:_}),nC(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${_}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){Pr&&fn.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){Pr&&fn.log("No outcomes to send");return}if(!this._dsn){Pr&&fn.log("No dsn provided, will not send outcomes");return}Pr&&fn.log("Sending outcomes:",e);const n=Bne(e,this._options.tunnel&&VM(this._dsn));this.sendEnvelope(n)}}function jne(t,e){const n=`${e} must return \`null\` or a valid event.`;if(jM(t))return t.then(r=>{if(!Hb(r)&&r!==null)throw nC(n);return r},r=>{throw nC(`${e} rejected with ${r}`)});if(!Hb(t)&&t!==null)throw nC(n);return t}function Hne(t,e,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:a}=e;let o=n;if(OO(o)&&i)return i(o,r);if(iz(o)){if(a){const l=a(Une(o));if(l?o=W1(n,Fne(l)):_U(),o.spans){const c=[];for(const f of o.spans){const p=a(f);p?c.push(p):(_U(),c.push(f))}o.spans=c}}if(s){if(o.spans){const l=o.spans.length;o.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return s(o,r)}}return o}function OO(t){return t.type===void 0}function iz(t){return t.type==="transaction"}function Vne(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function Gne(t,e,n,r){const i={};return e!=null&&e.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=VM(r)),q1(i,[Vne(t)])}br._sentryClientToLogBufferMap=new WeakMap;function i2(t,e){var s;const n=$ne(t)??[];if(n.length===0)return;const r=t.getOptions(),i=Gne(n,r._metadata,r.tunnel,t.getDsn());(s=br._sentryClientToLogBufferMap)==null||s.set(t,[]),t.emit("flushLogs"),t.sendEnvelope(i)}function $ne(t){var e;return(e=br._sentryClientToLogBufferMap)==null?void 0:e.get(t)}function Wne(t,e){e.debug===!0&&(Pr?fn.enable():g0(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),pp().update(e.initialScope);const r=new t(e);return qne(r),r.init(),r}function qne(t){pp().setClient(t)}const sz=Symbol.for("SentryBufferFullError");function Xne(t){const e=[];function n(){return t===void 0||e.length<t}function r(a){return e.splice(e.indexOf(a),1)[0]||Promise.resolve(void 0)}function i(a){if(!n())return HC(sz);const o=a();return e.indexOf(o)===-1&&e.push(o),o.then(()=>r(o)).then(null,()=>r(o).then(null,()=>{})),o}function s(a){return new Xh((o,l)=>{let c=e.length;if(!c)return o(!0);const f=setTimeout(()=>{a&&a>0&&o(!1)},a);e.forEach(p=>{Mg(p).then(()=>{--c||(clearTimeout(f),o(!0))},l)})})}return{$:e,add:i,drain:s}}const Kne=60*1e3;function Yne(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?Kne:r-e}function Zne(t,e){return t[e]||t.all||0}function Jne(t,e,n=Date.now()){return Zne(t,e)>n}function Qne(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n==null?void 0:n["x-sentry-rate-limits"],a=n==null?void 0:n["retry-after"];if(s)for(const o of s.trim().split(",")){const[l,c,,,f]=o.split(":",5),p=parseInt(l,10),m=(isNaN(p)?60:p)*1e3;if(!c)i.all=r+m;else for(const _ of c.split(";"))_==="metric_bucket"?(!f||f.split(";").includes("custom"))&&(i[_]=r+m):i[_]=r+m}else a?i.all=r+Yne(a,r):e===429&&(i.all=r+60*1e3);return i}const ere=64;function tre(t,e,n=Xne(t.bufferSize||ere)){let r={};const i=a=>n.drain(a);function s(a){const o=[];if(bU(a,(p,m)=>{const _=wU(m);Jne(r,_)?t.recordDroppedEvent("ratelimit_backoff",_):o.push(p)}),o.length===0)return Mg({});const l=q1(a[0],o),c=p=>{bU(l,(m,_)=>{t.recordDroppedEvent(p,wU(_))})},f=()=>e({body:sne(l)}).then(p=>(p.statusCode!==void 0&&(p.statusCode<200||p.statusCode>=300)&&Pr&&fn.warn(`Sentry responded with status code ${p.statusCode} to sent event.`),r=Qne(r,p),p),p=>{throw c("network_error"),Pr&&fn.error("Encountered error running transport request:",p),p});return n.add(f).then(p=>p,p=>{if(p===sz)return Pr&&fn.error("Skipped sending event because buffer is full."),c("queue_overflow"),Mg({});throw p})}return{send:s,flush:i}}function nre(t){var e;((e=t.user)==null?void 0:e.ip_address)===void 0&&(t.user={...t.user,ip_address:"{{auto}}"})}function rre(t){var e;"aggregates"in t?((e=t.attrs)==null?void 0:e.ip_address)===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function az(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:fg})),version:fg}),t._metadata=i}const ire=100;function Ag(t,e){const n=Na(),r=_0();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=ire}=n.getOptions();if(s<=0)return;const o={timestamp:$1(),...t},l=i?g0(()=>i(o,e)):o;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,e),r.addBreadcrumb(l,s))}let LU;const sre="FunctionToString",NU=new WeakMap,are=()=>({name:sre,setupOnce(){LU=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=WL(this),n=NU.has(Na())&&e!==void 0?e:this;return LU.apply(n,t)}}catch{}},setup(t){NU.set(t,!0)}}),ore=are,lre=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ure="EventFilters",cre=(t={})=>{let e;return{name:ure,setup(n){const r=n.getOptions();e=DU(t,r)},processEvent(n,r,i){if(!e){const s=i.getOptions();e=DU(t,s)}return fre(n,e)?null:n}}},dre=(t={})=>({...cre(t),name:"InboundFilters"});function DU(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:lre],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function fre(t,e){if(t.type){if(t.type==="transaction"&&pre(t,e.ignoreTransactions))return Pr&&fn.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Gm(t)}`),!0}else{if(hre(t,e.ignoreErrors))return Pr&&fn.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Gm(t)}`),!0;if(vre(t))return Pr&&fn.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Gm(t)}`),!0;if(mre(t,e.denyUrls))return Pr&&fn.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Gm(t)}.
Url: ${VC(t)}`),!0;if(!gre(t,e.allowUrls))return Pr&&fn.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Gm(t)}.
Url: ${VC(t)}`),!0}return!1}function hre(t,e){return e!=null&&e.length?tz(t).some(n=>HM(n,e)):!1}function pre(t,e){if(!(e!=null&&e.length))return!1;const n=t.transaction;return n?HM(n,e):!1}function mre(t,e){if(!(e!=null&&e.length))return!1;const n=VC(t);return n?HM(n,e):!1}function gre(t,e){if(!(e!=null&&e.length))return!0;const n=VC(t);return n?HM(n,e):!0}function _re(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function VC(t){var e,n;try{const r=[...((e=t.exception)==null?void 0:e.values)??[]].reverse().find(s=>{var a,o,l;return((a=s.mechanism)==null?void 0:a.parent_id)===void 0&&((l=(o=s.stacktrace)==null?void 0:o.frames)==null?void 0:l.length)}),i=(n=r==null?void 0:r.stacktrace)==null?void 0:n.frames;return i?_re(i):null}catch{return Pr&&fn.error(`Cannot extract url for event ${Gm(t)}`),null}}function vre(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)!=null&&n.length?!t.message&&!t.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function yre(t,e,n,r,i,s){var o;if(!((o=i.exception)!=null&&o.values)||!s||!Wh(s.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=PO(t,e,r,s.originalException,n,i.exception.values,a,0))}function PO(t,e,n,r,i,s,a,o){if(s.length>=n+1)return s;let l=[...s];if(Wh(r[i],Error)){UU(a,o);const c=t(e,r[i]),f=l.length;FU(c,i,f,o),l=PO(t,e,n,r[i],i,[c,...l],c,f)}return Array.isArray(r.errors)&&r.errors.forEach((c,f)=>{if(Wh(c,Error)){UU(a,o);const p=t(e,c),m=l.length;FU(p,`errors[${f}]`,m,o),l=PO(t,e,n,c,i,[p,...l],p,m)}}),l}function UU(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function FU(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Ere(t){const e="console";Yg(e,t),Zg(e,Sre)}function Sre(){"console"in br&&CO.forEach(function(t){t in br.console&&Bo(br.console,t,function(e){return zC[t]=e,function(...n){gu("console",{args:n,level:t});const i=zC[t];i==null||i.apply(br.console,n)}})})}function bre(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const wre="Dedupe",Tre=()=>{let t;return{name:wre,processEvent(e){if(e.type)return e;try{if(Cre(e,t))return Pr&&fn.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},xre=Tre;function Cre(t,e){return e?!!(Rre(t,e)||Mre(t,e)):!1}function Rre(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!lz(t,e)||!oz(t,e))}function Mre(t,e){const n=BU(e),r=BU(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!lz(t,e)||!oz(t,e))}function oz(t,e){let n=EU(t),r=EU(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.filename!==a.filename||s.lineno!==a.lineno||s.colno!==a.colno||s.function!==a.function)return!1}return!0}function lz(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function BU(t){var e;return((e=t.exception)==null?void 0:e.values)&&t.exception.values[0]}function s2(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function uz(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const Vb=br;function Are(){return"history"in Vb&&!!Vb.history}function cz(){if(!("fetch"in Vb))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function LO(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Ire(){var n;if(typeof EdgeRuntime=="string")return!0;if(!cz())return!1;if(LO(Vb.fetch))return!0;let t=!1;const e=Vb.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(t=LO(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){Kg&&fn.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function kre(t,e){const n="fetch";Yg(n,t),Zg(n,()=>Ore(void 0,e))}function Ore(t,e=!1){e&&!Ire()||Bo(br,"fetch",function(n){return function(...r){const i=new Error,{method:s,url:a}=Pre(r),o={args:r,fetchData:{method:s,url:a},startTimestamp:Dd()*1e3,virtualError:i,headers:Lre(r)};return gu("fetch",{...o}),n.apply(br,r).then(async l=>(gu("fetch",{...o,endTimestamp:Dd()*1e3,response:l}),l),l=>{if(gu("fetch",{...o,endTimestamp:Dd()*1e3,error:l}),jL(l)&&l.stack===void 0&&(l.stack=i.stack,Cg(l,"framesToPop",1)),l instanceof TypeError&&(l.message==="Failed to fetch"||l.message==="Load failed"||l.message==="NetworkError when attempting to fetch resource."))try{const c=new URL(o.fetchData.url);l.message=`${l.message} (${c.host})`}catch{}throw l})}})}function NO(t,e){return!!t&&typeof t=="object"&&!!t[e]}function zU(t){return typeof t=="string"?t:t?NO(t,"url")?t.url:t.toString?t.toString():"":""}function Pre(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:zU(n),method:NO(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:zU(e),method:NO(e,"method")?String(e.method).toUpperCase():"GET"}}function Lre(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(qee(e))return new Headers(e.headers)}catch{}}function Nre(){return"npm"}const Oi=br;let DO=0;function dz(){return DO>0}function Dre(){DO++,setTimeout(()=>{DO--})}function qy(t,e={}){function n(i){return typeof i=="function"}if(!n(t))return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(WL(t))return t}catch{return t}const r=function(...i){try{const s=i.map(a=>qy(a,e));return t.apply(this,s)}catch(s){throw Dre(),mte(a=>{a.addEventProcessor(o=>(e.mechanism&&(RO(o,void 0),Gy(o,e.mechanism)),o.extra={...o.extra,arguments:i},o)),Rne(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}N7(r,t),Cg(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function YL(t,e){const n=ZL(t,e),r={type:jre(e),value:Hre(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Ure(t,e,n,r){const i=Na(),s=i==null?void 0:i.getOptions().normalizeDepth,a=qre(e),o={__serialized__:K7(e,s)};if(a)return{exception:{values:[YL(t,a)]},extra:o};const l={exception:{values:[{type:zM(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:$re(e,{isUnhandledRejection:r})}]},extra:o};if(n){const c=ZL(t,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function a2(t,e){return{exception:{values:[YL(t,e)]}}}function ZL(t,e){const n=e.stacktrace||e.stack||"",r=Bre(e),i=zre(e);try{return t(n,r,i)}catch{}return[]}const Fre=/Minified React error #\d+;/i;function Bre(t){return t&&Fre.test(t.message)?1:0}function zre(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function fz(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function jre(t){const e=t==null?void 0:t.name;return!e&&fz(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function Hre(t){const e=t==null?void 0:t.message;return fz(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Vre(t,e,n,r){const i=(n==null?void 0:n.syntheticException)||void 0,s=JL(t,e,i,r);return Gy(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),Mg(s)}function Gre(t,e,n="info",r,i){const s=(r==null?void 0:r.syntheticException)||void 0,a=UO(t,e,s,i);return a.level=n,r!=null&&r.event_id&&(a.event_id=r.event_id),Mg(a)}function JL(t,e,n,r,i){let s;if(O7(e)&&e.error)return a2(t,e.error);if(iU(e)||Vee(e)){const a=e;if("stack"in e)s=a2(t,e);else{const o=a.name||(iU(a)?"DOMError":"DOMException"),l=a.message?`${o}: ${a.message}`:o;s=UO(t,l,n,r),RO(s,l)}return"code"in a&&(s.tags={...s.tags,"DOMException.code":`${a.code}`}),s}return jL(e)?a2(t,e):Hb(e)||zM(e)?(s=Ure(t,e,n,i),Gy(s,{synthetic:!0}),s):(s=UO(t,e,n,r),RO(s,`${e}`),Gy(s,{synthetic:!0}),s)}function UO(t,e,n,r){const i={};if(r&&n){const s=ZL(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]}),Gy(i,{synthetic:!0})}if(HL(e)){const{__sentry_template_string__:s,__sentry_template_values__:a}=e;return i.logentry={message:s,params:a},i}return i.message=e,i}function $re(t,{isUnhandledRejection:e}){const n=ete(t),r=e?"promise rejection":"exception";return O7(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:zM(t)?`Event \`${Wre(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Wre(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function qre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}const Xre=5e3;class Kre extends zne{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e},r=Oi.SENTRY_SDK_SOURCE||Nre();az(n,"browser",["browser"],r),super(n);const i=this,{sendDefaultPii:s,_experiments:a}=i._options,o=a==null?void 0:a.enableLogs;n.sendClientReports&&Oi.document&&Oi.document.addEventListener("visibilitychange",()=>{Oi.document.visibilityState==="hidden"&&(this._flushOutcomes(),o&&i2(i))}),o&&(i.on("flush",()=>{i2(i)}),i.on("afterCaptureLog",()=>{i._logFlushIdleTimeout&&clearTimeout(i._logFlushIdleTimeout),i._logFlushIdleTimeout=setTimeout(()=>{i2(i)},Xre)})),s&&(i.on("postprocessEvent",nre),i.on("beforeSendSession",rre))}eventFromException(e,n){return Vre(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return Gre(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,i){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,i)}}const Yre=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,so=br,Zre=1e3;let jU,FO,BO;function Jre(t){const e="dom";Yg(e,t),Zg(e,Qre)}function Qre(){if(!so.document)return;const t=gu.bind(null,"dom"),e=HU(t,!0);so.document.addEventListener("click",e,!1),so.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{var s,a;const i=(s=so[n])==null?void 0:s.prototype;(a=i==null?void 0:i.hasOwnProperty)!=null&&a.call(i,"addEventListener")&&(Bo(i,"addEventListener",function(o){return function(l,c,f){if(l==="click"||l=="keypress")try{const p=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},m=p[l]=p[l]||{refCount:0};if(!m.handler){const _=HU(t);m.handler=_,o.call(this,l,_,f)}m.refCount++}catch{}return o.call(this,l,c,f)}}),Bo(i,"removeEventListener",function(o){return function(l,c,f){if(l==="click"||l=="keypress")try{const p=this.__sentry_instrumentation_handlers__||{},m=p[l];m&&(m.refCount--,m.refCount<=0&&(o.call(this,l,m.handler,f),m.handler=void 0,delete p[l]),Object.keys(p).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,l,c,f)}}))})}function eie(t){if(t.type!==FO)return!1;try{if(!t.target||t.target._sentryId!==BO)return!1}catch{}return!0}function tie(t,e){return t!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function HU(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=nie(n);if(tie(n.type,r))return;Cg(n,"_sentryCaptured",!0),r&&!r._sentryId&&Cg(r,"_sentryId",Il());const i=n.type==="keypress"?"input":n.type;eie(n)||(t({event:n,name:i,global:e}),FO=n.type,BO=r?r._sentryId:void 0),clearTimeout(jU),jU=so.setTimeout(()=>{BO=void 0,FO=void 0},Zre)}}function nie(t){try{return t.target}catch{return null}}let qT;function hz(t){const e="history";Yg(e,t),Zg(e,rie)}function rie(){if(so.addEventListener("popstate",()=>{const e=so.location.href,n=qT;if(qT=e,n===e)return;gu("history",{from:n,to:e})}),!Are())return;function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const i=qT,s=String(r);if(qT=s,i===s)return e.apply(this,n);gu("history",{from:i,to:s})}return e.apply(this,n)}}Bo(so.history,"pushState",t),Bo(so.history,"replaceState",t)}const rC={};function iie(t){const e=rC[t];if(e)return e;let n=so[t];if(LO(n))return rC[t]=n.bind(so);const r=so.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s!=null&&s[t]&&(n=s[t]),r.head.removeChild(i)}catch(i){Yre&&fn.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n&&(rC[t]=n.bind(so))}function VU(t){rC[t]=void 0}const JS="__sentry_xhr_v3__";function sie(t){const e="xhr";Yg(e,t),Zg(e,aie)}function aie(){if(!so.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=new Error,s=Dd()*1e3,a=Nd(r[0])?r[0].toUpperCase():void 0,o=oie(r[1]);if(!a||!o)return e.apply(n,r);n[JS]={method:a,url:o,request_headers:{}},a==="POST"&&o.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[JS];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const f={endTimestamp:Dd()*1e3,startTimestamp:s,xhr:n,virtualError:i};gu("xhr",f)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,f,p){return l(),c.apply(f,p)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,f,p){const[m,_]=p,y=f[JS];return y&&Nd(m)&&Nd(_)&&(y.request_headers[m.toLowerCase()]=_),c.apply(f,p)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[JS];if(!i)return e.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const s={startTimestamp:Dd()*1e3,xhr:n};return gu("xhr",s),e.apply(n,r)}})}function oie(t){if(Nd(t))return t;try{return t.toString()}catch{}}function lie(t,e=iie("fetch")){let n=0,r=0;function i(s){const a=s.body.length;n+=a,r++;const o={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return VU("fetch"),HC("No fetch implementation available");try{return e(t.url,o).then(l=>(n-=a,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return VU("fetch"),n-=a,r--,HC(l)}}return tre(t,i)}const uie=30,cie=50;function zO(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?Rg:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const die=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,fie=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,hie=/\((\S*)(?::(\d+))(?::(\d+))\)/,pie=t=>{const e=die.exec(t);if(e){const[,r,i,s]=e;return zO(r,Rg,+i,+s)}const n=fie.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const a=hie.exec(n[2]);a&&(n[2]=a[1],n[3]=a[2],n[4]=a[3])}const[i,s]=pz(n[1]||Rg,n[2]);return zO(s,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},mie=[uie,pie],gie=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,_ie=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,vie=t=>{const e=gie.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=_ie.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||Rg;return[i,r]=pz(i,r),zO(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},yie=[cie,vie],Eie=[mie,yie],Sie=W7(...Eie),pz=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Rg,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Gb=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,XT=1024,bie="Breadcrumbs",wie=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:bie,setup(n){e.console&&Ere(Rie(n)),e.dom&&Jre(Cie(n,e.dom)),e.xhr&&sie(Mie(n)),e.fetch&&kre(Aie(n)),e.history&&hz(Iie(n)),e.sentry&&n.on("beforeSendEvent",xie(n))}}},Tie=wie;function xie(t){return function(n){Na()===t&&Ag({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Gm(n)},{event:n})}}function Cie(t,e){return function(r){if(Na()!==t)return;let i,s,a=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>XT&&(Gb&&fn.warn(`\`dom.maxStringLength\` cannot exceed ${XT}, but a value of ${o} was configured. Sentry will use ${XT} instead.`),o=XT),typeof a=="string"&&(a=[a]);try{const c=r.event,f=kie(c)?c.target:c;i=L7(f,{keyAttrs:a,maxStringLength:o}),s=Yee(f)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};s&&(l.data={"ui.component_name":s}),Ag(l,{event:r.event,name:r.name,global:r.global})}}function Rie(t){return function(n){if(Na()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:bre(n.level),message:sU(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${sU(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ag(r,{input:n.args,level:n.level})}}function Mie(t){return function(n){if(Na()!==t)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[JS];if(!r||!i||!s)return;const{method:a,url:o,status_code:l,body:c}=s,f={method:a,url:o,status_code:l},p={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i},m={category:"xhr",data:f,type:"http",level:uz(l)};t.emit("beforeOutgoingRequestBreadcrumb",m,p),Ag(m,p)}}function Aie(t){return function(n){if(Na()!==t)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const s=n.fetchData,a={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i},o={category:"fetch",data:s,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",o,a),Ag(o,a)}else{const s=n.response,a={...n.fetchData,status_code:s==null?void 0:s.status};n.fetchData.request_body_size,n.fetchData.response_body_size,s==null||s.status;const o={input:n.args,response:s,startTimestamp:r,endTimestamp:i},l={category:"fetch",data:a,type:"http",level:uz(a.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",l,o),Ag(l,o)}}}function Iie(t){return function(n){if(Na()!==t)return;let r=n.from,i=n.to;const s=s2(Oi.location.href);let a=r?s2(r):void 0;const o=s2(i);a!=null&&a.path||(a=s),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),Ag({category:"navigation",data:{from:r,to:i}})}}function kie(t){return!!t&&!!t.target}const Oie=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Pie="BrowserApiErrors",Lie=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Pie,setupOnce(){e.setTimeout&&Bo(Oi,"setTimeout",GU),e.setInterval&&Bo(Oi,"setInterval",GU),e.requestAnimationFrame&&Bo(Oi,"requestAnimationFrame",Die),e.XMLHttpRequest&&"XMLHttpRequest"in Oi&&Bo(XMLHttpRequest.prototype,"send",Uie);const n=e.eventTarget;n&&(Array.isArray(n)?n:Oie).forEach(Fie)}}},Nie=Lie;function GU(t){return function(...e){const n=e[0];return e[0]=qy(n,{mechanism:{data:{function:qh(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Die(t){return function(e){return t.apply(this,[qy(e,{mechanism:{data:{function:"requestAnimationFrame",handler:qh(t)},handled:!1,type:"instrument"}})])}}function Uie(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&Bo(n,i,function(s){const a={mechanism:{data:{function:i,handler:qh(s)},handled:!1,type:"instrument"}},o=WL(s);return o&&(a.mechanism.data.handler=qh(o)),qy(s,a)})}),t.apply(this,e)}}function Fie(t){var r,i;const n=(r=Oi[t])==null?void 0:r.prototype;(i=n==null?void 0:n.hasOwnProperty)!=null&&i.call(n,"addEventListener")&&(Bo(n,"addEventListener",function(s){return function(a,o,l){try{Bie(o)&&(o.handleEvent=qy(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:qh(o),target:t},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[a,qy(o,{mechanism:{data:{function:"addEventListener",handler:qh(o),target:t},handled:!1,type:"instrument"}}),l])}}),Bo(n,"removeEventListener",function(s){return function(a,o,l){try{const c=o.__sentry_wrapped__;c&&s.call(this,a,c,l)}catch{}return s.call(this,a,o,l)}}))}function Bie(t){return typeof t.handleEvent=="function"}const zie=()=>({name:"BrowserSession",setupOnce(){if(typeof Oi.document>"u"){Gb&&fn.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}CU({ignoreDuration:!0}),RU(),hz(({from:t,to:e})=>{t!==void 0&&t!==e&&(CU({ignoreDuration:!0}),RU())})}}),jie="GlobalHandlers",Hie=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:jie,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(Gie(n),$U("onerror")),e.onunhandledrejection&&($ie(n),$U("onunhandledrejection"))}}},Vie=Hie;function Gie(t){zte(e=>{const{stackParser:n,attachStacktrace:r}=mz();if(Na()!==t||dz())return;const{msg:i,url:s,line:a,column:o,error:l}=e,c=Xie(JL(n,l||i,void 0,r,!1),s,a,o);c.level="error",Z7(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function $ie(t){Hte(e=>{const{stackParser:n,attachStacktrace:r}=mz();if(Na()!==t||dz())return;const i=Wie(e),s=VL(i)?qie(i):JL(n,i,void 0,r,!0);s.level="error",Z7(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Wie(t){if(VL(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function qie(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Xie(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],a=s[0]=s[0]||{},o=a.stacktrace=a.stacktrace||{},l=o.frames=o.frames||[],c=r,f=n,p=Nd(e)&&e.length>0?e:$L();return l.length===0&&l.push({colno:c,filename:p,function:Rg,in_app:!0,lineno:f}),t}function $U(t){Gb&&fn.log(`Global Handler attached: ${t}`)}function mz(){const t=Na();return(t==null?void 0:t.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Kie=()=>({name:"HttpContext",preprocessEvent(t){var a,o;if(!Oi.navigator&&!Oi.location&&!Oi.document)return;const e=((a=t.request)==null?void 0:a.url)||$L(),{referrer:n}=Oi.document||{},{userAgent:r}=Oi.navigator||{},i={...(o=t.request)==null?void 0:o.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),Yie="cause",Zie=5,Jie="LinkedErrors",Qie=(t={})=>{const e=t.limit||Zie,n=t.key||Yie;return{name:Jie,preprocessEvent(r,i,s){const a=s.getOptions();yre(YL,a.stackParser,n,e,r,i)}}},ese=Qie;function tse(t){return[dre(),ore(),Nie(),Tie(),Vie(),ese(),xre(),Kie(),zie()]}function nse(t={}){var n;return{...{defaultIntegrations:tse(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=Oi.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...rse(t)}}function rse(t){const e={};for(const n of Object.getOwnPropertyNames(t)){const r=n;t[r]!==void 0&&(e[r]=t[r])}return e}function ise(){var l;const t=typeof Oi.window<"u"&&Oi;if(!t)return!1;const e=t.chrome?"chrome":"browser",n=t[e],r=(l=n==null?void 0:n.runtime)==null?void 0:l.id,i=$L()||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],a=!!r&&Oi===Oi.top&&s.some(c=>i.startsWith(`${c}//`)),o=typeof t.nw<"u";return!!r&&!a&&!o}function sse(t={}){const e=nse(t);if(!e.skipBrowserExtensionCheck&&ise()){Gb&&g0(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}Gb&&!cz()&&fn.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...e,stackParser:Fte(e.stackParser||Sie),integrations:Nne(e),transport:e.transport||lie};return Wne(Kre,n)}var P=G1();const Fe=Xg(P),WU=Bee({__proto__:null,default:Fe},[P]);function ase(t){const e={...t};return az(e,"react"),Mne("react",{version:P.version}),sse(e)}var QS={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var ose=QS.exports,qU;function lse(){return qU||(qU=1,function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",p=1,m=2,_=4,y=1,E=2,S=1,w=2,R=4,C=8,k=16,M=32,N=64,O=128,D=256,L=512,B=30,ee="...",te=800,ne=16,H=1,V=2,W=3,J=1/0,X=9007199254740991,ie=17976931348623157e292,pe=NaN,Z=4294967295,le=Z-1,ae=Z>>>1,Ee=[["ary",O],["bind",S],["bindKey",w],["curry",C],["curryRight",k],["flip",L],["partial",M],["partialRight",N],["rearg",D]],ke="[object Arguments]",$e="[object Array]",Le="[object AsyncFunction]",We="[object Boolean]",ot="[object Date]",Mt="[object DOMException]",Wt="[object Error]",ir="[object Function]",ue="[object GeneratorFunction]",vn="[object Map]",pn="[object Number]",Cn="[object Null]",ut="[object Object]",Qn="[object Promise]",Dt="[object Proxy]",Ie="[object RegExp]",Y="[object Set]",j="[object String]",_e="[object Symbol]",Ue="[object Undefined]",Be="[object WeakMap]",Oe="[object WeakSet]",Et="[object ArrayBuffer]",st="[object DataView]",yt="[object Float32Array]",Ut="[object Float64Array]",Qe="[object Int8Array]",gt="[object Int16Array]",cn="[object Int32Array]",Kt="[object Uint8Array]",wt="[object Uint8ClampedArray]",Yt="[object Uint16Array]",an="[object Uint32Array]",er=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,tt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,De=/&(?:amp|lt|gt|quot|#39);/g,ze=/[&<>"']/g,ht=RegExp(De.source),lt=RegExp(ze.source),Rn=/<%-([\s\S]+?)%>/g,wr=/<%([\s\S]+?)%>/g,oe=/<%=([\s\S]+?)%>/g,he=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ce=/^\w*$/,Ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/[\\^$.*+?()[\]{}|]/g,zt=RegExp(dt.source),Gt=/^\s+/,At=/\s/,Ft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mt=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,On=/[()=,{}\[\]\/\s]/,Tr=/\\(\\)?/g,Ar=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ir=/\w*$/,xr=/^[-+]0x[0-9a-f]+$/i,Wr=/^0b[01]+$/i,yo=/^\[object .+?Constructor\]$/,Ko=/^0o[0-7]+$/i,$=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Te=/($^)/,Me=/['\n\r\u2028\u2029\\]/g,ce="\\ud800-\\udfff",Xe="\\u0300-\\u036f",pt="\\ufe20-\\ufe2f",Ze="\\u20d0-\\u20ff",ct=Xe+pt+Ze,Zt="\\u2700-\\u27bf",$t="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="\\xac\\xb1\\xd7\\xf7",tn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",jn="\\u2000-\\u206f",Hn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tr="A-Z\\xc0-\\xd6\\xd8-\\xde",lr="\\ufe0e\\ufe0f",Xt=Tt+tn+jn+Hn,Qr="[']",Fa="["+ce+"]",Di="["+Xt+"]",zs="["+ct+"]",ss="\\d+",Bc="["+Zt+"]",ur="["+$t+"]",as="[^"+ce+Xt+ss+Zt+$t+tr+"]",Ui="\\ud83c[\\udffb-\\udfff]",qr="(?:"+zs+"|"+Ui+")",js="[^"+ce+"]",Fl="(?:\\ud83c[\\udde6-\\uddff]){2}",bn="[\\ud800-\\udbff][\\udc00-\\udfff]",zc="["+tr+"]",B0="\\u200d",h_="(?:"+ur+"|"+as+")",Cw="(?:"+zc+"|"+as+")",z0="(?:"+Qr+"(?:d|ll|m|re|s|t|ve))?",j0="(?:"+Qr+"(?:D|LL|M|RE|S|T|VE))?",p_=qr+"?",Cp="["+lr+"]?",Mu="(?:"+B0+"(?:"+[js,Fl,bn].join("|")+")"+Cp+p_+")*",Au="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Iu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hf=Cp+p_+Mu,Rp="(?:"+[Bc,Fl,bn].join("|")+")"+hf,ku="(?:"+[js+zs+"?",zs,Fl,bn,Fa].join("|")+")",rI=RegExp(Qr,"g"),Rw=RegExp(zs,"g"),jc=RegExp(Ui+"(?="+Ui+")|"+ku+hf,"g"),iI=RegExp([zc+"?"+ur+"+"+z0+"(?="+[Di,zc,"$"].join("|")+")",Cw+"+"+j0+"(?="+[Di,zc+h_,"$"].join("|")+")",zc+"?"+h_+"+"+z0,zc+"+"+j0,Iu,Au,ss,Rp].join("|"),"g"),Mw=RegExp("["+B0+ce+ct+lr+"]"),m_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Aw=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sI=-1,cr={};cr[yt]=cr[Ut]=cr[Qe]=cr[gt]=cr[cn]=cr[Kt]=cr[wt]=cr[Yt]=cr[an]=!0,cr[ke]=cr[$e]=cr[Et]=cr[We]=cr[st]=cr[ot]=cr[Wt]=cr[ir]=cr[vn]=cr[pn]=cr[ut]=cr[Ie]=cr[Y]=cr[j]=cr[Be]=!1;var sr={};sr[ke]=sr[$e]=sr[Et]=sr[st]=sr[We]=sr[ot]=sr[yt]=sr[Ut]=sr[Qe]=sr[gt]=sr[cn]=sr[vn]=sr[pn]=sr[ut]=sr[Ie]=sr[Y]=sr[j]=sr[_e]=sr[Kt]=sr[wt]=sr[Yt]=sr[an]=!0,sr[Wt]=sr[ir]=sr[Be]=!1;var pf={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},g_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},aI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},oI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},H0=parseFloat,__=parseInt,v_=typeof sy=="object"&&sy&&sy.Object===Object&&sy,Iw=typeof self=="object"&&self&&self.Object===Object&&self,Vr=v_||Iw||Function("return this")(),Mp=e&&!e.nodeType&&e,Yo=Mp&&!0&&t&&!t.nodeType&&t,V0=Yo&&Yo.exports===Mp,mf=V0&&v_.process,ws=function(){try{var ye=Yo&&Yo.require&&Yo.require("util").types;return ye||mf&&mf.binding&&mf.binding("util")}catch{}}(),G0=ws&&ws.isArrayBuffer,Hs=ws&&ws.isDate,Hc=ws&&ws.isMap,y_=ws&&ws.isRegExp,gf=ws&&ws.isSet,kw=ws&&ws.isTypedArray;function Ts(ye,Ne,Re){switch(Re.length){case 0:return ye.call(Ne);case 1:return ye.call(Ne,Re[0]);case 2:return ye.call(Ne,Re[0],Re[1]);case 3:return ye.call(Ne,Re[0],Re[1],Re[2])}return ye.apply(Ne,Re)}function $0(ye,Ne,Re,St){for(var dn=-1,Xn=ye==null?0:ye.length;++dn<Xn;){var hi=ye[dn];Ne(St,hi,Re(hi),ye)}return St}function os(ye,Ne){for(var Re=-1,St=ye==null?0:ye.length;++Re<St&&Ne(ye[Re],Re,ye)!==!1;);return ye}function E_(ye,Ne){for(var Re=ye==null?0:ye.length;Re--&&Ne(ye[Re],Re,ye)!==!1;);return ye}function W0(ye,Ne){for(var Re=-1,St=ye==null?0:ye.length;++Re<St;)if(!Ne(ye[Re],Re,ye))return!1;return!0}function Ou(ye,Ne){for(var Re=-1,St=ye==null?0:ye.length,dn=0,Xn=[];++Re<St;){var hi=ye[Re];Ne(hi,Re,ye)&&(Xn[dn++]=hi)}return Xn}function S_(ye,Ne){var Re=ye==null?0:ye.length;return!!Re&&_f(ye,Ne,0)>-1}function q0(ye,Ne,Re){for(var St=-1,dn=ye==null?0:ye.length;++St<dn;)if(Re(Ne,ye[St]))return!0;return!1}function kr(ye,Ne){for(var Re=-1,St=ye==null?0:ye.length,dn=Array(St);++Re<St;)dn[Re]=Ne(ye[Re],Re,ye);return dn}function Pu(ye,Ne){for(var Re=-1,St=Ne.length,dn=ye.length;++Re<St;)ye[dn+Re]=Ne[Re];return ye}function X0(ye,Ne,Re,St){var dn=-1,Xn=ye==null?0:ye.length;for(St&&Xn&&(Re=ye[++dn]);++dn<Xn;)Re=Ne(Re,ye[dn],dn,ye);return Re}function lI(ye,Ne,Re,St){var dn=ye==null?0:ye.length;for(St&&dn&&(Re=ye[--dn]);dn--;)Re=Ne(Re,ye[dn],dn,ye);return Re}function K0(ye,Ne){for(var Re=-1,St=ye==null?0:ye.length;++Re<St;)if(Ne(ye[Re],Re,ye))return!0;return!1}var uI=Z0("length");function Ow(ye){return ye.split("")}function cI(ye){return ye.match(qt)||[]}function Pw(ye,Ne,Re){var St;return Re(ye,function(dn,Xn,hi){if(Ne(dn,Xn,hi))return St=Xn,!1}),St}function b_(ye,Ne,Re,St){for(var dn=ye.length,Xn=Re+(St?1:-1);St?Xn--:++Xn<dn;)if(Ne(ye[Xn],Xn,ye))return Xn;return-1}function _f(ye,Ne,Re){return Ne===Ne?x_(ye,Ne,Re):b_(ye,Lw,Re)}function Y0(ye,Ne,Re,St){for(var dn=Re-1,Xn=ye.length;++dn<Xn;)if(St(ye[dn],Ne))return dn;return-1}function Lw(ye){return ye!==ye}function Nw(ye,Ne){var Re=ye==null?0:ye.length;return Re?J0(ye,Ne)/Re:pe}function Z0(ye){return function(Ne){return Ne==null?n:Ne[ye]}}function w_(ye){return function(Ne){return ye==null?n:ye[Ne]}}function Dw(ye,Ne,Re,St,dn){return dn(ye,function(Xn,hi,pr){Re=St?(St=!1,Xn):Ne(Re,Xn,hi,pr)}),Re}function dI(ye,Ne){var Re=ye.length;for(ye.sort(Ne);Re--;)ye[Re]=ye[Re].value;return ye}function J0(ye,Ne){for(var Re,St=-1,dn=ye.length;++St<dn;){var Xn=Ne(ye[St]);Xn!==n&&(Re=Re===n?Xn:Re+Xn)}return Re}function Q0(ye,Ne){for(var Re=-1,St=Array(ye);++Re<ye;)St[Re]=Ne(Re);return St}function fI(ye,Ne){return kr(Ne,function(Re){return[Re,ye[Re]]})}function Uw(ye){return ye&&ye.slice(0,C_(ye)+1).replace(Gt,"")}function fa(ye){return function(Ne){return ye(Ne)}}function Ap(ye,Ne){return kr(Ne,function(Re){return ye[Re]})}function Bl(ye,Ne){return ye.has(Ne)}function Fw(ye,Ne){for(var Re=-1,St=ye.length;++Re<St&&_f(Ne,ye[Re],0)>-1;);return Re}function eE(ye,Ne){for(var Re=ye.length;Re--&&_f(Ne,ye[Re],0)>-1;);return Re}function Bw(ye,Ne){for(var Re=ye.length,St=0;Re--;)ye[Re]===Ne&&++St;return St}var zw=w_(pf),jw=w_(g_);function Hw(ye){return"\\"+oI[ye]}function vf(ye,Ne){return ye==null?n:ye[Ne]}function yf(ye){return Mw.test(ye)}function hI(ye){return m_.test(ye)}function pI(ye){for(var Ne,Re=[];!(Ne=ye.next()).done;)Re.push(Ne.value);return Re}function T_(ye){var Ne=-1,Re=Array(ye.size);return ye.forEach(function(St,dn){Re[++Ne]=[dn,St]}),Re}function tE(ye,Ne){return function(Re){return ye(Ne(Re))}}function Ba(ye,Ne){for(var Re=-1,St=ye.length,dn=0,Xn=[];++Re<St;){var hi=ye[Re];(hi===Ne||hi===f)&&(ye[Re]=f,Xn[dn++]=Re)}return Xn}function Lu(ye){var Ne=-1,Re=Array(ye.size);return ye.forEach(function(St){Re[++Ne]=St}),Re}function mI(ye){var Ne=-1,Re=Array(ye.size);return ye.forEach(function(St){Re[++Ne]=[St,St]}),Re}function x_(ye,Ne,Re){for(var St=Re-1,dn=ye.length;++St<dn;)if(ye[St]===Ne)return St;return-1}function gI(ye,Ne,Re){for(var St=Re+1;St--;)if(ye[St]===Ne)return St;return St}function Vc(ye){return yf(ye)?Gw(ye):uI(ye)}function ha(ye){return yf(ye)?$w(ye):Ow(ye)}function C_(ye){for(var Ne=ye.length;Ne--&&At.test(ye.charAt(Ne)););return Ne}var Vw=w_(aI);function Gw(ye){for(var Ne=jc.lastIndex=0;jc.test(ye);)++Ne;return Ne}function $w(ye){return ye.match(jc)||[]}function _I(ye){return ye.match(iI)||[]}var vI=function ye(Ne){Ne=Ne==null?Vr:Ef.defaults(Vr.Object(),Ne,Ef.pick(Vr,Aw));var Re=Ne.Array,St=Ne.Date,dn=Ne.Error,Xn=Ne.Function,hi=Ne.Math,pr=Ne.Object,Ip=Ne.RegExp,yI=Ne.String,za=Ne.TypeError,zl=Re.prototype,nE=Xn.prototype,Zo=pr.prototype,Sf=Ne["__core-js_shared__"],kp=nE.toString,Kn=Zo.hasOwnProperty,bf=0,R_=function(){var h=/[^.]+$/.exec(Sf&&Sf.keys&&Sf.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Op=Zo.toString,M_=kp.call(pr),Ww=Vr._,qw=Ip("^"+kp.call(Kn).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pp=V0?Ne.Buffer:n,jl=Ne.Symbol,Lp=Ne.Uint8Array,rE=Pp?Pp.allocUnsafe:n,Eo=tE(pr.getPrototypeOf,pr),A_=pr.create,I_=Zo.propertyIsEnumerable,k_=zl.splice,Xw=jl?jl.isConcatSpreadable:n,Hl=jl?jl.iterator:n,Gc=jl?jl.toStringTag:n,Np=function(){try{var h=$u(pr,"defineProperty");return h({},"",{}),h}catch{}}(),Kw=Ne.clearTimeout!==Vr.clearTimeout&&Ne.clearTimeout,Nr=St&&St.now!==Vr.Date.now&&St.now,iE=Ne.setTimeout!==Vr.setTimeout&&Ne.setTimeout,$c=hi.ceil,Nu=hi.floor,O_=pr.getOwnPropertySymbols,sE=Pp?Pp.isBuffer:n,wf=Ne.isFinite,P_=zl.join,Tf=tE(pr.keys,pr),pi=hi.max,ls=hi.min,EI=St.now,Yw=Ne.parseInt,Dp=hi.random,L_=zl.reverse,Up=$u(Ne,"DataView"),Wc=$u(Ne,"Map"),Fp=$u(Ne,"Promise"),Du=$u(Ne,"Set"),Bp=$u(Ne,"WeakMap"),xf=$u(pr,"create"),N_=Bp&&new Bp,Cf={},aE=Wu(Up),Uu=Wu(Wc),Zw=Wu(Fp),Rf=Wu(Du),Jo=Wu(Bp),Fu=jl?jl.prototype:n,pa=Fu?Fu.valueOf:n,D_=Fu?Fu.toString:n;function G(h){if(gi(h)&&!gn(h)&&!(h instanceof mn)){if(h instanceof us)return h;if(Kn.call(h,"__wrapped__"))return xT(h)}return new us(h)}var Mf=function(){function h(){}return function(g){if(!si(g))return{};if(A_)return A_(g);h.prototype=g;var T=new h;return h.prototype=n,T}}();function Qo(){}function us(h,g){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=n}G.templateSettings={escape:Rn,evaluate:wr,interpolate:oe,variable:"",imports:{_:G}},G.prototype=Qo.prototype,G.prototype.constructor=G,us.prototype=Mf(Qo.prototype),us.prototype.constructor=us;function mn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function U_(){var h=new mn(this.__wrapped__);return h.__actions__=Cs(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=Cs(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=Cs(this.__views__),h}function oE(){if(this.__filtered__){var h=new mn(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Af(){var h=this.__wrapped__.value(),g=this.__dir__,T=gn(h),I=g<0,F=T?h.length:0,K=NE(0,F,this.__views__),se=K.start,fe=K.end,Se=fe-se,je=I?fe:se-1,He=this.__iteratees__,Ye=He.length,_t=0,Ht=ls(Se,this.__takeCount__);if(!T||!I&&F==Se&&Ht==Se)return Uf(h,this.__actions__);var rn=[];e:for(;Se--&&_t<Ht;){je+=g;for(var Mn=-1,sn=h[je];++Mn<Ye;){var Nn=He[Mn],Gn=Nn.iteratee,Io=Nn.type,ya=Gn(sn);if(Io==V)sn=ya;else if(!ya){if(Io==H)continue e;break e}}rn[_t++]=sn}return rn}mn.prototype=Mf(Qo.prototype),mn.prototype.constructor=mn;function Vs(h){var g=-1,T=h==null?0:h.length;for(this.clear();++g<T;){var I=h[g];this.set(I[0],I[1])}}function Dr(){this.__data__=xf?xf(null):{},this.size=0}function Or(h){var g=this.has(h)&&delete this.__data__[h];return this.size-=g?1:0,g}function Bu(h){var g=this.__data__;if(xf){var T=g[h];return T===l?n:T}return Kn.call(g,h)?g[h]:n}function cs(h){var g=this.__data__;return xf?g[h]!==n:Kn.call(g,h)}function Gs(h,g){var T=this.__data__;return this.size+=this.has(h)?0:1,T[h]=xf&&g===n?l:g,this}Vs.prototype.clear=Dr,Vs.prototype.delete=Or,Vs.prototype.get=Bu,Vs.prototype.has=cs,Vs.prototype.set=Gs;function xs(h){var g=-1,T=h==null?0:h.length;for(this.clear();++g<T;){var I=h[g];this.set(I[0],I[1])}}function If(){this.__data__=[],this.size=0}function $s(h){var g=this.__data__,T=fs(g,h);if(T<0)return!1;var I=g.length-1;return T==I?g.pop():k_.call(g,T,1),--this.size,!0}function F_(h){var g=this.__data__,T=fs(g,h);return T<0?n:g[T][1]}function Jw(h){return fs(this.__data__,h)>-1}function Qw(h,g){var T=this.__data__,I=fs(T,h);return I<0?(++this.size,T.push([h,g])):T[I][1]=g,this}xs.prototype.clear=If,xs.prototype.delete=$s,xs.prototype.get=F_,xs.prototype.has=Jw,xs.prototype.set=Qw;function ja(h){var g=-1,T=h==null?0:h.length;for(this.clear();++g<T;){var I=h[g];this.set(I[0],I[1])}}function eT(){this.size=0,this.__data__={hash:new Vs,map:new(Wc||xs),string:new Vs}}function Vl(h){var g=tm(this,h).delete(h);return this.size-=g?1:0,g}function B_(h){return tm(this,h).get(h)}function lE(h){return tm(this,h).has(h)}function tT(h,g){var T=tm(this,h),I=T.size;return T.set(h,g),this.size+=T.size==I?0:1,this}ja.prototype.clear=eT,ja.prototype.delete=Vl,ja.prototype.get=B_,ja.prototype.has=lE,ja.prototype.set=tT;function qc(h){var g=-1,T=h==null?0:h.length;for(this.__data__=new ja;++g<T;)this.add(h[g])}function zu(h){return this.__data__.set(h,l),this}function kf(h){return this.__data__.has(h)}qc.prototype.add=qc.prototype.push=zu,qc.prototype.has=kf;function ds(h){var g=this.__data__=new xs(h);this.size=g.size}function z_(){this.__data__=new xs,this.size=0}function j_(h){var g=this.__data__,T=g.delete(h);return this.size=g.size,T}function Ha(h){return this.__data__.get(h)}function Va(h){return this.__data__.has(h)}function Xc(h,g){var T=this.__data__;if(T instanceof xs){var I=T.__data__;if(!Wc||I.length<i-1)return I.push([h,g]),this.size=++T.size,this;T=this.__data__=new ja(I)}return T.set(h,g),this.size=T.size,this}ds.prototype.clear=z_,ds.prototype.delete=j_,ds.prototype.get=Ha,ds.prototype.has=Va,ds.prototype.set=Xc;function el(h,g){var T=gn(h),I=!T&&hm(h),F=!T&&!I&&qf(h),K=!T&&!I&&!F&&Ov(h),se=T||I||F||K,fe=se?Q0(h.length,yI):[],Se=fe.length;for(var je in h)(g||Kn.call(h,je))&&!(se&&(je=="length"||F&&(je=="offset"||je=="parent")||K&&(je=="buffer"||je=="byteLength"||je=="byteOffset")||$r(je,Se)))&&fe.push(je);return fe}function tl(h){var g=h.length;return g?h[Nf(0,g-1)]:n}function Kc(h,g){return hv(Cs(h),Gl(g,0,h.length))}function nT(h){return hv(Cs(h))}function zp(h,g,T){(T!==n&&!eu(h[g],T)||T===n&&!(g in h))&&nl(h,g,T)}function Yc(h,g,T){var I=h[g];(!(Kn.call(h,g)&&eu(I,T))||T===n&&!(g in h))&&nl(h,g,T)}function fs(h,g){for(var T=h.length;T--;)if(eu(h[T][0],g))return T;return-1}function ma(h,g,T,I){return il(h,function(F,K,se){g(I,F,T(F),se)}),I}function Ur(h,g){return h&&bo(g,ms(g),h)}function So(h,g){return h&&bo(g,Ja(g),h)}function nl(h,g,T){g=="__proto__"&&Np?Np(h,g,{configurable:!0,enumerable:!0,value:T,writable:!0}):h[g]=T}function H_(h,g){for(var T=-1,I=g.length,F=Re(I),K=h==null;++T<I;)F[T]=K?n:HI(h,g[T]);return F}function Gl(h,g,T){return h===h&&(T!==n&&(h=h<=T?h:T),g!==n&&(h=h>=g?h:g)),h}function Ws(h,g,T,I,F,K){var se,fe=g&p,Se=g&m,je=g&_;if(T&&(se=F?T(h,I,F,K):T(h)),se!==n)return se;if(!si(h))return h;var He=gn(h);if(He){if(se=rm(h),!fe)return Cs(h,se)}else{var Ye=Wi(h),_t=Ye==ir||Ye==ue;if(qf(h))return wE(h,fe);if(Ye==ut||Ye==ke||_t&&!F){if(se=Se||_t?{}:qi(h),!fe)return Se?bI(h,So(se,h)):tv(h,Ur(se,h))}else{if(!sr[Ye])return F?h:{};se=wI(h,Ye,fe)}}K||(K=new ds);var Ht=K.get(h);if(Ht)return Ht;K.set(h,se),F3(h)?h.forEach(function(sn){se.add(Ws(sn,g,T,sn,h,K))}):D3(h)&&h.forEach(function(sn,Nn){se.set(Nn,Ws(sn,g,T,Nn,h,K))});var rn=je?Se?em:Qp:Se?Ja:ms,Mn=He?n:rn(h);return os(Mn||h,function(sn,Nn){Mn&&(Nn=sn,sn=h[Nn]),Yc(se,Nn,Ws(sn,g,T,Nn,h,K))}),se}function rT(h){var g=ms(h);return function(T){return jp(T,h,g)}}function jp(h,g,T){var I=T.length;if(h==null)return!I;for(h=pr(h);I--;){var F=T[I],K=g[F],se=h[F];if(se===n&&!(F in h)||!K(se))return!1}return!0}function uE(h,g,T){if(typeof h!="function")throw new za(a);return Gf(function(){h.apply(n,T)},g)}function rl(h,g,T,I){var F=-1,K=S_,se=!0,fe=h.length,Se=[],je=g.length;if(!fe)return Se;T&&(g=kr(g,fa(T))),I?(K=q0,se=!1):g.length>=i&&(K=Bl,se=!1,g=new qc(g));e:for(;++F<fe;){var He=h[F],Ye=T==null?He:T(He);if(He=I||He!==0?He:0,se&&Ye===Ye){for(var _t=je;_t--;)if(g[_t]===Ye)continue e;Se.push(He)}else K(g,Ye,I)||Se.push(He)}return Se}var il=Xa(ga),iT=Xa(ju,!0);function Hp(h,g){var T=!0;return il(h,function(I,F,K){return T=!!g(I,F,K),T}),T}function Zc(h,g,T){for(var I=-1,F=h.length;++I<F;){var K=h[I],se=g(K);if(se!=null&&(fe===n?se===se&&!Ao(se):T(se,fe)))var fe=se,Se=K}return Se}function sT(h,g,T,I){var F=h.length;for(T=Tn(T),T<0&&(T=-T>F?0:F+T),I=I===n||I>F?F:Tn(I),I<0&&(I+=F),I=T>I?0:z3(I);T<I;)h[T++]=g;return h}function cE(h,g){var T=[];return il(h,function(I,F,K){g(I,F,K)&&T.push(I)}),T}function ei(h,g,T,I,F){var K=-1,se=h.length;for(T||(T=cv),F||(F=[]);++K<se;){var fe=h[K];g>0&&T(fe)?g>1?ei(fe,g-1,T,I,F):Pu(F,fe):I||(F[F.length]=fe)}return F}var V_=rv(),Vp=rv(!0);function ga(h,g){return h&&V_(h,g,ms)}function ju(h,g){return h&&Vp(h,g,ms)}function Of(h,g){return Ou(g,function(T){return ud(h[T])})}function $l(h,g){g=ol(g,h);for(var T=0,I=g.length;h!=null&&T<I;)h=h[Co(g[T++])];return T&&T==I?h:n}function G_(h,g,T){var I=g(h);return gn(h)?I:Pu(I,T(h))}function Gi(h){return h==null?h===n?Ue:Cn:Gc&&Gc in pr(h)?uv(h):UE(h)}function Hu(h,g){return h>g}function Ga(h,g){return h!=null&&Kn.call(h,g)}function Jc(h,g){return h!=null&&g in pr(h)}function dE(h,g,T){return h>=ls(g,T)&&h<pi(g,T)}function $_(h,g,T){for(var I=T?q0:S_,F=h[0].length,K=h.length,se=K,fe=Re(K),Se=1/0,je=[];se--;){var He=h[se];se&&g&&(He=kr(He,fa(g))),Se=ls(He.length,Se),fe[se]=!T&&(g||F>=120&&He.length>=120)?new qc(se&&He):n}He=h[0];var Ye=-1,_t=fe[0];e:for(;++Ye<F&&je.length<Se;){var Ht=He[Ye],rn=g?g(Ht):Ht;if(Ht=T||Ht!==0?Ht:0,!(_t?Bl(_t,rn):I(je,rn,T))){for(se=K;--se;){var Mn=fe[se];if(!(Mn?Bl(Mn,rn):I(h[se],rn,T)))continue e}_t&&_t.push(rn),je.push(Ht)}}return je}function Wl(h,g,T,I){return ga(h,function(F,K,se){g(I,T(F),K,se)}),I}function $a(h,g,T){g=ol(g,h),h=Fi(h,g);var I=h==null?h:h[Co(As(g))];return I==null?n:Ts(I,h,T)}function W_(h){return gi(h)&&Gi(h)==ke}function aT(h){return gi(h)&&Gi(h)==Et}function ql(h){return gi(h)&&Gi(h)==ot}function Wa(h,g,T,I,F){return h===g?!0:h==null||g==null||!gi(h)&&!gi(g)?h!==h&&g!==g:q_(h,g,T,I,Wa,F)}function q_(h,g,T,I,F,K){var se=gn(h),fe=gn(g),Se=se?$e:Wi(h),je=fe?$e:Wi(g);Se=Se==ke?ut:Se,je=je==ke?ut:je;var He=Se==ut,Ye=je==ut,_t=Se==je;if(_t&&qf(h)){if(!qf(g))return!1;se=!0,He=!1}if(_t&&!He)return K||(K=new ds),se||Ov(h)?PE(h,g,T,I,F,K):LE(h,g,Se,T,I,F,K);if(!(T&y)){var Ht=He&&Kn.call(h,"__wrapped__"),rn=Ye&&Kn.call(g,"__wrapped__");if(Ht||rn){var Mn=Ht?h.value():h,sn=rn?g.value():g;return K||(K=new ds),F(Mn,sn,T,I,K)}}return _t?(K||(K=new ds),_T(h,g,T,I,F,K)):!1}function oT(h){return gi(h)&&Wi(h)==vn}function Pf(h,g,T,I){var F=T.length,K=F,se=!I;if(h==null)return!K;for(h=pr(h);F--;){var fe=T[F];if(se&&fe[2]?fe[1]!==h[fe[0]]:!(fe[0]in h))return!1}for(;++F<K;){fe=T[F];var Se=fe[0],je=h[Se],He=fe[1];if(se&&fe[2]){if(je===n&&!(Se in h))return!1}else{var Ye=new ds;if(I)var _t=I(je,He,Se,h,g,Ye);if(!(_t===n?Wa(He,je,y|E,I,Ye):_t))return!1}}return!0}function fE(h){if(!si(h)||ET(h))return!1;var g=ud(h)?qw:yo;return g.test(Wu(h))}function Gp(h){return gi(h)&&Gi(h)==Ie}function sl(h){return gi(h)&&Wi(h)==Y}function $p(h){return gi(h)&&BT(h.length)&&!!cr[Gi(h)]}function Lf(h){return typeof h=="function"?h:h==null?Qa:typeof h=="object"?gn(h)?Gr(h[0],h[1]):X_(h):Z3(h)}function Xl(h){if(!Jl(h))return Tf(h);var g=[];for(var T in pr(h))Kn.call(h,T)&&T!="constructor"&&g.push(T);return g}function hE(h){if(!si(h))return wT(h);var g=Jl(h),T=[];for(var I in h)I=="constructor"&&(g||!Kn.call(h,I))||T.push(I);return T}function Vu(h,g){return h<g}function pE(h,g){var T=-1,I=Za(h)?Re(h.length):[];return il(h,function(F,K,se){I[++T]=g(F,K,se)}),I}function X_(h){var g=nm(h);return g.length==1&&g[0][2]?dv(g[0][0],g[0][1]):function(T){return T===h||Pf(T,h,g)}}function Gr(h,g){return Ct(h)&&sm(g)?dv(Co(h),g):function(T){var I=HI(T,h);return I===n&&I===g?VI(T,h):Wa(g,I,y|E)}}function Qc(h,g,T,I,F){h!==g&&V_(g,function(K,se){if(F||(F=new ds),si(K))mE(h,g,se,T,Qc,I,F);else{var fe=I?I(cl(h,se),K,se+"",h,g,F):n;fe===n&&(fe=K),zp(h,se,fe)}},Ja)}function mE(h,g,T,I,F,K,se){var fe=cl(h,T),Se=cl(g,T),je=se.get(Se);if(je){zp(h,T,je);return}var He=K?K(fe,Se,T+"",h,g,se):n,Ye=He===n;if(Ye){var _t=gn(Se),Ht=!_t&&qf(Se),rn=!_t&&!Ht&&Ov(Se);He=Se,_t||Ht||rn?gn(fe)?He=fe:wi(fe)?He=Cs(fe):Ht?(Ye=!1,He=wE(Se,!0)):rn?(Ye=!1,He=fT(Se,!0)):He=[]:tS(Se)||hm(Se)?(He=fe,hm(fe)?He=j3(fe):(!si(fe)||ud(fe))&&(He=qi(Se))):Ye=!1}Ye&&(se.set(Se,He),F(He,Se,I,K,se),se.delete(Se)),zp(h,T,He)}function K_(h,g){var T=h.length;if(T)return g+=g<0?T:0,$r(g,T)?h[g]:n}function Wp(h,g,T){g.length?g=kr(g,function(K){return gn(K)?function(se){return $l(se,K.length===1?K[0]:K)}:K}):g=[Qa];var I=-1;g=kr(g,fa(en()));var F=pE(h,function(K,se,fe){var Se=kr(g,function(je){return je(K)});return{criteria:Se,index:++I,value:K}});return dI(F,function(K,se){return SI(K,se,T)})}function gE(h,g){return Gu(h,g,function(T,I){return VI(h,I)})}function Gu(h,g,T){for(var I=-1,F=g.length,K={};++I<F;){var se=g[I],fe=$l(h,se);T(fe,se)&&td(K,ol(se,h),fe)}return K}function Xr(h){return function(g){return $l(g,h)}}function ii(h,g,T,I){var F=I?Y0:_f,K=-1,se=g.length,fe=h;for(h===g&&(g=Cs(g)),T&&(fe=kr(h,fa(T)));++K<se;)for(var Se=0,je=g[K],He=T?T(je):je;(Se=F(fe,He,Se,I))>-1;)fe!==h&&k_.call(fe,Se,1),k_.call(h,Se,1);return h}function Ei(h,g){for(var T=h?g.length:0,I=T-1;T--;){var F=g[T];if(T==I||F!==K){var K=F;$r(F)?k_.call(h,F,1):J_(h,F)}}return h}function Nf(h,g){return h+Nu(Dp()*(g-h+1))}function qp(h,g,T,I){for(var F=-1,K=pi($c((g-h)/(T||1)),0),se=Re(K);K--;)se[I?K:++F]=h,h+=T;return se}function ed(h,g){var T="";if(!h||g<1||g>X)return T;do g%2&&(T+=h),g=Nu(g/2),g&&(h+=h);while(g);return T}function wn(h,g){return _a(fv(h,g,Qa),h+"")}function hs(h){return tl(Pv(h))}function _E(h,g){var T=Pv(h);return hv(T,Gl(g,0,T.length))}function td(h,g,T,I){if(!si(h))return h;g=ol(g,h);for(var F=-1,K=g.length,se=K-1,fe=h;fe!=null&&++F<K;){var Se=Co(g[F]),je=T;if(Se==="__proto__"||Se==="constructor"||Se==="prototype")return h;if(F!=se){var He=fe[Se];je=I?I(He,Se,fe):n,je===n&&(je=si(He)?He:$r(g[F+1])?[]:{})}Yc(fe,Se,je),fe=fe[Se]}return h}var Y_=N_?function(h,g){return N_.set(h,g),h}:Qa,al=Np?function(h,g){return Np(h,"toString",{configurable:!0,enumerable:!1,value:$I(g),writable:!0})}:Qa;function qa(h){return hv(Pv(h))}function ps(h,g,T){var I=-1,F=h.length;g<0&&(g=-g>F?0:F+g),T=T>F?F:T,T<0&&(T+=F),F=g>T?0:T-g>>>0,g>>>=0;for(var K=Re(F);++I<F;)K[I]=h[I+g];return K}function vE(h,g){var T;return il(h,function(I,F,K){return T=g(I,F,K),!T}),!!T}function Df(h,g,T){var I=0,F=h==null?I:h.length;if(typeof g=="number"&&g===g&&F<=ae){for(;I<F;){var K=I+F>>>1,se=h[K];se!==null&&!Ao(se)&&(T?se<=g:se<g)?I=K+1:F=K}return F}return Z_(h,g,Qa,T)}function Z_(h,g,T,I){var F=0,K=h==null?0:h.length;if(K===0)return 0;g=T(g);for(var se=g!==g,fe=g===null,Se=Ao(g),je=g===n;F<K;){var He=Nu((F+K)/2),Ye=T(h[He]),_t=Ye!==n,Ht=Ye===null,rn=Ye===Ye,Mn=Ao(Ye);if(se)var sn=I||rn;else je?sn=rn&&(I||_t):fe?sn=rn&&_t&&(I||!Ht):Se?sn=rn&&_t&&!Ht&&(I||!Mn):Ht||Mn?sn=!1:sn=I?Ye<=g:Ye<g;sn?F=He+1:K=He}return ls(K,le)}function yE(h,g){for(var T=-1,I=h.length,F=0,K=[];++T<I;){var se=h[T],fe=g?g(se):se;if(!T||!eu(fe,Se)){var Se=fe;K[F++]=se===0?0:se}}return K}function EE(h){return typeof h=="number"?h:Ao(h)?pe:+h}function qs(h){if(typeof h=="string")return h;if(gn(h))return kr(h,qs)+"";if(Ao(h))return D_?D_.call(h):"";var g=h+"";return g=="0"&&1/h==-1/0?"-0":g}function Kl(h,g,T){var I=-1,F=S_,K=h.length,se=!0,fe=[],Se=fe;if(T)se=!1,F=q0;else if(K>=i){var je=g?null:gT(h);if(je)return Lu(je);se=!1,F=Bl,Se=new qc}else Se=g?[]:fe;e:for(;++I<K;){var He=h[I],Ye=g?g(He):He;if(He=T||He!==0?He:0,se&&Ye===Ye){for(var _t=Se.length;_t--;)if(Se[_t]===Ye)continue e;g&&Se.push(Ye),fe.push(He)}else F(Se,Ye,T)||(Se!==fe&&Se.push(Ye),fe.push(He))}return fe}function J_(h,g){return g=ol(g,h),h=Fi(h,g),h==null||delete h[Co(As(g))]}function SE(h,g,T,I){return td(h,g,T($l(h,g)),I)}function Xp(h,g,T,I){for(var F=h.length,K=I?F:-1;(I?K--:++K<F)&&g(h[K],K,h););return T?ps(h,I?0:K,I?K+1:F):ps(h,I?K+1:0,I?F:K)}function Uf(h,g){var T=h;return T instanceof mn&&(T=T.value()),X0(g,function(I,F){return F.func.apply(F.thisArg,Pu([I],F.args))},T)}function Q_(h,g,T){var I=h.length;if(I<2)return I?Kl(h[0]):[];for(var F=-1,K=Re(I);++F<I;)for(var se=h[F],fe=-1;++fe<I;)fe!=F&&(K[F]=rl(K[F]||se,h[fe],g,T));return Kl(ei(K,1),g,T)}function Kp(h,g,T){for(var I=-1,F=h.length,K=g.length,se={};++I<F;){var fe=I<K?g[I]:n;T(se,h[I],fe)}return se}function Ff(h){return wi(h)?h:[]}function ev(h){return typeof h=="function"?h:Qa}function ol(h,g){return gn(h)?h:Ct(h,g)?[h]:zE(mr(h))}var lT=wn;function Yl(h,g,T){var I=h.length;return T=T===n?I:T,!g&&T>=I?h:ps(h,g,T)}var bE=Kw||function(h){return Vr.clearTimeout(h)};function wE(h,g){if(g)return h.slice();var T=h.length,I=rE?rE(T):new h.constructor(T);return h.copy(I),I}function Yp(h){var g=new h.constructor(h.byteLength);return new Lp(g).set(new Lp(h)),g}function uT(h,g){var T=g?Yp(h.buffer):h.buffer;return new h.constructor(T,h.byteOffset,h.byteLength)}function cT(h){var g=new h.constructor(h.source,Ir.exec(h));return g.lastIndex=h.lastIndex,g}function dT(h){return pa?pr(pa.call(h)):{}}function fT(h,g){var T=g?Yp(h.buffer):h.buffer;return new h.constructor(T,h.byteOffset,h.length)}function TE(h,g){if(h!==g){var T=h!==n,I=h===null,F=h===h,K=Ao(h),se=g!==n,fe=g===null,Se=g===g,je=Ao(g);if(!fe&&!je&&!K&&h>g||K&&se&&Se&&!fe&&!je||I&&se&&Se||!T&&Se||!F)return 1;if(!I&&!K&&!je&&h<g||je&&T&&F&&!I&&!K||fe&&T&&F||!se&&F||!Se)return-1}return 0}function SI(h,g,T){for(var I=-1,F=h.criteria,K=g.criteria,se=F.length,fe=T.length;++I<se;){var Se=TE(F[I],K[I]);if(Se){if(I>=fe)return Se;var je=T[I];return Se*(je=="desc"?-1:1)}}return h.index-g.index}function hT(h,g,T,I){for(var F=-1,K=h.length,se=T.length,fe=-1,Se=g.length,je=pi(K-se,0),He=Re(Se+je),Ye=!I;++fe<Se;)He[fe]=g[fe];for(;++F<se;)(Ye||F<K)&&(He[T[F]]=h[F]);for(;je--;)He[fe++]=h[F++];return He}function xE(h,g,T,I){for(var F=-1,K=h.length,se=-1,fe=T.length,Se=-1,je=g.length,He=pi(K-fe,0),Ye=Re(He+je),_t=!I;++F<He;)Ye[F]=h[F];for(var Ht=F;++Se<je;)Ye[Ht+Se]=g[Se];for(;++se<fe;)(_t||F<K)&&(Ye[Ht+T[se]]=h[F++]);return Ye}function Cs(h,g){var T=-1,I=h.length;for(g||(g=Re(I));++T<I;)g[T]=h[T];return g}function bo(h,g,T,I){var F=!T;T||(T={});for(var K=-1,se=g.length;++K<se;){var fe=g[K],Se=I?I(T[fe],h[fe],fe,T,h):n;Se===n&&(Se=h[fe]),F?nl(T,fe,Se):Yc(T,fe,Se)}return T}function tv(h,g){return bo(h,wo(h),g)}function bI(h,g){return bo(h,vT(h),g)}function nv(h,g){return function(T,I){var F=gn(T)?$0:ma,K=g?g():{};return F(T,h,en(I,2),K)}}function Bf(h){return wn(function(g,T){var I=-1,F=T.length,K=F>1?T[F-1]:n,se=F>2?T[2]:n;for(K=h.length>3&&typeof K=="function"?(F--,K):n,se&&Ms(T[0],T[1],se)&&(K=F<3?n:K,F=1),g=pr(g);++I<F;){var fe=T[I];fe&&h(g,fe,I,K)}return g})}function Xa(h,g){return function(T,I){if(T==null)return T;if(!Za(T))return h(T,I);for(var F=T.length,K=g?F:-1,se=pr(T);(g?K--:++K<F)&&I(se[K],K,se)!==!1;);return T}}function rv(h){return function(g,T,I){for(var F=-1,K=pr(g),se=I(g),fe=se.length;fe--;){var Se=se[h?fe:++F];if(T(K[Se],Se,K)===!1)break}return g}}function iv(h,g,T){var I=g&S,F=zf(h);function K(){var se=this&&this!==Vr&&this instanceof K?F:h;return se.apply(I?T:this,arguments)}return K}function CE(h){return function(g){g=mr(g);var T=yf(g)?ha(g):n,I=T?T[0]:g.charAt(0),F=T?Yl(T,1).join(""):g.slice(1);return I[h]()+F}}function nd(h){return function(g){return X0(K3(X3(g).replace(rI,"")),h,"")}}function zf(h){return function(){var g=arguments;switch(g.length){case 0:return new h;case 1:return new h(g[0]);case 2:return new h(g[0],g[1]);case 3:return new h(g[0],g[1],g[2]);case 4:return new h(g[0],g[1],g[2],g[3]);case 5:return new h(g[0],g[1],g[2],g[3],g[4]);case 6:return new h(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new h(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var T=Mf(h.prototype),I=h.apply(T,g);return si(I)?I:T}}function RE(h,g,T){var I=zf(h);function F(){for(var K=arguments.length,se=Re(K),fe=K,Se=Zl(F);fe--;)se[fe]=arguments[fe];var je=K<3&&se[0]!==Se&&se[K-1]!==Se?[]:Ba(se,Se);if(K-=je.length,K<T)return Rs(h,g,jf,F.placeholder,n,se,je,n,n,T-K);var He=this&&this!==Vr&&this instanceof F?I:h;return Ts(He,this,se)}return F}function rd(h){return function(g,T,I){var F=pr(g);if(!Za(g)){var K=en(T,3);g=ms(g),T=function(fe){return K(F[fe],fe,F)}}var se=h(g,T,I);return se>-1?F[K?g[se]:se]:n}}function sv(h){return ul(function(g){var T=g.length,I=T,F=us.prototype.thru;for(h&&g.reverse();I--;){var K=g[I];if(typeof K!="function")throw new za(a);if(F&&!se&&Hf(K)=="wrapper")var se=new us([],!0)}for(I=se?I:T;++I<T;){K=g[I];var fe=Hf(K),Se=fe=="wrapper"?lv(K):n;Se&&im(Se[0])&&Se[1]==(O|C|M|D)&&!Se[4].length&&Se[9]==1?se=se[Hf(Se[0])].apply(se,Se[3]):se=K.length==1&&im(K)?se[fe]():se.thru(K)}return function(){var je=arguments,He=je[0];if(se&&je.length==1&&gn(He))return se.plant(He).value();for(var Ye=0,_t=T?g[Ye].apply(this,je):He;++Ye<T;)_t=g[Ye].call(this,_t);return _t}})}function jf(h,g,T,I,F,K,se,fe,Se,je){var He=g&O,Ye=g&S,_t=g&w,Ht=g&(C|k),rn=g&L,Mn=_t?n:zf(h);function sn(){for(var Nn=arguments.length,Gn=Re(Nn),Io=Nn;Io--;)Gn[Io]=arguments[Io];if(Ht)var ya=Zl(sn),ko=Bw(Gn,ya);if(I&&(Gn=hT(Gn,I,F,Ht)),K&&(Gn=xE(Gn,K,se,Ht)),Nn-=ko,Ht&&Nn<je){var Ti=Ba(Gn,ya);return Rs(h,g,jf,sn.placeholder,T,Gn,Ti,fe,Se,je-Nn)}var tu=Ye?T:this,dd=_t?tu[h]:h;return Nn=Gn.length,fe?Gn=To(Gn,fe):rn&&Nn>1&&Gn.reverse(),He&&Se<Nn&&(Gn.length=Se),this&&this!==Vr&&this instanceof sn&&(dd=Mn||zf(dd)),dd.apply(tu,Gn)}return sn}function pT(h,g){return function(T,I){return Wl(T,h,g(I),{})}}function Zp(h,g){return function(T,I){var F;if(T===n&&I===n)return g;if(T!==n&&(F=T),I!==n){if(F===n)return I;typeof T=="string"||typeof I=="string"?(T=qs(T),I=qs(I)):(T=EE(T),I=EE(I)),F=h(T,I)}return F}}function av(h){return ul(function(g){return g=kr(g,fa(en())),wn(function(T){var I=this;return h(g,function(F){return Ts(F,I,T)})})})}function Jp(h,g){g=g===n?" ":qs(g);var T=g.length;if(T<2)return T?ed(g,h):g;var I=ed(g,$c(h/Vc(g)));return yf(g)?Yl(ha(I),0,h).join(""):I.slice(0,h)}function mT(h,g,T,I){var F=g&S,K=zf(h);function se(){for(var fe=-1,Se=arguments.length,je=-1,He=I.length,Ye=Re(He+Se),_t=this&&this!==Vr&&this instanceof se?K:h;++je<He;)Ye[je]=I[je];for(;Se--;)Ye[je++]=arguments[++fe];return Ts(_t,F?T:this,Ye)}return se}function ME(h){return function(g,T,I){return I&&typeof I!="number"&&Ms(g,T,I)&&(T=I=n),g=cd(g),T===n?(T=g,g=0):T=cd(T),I=I===n?g<T?1:-1:cd(I),qp(g,T,I,h)}}function ov(h){return function(g,T){return typeof g=="string"&&typeof T=="string"||(g=dl(g),T=dl(T)),h(g,T)}}function Rs(h,g,T,I,F,K,se,fe,Se,je){var He=g&C,Ye=He?se:n,_t=He?n:se,Ht=He?K:n,rn=He?n:K;g|=He?M:N,g&=~(He?N:M),g&R||(g&=-4);var Mn=[h,g,F,Ht,Ye,rn,_t,fe,Se,je],sn=T.apply(n,Mn);return im(h)&&FE(sn,Mn),sn.placeholder=I,BE(sn,h,g)}function $i(h){var g=hi[h];return function(T,I){if(T=dl(T),I=I==null?0:ls(Tn(I),292),I&&wf(T)){var F=(mr(T)+"e").split("e"),K=g(F[0]+"e"+(+F[1]+I));return F=(mr(K)+"e").split("e"),+(F[0]+"e"+(+F[1]-I))}return g(T)}}var gT=Du&&1/Lu(new Du([,-0]))[1]==J?function(h){return new Du(h)}:XI;function AE(h){return function(g){var T=Wi(g);return T==vn?T_(g):T==Y?mI(g):fI(g,h(g))}}function ll(h,g,T,I,F,K,se,fe){var Se=g&w;if(!Se&&typeof h!="function")throw new za(a);var je=I?I.length:0;if(je||(g&=-97,I=F=n),se=se===n?se:pi(Tn(se),0),fe=fe===n?fe:Tn(fe),je-=F?F.length:0,g&N){var He=I,Ye=F;I=F=n}var _t=Se?n:lv(h),Ht=[h,g,T,I,F,He,Ye,K,se,fe];if(_t&&bT(Ht,_t),h=Ht[0],g=Ht[1],T=Ht[2],I=Ht[3],F=Ht[4],fe=Ht[9]=Ht[9]===n?Se?0:h.length:pi(Ht[9]-je,0),!fe&&g&(C|k)&&(g&=-25),!g||g==S)var rn=iv(h,g,T);else g==C||g==k?rn=RE(h,g,fe):(g==M||g==(S|M))&&!F.length?rn=mT(h,g,T,I):rn=jf.apply(n,Ht);var Mn=_t?Y_:FE;return BE(Mn(rn,Ht),h,g)}function IE(h,g,T,I){return h===n||eu(h,Zo[T])&&!Kn.call(I,T)?g:h}function kE(h,g,T,I,F,K){return si(h)&&si(g)&&(K.set(g,h),Qc(h,g,n,kE,K),K.delete(g)),h}function OE(h){return tS(h)?n:h}function PE(h,g,T,I,F,K){var se=T&y,fe=h.length,Se=g.length;if(fe!=Se&&!(se&&Se>fe))return!1;var je=K.get(h),He=K.get(g);if(je&&He)return je==g&&He==h;var Ye=-1,_t=!0,Ht=T&E?new qc:n;for(K.set(h,g),K.set(g,h);++Ye<fe;){var rn=h[Ye],Mn=g[Ye];if(I)var sn=se?I(Mn,rn,Ye,g,h,K):I(rn,Mn,Ye,h,g,K);if(sn!==n){if(sn)continue;_t=!1;break}if(Ht){if(!K0(g,function(Nn,Gn){if(!Bl(Ht,Gn)&&(rn===Nn||F(rn,Nn,T,I,K)))return Ht.push(Gn)})){_t=!1;break}}else if(!(rn===Mn||F(rn,Mn,T,I,K))){_t=!1;break}}return K.delete(h),K.delete(g),_t}function LE(h,g,T,I,F,K,se){switch(T){case st:if(h.byteLength!=g.byteLength||h.byteOffset!=g.byteOffset)return!1;h=h.buffer,g=g.buffer;case Et:return!(h.byteLength!=g.byteLength||!K(new Lp(h),new Lp(g)));case We:case ot:case pn:return eu(+h,+g);case Wt:return h.name==g.name&&h.message==g.message;case Ie:case j:return h==g+"";case vn:var fe=T_;case Y:var Se=I&y;if(fe||(fe=Lu),h.size!=g.size&&!Se)return!1;var je=se.get(h);if(je)return je==g;I|=E,se.set(h,g);var He=PE(fe(h),fe(g),I,F,K,se);return se.delete(h),He;case _e:if(pa)return pa.call(h)==pa.call(g)}return!1}function _T(h,g,T,I,F,K){var se=T&y,fe=Qp(h),Se=fe.length,je=Qp(g),He=je.length;if(Se!=He&&!se)return!1;for(var Ye=Se;Ye--;){var _t=fe[Ye];if(!(se?_t in g:Kn.call(g,_t)))return!1}var Ht=K.get(h),rn=K.get(g);if(Ht&&rn)return Ht==g&&rn==h;var Mn=!0;K.set(h,g),K.set(g,h);for(var sn=se;++Ye<Se;){_t=fe[Ye];var Nn=h[_t],Gn=g[_t];if(I)var Io=se?I(Gn,Nn,_t,g,h,K):I(Nn,Gn,_t,h,g,K);if(!(Io===n?Nn===Gn||F(Nn,Gn,T,I,K):Io)){Mn=!1;break}sn||(sn=_t=="constructor")}if(Mn&&!sn){var ya=h.constructor,ko=g.constructor;ya!=ko&&"constructor"in h&&"constructor"in g&&!(typeof ya=="function"&&ya instanceof ya&&typeof ko=="function"&&ko instanceof ko)&&(Mn=!1)}return K.delete(h),K.delete(g),Mn}function ul(h){return _a(fv(h,n,mv),h+"")}function Qp(h){return G_(h,ms,wo)}function em(h){return G_(h,Ja,vT)}var lv=N_?function(h){return N_.get(h)}:XI;function Hf(h){for(var g=h.name+"",T=Cf[g],I=Kn.call(Cf,g)?T.length:0;I--;){var F=T[I],K=F.func;if(K==null||K==h)return F.name}return g}function Zl(h){var g=Kn.call(G,"placeholder")?G:h;return g.placeholder}function en(){var h=G.iteratee||WI;return h=h===WI?Lf:h,arguments.length?h(arguments[0],arguments[1]):h}function tm(h,g){var T=h.__data__;return Vf(g)?T[typeof g=="string"?"string":"hash"]:T.map}function nm(h){for(var g=ms(h),T=g.length;T--;){var I=g[T],F=h[I];g[T]=[I,F,sm(F)]}return g}function $u(h,g){var T=vf(h,g);return fE(T)?T:n}function uv(h){var g=Kn.call(h,Gc),T=h[Gc];try{h[Gc]=n;var I=!0}catch{}var F=Op.call(h);return I&&(g?h[Gc]=T:delete h[Gc]),F}var wo=O_?function(h){return h==null?[]:(h=pr(h),Ou(O_(h),function(g){return I_.call(h,g)}))}:KI,vT=O_?function(h){for(var g=[];h;)Pu(g,wo(h)),h=Eo(h);return g}:KI,Wi=Gi;(Up&&Wi(new Up(new ArrayBuffer(1)))!=st||Wc&&Wi(new Wc)!=vn||Fp&&Wi(Fp.resolve())!=Qn||Du&&Wi(new Du)!=Y||Bp&&Wi(new Bp)!=Be)&&(Wi=function(h){var g=Gi(h),T=g==ut?h.constructor:n,I=T?Wu(T):"";if(I)switch(I){case aE:return st;case Uu:return vn;case Zw:return Qn;case Rf:return Y;case Jo:return Be}return g});function NE(h,g,T){for(var I=-1,F=T.length;++I<F;){var K=T[I],se=K.size;switch(K.type){case"drop":h+=se;break;case"dropRight":g-=se;break;case"take":g=ls(g,h+se);break;case"takeRight":h=pi(h,g-se);break}}return{start:h,end:g}}function yT(h){var g=h.match(mt);return g?g[1].split(Bt):[]}function DE(h,g,T){g=ol(g,h);for(var I=-1,F=g.length,K=!1;++I<F;){var se=Co(g[I]);if(!(K=h!=null&&T(h,se)))break;h=h[se]}return K||++I!=F?K:(F=h==null?0:h.length,!!F&&BT(F)&&$r(se,F)&&(gn(h)||hm(h)))}function rm(h){var g=h.length,T=new h.constructor(g);return g&&typeof h[0]=="string"&&Kn.call(h,"index")&&(T.index=h.index,T.input=h.input),T}function qi(h){return typeof h.constructor=="function"&&!Jl(h)?Mf(Eo(h)):{}}function wI(h,g,T){var I=h.constructor;switch(g){case Et:return Yp(h);case We:case ot:return new I(+h);case st:return uT(h,T);case yt:case Ut:case Qe:case gt:case cn:case Kt:case wt:case Yt:case an:return fT(h,T);case vn:return new I;case pn:case j:return new I(h);case Ie:return cT(h);case Y:return new I;case _e:return dT(h)}}function TI(h,g){var T=g.length;if(!T)return h;var I=T-1;return g[I]=(T>1?"& ":"")+g[I],g=g.join(T>2?", ":" "),h.replace(Ft,`{
/* [wrapped with `+g+`] */
`)}function cv(h){return gn(h)||hm(h)||!!(Xw&&h&&h[Xw])}function $r(h,g){var T=typeof h;return g=g??X,!!g&&(T=="number"||T!="symbol"&&$.test(h))&&h>-1&&h%1==0&&h<g}function Ms(h,g,T){if(!si(T))return!1;var I=typeof g;return(I=="number"?Za(T)&&$r(g,T.length):I=="string"&&g in T)?eu(T[g],h):!1}function Ct(h,g){if(gn(h))return!1;var T=typeof h;return T=="number"||T=="symbol"||T=="boolean"||h==null||Ao(h)?!0:Ce.test(h)||!he.test(h)||g!=null&&h in pr(g)}function Vf(h){var g=typeof h;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?h!=="__proto__":h===null}function im(h){var g=Hf(h),T=G[g];if(typeof T!="function"||!(g in mn.prototype))return!1;if(h===T)return!0;var I=lv(T);return!!I&&h===I[0]}function ET(h){return!!R_&&R_ in h}var xI=Sf?ud:YI;function Jl(h){var g=h&&h.constructor,T=typeof g=="function"&&g.prototype||Zo;return h===T}function sm(h){return h===h&&!si(h)}function dv(h,g){return function(T){return T==null?!1:T[h]===g&&(g!==n||h in pr(T))}}function ST(h){var g=it(h,function(I){return T.size===c&&T.clear(),I}),T=g.cache;return g}function bT(h,g){var T=h[1],I=g[1],F=T|I,K=F<(S|w|O),se=I==O&&T==C||I==O&&T==D&&h[7].length<=g[8]||I==(O|D)&&g[7].length<=g[8]&&T==C;if(!(K||se))return h;I&S&&(h[2]=g[2],F|=T&S?0:R);var fe=g[3];if(fe){var Se=h[3];h[3]=Se?hT(Se,fe,g[4]):fe,h[4]=Se?Ba(h[3],f):g[4]}return fe=g[5],fe&&(Se=h[5],h[5]=Se?xE(Se,fe,g[6]):fe,h[6]=Se?Ba(h[5],f):g[6]),fe=g[7],fe&&(h[7]=fe),I&O&&(h[8]=h[8]==null?g[8]:ls(h[8],g[8])),h[9]==null&&(h[9]=g[9]),h[0]=g[0],h[1]=F,h}function wT(h){var g=[];if(h!=null)for(var T in pr(h))g.push(T);return g}function UE(h){return Op.call(h)}function fv(h,g,T){return g=pi(g===n?h.length-1:g,0),function(){for(var I=arguments,F=-1,K=pi(I.length-g,0),se=Re(K);++F<K;)se[F]=I[g+F];F=-1;for(var fe=Re(g+1);++F<g;)fe[F]=I[F];return fe[g]=T(se),Ts(h,this,fe)}}function Fi(h,g){return g.length<2?h:$l(h,ps(g,0,-1))}function To(h,g){for(var T=h.length,I=ls(g.length,T),F=Cs(h);I--;){var K=g[I];h[I]=$r(K,T)?F[K]:n}return h}function cl(h,g){if(!(g==="constructor"&&typeof h[g]=="function")&&g!="__proto__")return h[g]}var FE=xo(Y_),Gf=iE||function(h,g){return Vr.setTimeout(h,g)},_a=xo(al);function BE(h,g,T){var I=g+"";return _a(h,TI(I,TT(yT(I),T)))}function xo(h){var g=0,T=0;return function(){var I=EI(),F=ne-(I-T);if(T=I,F>0){if(++g>=te)return arguments[0]}else g=0;return h.apply(n,arguments)}}function hv(h,g){var T=-1,I=h.length,F=I-1;for(g=g===n?I:g;++T<g;){var K=Nf(T,F),se=h[K];h[K]=h[T],h[T]=se}return h.length=g,h}var zE=ST(function(h){var g=[];return h.charCodeAt(0)===46&&g.push(""),h.replace(Ve,function(T,I,F,K){g.push(F?K.replace(Tr,"$1"):I||T)}),g});function Co(h){if(typeof h=="string"||Ao(h))return h;var g=h+"";return g=="0"&&1/h==-1/0?"-0":g}function Wu(h){if(h!=null){try{return kp.call(h)}catch{}try{return h+""}catch{}}return""}function TT(h,g){return os(Ee,function(T){var I="_."+T[0];g&T[1]&&!S_(h,I)&&h.push(I)}),h.sort()}function xT(h){if(h instanceof mn)return h.clone();var g=new us(h.__wrapped__,h.__chain__);return g.__actions__=Cs(h.__actions__),g.__index__=h.__index__,g.__values__=h.__values__,g}function pv(h,g,T){(T?Ms(h,g,T):g===n)?g=1:g=pi(Tn(g),0);var I=h==null?0:h.length;if(!I||g<1)return[];for(var F=0,K=0,se=Re($c(I/g));F<I;)se[K++]=ps(h,F,F+=g);return se}function jE(h){for(var g=-1,T=h==null?0:h.length,I=0,F=[];++g<T;){var K=h[g];K&&(F[I++]=K)}return F}function Ka(){var h=arguments.length;if(!h)return[];for(var g=Re(h-1),T=arguments[0],I=h;I--;)g[I-1]=arguments[I];return Pu(gn(T)?Cs(T):[T],ei(g,1))}var Vn=wn(function(h,g){return wi(h)?rl(h,ei(g,1,wi,!0)):[]}),Bi=wn(function(h,g){var T=As(g);return wi(T)&&(T=n),wi(h)?rl(h,ei(g,1,wi,!0),en(T,2)):[]}),mi=wn(function(h,g){var T=As(g);return wi(T)&&(T=n),wi(h)?rl(h,ei(g,1,wi,!0),n,T):[]});function Xi(h,g,T){var I=h==null?0:h.length;return I?(g=T||g===n?1:Tn(g),ps(h,g<0?0:g,I)):[]}function va(h,g,T){var I=h==null?0:h.length;return I?(g=T||g===n?1:Tn(g),g=I-g,ps(h,0,g<0?0:g)):[]}function $f(h,g){return h&&h.length?Xp(h,en(g,3),!0,!0):[]}function Si(h,g){return h&&h.length?Xp(h,en(g,3),!0):[]}function am(h,g,T,I){var F=h==null?0:h.length;return F?(T&&typeof T!="number"&&Ms(h,g,T)&&(T=0,I=F),sT(h,g,T,I)):[]}function qu(h,g,T){var I=h==null?0:h.length;if(!I)return-1;var F=T==null?0:Tn(T);return F<0&&(F=pi(I+F,0)),b_(h,en(g,3),F)}function om(h,g,T){var I=h==null?0:h.length;if(!I)return-1;var F=I-1;return T!==n&&(F=Tn(T),F=T<0?pi(I+F,0):ls(F,I-1)),b_(h,en(g,3),F,!0)}function mv(h){var g=h==null?0:h.length;return g?ei(h,1):[]}function lm(h){var g=h==null?0:h.length;return g?ei(h,J):[]}function Xs(h,g){var T=h==null?0:h.length;return T?(g=g===n?1:Tn(g),ei(h,g)):[]}function HE(h){for(var g=-1,T=h==null?0:h.length,I={};++g<T;){var F=h[g];I[F[0]]=F[1]}return I}function id(h){return h&&h.length?h[0]:n}function Ql(h,g,T){var I=h==null?0:h.length;if(!I)return-1;var F=T==null?0:Tn(T);return F<0&&(F=pi(I+F,0)),_f(h,g,F)}function gv(h){var g=h==null?0:h.length;return g?ps(h,0,-1):[]}var VE=wn(function(h){var g=kr(h,Ff);return g.length&&g[0]===h[0]?$_(g):[]}),Xu=wn(function(h){var g=As(h),T=kr(h,Ff);return g===As(T)?g=n:T.pop(),T.length&&T[0]===h[0]?$_(T,en(g,2)):[]}),_v=wn(function(h){var g=As(h),T=kr(h,Ff);return g=typeof g=="function"?g:n,g&&T.pop(),T.length&&T[0]===h[0]?$_(T,n,g):[]});function Ku(h,g){return h==null?"":P_.call(h,g)}function As(h){var g=h==null?0:h.length;return g?h[g-1]:n}function um(h,g,T){var I=h==null?0:h.length;if(!I)return-1;var F=I;return T!==n&&(F=Tn(T),F=F<0?pi(I+F,0):ls(F,I-1)),g===g?gI(h,g,F):b_(h,Lw,F,!0)}function GE(h,g){return h&&h.length?K_(h,Tn(g)):n}var vv=wn(cm);function cm(h,g){return h&&h.length&&g&&g.length?ii(h,g):h}function Is(h,g,T){return h&&h.length&&g&&g.length?ii(h,g,en(T,2)):h}function Yu(h,g,T){return h&&h.length&&g&&g.length?ii(h,g,n,T):h}var Ro=ul(function(h,g){var T=h==null?0:h.length,I=H_(h,g);return Ei(h,kr(g,function(F){return $r(F,T)?+F:F}).sort(TE)),I});function Ks(h,g){var T=[];if(!(h&&h.length))return T;var I=-1,F=[],K=h.length;for(g=en(g,3);++I<K;){var se=h[I];g(se,I,h)&&(T.push(se),F.push(I))}return Ei(h,F),T}function yv(h){return h==null?h:L_.call(h)}function $E(h,g,T){var I=h==null?0:h.length;return I?(T&&typeof T!="number"&&Ms(h,g,T)?(g=0,T=I):(g=g==null?0:Tn(g),T=T===n?I:Tn(T)),ps(h,g,T)):[]}function WE(h,g){return Df(h,g)}function CI(h,g,T){return Z_(h,g,en(T,2))}function Zu(h,g){var T=h==null?0:h.length;if(T){var I=Df(h,g);if(I<T&&eu(h[I],g))return I}return-1}function CT(h,g){return Df(h,g,!0)}function qE(h,g,T){return Z_(h,g,en(T,2),!0)}function sd(h,g){var T=h==null?0:h.length;if(T){var I=Df(h,g,!0)-1;if(eu(h[I],g))return I}return-1}function XE(h){return h&&h.length?yE(h):[]}function ad(h,g){return h&&h.length?yE(h,en(g,2)):[]}function RT(h){var g=h==null?0:h.length;return g?ps(h,1,g):[]}function MT(h,g,T){return h&&h.length?(g=T||g===n?1:Tn(g),ps(h,0,g<0?0:g)):[]}function KE(h,g,T){var I=h==null?0:h.length;return I?(g=T||g===n?1:Tn(g),g=I-g,ps(h,g<0?0:g,I)):[]}function Ev(h,g){return h&&h.length?Xp(h,en(g,3),!1,!0):[]}function RI(h,g){return h&&h.length?Xp(h,en(g,3)):[]}var MI=wn(function(h){return Kl(ei(h,1,wi,!0))}),AT=wn(function(h){var g=As(h);return wi(g)&&(g=n),Kl(ei(h,1,wi,!0),en(g,2))}),IT=wn(function(h){var g=As(h);return g=typeof g=="function"?g:n,Kl(ei(h,1,wi,!0),n,g)});function od(h){return h&&h.length?Kl(h):[]}function AI(h,g){return h&&h.length?Kl(h,en(g,2)):[]}function Wf(h,g){return g=typeof g=="function"?g:n,h&&h.length?Kl(h,n,g):[]}function Sv(h){if(!(h&&h.length))return[];var g=0;return h=Ou(h,function(T){if(wi(T))return g=pi(T.length,g),!0}),Q0(g,function(T){return kr(h,Z0(T))})}function Kr(h,g){if(!(h&&h.length))return[];var T=Sv(h);return g==null?T:kr(T,function(I){return Ts(g,n,I)})}var II=wn(function(h,g){return wi(h)?rl(h,g):[]}),kT=wn(function(h){return Q_(Ou(h,wi))}),kI=wn(function(h){var g=As(h);return wi(g)&&(g=n),Q_(Ou(h,wi),en(g,2))}),OI=wn(function(h){var g=As(h);return g=typeof g=="function"?g:n,Q_(Ou(h,wi),n,g)}),OT=wn(Sv);function PT(h,g){return Kp(h||[],g||[],Yc)}function PI(h,g){return Kp(h||[],g||[],td)}var Ya=wn(function(h){var g=h.length,T=g>1?h[g-1]:n;return T=typeof T=="function"?(h.pop(),T):n,Kr(h,T)});function bv(h){var g=G(h);return g.__chain__=!0,g}function LI(h,g){return g(h),h}function Mo(h,g){return g(h)}var wv=ul(function(h){var g=h.length,T=g?h[0]:0,I=this.__wrapped__,F=function(K){return H_(K,h)};return g>1||this.__actions__.length||!(I instanceof mn)||!$r(T)?this.thru(F):(I=I.slice(T,+T+(g?1:0)),I.__actions__.push({func:Mo,args:[F],thisArg:n}),new us(I,this.__chain__).thru(function(K){return g&&!K.length&&K.push(n),K}))});function ld(){return bv(this)}function Tv(){return new us(this.value(),this.__chain__)}function YE(){this.__values__===n&&(this.__values__=B3(this.value()));var h=this.__index__>=this.__values__.length,g=h?n:this.__values__[this.__index__++];return{done:h,value:g}}function ZE(){return this}function NI(h){for(var g,T=this;T instanceof Qo;){var I=xT(T);I.__index__=0,I.__values__=n,g?F.__wrapped__=I:g=I;var F=I;T=T.__wrapped__}return F.__wrapped__=h,g}function JE(){var h=this.__wrapped__;if(h instanceof mn){var g=h;return this.__actions__.length&&(g=new mn(this)),g=g.reverse(),g.__actions__.push({func:Mo,args:[yv],thisArg:n}),new us(g,this.__chain__)}return this.thru(yv)}function DI(){return Uf(this.__wrapped__,this.__actions__)}var LT=nv(function(h,g,T){Kn.call(h,T)?++h[T]:nl(h,T,1)});function NT(h,g,T){var I=gn(h)?W0:Hp;return T&&Ms(h,g,T)&&(g=n),I(h,en(g,3))}function xv(h,g){var T=gn(h)?Ou:cE;return T(h,en(g,3))}var Cv=rd(qu),DT=rd(om);function QE(h,g){return ei(Iv(h,g),1)}function UT(h,g){return ei(Iv(h,g),J)}function eS(h,g,T){return T=T===n?1:Tn(T),ei(Iv(h,g),T)}function dm(h,g){var T=gn(h)?os:il;return T(h,en(g,3))}function Rv(h,g){var T=gn(h)?E_:iT;return T(h,en(g,3))}var Mv=nv(function(h,g,T){Kn.call(h,T)?h[T].push(g):nl(h,T,[g])});function FT(h,g,T,I){h=Za(h)?h:Pv(h),T=T&&!I?Tn(T):0;var F=h.length;return T<0&&(T=pi(F+T,0)),zT(h)?T<=F&&h.indexOf(g,T)>-1:!!F&&_f(h,g,T)>-1}var UI=wn(function(h,g,T){var I=-1,F=typeof g=="function",K=Za(h)?Re(h.length):[];return il(h,function(se){K[++I]=F?Ts(g,se,T):$a(se,g,T)}),K}),Av=nv(function(h,g,T){nl(h,T,g)});function Iv(h,g){var T=gn(h)?kr:pE;return T(h,en(g,3))}function fm(h,g,T,I){return h==null?[]:(gn(g)||(g=g==null?[]:[g]),T=I?n:T,gn(T)||(T=T==null?[]:[T]),Wp(h,g,T))}var FI=nv(function(h,g,T){h[T?0:1].push(g)},function(){return[[],[]]});function kv(h,g,T){var I=gn(h)?X0:Dw,F=arguments.length<3;return I(h,en(g,4),T,F,il)}function u(h,g,T){var I=gn(h)?lI:Dw,F=arguments.length<3;return I(h,en(g,4),T,F,iT)}function d(h,g){var T=gn(h)?Ou:cE;return T(h,Nt(en(g,3)))}function v(h){var g=gn(h)?tl:hs;return g(h)}function b(h,g,T){(T?Ms(h,g,T):g===n)?g=1:g=Tn(g);var I=gn(h)?Kc:_E;return I(h,g)}function x(h){var g=gn(h)?nT:qa;return g(h)}function A(h){if(h==null)return 0;if(Za(h))return zT(h)?Vc(h):h.length;var g=Wi(h);return g==vn||g==Y?h.size:Xl(h).length}function z(h,g,T){var I=gn(h)?K0:vE;return T&&Ms(h,g,T)&&(g=n),I(h,en(g,3))}var re=wn(function(h,g){if(h==null)return[];var T=g.length;return T>1&&Ms(h,g[0],g[1])?g=[]:T>2&&Ms(g[0],g[1],g[2])&&(g=[g[0]]),Wp(h,ei(g,1),[])}),de=Nr||function(){return Vr.Date.now()};function Ae(h,g){if(typeof g!="function")throw new za(a);return h=Tn(h),function(){if(--h<1)return g.apply(this,arguments)}}function Ke(h,g,T){return g=T?n:g,g=h&&g==null?h.length:g,ll(h,O,n,n,n,n,g)}function Je(h,g){var T;if(typeof g!="function")throw new za(a);return h=Tn(h),function(){return--h>0&&(T=g.apply(this,arguments)),h<=1&&(g=n),T}}var qe=wn(function(h,g,T){var I=S;if(T.length){var F=Ba(T,Zl(qe));I|=M}return ll(h,I,g,T,F)}),bt=wn(function(h,g,T){var I=S|w;if(T.length){var F=Ba(T,Zl(bt));I|=M}return ll(g,I,h,T,F)});function It(h,g,T){g=T?n:g;var I=ll(h,C,n,n,n,n,n,g);return I.placeholder=It.placeholder,I}function Lt(h,g,T){g=T?n:g;var I=ll(h,k,n,n,n,n,n,g);return I.placeholder=Lt.placeholder,I}function ti(h,g,T){var I,F,K,se,fe,Se,je=0,He=!1,Ye=!1,_t=!0;if(typeof h!="function")throw new za(a);g=dl(g)||0,si(T)&&(He=!!T.leading,Ye="maxWait"in T,K=Ye?pi(dl(T.maxWait)||0,g):K,_t="trailing"in T?!!T.trailing:_t);function Ht(Ti){var tu=I,dd=F;return I=F=n,je=Ti,se=h.apply(dd,tu),se}function rn(Ti){return je=Ti,fe=Gf(Nn,g),He?Ht(Ti):se}function Mn(Ti){var tu=Ti-Se,dd=Ti-je,J3=g-tu;return Ye?ls(J3,K-dd):J3}function sn(Ti){var tu=Ti-Se,dd=Ti-je;return Se===n||tu>=g||tu<0||Ye&&dd>=K}function Nn(){var Ti=de();if(sn(Ti))return Gn(Ti);fe=Gf(Nn,Mn(Ti))}function Gn(Ti){return fe=n,_t&&I?Ht(Ti):(I=F=n,se)}function Io(){fe!==n&&bE(fe),je=0,I=Se=F=fe=n}function ya(){return fe===n?se:Gn(de())}function ko(){var Ti=de(),tu=sn(Ti);if(I=arguments,F=this,Se=Ti,tu){if(fe===n)return rn(Se);if(Ye)return bE(fe),fe=Gf(Nn,g),Ht(Se)}return fe===n&&(fe=Gf(Nn,g)),se}return ko.cancel=Io,ko.flush=ya,ko}var be=wn(function(h,g){return uE(h,1,g)}),me=wn(function(h,g,T){return uE(h,dl(g)||0,T)});function we(h){return ll(h,L)}function it(h,g){if(typeof h!="function"||g!=null&&typeof g!="function")throw new za(a);var T=function(){var I=arguments,F=g?g.apply(this,I):I[0],K=T.cache;if(K.has(F))return K.get(F);var se=h.apply(this,I);return T.cache=K.set(F,se)||K,se};return T.cache=new(it.Cache||ja),T}it.Cache=ja;function Nt(h){if(typeof h!="function")throw new za(a);return function(){var g=arguments;switch(g.length){case 0:return!h.call(this);case 1:return!h.call(this,g[0]);case 2:return!h.call(this,g[0],g[1]);case 3:return!h.call(this,g[0],g[1],g[2])}return!h.apply(this,g)}}function Jt(h){return Je(2,h)}var Qt=lT(function(h,g){g=g.length==1&&gn(g[0])?kr(g[0],fa(en())):kr(ei(g,1),fa(en()));var T=g.length;return wn(function(I){for(var F=-1,K=ls(I.length,T);++F<K;)I[F]=g[F].call(this,I[F]);return Ts(h,this,I)})}),nn=wn(function(h,g){var T=Ba(g,Zl(nn));return ll(h,M,n,g,T)}),bi=wn(function(h,g){var T=Ba(g,Zl(bi));return ll(h,N,n,g,T)}),Yn=ul(function(h,g){return ll(h,D,n,n,n,g)});function Ju(h,g){if(typeof h!="function")throw new za(a);return g=g===n?g:Tn(g),wn(h,g)}function BI(h,g){if(typeof h!="function")throw new za(a);return g=g==null?0:pi(Tn(g),0),wn(function(T){var I=T[g],F=Yl(T,0,g);return I&&Pu(F,I),Ts(h,this,F)})}function hJ(h,g,T){var I=!0,F=!0;if(typeof h!="function")throw new za(a);return si(T)&&(I="leading"in T?!!T.leading:I,F="trailing"in T?!!T.trailing:F),ti(h,g,{leading:I,maxWait:g,trailing:F})}function pJ(h){return Ke(h,1)}function mJ(h,g){return nn(ev(g),h)}function gJ(){if(!arguments.length)return[];var h=arguments[0];return gn(h)?h:[h]}function _J(h){return Ws(h,_)}function vJ(h,g){return g=typeof g=="function"?g:n,Ws(h,_,g)}function yJ(h){return Ws(h,p|_)}function EJ(h,g){return g=typeof g=="function"?g:n,Ws(h,p|_,g)}function SJ(h,g){return g==null||jp(h,g,ms(g))}function eu(h,g){return h===g||h!==h&&g!==g}var bJ=ov(Hu),wJ=ov(function(h,g){return h>=g}),hm=W_(function(){return arguments}())?W_:function(h){return gi(h)&&Kn.call(h,"callee")&&!I_.call(h,"callee")},gn=Re.isArray,TJ=G0?fa(G0):aT;function Za(h){return h!=null&&BT(h.length)&&!ud(h)}function wi(h){return gi(h)&&Za(h)}function xJ(h){return h===!0||h===!1||gi(h)&&Gi(h)==We}var qf=sE||YI,CJ=Hs?fa(Hs):ql;function RJ(h){return gi(h)&&h.nodeType===1&&!tS(h)}function MJ(h){if(h==null)return!0;if(Za(h)&&(gn(h)||typeof h=="string"||typeof h.splice=="function"||qf(h)||Ov(h)||hm(h)))return!h.length;var g=Wi(h);if(g==vn||g==Y)return!h.size;if(Jl(h))return!Xl(h).length;for(var T in h)if(Kn.call(h,T))return!1;return!0}function AJ(h,g){return Wa(h,g)}function IJ(h,g,T){T=typeof T=="function"?T:n;var I=T?T(h,g):n;return I===n?Wa(h,g,n,T):!!I}function zI(h){if(!gi(h))return!1;var g=Gi(h);return g==Wt||g==Mt||typeof h.message=="string"&&typeof h.name=="string"&&!tS(h)}function kJ(h){return typeof h=="number"&&wf(h)}function ud(h){if(!si(h))return!1;var g=Gi(h);return g==ir||g==ue||g==Le||g==Dt}function N3(h){return typeof h=="number"&&h==Tn(h)}function BT(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=X}function si(h){var g=typeof h;return h!=null&&(g=="object"||g=="function")}function gi(h){return h!=null&&typeof h=="object"}var D3=Hc?fa(Hc):oT;function OJ(h,g){return h===g||Pf(h,g,nm(g))}function PJ(h,g,T){return T=typeof T=="function"?T:n,Pf(h,g,nm(g),T)}function LJ(h){return U3(h)&&h!=+h}function NJ(h){if(xI(h))throw new dn(s);return fE(h)}function DJ(h){return h===null}function UJ(h){return h==null}function U3(h){return typeof h=="number"||gi(h)&&Gi(h)==pn}function tS(h){if(!gi(h)||Gi(h)!=ut)return!1;var g=Eo(h);if(g===null)return!0;var T=Kn.call(g,"constructor")&&g.constructor;return typeof T=="function"&&T instanceof T&&kp.call(T)==M_}var jI=y_?fa(y_):Gp;function FJ(h){return N3(h)&&h>=-9007199254740991&&h<=X}var F3=gf?fa(gf):sl;function zT(h){return typeof h=="string"||!gn(h)&&gi(h)&&Gi(h)==j}function Ao(h){return typeof h=="symbol"||gi(h)&&Gi(h)==_e}var Ov=kw?fa(kw):$p;function BJ(h){return h===n}function zJ(h){return gi(h)&&Wi(h)==Be}function jJ(h){return gi(h)&&Gi(h)==Oe}var HJ=ov(Vu),VJ=ov(function(h,g){return h<=g});function B3(h){if(!h)return[];if(Za(h))return zT(h)?ha(h):Cs(h);if(Hl&&h[Hl])return pI(h[Hl]());var g=Wi(h),T=g==vn?T_:g==Y?Lu:Pv;return T(h)}function cd(h){if(!h)return h===0?h:0;if(h=dl(h),h===J||h===-1/0){var g=h<0?-1:1;return g*ie}return h===h?h:0}function Tn(h){var g=cd(h),T=g%1;return g===g?T?g-T:g:0}function z3(h){return h?Gl(Tn(h),0,Z):0}function dl(h){if(typeof h=="number")return h;if(Ao(h))return pe;if(si(h)){var g=typeof h.valueOf=="function"?h.valueOf():h;h=si(g)?g+"":g}if(typeof h!="string")return h===0?h:+h;h=Uw(h);var T=Wr.test(h);return T||Ko.test(h)?__(h.slice(2),T?2:8):xr.test(h)?pe:+h}function j3(h){return bo(h,Ja(h))}function GJ(h){return h?Gl(Tn(h),-9007199254740991,X):h===0?h:0}function mr(h){return h==null?"":qs(h)}var $J=Bf(function(h,g){if(Jl(g)||Za(g)){bo(g,ms(g),h);return}for(var T in g)Kn.call(g,T)&&Yc(h,T,g[T])}),H3=Bf(function(h,g){bo(g,Ja(g),h)}),jT=Bf(function(h,g,T,I){bo(g,Ja(g),h,I)}),WJ=Bf(function(h,g,T,I){bo(g,ms(g),h,I)}),qJ=ul(H_);function XJ(h,g){var T=Mf(h);return g==null?T:Ur(T,g)}var KJ=wn(function(h,g){h=pr(h);var T=-1,I=g.length,F=I>2?g[2]:n;for(F&&Ms(g[0],g[1],F)&&(I=1);++T<I;)for(var K=g[T],se=Ja(K),fe=-1,Se=se.length;++fe<Se;){var je=se[fe],He=h[je];(He===n||eu(He,Zo[je])&&!Kn.call(h,je))&&(h[je]=K[je])}return h}),YJ=wn(function(h){return h.push(n,kE),Ts(V3,n,h)});function ZJ(h,g){return Pw(h,en(g,3),ga)}function JJ(h,g){return Pw(h,en(g,3),ju)}function QJ(h,g){return h==null?h:V_(h,en(g,3),Ja)}function eQ(h,g){return h==null?h:Vp(h,en(g,3),Ja)}function tQ(h,g){return h&&ga(h,en(g,3))}function nQ(h,g){return h&&ju(h,en(g,3))}function rQ(h){return h==null?[]:Of(h,ms(h))}function iQ(h){return h==null?[]:Of(h,Ja(h))}function HI(h,g,T){var I=h==null?n:$l(h,g);return I===n?T:I}function sQ(h,g){return h!=null&&DE(h,g,Ga)}function VI(h,g){return h!=null&&DE(h,g,Jc)}var aQ=pT(function(h,g,T){g!=null&&typeof g.toString!="function"&&(g=Op.call(g)),h[g]=T},$I(Qa)),oQ=pT(function(h,g,T){g!=null&&typeof g.toString!="function"&&(g=Op.call(g)),Kn.call(h,g)?h[g].push(T):h[g]=[T]},en),lQ=wn($a);function ms(h){return Za(h)?el(h):Xl(h)}function Ja(h){return Za(h)?el(h,!0):hE(h)}function uQ(h,g){var T={};return g=en(g,3),ga(h,function(I,F,K){nl(T,g(I,F,K),I)}),T}function cQ(h,g){var T={};return g=en(g,3),ga(h,function(I,F,K){nl(T,F,g(I,F,K))}),T}var dQ=Bf(function(h,g,T){Qc(h,g,T)}),V3=Bf(function(h,g,T,I){Qc(h,g,T,I)}),fQ=ul(function(h,g){var T={};if(h==null)return T;var I=!1;g=kr(g,function(K){return K=ol(K,h),I||(I=K.length>1),K}),bo(h,em(h),T),I&&(T=Ws(T,p|m|_,OE));for(var F=g.length;F--;)J_(T,g[F]);return T});function hQ(h,g){return G3(h,Nt(en(g)))}var pQ=ul(function(h,g){return h==null?{}:gE(h,g)});function G3(h,g){if(h==null)return{};var T=kr(em(h),function(I){return[I]});return g=en(g),Gu(h,T,function(I,F){return g(I,F[0])})}function mQ(h,g,T){g=ol(g,h);var I=-1,F=g.length;for(F||(F=1,h=n);++I<F;){var K=h==null?n:h[Co(g[I])];K===n&&(I=F,K=T),h=ud(K)?K.call(h):K}return h}function gQ(h,g,T){return h==null?h:td(h,g,T)}function _Q(h,g,T,I){return I=typeof I=="function"?I:n,h==null?h:td(h,g,T,I)}var $3=AE(ms),W3=AE(Ja);function vQ(h,g,T){var I=gn(h),F=I||qf(h)||Ov(h);if(g=en(g,4),T==null){var K=h&&h.constructor;F?T=I?new K:[]:si(h)?T=ud(K)?Mf(Eo(h)):{}:T={}}return(F?os:ga)(h,function(se,fe,Se){return g(T,se,fe,Se)}),T}function yQ(h,g){return h==null?!0:J_(h,g)}function EQ(h,g,T){return h==null?h:SE(h,g,ev(T))}function SQ(h,g,T,I){return I=typeof I=="function"?I:n,h==null?h:SE(h,g,ev(T),I)}function Pv(h){return h==null?[]:Ap(h,ms(h))}function bQ(h){return h==null?[]:Ap(h,Ja(h))}function wQ(h,g,T){return T===n&&(T=g,g=n),T!==n&&(T=dl(T),T=T===T?T:0),g!==n&&(g=dl(g),g=g===g?g:0),Gl(dl(h),g,T)}function TQ(h,g,T){return g=cd(g),T===n?(T=g,g=0):T=cd(T),h=dl(h),dE(h,g,T)}function xQ(h,g,T){if(T&&typeof T!="boolean"&&Ms(h,g,T)&&(g=T=n),T===n&&(typeof g=="boolean"?(T=g,g=n):typeof h=="boolean"&&(T=h,h=n)),h===n&&g===n?(h=0,g=1):(h=cd(h),g===n?(g=h,h=0):g=cd(g)),h>g){var I=h;h=g,g=I}if(T||h%1||g%1){var F=Dp();return ls(h+F*(g-h+H0("1e-"+((F+"").length-1))),g)}return Nf(h,g)}var CQ=nd(function(h,g,T){return g=g.toLowerCase(),h+(T?q3(g):g)});function q3(h){return GI(mr(h).toLowerCase())}function X3(h){return h=mr(h),h&&h.replace(ge,zw).replace(Rw,"")}function RQ(h,g,T){h=mr(h),g=qs(g);var I=h.length;T=T===n?I:Gl(Tn(T),0,I);var F=T;return T-=g.length,T>=0&&h.slice(T,F)==g}function MQ(h){return h=mr(h),h&&lt.test(h)?h.replace(ze,jw):h}function AQ(h){return h=mr(h),h&&zt.test(h)?h.replace(dt,"\\$&"):h}var IQ=nd(function(h,g,T){return h+(T?"-":"")+g.toLowerCase()}),kQ=nd(function(h,g,T){return h+(T?" ":"")+g.toLowerCase()}),OQ=CE("toLowerCase");function PQ(h,g,T){h=mr(h),g=Tn(g);var I=g?Vc(h):0;if(!g||I>=g)return h;var F=(g-I)/2;return Jp(Nu(F),T)+h+Jp($c(F),T)}function LQ(h,g,T){h=mr(h),g=Tn(g);var I=g?Vc(h):0;return g&&I<g?h+Jp(g-I,T):h}function NQ(h,g,T){h=mr(h),g=Tn(g);var I=g?Vc(h):0;return g&&I<g?Jp(g-I,T)+h:h}function DQ(h,g,T){return T||g==null?g=0:g&&(g=+g),Yw(mr(h).replace(Gt,""),g||0)}function UQ(h,g,T){return(T?Ms(h,g,T):g===n)?g=1:g=Tn(g),ed(mr(h),g)}function FQ(){var h=arguments,g=mr(h[0]);return h.length<3?g:g.replace(h[1],h[2])}var BQ=nd(function(h,g,T){return h+(T?"_":"")+g.toLowerCase()});function zQ(h,g,T){return T&&typeof T!="number"&&Ms(h,g,T)&&(g=T=n),T=T===n?Z:T>>>0,T?(h=mr(h),h&&(typeof g=="string"||g!=null&&!jI(g))&&(g=qs(g),!g&&yf(h))?Yl(ha(h),0,T):h.split(g,T)):[]}var jQ=nd(function(h,g,T){return h+(T?" ":"")+GI(g)});function HQ(h,g,T){return h=mr(h),T=T==null?0:Gl(Tn(T),0,h.length),g=qs(g),h.slice(T,T+g.length)==g}function VQ(h,g,T){var I=G.templateSettings;T&&Ms(h,g,T)&&(g=n),h=mr(h),g=jT({},g,I,IE);var F=jT({},g.imports,I.imports,IE),K=ms(F),se=Ap(F,K),fe,Se,je=0,He=g.interpolate||Te,Ye="__p += '",_t=Ip((g.escape||Te).source+"|"+He.source+"|"+(He===oe?Ar:Te).source+"|"+(g.evaluate||Te).source+"|$","g"),Ht="//# sourceURL="+(Kn.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sI+"]")+`
`;h.replace(_t,function(sn,Nn,Gn,Io,ya,ko){return Gn||(Gn=Io),Ye+=h.slice(je,ko).replace(Me,Hw),Nn&&(fe=!0,Ye+=`' +
__e(`+Nn+`) +
'`),ya&&(Se=!0,Ye+=`';
`+ya+`;
__p += '`),Gn&&(Ye+=`' +
((__t = (`+Gn+`)) == null ? '' : __t) +
'`),je=ko+sn.length,sn}),Ye+=`';
`;var rn=Kn.call(g,"variable")&&g.variable;if(!rn)Ye=`with (obj) {
`+Ye+`
}
`;else if(On.test(rn))throw new dn(o);Ye=(Se?Ye.replace(er,""):Ye).replace(ve,"$1").replace(tt,"$1;"),Ye="function("+(rn||"obj")+`) {
`+(rn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(Se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ye+`return __p
}`;var Mn=Y3(function(){return Xn(K,Ht+"return "+Ye).apply(n,se)});if(Mn.source=Ye,zI(Mn))throw Mn;return Mn}function GQ(h){return mr(h).toLowerCase()}function $Q(h){return mr(h).toUpperCase()}function WQ(h,g,T){if(h=mr(h),h&&(T||g===n))return Uw(h);if(!h||!(g=qs(g)))return h;var I=ha(h),F=ha(g),K=Fw(I,F),se=eE(I,F)+1;return Yl(I,K,se).join("")}function qQ(h,g,T){if(h=mr(h),h&&(T||g===n))return h.slice(0,C_(h)+1);if(!h||!(g=qs(g)))return h;var I=ha(h),F=eE(I,ha(g))+1;return Yl(I,0,F).join("")}function XQ(h,g,T){if(h=mr(h),h&&(T||g===n))return h.replace(Gt,"");if(!h||!(g=qs(g)))return h;var I=ha(h),F=Fw(I,ha(g));return Yl(I,F).join("")}function KQ(h,g){var T=B,I=ee;if(si(g)){var F="separator"in g?g.separator:F;T="length"in g?Tn(g.length):T,I="omission"in g?qs(g.omission):I}h=mr(h);var K=h.length;if(yf(h)){var se=ha(h);K=se.length}if(T>=K)return h;var fe=T-Vc(I);if(fe<1)return I;var Se=se?Yl(se,0,fe).join(""):h.slice(0,fe);if(F===n)return Se+I;if(se&&(fe+=Se.length-fe),jI(F)){if(h.slice(fe).search(F)){var je,He=Se;for(F.global||(F=Ip(F.source,mr(Ir.exec(F))+"g")),F.lastIndex=0;je=F.exec(He);)var Ye=je.index;Se=Se.slice(0,Ye===n?fe:Ye)}}else if(h.indexOf(qs(F),fe)!=fe){var _t=Se.lastIndexOf(F);_t>-1&&(Se=Se.slice(0,_t))}return Se+I}function YQ(h){return h=mr(h),h&&ht.test(h)?h.replace(De,Vw):h}var ZQ=nd(function(h,g,T){return h+(T?" ":"")+g.toUpperCase()}),GI=CE("toUpperCase");function K3(h,g,T){return h=mr(h),g=T?n:g,g===n?hI(h)?_I(h):cI(h):h.match(g)||[]}var Y3=wn(function(h,g){try{return Ts(h,n,g)}catch(T){return zI(T)?T:new dn(T)}}),JQ=ul(function(h,g){return os(g,function(T){T=Co(T),nl(h,T,qe(h[T],h))}),h});function QQ(h){var g=h==null?0:h.length,T=en();return h=g?kr(h,function(I){if(typeof I[1]!="function")throw new za(a);return[T(I[0]),I[1]]}):[],wn(function(I){for(var F=-1;++F<g;){var K=h[F];if(Ts(K[0],this,I))return Ts(K[1],this,I)}})}function eee(h){return rT(Ws(h,p))}function $I(h){return function(){return h}}function tee(h,g){return h==null||h!==h?g:h}var nee=sv(),ree=sv(!0);function Qa(h){return h}function WI(h){return Lf(typeof h=="function"?h:Ws(h,p))}function iee(h){return X_(Ws(h,p))}function see(h,g){return Gr(h,Ws(g,p))}var aee=wn(function(h,g){return function(T){return $a(T,h,g)}}),oee=wn(function(h,g){return function(T){return $a(h,T,g)}});function qI(h,g,T){var I=ms(g),F=Of(g,I);T==null&&!(si(g)&&(F.length||!I.length))&&(T=g,g=h,h=this,F=Of(g,ms(g)));var K=!(si(T)&&"chain"in T)||!!T.chain,se=ud(h);return os(F,function(fe){var Se=g[fe];h[fe]=Se,se&&(h.prototype[fe]=function(){var je=this.__chain__;if(K||je){var He=h(this.__wrapped__),Ye=He.__actions__=Cs(this.__actions__);return Ye.push({func:Se,args:arguments,thisArg:h}),He.__chain__=je,He}return Se.apply(h,Pu([this.value()],arguments))})}),h}function lee(){return Vr._===this&&(Vr._=Ww),this}function XI(){}function uee(h){return h=Tn(h),wn(function(g){return K_(g,h)})}var cee=av(kr),dee=av(W0),fee=av(K0);function Z3(h){return Ct(h)?Z0(Co(h)):Xr(h)}function hee(h){return function(g){return h==null?n:$l(h,g)}}var pee=ME(),mee=ME(!0);function KI(){return[]}function YI(){return!1}function gee(){return{}}function _ee(){return""}function vee(){return!0}function yee(h,g){if(h=Tn(h),h<1||h>X)return[];var T=Z,I=ls(h,Z);g=en(g),h-=Z;for(var F=Q0(I,g);++T<h;)g(T);return F}function Eee(h){return gn(h)?kr(h,Co):Ao(h)?[h]:Cs(zE(mr(h)))}function See(h){var g=++bf;return mr(h)+g}var bee=Zp(function(h,g){return h+g},0),wee=$i("ceil"),Tee=Zp(function(h,g){return h/g},1),xee=$i("floor");function Cee(h){return h&&h.length?Zc(h,Qa,Hu):n}function Ree(h,g){return h&&h.length?Zc(h,en(g,2),Hu):n}function Mee(h){return Nw(h,Qa)}function Aee(h,g){return Nw(h,en(g,2))}function Iee(h){return h&&h.length?Zc(h,Qa,Vu):n}function kee(h,g){return h&&h.length?Zc(h,en(g,2),Vu):n}var Oee=Zp(function(h,g){return h*g},1),Pee=$i("round"),Lee=Zp(function(h,g){return h-g},0);function Nee(h){return h&&h.length?J0(h,Qa):0}function Dee(h,g){return h&&h.length?J0(h,en(g,2)):0}return G.after=Ae,G.ary=Ke,G.assign=$J,G.assignIn=H3,G.assignInWith=jT,G.assignWith=WJ,G.at=qJ,G.before=Je,G.bind=qe,G.bindAll=JQ,G.bindKey=bt,G.castArray=gJ,G.chain=bv,G.chunk=pv,G.compact=jE,G.concat=Ka,G.cond=QQ,G.conforms=eee,G.constant=$I,G.countBy=LT,G.create=XJ,G.curry=It,G.curryRight=Lt,G.debounce=ti,G.defaults=KJ,G.defaultsDeep=YJ,G.defer=be,G.delay=me,G.difference=Vn,G.differenceBy=Bi,G.differenceWith=mi,G.drop=Xi,G.dropRight=va,G.dropRightWhile=$f,G.dropWhile=Si,G.fill=am,G.filter=xv,G.flatMap=QE,G.flatMapDeep=UT,G.flatMapDepth=eS,G.flatten=mv,G.flattenDeep=lm,G.flattenDepth=Xs,G.flip=we,G.flow=nee,G.flowRight=ree,G.fromPairs=HE,G.functions=rQ,G.functionsIn=iQ,G.groupBy=Mv,G.initial=gv,G.intersection=VE,G.intersectionBy=Xu,G.intersectionWith=_v,G.invert=aQ,G.invertBy=oQ,G.invokeMap=UI,G.iteratee=WI,G.keyBy=Av,G.keys=ms,G.keysIn=Ja,G.map=Iv,G.mapKeys=uQ,G.mapValues=cQ,G.matches=iee,G.matchesProperty=see,G.memoize=it,G.merge=dQ,G.mergeWith=V3,G.method=aee,G.methodOf=oee,G.mixin=qI,G.negate=Nt,G.nthArg=uee,G.omit=fQ,G.omitBy=hQ,G.once=Jt,G.orderBy=fm,G.over=cee,G.overArgs=Qt,G.overEvery=dee,G.overSome=fee,G.partial=nn,G.partialRight=bi,G.partition=FI,G.pick=pQ,G.pickBy=G3,G.property=Z3,G.propertyOf=hee,G.pull=vv,G.pullAll=cm,G.pullAllBy=Is,G.pullAllWith=Yu,G.pullAt=Ro,G.range=pee,G.rangeRight=mee,G.rearg=Yn,G.reject=d,G.remove=Ks,G.rest=Ju,G.reverse=yv,G.sampleSize=b,G.set=gQ,G.setWith=_Q,G.shuffle=x,G.slice=$E,G.sortBy=re,G.sortedUniq=XE,G.sortedUniqBy=ad,G.split=zQ,G.spread=BI,G.tail=RT,G.take=MT,G.takeRight=KE,G.takeRightWhile=Ev,G.takeWhile=RI,G.tap=LI,G.throttle=hJ,G.thru=Mo,G.toArray=B3,G.toPairs=$3,G.toPairsIn=W3,G.toPath=Eee,G.toPlainObject=j3,G.transform=vQ,G.unary=pJ,G.union=MI,G.unionBy=AT,G.unionWith=IT,G.uniq=od,G.uniqBy=AI,G.uniqWith=Wf,G.unset=yQ,G.unzip=Sv,G.unzipWith=Kr,G.update=EQ,G.updateWith=SQ,G.values=Pv,G.valuesIn=bQ,G.without=II,G.words=K3,G.wrap=mJ,G.xor=kT,G.xorBy=kI,G.xorWith=OI,G.zip=OT,G.zipObject=PT,G.zipObjectDeep=PI,G.zipWith=Ya,G.entries=$3,G.entriesIn=W3,G.extend=H3,G.extendWith=jT,qI(G,G),G.add=bee,G.attempt=Y3,G.camelCase=CQ,G.capitalize=q3,G.ceil=wee,G.clamp=wQ,G.clone=_J,G.cloneDeep=yJ,G.cloneDeepWith=EJ,G.cloneWith=vJ,G.conformsTo=SJ,G.deburr=X3,G.defaultTo=tee,G.divide=Tee,G.endsWith=RQ,G.eq=eu,G.escape=MQ,G.escapeRegExp=AQ,G.every=NT,G.find=Cv,G.findIndex=qu,G.findKey=ZJ,G.findLast=DT,G.findLastIndex=om,G.findLastKey=JJ,G.floor=xee,G.forEach=dm,G.forEachRight=Rv,G.forIn=QJ,G.forInRight=eQ,G.forOwn=tQ,G.forOwnRight=nQ,G.get=HI,G.gt=bJ,G.gte=wJ,G.has=sQ,G.hasIn=VI,G.head=id,G.identity=Qa,G.includes=FT,G.indexOf=Ql,G.inRange=TQ,G.invoke=lQ,G.isArguments=hm,G.isArray=gn,G.isArrayBuffer=TJ,G.isArrayLike=Za,G.isArrayLikeObject=wi,G.isBoolean=xJ,G.isBuffer=qf,G.isDate=CJ,G.isElement=RJ,G.isEmpty=MJ,G.isEqual=AJ,G.isEqualWith=IJ,G.isError=zI,G.isFinite=kJ,G.isFunction=ud,G.isInteger=N3,G.isLength=BT,G.isMap=D3,G.isMatch=OJ,G.isMatchWith=PJ,G.isNaN=LJ,G.isNative=NJ,G.isNil=UJ,G.isNull=DJ,G.isNumber=U3,G.isObject=si,G.isObjectLike=gi,G.isPlainObject=tS,G.isRegExp=jI,G.isSafeInteger=FJ,G.isSet=F3,G.isString=zT,G.isSymbol=Ao,G.isTypedArray=Ov,G.isUndefined=BJ,G.isWeakMap=zJ,G.isWeakSet=jJ,G.join=Ku,G.kebabCase=IQ,G.last=As,G.lastIndexOf=um,G.lowerCase=kQ,G.lowerFirst=OQ,G.lt=HJ,G.lte=VJ,G.max=Cee,G.maxBy=Ree,G.mean=Mee,G.meanBy=Aee,G.min=Iee,G.minBy=kee,G.stubArray=KI,G.stubFalse=YI,G.stubObject=gee,G.stubString=_ee,G.stubTrue=vee,G.multiply=Oee,G.nth=GE,G.noConflict=lee,G.noop=XI,G.now=de,G.pad=PQ,G.padEnd=LQ,G.padStart=NQ,G.parseInt=DQ,G.random=xQ,G.reduce=kv,G.reduceRight=u,G.repeat=UQ,G.replace=FQ,G.result=mQ,G.round=Pee,G.runInContext=ye,G.sample=v,G.size=A,G.snakeCase=BQ,G.some=z,G.sortedIndex=WE,G.sortedIndexBy=CI,G.sortedIndexOf=Zu,G.sortedLastIndex=CT,G.sortedLastIndexBy=qE,G.sortedLastIndexOf=sd,G.startCase=jQ,G.startsWith=HQ,G.subtract=Lee,G.sum=Nee,G.sumBy=Dee,G.template=VQ,G.times=yee,G.toFinite=cd,G.toInteger=Tn,G.toLength=z3,G.toLower=GQ,G.toNumber=dl,G.toSafeInteger=GJ,G.toString=mr,G.toUpper=$Q,G.trim=WQ,G.trimEnd=qQ,G.trimStart=XQ,G.truncate=KQ,G.unescape=YQ,G.uniqueId=See,G.upperCase=ZQ,G.upperFirst=GI,G.each=dm,G.eachRight=Rv,G.first=id,qI(G,function(){var h={};return ga(G,function(g,T){Kn.call(G.prototype,T)||(h[T]=g)}),h}(),{chain:!1}),G.VERSION=r,os(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){G[h].placeholder=G}),os(["drop","take"],function(h,g){mn.prototype[h]=function(T){T=T===n?1:pi(Tn(T),0);var I=this.__filtered__&&!g?new mn(this):this.clone();return I.__filtered__?I.__takeCount__=ls(T,I.__takeCount__):I.__views__.push({size:ls(T,Z),type:h+(I.__dir__<0?"Right":"")}),I},mn.prototype[h+"Right"]=function(T){return this.reverse()[h](T).reverse()}}),os(["filter","map","takeWhile"],function(h,g){var T=g+1,I=T==H||T==W;mn.prototype[h]=function(F){var K=this.clone();return K.__iteratees__.push({iteratee:en(F,3),type:T}),K.__filtered__=K.__filtered__||I,K}}),os(["head","last"],function(h,g){var T="take"+(g?"Right":"");mn.prototype[h]=function(){return this[T](1).value()[0]}}),os(["initial","tail"],function(h,g){var T="drop"+(g?"":"Right");mn.prototype[h]=function(){return this.__filtered__?new mn(this):this[T](1)}}),mn.prototype.compact=function(){return this.filter(Qa)},mn.prototype.find=function(h){return this.filter(h).head()},mn.prototype.findLast=function(h){return this.reverse().find(h)},mn.prototype.invokeMap=wn(function(h,g){return typeof h=="function"?new mn(this):this.map(function(T){return $a(T,h,g)})}),mn.prototype.reject=function(h){return this.filter(Nt(en(h)))},mn.prototype.slice=function(h,g){h=Tn(h);var T=this;return T.__filtered__&&(h>0||g<0)?new mn(T):(h<0?T=T.takeRight(-h):h&&(T=T.drop(h)),g!==n&&(g=Tn(g),T=g<0?T.dropRight(-g):T.take(g-h)),T)},mn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},mn.prototype.toArray=function(){return this.take(Z)},ga(mn.prototype,function(h,g){var T=/^(?:filter|find|map|reject)|While$/.test(g),I=/^(?:head|last)$/.test(g),F=G[I?"take"+(g=="last"?"Right":""):g],K=I||/^find/.test(g);F&&(G.prototype[g]=function(){var se=this.__wrapped__,fe=I?[1]:arguments,Se=se instanceof mn,je=fe[0],He=Se||gn(se),Ye=function(Nn){var Gn=F.apply(G,Pu([Nn],fe));return I&&_t?Gn[0]:Gn};He&&T&&typeof je=="function"&&je.length!=1&&(Se=He=!1);var _t=this.__chain__,Ht=!!this.__actions__.length,rn=K&&!_t,Mn=Se&&!Ht;if(!K&&He){se=Mn?se:new mn(this);var sn=h.apply(se,fe);return sn.__actions__.push({func:Mo,args:[Ye],thisArg:n}),new us(sn,_t)}return rn&&Mn?h.apply(this,fe):(sn=this.thru(Ye),rn?I?sn.value()[0]:sn.value():sn)})}),os(["pop","push","shift","sort","splice","unshift"],function(h){var g=zl[h],T=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",I=/^(?:pop|shift)$/.test(h);G.prototype[h]=function(){var F=arguments;if(I&&!this.__chain__){var K=this.value();return g.apply(gn(K)?K:[],F)}return this[T](function(se){return g.apply(gn(se)?se:[],F)})}}),ga(mn.prototype,function(h,g){var T=G[g];if(T){var I=T.name+"";Kn.call(Cf,I)||(Cf[I]=[]),Cf[I].push({name:g,func:T})}}),Cf[jf(n,w).name]=[{name:"wrapper",func:n}],mn.prototype.clone=U_,mn.prototype.reverse=oE,mn.prototype.value=Af,G.prototype.at=wv,G.prototype.chain=ld,G.prototype.commit=Tv,G.prototype.next=YE,G.prototype.plant=NI,G.prototype.reverse=JE,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=DI,G.prototype.first=G.prototype.head,Hl&&(G.prototype[Hl]=ZE),G},Ef=vI();Yo?((Yo.exports=Ef)._=Ef,Mp._=Ef):Vr._=Ef}).call(ose)}(QS,QS.exports)),QS.exports}var XU=lse();const gz=typeof document<"u"?Fe.useLayoutEffect:()=>{};function use(t){const e=P.useRef(null);return gz(()=>{e.current=t},[t]),P.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const mp=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},Jm=t=>t&&"window"in t&&t.window===t?t:mp(t).defaultView||window;function cse(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&typeof t.nodeType=="number"}function dse(t){return cse(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in t}let fse=!1;function QL(){return fse}function _z(t,e){if(!QL())return e&&t?t.contains(e):!1;if(!t||!e)return!1;let n=e;for(;n!==null;){if(n===t)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:dse(n)?n=n.host:n=n.parentNode}return!1}const jO=(t=document)=>{var e;if(!QL())return t.activeElement;let n=t.activeElement;for(;n&&"shadowRoot"in n&&(!((e=n.shadowRoot)===null||e===void 0)&&e.activeElement);)n=n.shadowRoot.activeElement;return n};function vz(t){return QL()&&t.target.shadowRoot&&t.composedPath?t.composedPath()[0]:t.target}function yz(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=yz(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function di(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=yz(t))&&(r&&(r+=" "),r+=e);return r}function hse(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function pse(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Ez(t){let e=null;return()=>(e==null&&(e=t()),e)}const mse=Ez(function(){return pse(/^Mac/i)}),gse=Ez(function(){return hse(/Android/i)});function Sz(){let t=P.useRef(new Map),e=P.useCallback((i,s,a,o)=>{let l=o!=null&&o.once?(...c)=>{t.current.delete(a),a(...c)}:a;t.current.set(a,{type:s,eventTarget:i,fn:l,options:o}),i.addEventListener(s,l,o)},[]),n=P.useCallback((i,s,a,o)=>{var l;let c=((l=t.current.get(a))===null||l===void 0?void 0:l.fn)||a;i.removeEventListener(s,c,o),t.current.delete(a)},[]),r=P.useCallback(()=>{t.current.forEach((i,s)=>{n(i.eventTarget,i.type,s,i.options)})},[n]);return P.useEffect(()=>r,[r]),{addGlobalListener:e,removeGlobalListener:n,removeAllGlobalListeners:r}}function _se(t){return t.mozInputSource===0&&t.isTrusted?!0:gse()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}var o2={exports:{}},eo={},l2={exports:{}},u2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KU;function vse(){return KU||(KU=1,function(t){function e(X,ie){var pe=X.length;X.push(ie);e:for(;0<pe;){var Z=pe-1>>>1,le=X[Z];if(0<i(le,ie))X[Z]=ie,X[pe]=le,pe=Z;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ie=X[0],pe=X.pop();if(pe!==ie){X[0]=pe;e:for(var Z=0,le=X.length,ae=le>>>1;Z<ae;){var Ee=2*(Z+1)-1,ke=X[Ee],$e=Ee+1,Le=X[$e];if(0>i(ke,pe))$e<le&&0>i(Le,ke)?(X[Z]=Le,X[$e]=pe,Z=$e):(X[Z]=ke,X[Ee]=pe,Z=Ee);else if($e<le&&0>i(Le,pe))X[Z]=Le,X[$e]=pe,Z=$e;else break e}}return ie}function i(X,ie){var pe=X.sortIndex-ie.sortIndex;return pe!==0?pe:X.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],f=1,p=null,m=3,_=!1,y=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(X){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=X)r(c),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(c)}}function k(X){if(E=!1,C(X),!y)if(n(l)!==null)y=!0,W(M);else{var ie=n(c);ie!==null&&J(k,ie.startTime-X)}}function M(X,ie){y=!1,E&&(E=!1,w(D),D=-1),_=!0;var pe=m;try{for(C(ie),p=n(l);p!==null&&(!(p.expirationTime>ie)||X&&!ee());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,m=p.priorityLevel;var le=Z(p.expirationTime<=ie);ie=t.unstable_now(),typeof le=="function"?p.callback=le:p===n(l)&&r(l),C(ie)}else r(l);p=n(l)}if(p!==null)var ae=!0;else{var Ee=n(c);Ee!==null&&J(k,Ee.startTime-ie),ae=!1}return ae}finally{p=null,m=pe,_=!1}}var N=!1,O=null,D=-1,L=5,B=-1;function ee(){return!(t.unstable_now()-B<L)}function te(){if(O!==null){var X=t.unstable_now();B=X;var ie=!0;try{ie=O(!0,X)}finally{ie?ne():(N=!1,O=null)}}else N=!1}var ne;if(typeof R=="function")ne=function(){R(te)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=te,ne=function(){V.postMessage(null)}}else ne=function(){S(te,0)};function W(X){O=X,N||(N=!0,ne())}function J(X,ie){D=S(function(){X(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,W(M))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var pe=m;m=ie;try{return X()}finally{m=pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ie){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var pe=m;m=X;try{return ie()}finally{m=pe}},t.unstable_scheduleCallback=function(X,ie,pe){var Z=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Z+pe:Z):pe=Z,X){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=pe+le,X={id:f++,callback:ie,priorityLevel:X,startTime:pe,expirationTime:le,sortIndex:-1},pe>Z?(X.sortIndex=pe,e(c,X),n(l)===null&&X===n(c)&&(E?(w(D),D=-1):E=!0,J(k,pe-Z))):(X.sortIndex=le,e(l,X),y||_||(y=!0,W(M))),X},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(X){var ie=m;return function(){var pe=m;m=ie;try{return X.apply(this,arguments)}finally{m=pe}}}}(u2)),u2}var YU;function yse(){return YU||(YU=1,l2.exports=vse()),l2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZU;function Ese(){if(ZU)return eo;ZU=1;var t=G1(),e=yse();function n(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(u,d){a(u,d),a(u+"Capture",d)}function a(u,d){for(i[u]=d,u=0;u<d.length;u++)r.add(d[u])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(u){return l.call(p,u)?!0:l.call(f,u)?!1:c.test(u)?p[u]=!0:(f[u]=!0,!1)}function _(u,d,v,b){if(v!==null&&v.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:v!==null?!v.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function y(u,d,v,b){if(d===null||typeof d>"u"||_(u,d,v,b))return!0;if(b)return!1;if(v!==null)switch(v.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function E(u,d,v,b,x,A,z){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=x,this.mustUseProperty=v,this.propertyName=u,this.type=d,this.sanitizeURL=A,this.removeEmptyString=z}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){S[u]=new E(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];S[d]=new E(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){S[u]=new E(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){S[u]=new E(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){S[u]=new E(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){S[u]=new E(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){S[u]=new E(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){S[u]=new E(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){S[u]=new E(u,5,!1,u.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function R(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(w,R);S[d]=new E(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(w,R);S[d]=new E(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(w,R);S[d]=new E(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){S[u]=new E(u,1,!1,u.toLowerCase(),null,!1,!1)}),S.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){S[u]=new E(u,1,!1,u.toLowerCase(),null,!0,!0)});function C(u,d,v,b){var x=S.hasOwnProperty(d)?S[d]:null;(x!==null?x.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,v,x,b)&&(v=null),b||x===null?m(d)&&(v===null?u.removeAttribute(d):u.setAttribute(d,""+v)):x.mustUseProperty?u[x.propertyName]=v===null?x.type===3?!1:"":v:(d=x.attributeName,b=x.attributeNamespace,v===null?u.removeAttribute(d):(x=x.type,v=x===3||x===4&&v===!0?"":""+v,b?u.setAttributeNS(b,d,v):u.setAttribute(d,v))))}var k=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ee=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),X=Symbol.iterator;function ie(u){return u===null||typeof u!="object"?null:(u=X&&u[X]||u["@@iterator"],typeof u=="function"?u:null)}var pe=Object.assign,Z;function le(u){if(Z===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);Z=d&&d[1]||""}return`
`+Z+u}var ae=!1;function Ee(u,d){if(!u||ae)return"";ae=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ae){var b=Ae}Reflect.construct(u,[],d)}else{try{d.call()}catch(Ae){b=Ae}u.call(d.prototype)}else{try{throw Error()}catch(Ae){b=Ae}u()}}catch(Ae){if(Ae&&b&&typeof Ae.stack=="string"){for(var x=Ae.stack.split(`
`),A=b.stack.split(`
`),z=x.length-1,re=A.length-1;1<=z&&0<=re&&x[z]!==A[re];)re--;for(;1<=z&&0<=re;z--,re--)if(x[z]!==A[re]){if(z!==1||re!==1)do if(z--,re--,0>re||x[z]!==A[re]){var de=`
`+x[z].replace(" at new "," at ");return u.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",u.displayName)),de}while(1<=z&&0<=re);break}}}finally{ae=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?le(u):""}function ke(u){switch(u.tag){case 5:return le(u.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 2:case 15:return u=Ee(u.type,!1),u;case 11:return u=Ee(u.type.render,!1),u;case 1:return u=Ee(u.type,!0),u;default:return""}}function $e(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case O:return"Fragment";case N:return"Portal";case L:return"Profiler";case D:return"StrictMode";case ne:return"Suspense";case H:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case ee:return(u.displayName||"Context")+".Consumer";case B:return(u._context.displayName||"Context")+".Provider";case te:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case V:return d=u.displayName||null,d!==null?d:$e(u.type)||"Memo";case W:d=u._payload,u=u._init;try{return $e(u(d))}catch{}}return null}function Le(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(d);case 8:return d===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function We(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ot(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Mt(u){var d=ot(u)?"checked":"value",v=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),b=""+u[d];if(!u.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var x=v.get,A=v.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return x.call(this)},set:function(z){b=""+z,A.call(this,z)}}),Object.defineProperty(u,d,{enumerable:v.enumerable}),{getValue:function(){return b},setValue:function(z){b=""+z},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function Wt(u){u._valueTracker||(u._valueTracker=Mt(u))}function ir(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var v=d.getValue(),b="";return u&&(b=ot(u)?u.checked?"true":"false":u.value),u=b,u!==v?(d.setValue(u),!0):!1}function ue(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function vn(u,d){var v=d.checked;return pe({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??u._wrapperState.initialChecked})}function pn(u,d){var v=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;v=We(d.value!=null?d.value:v),u._wrapperState={initialChecked:b,initialValue:v,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Cn(u,d){d=d.checked,d!=null&&C(u,"checked",d,!1)}function ut(u,d){Cn(u,d);var v=We(d.value),b=d.type;if(v!=null)b==="number"?(v===0&&u.value===""||u.value!=v)&&(u.value=""+v):u.value!==""+v&&(u.value=""+v);else if(b==="submit"||b==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?Dt(u,d.type,v):d.hasOwnProperty("defaultValue")&&Dt(u,d.type,We(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function Qn(u,d,v){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,v||d===u.value||(u.value=d),u.defaultValue=d}v=u.name,v!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,v!==""&&(u.name=v)}function Dt(u,d,v){(d!=="number"||ue(u.ownerDocument)!==u)&&(v==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+v&&(u.defaultValue=""+v))}var Ie=Array.isArray;function Y(u,d,v,b){if(u=u.options,d){d={};for(var x=0;x<v.length;x++)d["$"+v[x]]=!0;for(v=0;v<u.length;v++)x=d.hasOwnProperty("$"+u[v].value),u[v].selected!==x&&(u[v].selected=x),x&&b&&(u[v].defaultSelected=!0)}else{for(v=""+We(v),d=null,x=0;x<u.length;x++){if(u[x].value===v){u[x].selected=!0,b&&(u[x].defaultSelected=!0);return}d!==null||u[x].disabled||(d=u[x])}d!==null&&(d.selected=!0)}}function j(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return pe({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function _e(u,d){var v=d.value;if(v==null){if(v=d.children,d=d.defaultValue,v!=null){if(d!=null)throw Error(n(92));if(Ie(v)){if(1<v.length)throw Error(n(93));v=v[0]}d=v}d==null&&(d=""),v=d}u._wrapperState={initialValue:We(v)}}function Ue(u,d){var v=We(d.value),b=We(d.defaultValue);v!=null&&(v=""+v,v!==u.value&&(u.value=v),d.defaultValue==null&&u.defaultValue!==v&&(u.defaultValue=v)),b!=null&&(u.defaultValue=""+b)}function Be(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function Oe(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?Oe(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var st,yt=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,v,b,x){MSApp.execUnsafeLocalFunction(function(){return u(d,v,b,x)})}:u}(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(st=st||document.createElement("div"),st.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=st.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function Ut(u,d){if(d){var v=u.firstChild;if(v&&v===u.lastChild&&v.nodeType===3){v.nodeValue=d;return}}u.textContent=d}var Qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];Object.keys(Qe).forEach(function(u){gt.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),Qe[d]=Qe[u]})});function cn(u,d,v){return d==null||typeof d=="boolean"||d===""?"":v||typeof d!="number"||d===0||Qe.hasOwnProperty(u)&&Qe[u]?(""+d).trim():d+"px"}function Kt(u,d){u=u.style;for(var v in d)if(d.hasOwnProperty(v)){var b=v.indexOf("--")===0,x=cn(v,d[v],b);v==="float"&&(v="cssFloat"),b?u.setProperty(v,x):u[v]=x}}var wt=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yt(u,d){if(d){if(wt[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function an(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var er=null;function ve(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var tt=null,De=null,ze=null;function ht(u){if(u=us(u)){if(typeof tt!="function")throw Error(n(280));var d=u.stateNode;d&&(d=U_(d),tt(u.stateNode,u.type,d))}}function lt(u){De?ze?ze.push(u):ze=[u]:De=u}function Rn(){if(De){var u=De,d=ze;if(ze=De=null,ht(u),d)for(u=0;u<d.length;u++)ht(d[u])}}function wr(u,d){return u(d)}function oe(){}var he=!1;function Ce(u,d,v){if(he)return u(d,v);he=!0;try{return wr(u,d,v)}finally{he=!1,(De!==null||ze!==null)&&(oe(),Rn())}}function Ve(u,d){var v=u.stateNode;if(v===null)return null;var b=U_(v);if(b===null)return null;v=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(u=u.type,b=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!b;break e;default:u=!1}if(u)return null;if(v&&typeof v!="function")throw Error(n(231,d,typeof v));return v}var dt=!1;if(o)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){dt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{dt=!1}function Gt(u,d,v,b,x,A,z,re,de){var Ae=Array.prototype.slice.call(arguments,3);try{d.apply(v,Ae)}catch(Ke){this.onError(Ke)}}var At=!1,Ft=null,mt=!1,Bt=null,qt={onError:function(u){At=!0,Ft=u}};function On(u,d,v,b,x,A,z,re,de){At=!1,Ft=null,Gt.apply(qt,arguments)}function Tr(u,d,v,b,x,A,z,re,de){if(On.apply(this,arguments),At){if(At){var Ae=Ft;At=!1,Ft=null}else throw Error(n(198));mt||(mt=!0,Bt=Ae)}}function Ar(u){var d=u,v=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(v=d.return),u=d.return;while(u)}return d.tag===3?v:null}function Ir(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function xr(u){if(Ar(u)!==u)throw Error(n(188))}function Wr(u){var d=u.alternate;if(!d){if(d=Ar(u),d===null)throw Error(n(188));return d!==u?null:u}for(var v=u,b=d;;){var x=v.return;if(x===null)break;var A=x.alternate;if(A===null){if(b=x.return,b!==null){v=b;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===v)return xr(x),u;if(A===b)return xr(x),d;A=A.sibling}throw Error(n(188))}if(v.return!==b.return)v=x,b=A;else{for(var z=!1,re=x.child;re;){if(re===v){z=!0,v=x,b=A;break}if(re===b){z=!0,b=x,v=A;break}re=re.sibling}if(!z){for(re=A.child;re;){if(re===v){z=!0,v=A,b=x;break}if(re===b){z=!0,b=A,v=x;break}re=re.sibling}if(!z)throw Error(n(189))}}if(v.alternate!==b)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?u:d}function yo(u){return u=Wr(u),u!==null?Ko(u):null}function Ko(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=Ko(u);if(d!==null)return d;u=u.sibling}return null}var $=e.unstable_scheduleCallback,ge=e.unstable_cancelCallback,Te=e.unstable_shouldYield,Me=e.unstable_requestPaint,ce=e.unstable_now,Xe=e.unstable_getCurrentPriorityLevel,pt=e.unstable_ImmediatePriority,Ze=e.unstable_UserBlockingPriority,ct=e.unstable_NormalPriority,Zt=e.unstable_LowPriority,$t=e.unstable_IdlePriority,Tt=null,tn=null;function jn(u){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Tt,u,void 0,(u.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:Xt,tr=Math.log,lr=Math.LN2;function Xt(u){return u>>>=0,u===0?32:31-(tr(u)/lr|0)|0}var Qr=64,Fa=4194304;function Di(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function zs(u,d){var v=u.pendingLanes;if(v===0)return 0;var b=0,x=u.suspendedLanes,A=u.pingedLanes,z=v&268435455;if(z!==0){var re=z&~x;re!==0?b=Di(re):(A&=z,A!==0&&(b=Di(A)))}else z=v&~x,z!==0?b=Di(z):A!==0&&(b=Di(A));if(b===0)return 0;if(d!==0&&d!==b&&(d&x)===0&&(x=b&-b,A=d&-d,x>=A||x===16&&(A&4194240)!==0))return d;if((b&4)!==0&&(b|=v&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=b;0<d;)v=31-Hn(d),x=1<<v,b|=u[v],d&=~x;return b}function ss(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bc(u,d){for(var v=u.suspendedLanes,b=u.pingedLanes,x=u.expirationTimes,A=u.pendingLanes;0<A;){var z=31-Hn(A),re=1<<z,de=x[z];de===-1?((re&v)===0||(re&b)!==0)&&(x[z]=ss(re,d)):de<=d&&(u.expiredLanes|=re),A&=~re}}function ur(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function as(){var u=Qr;return Qr<<=1,(Qr&4194240)===0&&(Qr=64),u}function Ui(u){for(var d=[],v=0;31>v;v++)d.push(u);return d}function qr(u,d,v){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-Hn(d),u[d]=v}function js(u,d){var v=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var b=u.eventTimes;for(u=u.expirationTimes;0<v;){var x=31-Hn(v),A=1<<x;d[x]=0,b[x]=-1,u[x]=-1,v&=~A}}function Fl(u,d){var v=u.entangledLanes|=d;for(u=u.entanglements;v;){var b=31-Hn(v),x=1<<b;x&d|u[b]&d&&(u[b]|=d),v&=~x}}var bn=0;function zc(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var B0,h_,Cw,z0,j0,p_=!1,Cp=[],Mu=null,Au=null,Iu=null,hf=new Map,Rp=new Map,ku=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rw(u,d){switch(u){case"focusin":case"focusout":Mu=null;break;case"dragenter":case"dragleave":Au=null;break;case"mouseover":case"mouseout":Iu=null;break;case"pointerover":case"pointerout":hf.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rp.delete(d.pointerId)}}function jc(u,d,v,b,x,A){return u===null||u.nativeEvent!==A?(u={blockedOn:d,domEventName:v,eventSystemFlags:b,nativeEvent:A,targetContainers:[x]},d!==null&&(d=us(d),d!==null&&h_(d)),u):(u.eventSystemFlags|=b,d=u.targetContainers,x!==null&&d.indexOf(x)===-1&&d.push(x),u)}function iI(u,d,v,b,x){switch(d){case"focusin":return Mu=jc(Mu,u,d,v,b,x),!0;case"dragenter":return Au=jc(Au,u,d,v,b,x),!0;case"mouseover":return Iu=jc(Iu,u,d,v,b,x),!0;case"pointerover":var A=x.pointerId;return hf.set(A,jc(hf.get(A)||null,u,d,v,b,x)),!0;case"gotpointercapture":return A=x.pointerId,Rp.set(A,jc(Rp.get(A)||null,u,d,v,b,x)),!0}return!1}function Mw(u){var d=Qo(u.target);if(d!==null){var v=Ar(d);if(v!==null){if(d=v.tag,d===13){if(d=Ir(v),d!==null){u.blockedOn=d,j0(u.priority,function(){Cw(v)});return}}else if(d===3&&v.stateNode.current.memoizedState.isDehydrated){u.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}u.blockedOn=null}function m_(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var v=v_(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(v===null){v=u.nativeEvent;var b=new v.constructor(v.type,v);er=b,v.target.dispatchEvent(b),er=null}else return d=us(v),d!==null&&h_(d),u.blockedOn=v,!1;d.shift()}return!0}function Aw(u,d,v){m_(u)&&v.delete(d)}function sI(){p_=!1,Mu!==null&&m_(Mu)&&(Mu=null),Au!==null&&m_(Au)&&(Au=null),Iu!==null&&m_(Iu)&&(Iu=null),hf.forEach(Aw),Rp.forEach(Aw)}function cr(u,d){u.blockedOn===d&&(u.blockedOn=null,p_||(p_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sI)))}function sr(u){function d(x){return cr(x,u)}if(0<Cp.length){cr(Cp[0],u);for(var v=1;v<Cp.length;v++){var b=Cp[v];b.blockedOn===u&&(b.blockedOn=null)}}for(Mu!==null&&cr(Mu,u),Au!==null&&cr(Au,u),Iu!==null&&cr(Iu,u),hf.forEach(d),Rp.forEach(d),v=0;v<ku.length;v++)b=ku[v],b.blockedOn===u&&(b.blockedOn=null);for(;0<ku.length&&(v=ku[0],v.blockedOn===null);)Mw(v),v.blockedOn===null&&ku.shift()}var pf=k.ReactCurrentBatchConfig,g_=!0;function aI(u,d,v,b){var x=bn,A=pf.transition;pf.transition=null;try{bn=1,H0(u,d,v,b)}finally{bn=x,pf.transition=A}}function oI(u,d,v,b){var x=bn,A=pf.transition;pf.transition=null;try{bn=4,H0(u,d,v,b)}finally{bn=x,pf.transition=A}}function H0(u,d,v,b){if(g_){var x=v_(u,d,v,b);if(x===null)sE(u,d,b,__,v),Rw(u,b);else if(iI(x,u,d,v,b))b.stopPropagation();else if(Rw(u,b),d&4&&-1<rI.indexOf(u)){for(;x!==null;){var A=us(x);if(A!==null&&B0(A),A=v_(u,d,v,b),A===null&&sE(u,d,b,__,v),A===x)break;x=A}x!==null&&b.stopPropagation()}else sE(u,d,b,null,v)}}var __=null;function v_(u,d,v,b){if(__=null,u=ve(b),u=Qo(u),u!==null)if(d=Ar(u),d===null)u=null;else if(v=d.tag,v===13){if(u=Ir(d),u!==null)return u;u=null}else if(v===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return __=u,null}function Iw(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case pt:return 1;case Ze:return 4;case ct:case Zt:return 16;case $t:return 536870912;default:return 16}default:return 16}}var Vr=null,Mp=null,Yo=null;function V0(){if(Yo)return Yo;var u,d=Mp,v=d.length,b,x="value"in Vr?Vr.value:Vr.textContent,A=x.length;for(u=0;u<v&&d[u]===x[u];u++);var z=v-u;for(b=1;b<=z&&d[v-b]===x[A-b];b++);return Yo=x.slice(u,1<b?1-b:void 0)}function mf(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function ws(){return!0}function G0(){return!1}function Hs(u){function d(v,b,x,A,z){this._reactName=v,this._targetInst=x,this.type=b,this.nativeEvent=A,this.target=z,this.currentTarget=null;for(var re in u)u.hasOwnProperty(re)&&(v=u[re],this[re]=v?v(A):A[re]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ws:G0,this.isPropagationStopped=G0,this}return pe(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),d}var Hc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y_=Hs(Hc),gf=pe({},Hc,{view:0,detail:0}),kw=Hs(gf),Ts,$0,os,E_=pe({},gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y0,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==os&&(os&&u.type==="mousemove"?(Ts=u.screenX-os.screenX,$0=u.screenY-os.screenY):$0=Ts=0,os=u),Ts)},movementY:function(u){return"movementY"in u?u.movementY:$0}}),W0=Hs(E_),Ou=pe({},E_,{dataTransfer:0}),S_=Hs(Ou),q0=pe({},gf,{relatedTarget:0}),kr=Hs(q0),Pu=pe({},Hc,{animationName:0,elapsedTime:0,pseudoElement:0}),X0=Hs(Pu),lI=pe({},Hc,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),K0=Hs(lI),uI=pe({},Hc,{data:0}),Ow=Hs(uI),cI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _f(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=b_[u])?!!d[u]:!1}function Y0(){return _f}var Lw=pe({},gf,{key:function(u){if(u.key){var d=cI[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=mf(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Pw[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y0,charCode:function(u){return u.type==="keypress"?mf(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?mf(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Nw=Hs(Lw),Z0=pe({},E_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w_=Hs(Z0),Dw=pe({},gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y0}),dI=Hs(Dw),J0=pe({},Hc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=Hs(J0),fI=pe({},E_,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Uw=Hs(fI),fa=[9,13,27,32],Ap=o&&"CompositionEvent"in window,Bl=null;o&&"documentMode"in document&&(Bl=document.documentMode);var Fw=o&&"TextEvent"in window&&!Bl,eE=o&&(!Ap||Bl&&8<Bl&&11>=Bl),Bw=" ",zw=!1;function jw(u,d){switch(u){case"keyup":return fa.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hw(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var vf=!1;function yf(u,d){switch(u){case"compositionend":return Hw(d);case"keypress":return d.which!==32?null:(zw=!0,Bw);case"textInput":return u=d.data,u===Bw&&zw?null:u;default:return null}}function hI(u,d){if(vf)return u==="compositionend"||!Ap&&jw(u,d)?(u=V0(),Yo=Mp=Vr=null,vf=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return eE&&d.locale!=="ko"?null:d.data;default:return null}}var pI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T_(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!pI[u.type]:d==="textarea"}function tE(u,d,v,b){lt(b),d=P_(d,"onChange"),0<d.length&&(v=new y_("onChange","change",null,v,b),u.push({event:v,listeners:d}))}var Ba=null,Lu=null;function mI(u){Kw(u,0)}function x_(u){var d=mn(u);if(ir(d))return u}function gI(u,d){if(u==="change")return d}var Vc=!1;if(o){var ha;if(o){var C_="oninput"in document;if(!C_){var Vw=document.createElement("div");Vw.setAttribute("oninput","return;"),C_=typeof Vw.oninput=="function"}ha=C_}else ha=!1;Vc=ha&&(!document.documentMode||9<document.documentMode)}function Gw(){Ba&&(Ba.detachEvent("onpropertychange",$w),Lu=Ba=null)}function $w(u){if(u.propertyName==="value"&&x_(Lu)){var d=[];tE(d,Lu,u,ve(u)),Ce(mI,d)}}function _I(u,d,v){u==="focusin"?(Gw(),Ba=d,Lu=v,Ba.attachEvent("onpropertychange",$w)):u==="focusout"&&Gw()}function vI(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return x_(Lu)}function Ef(u,d){if(u==="click")return x_(d)}function ye(u,d){if(u==="input"||u==="change")return x_(d)}function Ne(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Re=typeof Object.is=="function"?Object.is:Ne;function St(u,d){if(Re(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var v=Object.keys(u),b=Object.keys(d);if(v.length!==b.length)return!1;for(b=0;b<v.length;b++){var x=v[b];if(!l.call(d,x)||!Re(u[x],d[x]))return!1}return!0}function dn(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Xn(u,d){var v=dn(u);u=0;for(var b;v;){if(v.nodeType===3){if(b=u+v.textContent.length,u<=d&&b>=d)return{node:v,offset:d-u};u=b}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=dn(v)}}function hi(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?hi(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function pr(){for(var u=window,d=ue();d instanceof u.HTMLIFrameElement;){try{var v=typeof d.contentWindow.location.href=="string"}catch{v=!1}if(v)u=d.contentWindow;else break;d=ue(u.document)}return d}function Ip(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function yI(u){var d=pr(),v=u.focusedElem,b=u.selectionRange;if(d!==v&&v&&v.ownerDocument&&hi(v.ownerDocument.documentElement,v)){if(b!==null&&Ip(v)){if(d=b.start,u=b.end,u===void 0&&(u=d),"selectionStart"in v)v.selectionStart=d,v.selectionEnd=Math.min(u,v.value.length);else if(u=(d=v.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var x=v.textContent.length,A=Math.min(b.start,x);b=b.end===void 0?A:Math.min(b.end,x),!u.extend&&A>b&&(x=b,b=A,A=x),x=Xn(v,A);var z=Xn(v,b);x&&z&&(u.rangeCount!==1||u.anchorNode!==x.node||u.anchorOffset!==x.offset||u.focusNode!==z.node||u.focusOffset!==z.offset)&&(d=d.createRange(),d.setStart(x.node,x.offset),u.removeAllRanges(),A>b?(u.addRange(d),u.extend(z.node,z.offset)):(d.setEnd(z.node,z.offset),u.addRange(d)))}}for(d=[],u=v;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<d.length;v++)u=d[v],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var za=o&&"documentMode"in document&&11>=document.documentMode,zl=null,nE=null,Zo=null,Sf=!1;function kp(u,d,v){var b=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Sf||zl==null||zl!==ue(b)||(b=zl,"selectionStart"in b&&Ip(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Zo&&St(Zo,b)||(Zo=b,b=P_(nE,"onSelect"),0<b.length&&(d=new y_("onSelect","select",null,d,v),u.push({event:d,listeners:b}),d.target=zl)))}function Kn(u,d){var v={};return v[u.toLowerCase()]=d.toLowerCase(),v["Webkit"+u]="webkit"+d,v["Moz"+u]="moz"+d,v}var bf={animationend:Kn("Animation","AnimationEnd"),animationiteration:Kn("Animation","AnimationIteration"),animationstart:Kn("Animation","AnimationStart"),transitionend:Kn("Transition","TransitionEnd")},R_={},Op={};o&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete bf.animationend.animation,delete bf.animationiteration.animation,delete bf.animationstart.animation),"TransitionEvent"in window||delete bf.transitionend.transition);function M_(u){if(R_[u])return R_[u];if(!bf[u])return u;var d=bf[u],v;for(v in d)if(d.hasOwnProperty(v)&&v in Op)return R_[u]=d[v];return u}var Ww=M_("animationend"),qw=M_("animationiteration"),Pp=M_("animationstart"),jl=M_("transitionend"),Lp=new Map,rE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eo(u,d){Lp.set(u,d),s(d,[u])}for(var A_=0;A_<rE.length;A_++){var I_=rE[A_],k_=I_.toLowerCase(),Xw=I_[0].toUpperCase()+I_.slice(1);Eo(k_,"on"+Xw)}Eo(Ww,"onAnimationEnd"),Eo(qw,"onAnimationIteration"),Eo(Pp,"onAnimationStart"),Eo("dblclick","onDoubleClick"),Eo("focusin","onFocus"),Eo("focusout","onBlur"),Eo(jl,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hl));function Np(u,d,v){var b=u.type||"unknown-event";u.currentTarget=v,Tr(b,d,void 0,u),u.currentTarget=null}function Kw(u,d){d=(d&4)!==0;for(var v=0;v<u.length;v++){var b=u[v],x=b.event;b=b.listeners;e:{var A=void 0;if(d)for(var z=b.length-1;0<=z;z--){var re=b[z],de=re.instance,Ae=re.currentTarget;if(re=re.listener,de!==A&&x.isPropagationStopped())break e;Np(x,re,Ae),A=de}else for(z=0;z<b.length;z++){if(re=b[z],de=re.instance,Ae=re.currentTarget,re=re.listener,de!==A&&x.isPropagationStopped())break e;Np(x,re,Ae),A=de}}}if(mt)throw u=Bt,mt=!1,Bt=null,u}function Nr(u,d){var v=d[D_];v===void 0&&(v=d[D_]=new Set);var b=u+"__bubble";v.has(b)||(O_(d,u,2,!1),v.add(b))}function iE(u,d,v){var b=0;d&&(b|=4),O_(v,u,b,d)}var $c="_reactListening"+Math.random().toString(36).slice(2);function Nu(u){if(!u[$c]){u[$c]=!0,r.forEach(function(v){v!=="selectionchange"&&(Gc.has(v)||iE(v,!1,u),iE(v,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[$c]||(d[$c]=!0,iE("selectionchange",!1,d))}}function O_(u,d,v,b){switch(Iw(d)){case 1:var x=aI;break;case 4:x=oI;break;default:x=H0}v=x.bind(null,d,v,u),x=void 0,!dt||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(x=!0),b?x!==void 0?u.addEventListener(d,v,{capture:!0,passive:x}):u.addEventListener(d,v,!0):x!==void 0?u.addEventListener(d,v,{passive:x}):u.addEventListener(d,v,!1)}function sE(u,d,v,b,x){var A=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var z=b.tag;if(z===3||z===4){var re=b.stateNode.containerInfo;if(re===x||re.nodeType===8&&re.parentNode===x)break;if(z===4)for(z=b.return;z!==null;){var de=z.tag;if((de===3||de===4)&&(de=z.stateNode.containerInfo,de===x||de.nodeType===8&&de.parentNode===x))return;z=z.return}for(;re!==null;){if(z=Qo(re),z===null)return;if(de=z.tag,de===5||de===6){b=A=z;continue e}re=re.parentNode}}b=b.return}Ce(function(){var Ae=A,Ke=ve(v),Je=[];e:{var qe=Lp.get(u);if(qe!==void 0){var bt=y_,It=u;switch(u){case"keypress":if(mf(v)===0)break e;case"keydown":case"keyup":bt=Nw;break;case"focusin":It="focus",bt=kr;break;case"focusout":It="blur",bt=kr;break;case"beforeblur":case"afterblur":bt=kr;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=S_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=dI;break;case Ww:case qw:case Pp:bt=X0;break;case jl:bt=Q0;break;case"scroll":bt=kw;break;case"wheel":bt=Uw;break;case"copy":case"cut":case"paste":bt=K0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=w_}var Lt=(d&4)!==0,ti=!Lt&&u==="scroll",be=Lt?qe!==null?qe+"Capture":null:qe;Lt=[];for(var me=Ae,we;me!==null;){we=me;var it=we.stateNode;if(we.tag===5&&it!==null&&(we=it,be!==null&&(it=Ve(me,be),it!=null&&Lt.push(wf(me,it,we)))),ti)break;me=me.return}0<Lt.length&&(qe=new bt(qe,It,null,v,Ke),Je.push({event:qe,listeners:Lt}))}}if((d&7)===0){e:{if(qe=u==="mouseover"||u==="pointerover",bt=u==="mouseout"||u==="pointerout",qe&&v!==er&&(It=v.relatedTarget||v.fromElement)&&(Qo(It)||It[pa]))break e;if((bt||qe)&&(qe=Ke.window===Ke?Ke:(qe=Ke.ownerDocument)?qe.defaultView||qe.parentWindow:window,bt?(It=v.relatedTarget||v.toElement,bt=Ae,It=It?Qo(It):null,It!==null&&(ti=Ar(It),It!==ti||It.tag!==5&&It.tag!==6)&&(It=null)):(bt=null,It=Ae),bt!==It)){if(Lt=W0,it="onMouseLeave",be="onMouseEnter",me="mouse",(u==="pointerout"||u==="pointerover")&&(Lt=w_,it="onPointerLeave",be="onPointerEnter",me="pointer"),ti=bt==null?qe:mn(bt),we=It==null?qe:mn(It),qe=new Lt(it,me+"leave",bt,v,Ke),qe.target=ti,qe.relatedTarget=we,it=null,Qo(Ke)===Ae&&(Lt=new Lt(be,me+"enter",It,v,Ke),Lt.target=we,Lt.relatedTarget=ti,it=Lt),ti=it,bt&&It)t:{for(Lt=bt,be=It,me=0,we=Lt;we;we=Tf(we))me++;for(we=0,it=be;it;it=Tf(it))we++;for(;0<me-we;)Lt=Tf(Lt),me--;for(;0<we-me;)be=Tf(be),we--;for(;me--;){if(Lt===be||be!==null&&Lt===be.alternate)break t;Lt=Tf(Lt),be=Tf(be)}Lt=null}else Lt=null;bt!==null&&pi(Je,qe,bt,Lt,!1),It!==null&&ti!==null&&pi(Je,ti,It,Lt,!0)}}e:{if(qe=Ae?mn(Ae):window,bt=qe.nodeName&&qe.nodeName.toLowerCase(),bt==="select"||bt==="input"&&qe.type==="file")var Nt=gI;else if(T_(qe))if(Vc)Nt=ye;else{Nt=vI;var Jt=_I}else(bt=qe.nodeName)&&bt.toLowerCase()==="input"&&(qe.type==="checkbox"||qe.type==="radio")&&(Nt=Ef);if(Nt&&(Nt=Nt(u,Ae))){tE(Je,Nt,v,Ke);break e}Jt&&Jt(u,qe,Ae),u==="focusout"&&(Jt=qe._wrapperState)&&Jt.controlled&&qe.type==="number"&&Dt(qe,"number",qe.value)}switch(Jt=Ae?mn(Ae):window,u){case"focusin":(T_(Jt)||Jt.contentEditable==="true")&&(zl=Jt,nE=Ae,Zo=null);break;case"focusout":Zo=nE=zl=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,kp(Je,v,Ke);break;case"selectionchange":if(za)break;case"keydown":case"keyup":kp(Je,v,Ke)}var Qt;if(Ap)e:{switch(u){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else vf?jw(u,v)&&(nn="onCompositionEnd"):u==="keydown"&&v.keyCode===229&&(nn="onCompositionStart");nn&&(eE&&v.locale!=="ko"&&(vf||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&vf&&(Qt=V0()):(Vr=Ke,Mp="value"in Vr?Vr.value:Vr.textContent,vf=!0)),Jt=P_(Ae,nn),0<Jt.length&&(nn=new Ow(nn,u,null,v,Ke),Je.push({event:nn,listeners:Jt}),Qt?nn.data=Qt:(Qt=Hw(v),Qt!==null&&(nn.data=Qt)))),(Qt=Fw?yf(u,v):hI(u,v))&&(Ae=P_(Ae,"onBeforeInput"),0<Ae.length&&(Ke=new Ow("onBeforeInput","beforeinput",null,v,Ke),Je.push({event:Ke,listeners:Ae}),Ke.data=Qt))}Kw(Je,d)})}function wf(u,d,v){return{instance:u,listener:d,currentTarget:v}}function P_(u,d){for(var v=d+"Capture",b=[];u!==null;){var x=u,A=x.stateNode;x.tag===5&&A!==null&&(x=A,A=Ve(u,v),A!=null&&b.unshift(wf(u,A,x)),A=Ve(u,d),A!=null&&b.push(wf(u,A,x))),u=u.return}return b}function Tf(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function pi(u,d,v,b,x){for(var A=d._reactName,z=[];v!==null&&v!==b;){var re=v,de=re.alternate,Ae=re.stateNode;if(de!==null&&de===b)break;re.tag===5&&Ae!==null&&(re=Ae,x?(de=Ve(v,A),de!=null&&z.unshift(wf(v,de,re))):x||(de=Ve(v,A),de!=null&&z.push(wf(v,de,re)))),v=v.return}z.length!==0&&u.push({event:d,listeners:z})}var ls=/\r\n?/g,EI=/\u0000|\uFFFD/g;function Yw(u){return(typeof u=="string"?u:""+u).replace(ls,`
`).replace(EI,"")}function Dp(u,d,v){if(d=Yw(d),Yw(u)!==d&&v)throw Error(n(425))}function L_(){}var Up=null,Wc=null;function Fp(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Du=typeof setTimeout=="function"?setTimeout:void 0,Bp=typeof clearTimeout=="function"?clearTimeout:void 0,xf=typeof Promise=="function"?Promise:void 0,N_=typeof queueMicrotask=="function"?queueMicrotask:typeof xf<"u"?function(u){return xf.resolve(null).then(u).catch(Cf)}:Du;function Cf(u){setTimeout(function(){throw u})}function aE(u,d){var v=d,b=0;do{var x=v.nextSibling;if(u.removeChild(v),x&&x.nodeType===8)if(v=x.data,v==="/$"){if(b===0){u.removeChild(x),sr(d);return}b--}else v!=="$"&&v!=="$?"&&v!=="$!"||b++;v=x}while(v);sr(d)}function Uu(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function Zw(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var v=u.data;if(v==="$"||v==="$!"||v==="$?"){if(d===0)return u;d--}else v==="/$"&&d++}u=u.previousSibling}return null}var Rf=Math.random().toString(36).slice(2),Jo="__reactFiber$"+Rf,Fu="__reactProps$"+Rf,pa="__reactContainer$"+Rf,D_="__reactEvents$"+Rf,G="__reactListeners$"+Rf,Mf="__reactHandles$"+Rf;function Qo(u){var d=u[Jo];if(d)return d;for(var v=u.parentNode;v;){if(d=v[pa]||v[Jo]){if(v=d.alternate,d.child!==null||v!==null&&v.child!==null)for(u=Zw(u);u!==null;){if(v=u[Jo])return v;u=Zw(u)}return d}u=v,v=u.parentNode}return null}function us(u){return u=u[Jo]||u[pa],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function mn(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function U_(u){return u[Fu]||null}var oE=[],Af=-1;function Vs(u){return{current:u}}function Dr(u){0>Af||(u.current=oE[Af],oE[Af]=null,Af--)}function Or(u,d){Af++,oE[Af]=u.current,u.current=d}var Bu={},cs=Vs(Bu),Gs=Vs(!1),xs=Bu;function If(u,d){var v=u.type.contextTypes;if(!v)return Bu;var b=u.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var x={},A;for(A in v)x[A]=d[A];return b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=x),x}function $s(u){return u=u.childContextTypes,u!=null}function F_(){Dr(Gs),Dr(cs)}function Jw(u,d,v){if(cs.current!==Bu)throw Error(n(168));Or(cs,d),Or(Gs,v)}function Qw(u,d,v){var b=u.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return v;b=b.getChildContext();for(var x in b)if(!(x in d))throw Error(n(108,Le(u)||"Unknown",x));return pe({},v,b)}function ja(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Bu,xs=cs.current,Or(cs,u),Or(Gs,Gs.current),!0}function eT(u,d,v){var b=u.stateNode;if(!b)throw Error(n(169));v?(u=Qw(u,d,xs),b.__reactInternalMemoizedMergedChildContext=u,Dr(Gs),Dr(cs),Or(cs,u)):Dr(Gs),Or(Gs,v)}var Vl=null,B_=!1,lE=!1;function tT(u){Vl===null?Vl=[u]:Vl.push(u)}function qc(u){B_=!0,tT(u)}function zu(){if(!lE&&Vl!==null){lE=!0;var u=0,d=bn;try{var v=Vl;for(bn=1;u<v.length;u++){var b=v[u];do b=b(!0);while(b!==null)}Vl=null,B_=!1}catch(x){throw Vl!==null&&(Vl=Vl.slice(u+1)),$(pt,zu),x}finally{bn=d,lE=!1}}return null}var kf=[],ds=0,z_=null,j_=0,Ha=[],Va=0,Xc=null,el=1,tl="";function Kc(u,d){kf[ds++]=j_,kf[ds++]=z_,z_=u,j_=d}function nT(u,d,v){Ha[Va++]=el,Ha[Va++]=tl,Ha[Va++]=Xc,Xc=u;var b=el;u=tl;var x=32-Hn(b)-1;b&=~(1<<x),v+=1;var A=32-Hn(d)+x;if(30<A){var z=x-x%5;A=(b&(1<<z)-1).toString(32),b>>=z,x-=z,el=1<<32-Hn(d)+x|v<<x|b,tl=A+u}else el=1<<A|v<<x|b,tl=u}function zp(u){u.return!==null&&(Kc(u,1),nT(u,1,0))}function Yc(u){for(;u===z_;)z_=kf[--ds],kf[ds]=null,j_=kf[--ds],kf[ds]=null;for(;u===Xc;)Xc=Ha[--Va],Ha[Va]=null,tl=Ha[--Va],Ha[Va]=null,el=Ha[--Va],Ha[Va]=null}var fs=null,ma=null,Ur=!1,So=null;function nl(u,d){var v=Ya(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=u,d=u.deletions,d===null?(u.deletions=[v],u.flags|=16):d.push(v)}function H_(u,d){switch(u.tag){case 5:var v=u.type;return d=d.nodeType!==1||v.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,fs=u,ma=Uu(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,fs=u,ma=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(v=Xc!==null?{id:el,overflow:tl}:null,u.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=Ya(18,null,null,0),v.stateNode=d,v.return=u,u.child=v,fs=u,ma=null,!0):!1;default:return!1}}function Gl(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Ws(u){if(Ur){var d=ma;if(d){var v=d;if(!H_(u,d)){if(Gl(u))throw Error(n(418));d=Uu(v.nextSibling);var b=fs;d&&H_(u,d)?nl(b,v):(u.flags=u.flags&-4097|2,Ur=!1,fs=u)}}else{if(Gl(u))throw Error(n(418));u.flags=u.flags&-4097|2,Ur=!1,fs=u}}}function rT(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;fs=u}function jp(u){if(u!==fs)return!1;if(!Ur)return rT(u),Ur=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!Fp(u.type,u.memoizedProps)),d&&(d=ma)){if(Gl(u))throw uE(),Error(n(418));for(;d;)nl(u,d),d=Uu(d.nextSibling)}if(rT(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var v=u.data;if(v==="/$"){if(d===0){ma=Uu(u.nextSibling);break e}d--}else v!=="$"&&v!=="$!"&&v!=="$?"||d++}u=u.nextSibling}ma=null}}else ma=fs?Uu(u.stateNode.nextSibling):null;return!0}function uE(){for(var u=ma;u;)u=Uu(u.nextSibling)}function rl(){ma=fs=null,Ur=!1}function il(u){So===null?So=[u]:So.push(u)}var iT=k.ReactCurrentBatchConfig;function Hp(u,d,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(n(309));var b=v.stateNode}if(!b)throw Error(n(147,u));var x=b,A=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===A?d.ref:(d=function(z){var re=x.refs;z===null?delete re[A]:re[A]=z},d._stringRef=A,d)}if(typeof u!="string")throw Error(n(284));if(!v._owner)throw Error(n(290,u))}return u}function Zc(u,d){throw u=Object.prototype.toString.call(d),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function sT(u){var d=u._init;return d(u._payload)}function cE(u){function d(be,me){if(u){var we=be.deletions;we===null?(be.deletions=[me],be.flags|=16):we.push(me)}}function v(be,me){if(!u)return null;for(;me!==null;)d(be,me),me=me.sibling;return null}function b(be,me){for(be=new Map;me!==null;)me.key!==null?be.set(me.key,me):be.set(me.index,me),me=me.sibling;return be}function x(be,me){return be=Mo(be,me),be.index=0,be.sibling=null,be}function A(be,me,we){return be.index=we,u?(we=be.alternate,we!==null?(we=we.index,we<me?(be.flags|=2,me):we):(be.flags|=2,me)):(be.flags|=1048576,me)}function z(be){return u&&be.alternate===null&&(be.flags|=2),be}function re(be,me,we,it){return me===null||me.tag!==6?(me=YE(we,be.mode,it),me.return=be,me):(me=x(me,we),me.return=be,me)}function de(be,me,we,it){var Nt=we.type;return Nt===O?Ke(be,me,we.props.children,it,we.key):me!==null&&(me.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===W&&sT(Nt)===me.type)?(it=x(me,we.props),it.ref=Hp(be,me,we),it.return=be,it):(it=wv(we.type,we.key,we.props,null,be.mode,it),it.ref=Hp(be,me,we),it.return=be,it)}function Ae(be,me,we,it){return me===null||me.tag!==4||me.stateNode.containerInfo!==we.containerInfo||me.stateNode.implementation!==we.implementation?(me=ZE(we,be.mode,it),me.return=be,me):(me=x(me,we.children||[]),me.return=be,me)}function Ke(be,me,we,it,Nt){return me===null||me.tag!==7?(me=ld(we,be.mode,it,Nt),me.return=be,me):(me=x(me,we),me.return=be,me)}function Je(be,me,we){if(typeof me=="string"&&me!==""||typeof me=="number")return me=YE(""+me,be.mode,we),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case M:return we=wv(me.type,me.key,me.props,null,be.mode,we),we.ref=Hp(be,null,me),we.return=be,we;case N:return me=ZE(me,be.mode,we),me.return=be,me;case W:var it=me._init;return Je(be,it(me._payload),we)}if(Ie(me)||ie(me))return me=ld(me,be.mode,we,null),me.return=be,me;Zc(be,me)}return null}function qe(be,me,we,it){var Nt=me!==null?me.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return Nt!==null?null:re(be,me,""+we,it);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case M:return we.key===Nt?de(be,me,we,it):null;case N:return we.key===Nt?Ae(be,me,we,it):null;case W:return Nt=we._init,qe(be,me,Nt(we._payload),it)}if(Ie(we)||ie(we))return Nt!==null?null:Ke(be,me,we,it,null);Zc(be,we)}return null}function bt(be,me,we,it,Nt){if(typeof it=="string"&&it!==""||typeof it=="number")return be=be.get(we)||null,re(me,be,""+it,Nt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case M:return be=be.get(it.key===null?we:it.key)||null,de(me,be,it,Nt);case N:return be=be.get(it.key===null?we:it.key)||null,Ae(me,be,it,Nt);case W:var Jt=it._init;return bt(be,me,we,Jt(it._payload),Nt)}if(Ie(it)||ie(it))return be=be.get(we)||null,Ke(me,be,it,Nt,null);Zc(me,it)}return null}function It(be,me,we,it){for(var Nt=null,Jt=null,Qt=me,nn=me=0,bi=null;Qt!==null&&nn<we.length;nn++){Qt.index>nn?(bi=Qt,Qt=null):bi=Qt.sibling;var Yn=qe(be,Qt,we[nn],it);if(Yn===null){Qt===null&&(Qt=bi);break}u&&Qt&&Yn.alternate===null&&d(be,Qt),me=A(Yn,me,nn),Jt===null?Nt=Yn:Jt.sibling=Yn,Jt=Yn,Qt=bi}if(nn===we.length)return v(be,Qt),Ur&&Kc(be,nn),Nt;if(Qt===null){for(;nn<we.length;nn++)Qt=Je(be,we[nn],it),Qt!==null&&(me=A(Qt,me,nn),Jt===null?Nt=Qt:Jt.sibling=Qt,Jt=Qt);return Ur&&Kc(be,nn),Nt}for(Qt=b(be,Qt);nn<we.length;nn++)bi=bt(Qt,be,nn,we[nn],it),bi!==null&&(u&&bi.alternate!==null&&Qt.delete(bi.key===null?nn:bi.key),me=A(bi,me,nn),Jt===null?Nt=bi:Jt.sibling=bi,Jt=bi);return u&&Qt.forEach(function(Ju){return d(be,Ju)}),Ur&&Kc(be,nn),Nt}function Lt(be,me,we,it){var Nt=ie(we);if(typeof Nt!="function")throw Error(n(150));if(we=Nt.call(we),we==null)throw Error(n(151));for(var Jt=Nt=null,Qt=me,nn=me=0,bi=null,Yn=we.next();Qt!==null&&!Yn.done;nn++,Yn=we.next()){Qt.index>nn?(bi=Qt,Qt=null):bi=Qt.sibling;var Ju=qe(be,Qt,Yn.value,it);if(Ju===null){Qt===null&&(Qt=bi);break}u&&Qt&&Ju.alternate===null&&d(be,Qt),me=A(Ju,me,nn),Jt===null?Nt=Ju:Jt.sibling=Ju,Jt=Ju,Qt=bi}if(Yn.done)return v(be,Qt),Ur&&Kc(be,nn),Nt;if(Qt===null){for(;!Yn.done;nn++,Yn=we.next())Yn=Je(be,Yn.value,it),Yn!==null&&(me=A(Yn,me,nn),Jt===null?Nt=Yn:Jt.sibling=Yn,Jt=Yn);return Ur&&Kc(be,nn),Nt}for(Qt=b(be,Qt);!Yn.done;nn++,Yn=we.next())Yn=bt(Qt,be,nn,Yn.value,it),Yn!==null&&(u&&Yn.alternate!==null&&Qt.delete(Yn.key===null?nn:Yn.key),me=A(Yn,me,nn),Jt===null?Nt=Yn:Jt.sibling=Yn,Jt=Yn);return u&&Qt.forEach(function(BI){return d(be,BI)}),Ur&&Kc(be,nn),Nt}function ti(be,me,we,it){if(typeof we=="object"&&we!==null&&we.type===O&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case M:e:{for(var Nt=we.key,Jt=me;Jt!==null;){if(Jt.key===Nt){if(Nt=we.type,Nt===O){if(Jt.tag===7){v(be,Jt.sibling),me=x(Jt,we.props.children),me.return=be,be=me;break e}}else if(Jt.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===W&&sT(Nt)===Jt.type){v(be,Jt.sibling),me=x(Jt,we.props),me.ref=Hp(be,Jt,we),me.return=be,be=me;break e}v(be,Jt);break}else d(be,Jt);Jt=Jt.sibling}we.type===O?(me=ld(we.props.children,be.mode,it,we.key),me.return=be,be=me):(it=wv(we.type,we.key,we.props,null,be.mode,it),it.ref=Hp(be,me,we),it.return=be,be=it)}return z(be);case N:e:{for(Jt=we.key;me!==null;){if(me.key===Jt)if(me.tag===4&&me.stateNode.containerInfo===we.containerInfo&&me.stateNode.implementation===we.implementation){v(be,me.sibling),me=x(me,we.children||[]),me.return=be,be=me;break e}else{v(be,me);break}else d(be,me);me=me.sibling}me=ZE(we,be.mode,it),me.return=be,be=me}return z(be);case W:return Jt=we._init,ti(be,me,Jt(we._payload),it)}if(Ie(we))return It(be,me,we,it);if(ie(we))return Lt(be,me,we,it);Zc(be,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,me!==null&&me.tag===6?(v(be,me.sibling),me=x(me,we),me.return=be,be=me):(v(be,me),me=YE(we,be.mode,it),me.return=be,be=me),z(be)):v(be,me)}return ti}var ei=cE(!0),V_=cE(!1),Vp=Vs(null),ga=null,ju=null,Of=null;function $l(){Of=ju=ga=null}function G_(u){var d=Vp.current;Dr(Vp),u._currentValue=d}function Gi(u,d,v){for(;u!==null;){var b=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),u===v)break;u=u.return}}function Hu(u,d){ga=u,Of=ju=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&d)!==0&&(Rs=!0),u.firstContext=null)}function Ga(u){var d=u._currentValue;if(Of!==u)if(u={context:u,memoizedValue:d,next:null},ju===null){if(ga===null)throw Error(n(308));ju=u,ga.dependencies={lanes:0,firstContext:u}}else ju=ju.next=u;return d}var Jc=null;function dE(u){Jc===null?Jc=[u]:Jc.push(u)}function $_(u,d,v,b){var x=d.interleaved;return x===null?(v.next=v,dE(d)):(v.next=x.next,x.next=v),d.interleaved=v,Wl(u,b)}function Wl(u,d){u.lanes|=d;var v=u.alternate;for(v!==null&&(v.lanes|=d),v=u,u=u.return;u!==null;)u.childLanes|=d,v=u.alternate,v!==null&&(v.childLanes|=d),v=u,u=u.return;return v.tag===3?v.stateNode:null}var $a=!1;function W_(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aT(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ql(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function Wa(u,d,v){var b=u.updateQueue;if(b===null)return null;if(b=b.shared,(Vn&2)!==0){var x=b.pending;return x===null?d.next=d:(d.next=x.next,x.next=d),b.pending=d,Wl(u,v)}return x=b.interleaved,x===null?(d.next=d,dE(b)):(d.next=x.next,x.next=d),b.interleaved=d,Wl(u,v)}function q_(u,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var b=d.lanes;b&=u.pendingLanes,v|=b,d.lanes=v,Fl(u,v)}}function oT(u,d){var v=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,v===b)){var x=null,A=null;if(v=v.firstBaseUpdate,v!==null){do{var z={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};A===null?x=A=z:A=A.next=z,v=v.next}while(v!==null);A===null?x=A=d:A=A.next=d}else x=A=d;v={baseState:b.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:b.shared,effects:b.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=d:u.next=d,v.lastBaseUpdate=d}function Pf(u,d,v,b){var x=u.updateQueue;$a=!1;var A=x.firstBaseUpdate,z=x.lastBaseUpdate,re=x.shared.pending;if(re!==null){x.shared.pending=null;var de=re,Ae=de.next;de.next=null,z===null?A=Ae:z.next=Ae,z=de;var Ke=u.alternate;Ke!==null&&(Ke=Ke.updateQueue,re=Ke.lastBaseUpdate,re!==z&&(re===null?Ke.firstBaseUpdate=Ae:re.next=Ae,Ke.lastBaseUpdate=de))}if(A!==null){var Je=x.baseState;z=0,Ke=Ae=de=null,re=A;do{var qe=re.lane,bt=re.eventTime;if((b&qe)===qe){Ke!==null&&(Ke=Ke.next={eventTime:bt,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var It=u,Lt=re;switch(qe=d,bt=v,Lt.tag){case 1:if(It=Lt.payload,typeof It=="function"){Je=It.call(bt,Je,qe);break e}Je=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Lt.payload,qe=typeof It=="function"?It.call(bt,Je,qe):It,qe==null)break e;Je=pe({},Je,qe);break e;case 2:$a=!0}}re.callback!==null&&re.lane!==0&&(u.flags|=64,qe=x.effects,qe===null?x.effects=[re]:qe.push(re))}else bt={eventTime:bt,lane:qe,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Ke===null?(Ae=Ke=bt,de=Je):Ke=Ke.next=bt,z|=qe;if(re=re.next,re===null){if(re=x.shared.pending,re===null)break;qe=re,re=qe.next,qe.next=null,x.lastBaseUpdate=qe,x.shared.pending=null}}while(!0);if(Ke===null&&(de=Je),x.baseState=de,x.firstBaseUpdate=Ae,x.lastBaseUpdate=Ke,d=x.shared.interleaved,d!==null){x=d;do z|=x.lane,x=x.next;while(x!==d)}else A===null&&(x.shared.lanes=0);qu|=z,u.lanes=z,u.memoizedState=Je}}function fE(u,d,v){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var b=u[d],x=b.callback;if(x!==null){if(b.callback=null,b=v,typeof x!="function")throw Error(n(191,x));x.call(b)}}}var Gp={},sl=Vs(Gp),$p=Vs(Gp),Lf=Vs(Gp);function Xl(u){if(u===Gp)throw Error(n(174));return u}function hE(u,d){switch(Or(Lf,d),Or($p,u),Or(sl,Gp),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Et(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=Et(d,u)}Dr(sl),Or(sl,d)}function Vu(){Dr(sl),Dr($p),Dr(Lf)}function pE(u){Xl(Lf.current);var d=Xl(sl.current),v=Et(d,u.type);d!==v&&(Or($p,u),Or(sl,v))}function X_(u){$p.current===u&&(Dr(sl),Dr($p))}var Gr=Vs(0);function Qc(u){for(var d=u;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var mE=[];function K_(){for(var u=0;u<mE.length;u++)mE[u]._workInProgressVersionPrimary=null;mE.length=0}var Wp=k.ReactCurrentDispatcher,gE=k.ReactCurrentBatchConfig,Gu=0,Xr=null,ii=null,Ei=null,Nf=!1,qp=!1,ed=0,wn=0;function hs(){throw Error(n(321))}function _E(u,d){if(d===null)return!1;for(var v=0;v<d.length&&v<u.length;v++)if(!Re(u[v],d[v]))return!1;return!0}function td(u,d,v,b,x,A){if(Gu=A,Xr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Wp.current=u===null||u.memoizedState===null?bI:nv,u=v(b,x),qp){A=0;do{if(qp=!1,ed=0,25<=A)throw Error(n(301));A+=1,Ei=ii=null,d.updateQueue=null,Wp.current=Bf,u=v(b,x)}while(qp)}if(Wp.current=tv,d=ii!==null&&ii.next!==null,Gu=0,Ei=ii=Xr=null,Nf=!1,d)throw Error(n(300));return u}function Y_(){var u=ed!==0;return ed=0,u}function al(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?Xr.memoizedState=Ei=u:Ei=Ei.next=u,Ei}function qa(){if(ii===null){var u=Xr.alternate;u=u!==null?u.memoizedState:null}else u=ii.next;var d=Ei===null?Xr.memoizedState:Ei.next;if(d!==null)Ei=d,ii=u;else{if(u===null)throw Error(n(310));ii=u,u={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},Ei===null?Xr.memoizedState=Ei=u:Ei=Ei.next=u}return Ei}function ps(u,d){return typeof d=="function"?d(u):d}function vE(u){var d=qa(),v=d.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=u;var b=ii,x=b.baseQueue,A=v.pending;if(A!==null){if(x!==null){var z=x.next;x.next=A.next,A.next=z}b.baseQueue=x=A,v.pending=null}if(x!==null){A=x.next,b=b.baseState;var re=z=null,de=null,Ae=A;do{var Ke=Ae.lane;if((Gu&Ke)===Ke)de!==null&&(de=de.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),b=Ae.hasEagerState?Ae.eagerState:u(b,Ae.action);else{var Je={lane:Ke,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};de===null?(re=de=Je,z=b):de=de.next=Je,Xr.lanes|=Ke,qu|=Ke}Ae=Ae.next}while(Ae!==null&&Ae!==A);de===null?z=b:de.next=re,Re(b,d.memoizedState)||(Rs=!0),d.memoizedState=b,d.baseState=z,d.baseQueue=de,v.lastRenderedState=b}if(u=v.interleaved,u!==null){x=u;do A=x.lane,Xr.lanes|=A,qu|=A,x=x.next;while(x!==u)}else x===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function Df(u){var d=qa(),v=d.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=u;var b=v.dispatch,x=v.pending,A=d.memoizedState;if(x!==null){v.pending=null;var z=x=x.next;do A=u(A,z.action),z=z.next;while(z!==x);Re(A,d.memoizedState)||(Rs=!0),d.memoizedState=A,d.baseQueue===null&&(d.baseState=A),v.lastRenderedState=A}return[A,b]}function Z_(){}function yE(u,d){var v=Xr,b=qa(),x=d(),A=!Re(b.memoizedState,x);if(A&&(b.memoizedState=x,Rs=!0),b=b.queue,ol(Kl.bind(null,v,b,u),[u]),b.getSnapshot!==d||A||Ei!==null&&Ei.memoizedState.tag&1){if(v.flags|=2048,Uf(9,qs.bind(null,v,b,x,d),void 0,null),Bi===null)throw Error(n(349));(Gu&30)!==0||EE(v,d,x)}return x}function EE(u,d,v){u.flags|=16384,u={getSnapshot:d,value:v},d=Xr.updateQueue,d===null?(d={lastEffect:null,stores:null},Xr.updateQueue=d,d.stores=[u]):(v=d.stores,v===null?d.stores=[u]:v.push(u))}function qs(u,d,v,b){d.value=v,d.getSnapshot=b,J_(d)&&SE(u)}function Kl(u,d,v){return v(function(){J_(d)&&SE(u)})}function J_(u){var d=u.getSnapshot;u=u.value;try{var v=d();return!Re(u,v)}catch{return!0}}function SE(u){var d=Wl(u,1);d!==null&&Ro(d,u,1,-1)}function Xp(u){var d=al();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:u},d.queue=u,u=u.dispatch=hT.bind(null,Xr,u),[d.memoizedState,u]}function Uf(u,d,v,b){return u={tag:u,create:d,destroy:v,deps:b,next:null},d=Xr.updateQueue,d===null?(d={lastEffect:null,stores:null},Xr.updateQueue=d,d.lastEffect=u.next=u):(v=d.lastEffect,v===null?d.lastEffect=u.next=u:(b=v.next,v.next=u,u.next=b,d.lastEffect=u)),u}function Q_(){return qa().memoizedState}function Kp(u,d,v,b){var x=al();Xr.flags|=u,x.memoizedState=Uf(1|d,v,void 0,b===void 0?null:b)}function Ff(u,d,v,b){var x=qa();b=b===void 0?null:b;var A=void 0;if(ii!==null){var z=ii.memoizedState;if(A=z.destroy,b!==null&&_E(b,z.deps)){x.memoizedState=Uf(d,v,A,b);return}}Xr.flags|=u,x.memoizedState=Uf(1|d,v,A,b)}function ev(u,d){return Kp(8390656,8,u,d)}function ol(u,d){return Ff(2048,8,u,d)}function lT(u,d){return Ff(4,2,u,d)}function Yl(u,d){return Ff(4,4,u,d)}function bE(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function wE(u,d,v){return v=v!=null?v.concat([u]):null,Ff(4,4,bE.bind(null,d,u),v)}function Yp(){}function uT(u,d){var v=qa();d=d===void 0?null:d;var b=v.memoizedState;return b!==null&&d!==null&&_E(d,b[1])?b[0]:(v.memoizedState=[u,d],u)}function cT(u,d){var v=qa();d=d===void 0?null:d;var b=v.memoizedState;return b!==null&&d!==null&&_E(d,b[1])?b[0]:(u=u(),v.memoizedState=[u,d],u)}function dT(u,d,v){return(Gu&21)===0?(u.baseState&&(u.baseState=!1,Rs=!0),u.memoizedState=v):(Re(v,d)||(v=as(),Xr.lanes|=v,qu|=v,u.baseState=!0),d)}function fT(u,d){var v=bn;bn=v!==0&&4>v?v:4,u(!0);var b=gE.transition;gE.transition={};try{u(!1),d()}finally{bn=v,gE.transition=b}}function TE(){return qa().memoizedState}function SI(u,d,v){var b=Yu(u);if(v={lane:b,action:v,hasEagerState:!1,eagerState:null,next:null},xE(u))Cs(d,v);else if(v=$_(u,d,v,b),v!==null){var x=Is();Ro(v,u,b,x),bo(v,d,b)}}function hT(u,d,v){var b=Yu(u),x={lane:b,action:v,hasEagerState:!1,eagerState:null,next:null};if(xE(u))Cs(d,x);else{var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=d.lastRenderedReducer,A!==null))try{var z=d.lastRenderedState,re=A(z,v);if(x.hasEagerState=!0,x.eagerState=re,Re(re,z)){var de=d.interleaved;de===null?(x.next=x,dE(d)):(x.next=de.next,de.next=x),d.interleaved=x;return}}catch{}finally{}v=$_(u,d,x,b),v!==null&&(x=Is(),Ro(v,u,b,x),bo(v,d,b))}}function xE(u){var d=u.alternate;return u===Xr||d!==null&&d===Xr}function Cs(u,d){qp=Nf=!0;var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}function bo(u,d,v){if((v&4194240)!==0){var b=d.lanes;b&=u.pendingLanes,v|=b,d.lanes=v,Fl(u,v)}}var tv={readContext:Ga,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},bI={readContext:Ga,useCallback:function(u,d){return al().memoizedState=[u,d===void 0?null:d],u},useContext:Ga,useEffect:ev,useImperativeHandle:function(u,d,v){return v=v!=null?v.concat([u]):null,Kp(4194308,4,bE.bind(null,d,u),v)},useLayoutEffect:function(u,d){return Kp(4194308,4,u,d)},useInsertionEffect:function(u,d){return Kp(4,2,u,d)},useMemo:function(u,d){var v=al();return d=d===void 0?null:d,u=u(),v.memoizedState=[u,d],u},useReducer:function(u,d,v){var b=al();return d=v!==void 0?v(d):d,b.memoizedState=b.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},b.queue=u,u=u.dispatch=SI.bind(null,Xr,u),[b.memoizedState,u]},useRef:function(u){var d=al();return u={current:u},d.memoizedState=u},useState:Xp,useDebugValue:Yp,useDeferredValue:function(u){return al().memoizedState=u},useTransition:function(){var u=Xp(!1),d=u[0];return u=fT.bind(null,u[1]),al().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,v){var b=Xr,x=al();if(Ur){if(v===void 0)throw Error(n(407));v=v()}else{if(v=d(),Bi===null)throw Error(n(349));(Gu&30)!==0||EE(b,d,v)}x.memoizedState=v;var A={value:v,getSnapshot:d};return x.queue=A,ev(Kl.bind(null,b,A,u),[u]),b.flags|=2048,Uf(9,qs.bind(null,b,A,v,d),void 0,null),v},useId:function(){var u=al(),d=Bi.identifierPrefix;if(Ur){var v=tl,b=el;v=(b&~(1<<32-Hn(b)-1)).toString(32)+v,d=":"+d+"R"+v,v=ed++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=wn++,d=":"+d+"r"+v.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},nv={readContext:Ga,useCallback:uT,useContext:Ga,useEffect:ol,useImperativeHandle:wE,useInsertionEffect:lT,useLayoutEffect:Yl,useMemo:cT,useReducer:vE,useRef:Q_,useState:function(){return vE(ps)},useDebugValue:Yp,useDeferredValue:function(u){var d=qa();return dT(d,ii.memoizedState,u)},useTransition:function(){var u=vE(ps)[0],d=qa().memoizedState;return[u,d]},useMutableSource:Z_,useSyncExternalStore:yE,useId:TE,unstable_isNewReconciler:!1},Bf={readContext:Ga,useCallback:uT,useContext:Ga,useEffect:ol,useImperativeHandle:wE,useInsertionEffect:lT,useLayoutEffect:Yl,useMemo:cT,useReducer:Df,useRef:Q_,useState:function(){return Df(ps)},useDebugValue:Yp,useDeferredValue:function(u){var d=qa();return ii===null?d.memoizedState=u:dT(d,ii.memoizedState,u)},useTransition:function(){var u=Df(ps)[0],d=qa().memoizedState;return[u,d]},useMutableSource:Z_,useSyncExternalStore:yE,useId:TE,unstable_isNewReconciler:!1};function Xa(u,d){if(u&&u.defaultProps){d=pe({},d),u=u.defaultProps;for(var v in u)d[v]===void 0&&(d[v]=u[v]);return d}return d}function rv(u,d,v,b){d=u.memoizedState,v=v(b,d),v=v==null?d:pe({},d,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var iv={isMounted:function(u){return(u=u._reactInternals)?Ar(u)===u:!1},enqueueSetState:function(u,d,v){u=u._reactInternals;var b=Is(),x=Yu(u),A=ql(b,x);A.payload=d,v!=null&&(A.callback=v),d=Wa(u,A,x),d!==null&&(Ro(d,u,x,b),q_(d,u,x))},enqueueReplaceState:function(u,d,v){u=u._reactInternals;var b=Is(),x=Yu(u),A=ql(b,x);A.tag=1,A.payload=d,v!=null&&(A.callback=v),d=Wa(u,A,x),d!==null&&(Ro(d,u,x,b),q_(d,u,x))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var v=Is(),b=Yu(u),x=ql(v,b);x.tag=2,d!=null&&(x.callback=d),d=Wa(u,x,b),d!==null&&(Ro(d,u,b,v),q_(d,u,b))}};function CE(u,d,v,b,x,A,z){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,A,z):d.prototype&&d.prototype.isPureReactComponent?!St(v,b)||!St(x,A):!0}function nd(u,d,v){var b=!1,x=Bu,A=d.contextType;return typeof A=="object"&&A!==null?A=Ga(A):(x=$s(d)?xs:cs.current,b=d.contextTypes,A=(b=b!=null)?If(u,x):Bu),d=new d(v,A),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=iv,u.stateNode=d,d._reactInternals=u,b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=x,u.__reactInternalMemoizedMaskedChildContext=A),d}function zf(u,d,v,b){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,b),d.state!==u&&iv.enqueueReplaceState(d,d.state,null)}function RE(u,d,v,b){var x=u.stateNode;x.props=v,x.state=u.memoizedState,x.refs={},W_(u);var A=d.contextType;typeof A=="object"&&A!==null?x.context=Ga(A):(A=$s(d)?xs:cs.current,x.context=If(u,A)),x.state=u.memoizedState,A=d.getDerivedStateFromProps,typeof A=="function"&&(rv(u,d,A,v),x.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(d=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),d!==x.state&&iv.enqueueReplaceState(x,x.state,null),Pf(u,v,x,b),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308)}function rd(u,d){try{var v="",b=d;do v+=ke(b),b=b.return;while(b);var x=v}catch(A){x=`
Error generating stack: `+A.message+`
`+A.stack}return{value:u,source:d,stack:x,digest:null}}function sv(u,d,v){return{value:u,source:null,stack:v??null,digest:d??null}}function jf(u,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var pT=typeof WeakMap=="function"?WeakMap:Map;function Zp(u,d,v){v=ql(-1,v),v.tag=3,v.payload={element:null};var b=d.value;return v.callback=function(){gv||(gv=!0,VE=b),jf(u,d)},v}function av(u,d,v){v=ql(-1,v),v.tag=3;var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var x=d.value;v.payload=function(){return b(x)},v.callback=function(){jf(u,d)}}var A=u.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(v.callback=function(){jf(u,d),typeof b!="function"&&(Xu===null?Xu=new Set([this]):Xu.add(this));var z=d.stack;this.componentDidCatch(d.value,{componentStack:z!==null?z:""})}),v}function Jp(u,d,v){var b=u.pingCache;if(b===null){b=u.pingCache=new pT;var x=new Set;b.set(d,x)}else x=b.get(d),x===void 0&&(x=new Set,b.set(d,x));x.has(v)||(x.add(v),u=II.bind(null,u,d,v),d.then(u,u))}function mT(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function ME(u,d,v,b,x){return(u.mode&1)===0?(u===d?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=ql(-1,1),d.tag=2,Wa(v,d,1))),v.lanes|=1),u):(u.flags|=65536,u.lanes=x,u)}var ov=k.ReactCurrentOwner,Rs=!1;function $i(u,d,v,b){d.child=u===null?V_(d,null,v,b):ei(d,u.child,v,b)}function gT(u,d,v,b,x){v=v.render;var A=d.ref;return Hu(d,x),b=td(u,d,v,b,A,x),v=Y_(),u!==null&&!Rs?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~x,wo(u,d,x)):(Ur&&v&&zp(d),d.flags|=1,$i(u,d,b,x),d.child)}function AE(u,d,v,b,x){if(u===null){var A=v.type;return typeof A=="function"&&!bv(A)&&A.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=A,ll(u,d,A,b,x)):(u=wv(v.type,null,b,d,d.mode,x),u.ref=d.ref,u.return=d,d.child=u)}if(A=u.child,(u.lanes&x)===0){var z=A.memoizedProps;if(v=v.compare,v=v!==null?v:St,v(z,b)&&u.ref===d.ref)return wo(u,d,x)}return d.flags|=1,u=Mo(A,b),u.ref=d.ref,u.return=d,d.child=u}function ll(u,d,v,b,x){if(u!==null){var A=u.memoizedProps;if(St(A,b)&&u.ref===d.ref)if(Rs=!1,d.pendingProps=b=A,(u.lanes&x)!==0)(u.flags&131072)!==0&&(Rs=!0);else return d.lanes=u.lanes,wo(u,d,x)}return OE(u,d,v,b,x)}function IE(u,d,v){var b=d.pendingProps,x=b.children,A=u!==null?u.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Or($f,va),va|=v;else{if((v&1073741824)===0)return u=A!==null?A.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,Or($f,va),va|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=A!==null?A.baseLanes:v,Or($f,va),va|=b}else A!==null?(b=A.baseLanes|v,d.memoizedState=null):b=v,Or($f,va),va|=b;return $i(u,d,x,v),d.child}function kE(u,d){var v=d.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function OE(u,d,v,b,x){var A=$s(v)?xs:cs.current;return A=If(d,A),Hu(d,x),v=td(u,d,v,b,A,x),b=Y_(),u!==null&&!Rs?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~x,wo(u,d,x)):(Ur&&b&&zp(d),d.flags|=1,$i(u,d,v,x),d.child)}function PE(u,d,v,b,x){if($s(v)){var A=!0;ja(d)}else A=!1;if(Hu(d,x),d.stateNode===null)uv(u,d),nd(d,v,b),RE(d,v,b,x),b=!0;else if(u===null){var z=d.stateNode,re=d.memoizedProps;z.props=re;var de=z.context,Ae=v.contextType;typeof Ae=="object"&&Ae!==null?Ae=Ga(Ae):(Ae=$s(v)?xs:cs.current,Ae=If(d,Ae));var Ke=v.getDerivedStateFromProps,Je=typeof Ke=="function"||typeof z.getSnapshotBeforeUpdate=="function";Je||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(re!==b||de!==Ae)&&zf(d,z,b,Ae),$a=!1;var qe=d.memoizedState;z.state=qe,Pf(d,b,z,x),de=d.memoizedState,re!==b||qe!==de||Gs.current||$a?(typeof Ke=="function"&&(rv(d,v,Ke,b),de=d.memoizedState),(re=$a||CE(d,v,re,b,qe,de,Ae))?(Je||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(d.flags|=4194308)):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=de),z.props=b,z.state=de,z.context=Ae,b=re):(typeof z.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{z=d.stateNode,aT(u,d),re=d.memoizedProps,Ae=d.type===d.elementType?re:Xa(d.type,re),z.props=Ae,Je=d.pendingProps,qe=z.context,de=v.contextType,typeof de=="object"&&de!==null?de=Ga(de):(de=$s(v)?xs:cs.current,de=If(d,de));var bt=v.getDerivedStateFromProps;(Ke=typeof bt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(re!==Je||qe!==de)&&zf(d,z,b,de),$a=!1,qe=d.memoizedState,z.state=qe,Pf(d,b,z,x);var It=d.memoizedState;re!==Je||qe!==It||Gs.current||$a?(typeof bt=="function"&&(rv(d,v,bt,b),It=d.memoizedState),(Ae=$a||CE(d,v,Ae,b,qe,It,de)||!1)?(Ke||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(b,It,de),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(b,It,de)),typeof z.componentDidUpdate=="function"&&(d.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof z.componentDidUpdate!="function"||re===u.memoizedProps&&qe===u.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||re===u.memoizedProps&&qe===u.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=It),z.props=b,z.state=It,z.context=de,b=Ae):(typeof z.componentDidUpdate!="function"||re===u.memoizedProps&&qe===u.memoizedState||(d.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||re===u.memoizedProps&&qe===u.memoizedState||(d.flags|=1024),b=!1)}return LE(u,d,v,b,A,x)}function LE(u,d,v,b,x,A){kE(u,d);var z=(d.flags&128)!==0;if(!b&&!z)return x&&eT(d,v,!1),wo(u,d,A);b=d.stateNode,ov.current=d;var re=z&&typeof v.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,u!==null&&z?(d.child=ei(d,u.child,null,A),d.child=ei(d,null,re,A)):$i(u,d,re,A),d.memoizedState=b.state,x&&eT(d,v,!0),d.child}function _T(u){var d=u.stateNode;d.pendingContext?Jw(u,d.pendingContext,d.pendingContext!==d.context):d.context&&Jw(u,d.context,!1),hE(u,d.containerInfo)}function ul(u,d,v,b,x){return rl(),il(x),d.flags|=256,$i(u,d,v,b),d.child}var Qp={dehydrated:null,treeContext:null,retryLane:0};function em(u){return{baseLanes:u,cachePool:null,transitions:null}}function lv(u,d,v){var b=d.pendingProps,x=Gr.current,A=!1,z=(d.flags&128)!==0,re;if((re=z)||(re=u!==null&&u.memoizedState===null?!1:(x&2)!==0),re?(A=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(x|=1),Or(Gr,x&1),u===null)return Ws(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((d.mode&1)===0?d.lanes=1:u.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(z=b.children,u=b.fallback,A?(b=d.mode,A=d.child,z={mode:"hidden",children:z},(b&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=z):A=Tv(z,b,0,null),u=ld(u,b,v,null),A.return=d,u.return=d,A.sibling=u,d.child=A,d.child.memoizedState=em(v),d.memoizedState=Qp,u):Hf(d,z));if(x=u.memoizedState,x!==null&&(re=x.dehydrated,re!==null))return en(u,d,z,b,re,x,v);if(A){A=b.fallback,z=d.mode,x=u.child,re=x.sibling;var de={mode:"hidden",children:b.children};return(z&1)===0&&d.child!==x?(b=d.child,b.childLanes=0,b.pendingProps=de,d.deletions=null):(b=Mo(x,de),b.subtreeFlags=x.subtreeFlags&14680064),re!==null?A=Mo(re,A):(A=ld(A,z,v,null),A.flags|=2),A.return=d,b.return=d,b.sibling=A,d.child=b,b=A,A=d.child,z=u.child.memoizedState,z=z===null?em(v):{baseLanes:z.baseLanes|v,cachePool:null,transitions:z.transitions},A.memoizedState=z,A.childLanes=u.childLanes&~v,d.memoizedState=Qp,b}return A=u.child,u=A.sibling,b=Mo(A,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=v),b.return=d,b.sibling=null,u!==null&&(v=d.deletions,v===null?(d.deletions=[u],d.flags|=16):v.push(u)),d.child=b,d.memoizedState=null,b}function Hf(u,d){return d=Tv({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function Zl(u,d,v,b){return b!==null&&il(b),ei(d,u.child,null,v),u=Hf(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function en(u,d,v,b,x,A,z){if(v)return d.flags&256?(d.flags&=-257,b=sv(Error(n(422))),Zl(u,d,z,b)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(A=b.fallback,x=d.mode,b=Tv({mode:"visible",children:b.children},x,0,null),A=ld(A,x,z,null),A.flags|=2,b.return=d,A.return=d,b.sibling=A,d.child=b,(d.mode&1)!==0&&ei(d,u.child,null,z),d.child.memoizedState=em(z),d.memoizedState=Qp,A);if((d.mode&1)===0)return Zl(u,d,z,null);if(x.data==="$!"){if(b=x.nextSibling&&x.nextSibling.dataset,b)var re=b.dgst;return b=re,A=Error(n(419)),b=sv(A,b,void 0),Zl(u,d,z,b)}if(re=(z&u.childLanes)!==0,Rs||re){if(b=Bi,b!==null){switch(z&-z){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(b.suspendedLanes|z))!==0?0:x,x!==0&&x!==A.retryLane&&(A.retryLane=x,Wl(u,x),Ro(b,u,x,-1))}return KE(),b=sv(Error(n(421))),Zl(u,d,z,b)}return x.data==="$?"?(d.flags|=128,d.child=u.child,d=kI.bind(null,u),x._reactRetry=d,null):(u=A.treeContext,ma=Uu(x.nextSibling),fs=d,Ur=!0,So=null,u!==null&&(Ha[Va++]=el,Ha[Va++]=tl,Ha[Va++]=Xc,el=u.id,tl=u.overflow,Xc=d),d=Hf(d,b.children),d.flags|=4096,d)}function tm(u,d,v){u.lanes|=d;var b=u.alternate;b!==null&&(b.lanes|=d),Gi(u.return,d,v)}function nm(u,d,v,b,x){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:v,tailMode:x}:(A.isBackwards=d,A.rendering=null,A.renderingStartTime=0,A.last=b,A.tail=v,A.tailMode=x)}function $u(u,d,v){var b=d.pendingProps,x=b.revealOrder,A=b.tail;if($i(u,d,b.children,v),b=Gr.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&tm(u,v,d);else if(u.tag===19)tm(u,v,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}b&=1}if(Or(Gr,b),(d.mode&1)===0)d.memoizedState=null;else switch(x){case"forwards":for(v=d.child,x=null;v!==null;)u=v.alternate,u!==null&&Qc(u)===null&&(x=v),v=v.sibling;v=x,v===null?(x=d.child,d.child=null):(x=v.sibling,v.sibling=null),nm(d,!1,x,v,A);break;case"backwards":for(v=null,x=d.child,d.child=null;x!==null;){if(u=x.alternate,u!==null&&Qc(u)===null){d.child=x;break}u=x.sibling,x.sibling=v,v=x,x=u}nm(d,!0,v,null,A);break;case"together":nm(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function uv(u,d){(d.mode&1)===0&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function wo(u,d,v){if(u!==null&&(d.dependencies=u.dependencies),qu|=d.lanes,(v&d.childLanes)===0)return null;if(u!==null&&d.child!==u.child)throw Error(n(153));if(d.child!==null){for(u=d.child,v=Mo(u,u.pendingProps),d.child=v,v.return=d;u.sibling!==null;)u=u.sibling,v=v.sibling=Mo(u,u.pendingProps),v.return=d;v.sibling=null}return d.child}function vT(u,d,v){switch(d.tag){case 3:_T(d),rl();break;case 5:pE(d);break;case 1:$s(d.type)&&ja(d);break;case 4:hE(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,x=d.memoizedProps.value;Or(Vp,b._currentValue),b._currentValue=x;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(Or(Gr,Gr.current&1),d.flags|=128,null):(v&d.child.childLanes)!==0?lv(u,d,v):(Or(Gr,Gr.current&1),u=wo(u,d,v),u!==null?u.sibling:null);Or(Gr,Gr.current&1);break;case 19:if(b=(v&d.childLanes)!==0,(u.flags&128)!==0){if(b)return $u(u,d,v);d.flags|=128}if(x=d.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Or(Gr,Gr.current),b)break;return null;case 22:case 23:return d.lanes=0,IE(u,d,v)}return wo(u,d,v)}var Wi,NE,yT,DE;Wi=function(u,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)u.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},NE=function(){},yT=function(u,d,v,b){var x=u.memoizedProps;if(x!==b){u=d.stateNode,Xl(sl.current);var A=null;switch(v){case"input":x=vn(u,x),b=vn(u,b),A=[];break;case"select":x=pe({},x,{value:void 0}),b=pe({},b,{value:void 0}),A=[];break;case"textarea":x=j(u,x),b=j(u,b),A=[];break;default:typeof x.onClick!="function"&&typeof b.onClick=="function"&&(u.onclick=L_)}Yt(v,b);var z;v=null;for(Ae in x)if(!b.hasOwnProperty(Ae)&&x.hasOwnProperty(Ae)&&x[Ae]!=null)if(Ae==="style"){var re=x[Ae];for(z in re)re.hasOwnProperty(z)&&(v||(v={}),v[z]="")}else Ae!=="dangerouslySetInnerHTML"&&Ae!=="children"&&Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&Ae!=="autoFocus"&&(i.hasOwnProperty(Ae)?A||(A=[]):(A=A||[]).push(Ae,null));for(Ae in b){var de=b[Ae];if(re=x!=null?x[Ae]:void 0,b.hasOwnProperty(Ae)&&de!==re&&(de!=null||re!=null))if(Ae==="style")if(re){for(z in re)!re.hasOwnProperty(z)||de&&de.hasOwnProperty(z)||(v||(v={}),v[z]="");for(z in de)de.hasOwnProperty(z)&&re[z]!==de[z]&&(v||(v={}),v[z]=de[z])}else v||(A||(A=[]),A.push(Ae,v)),v=de;else Ae==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,re=re?re.__html:void 0,de!=null&&re!==de&&(A=A||[]).push(Ae,de)):Ae==="children"?typeof de!="string"&&typeof de!="number"||(A=A||[]).push(Ae,""+de):Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ae)?(de!=null&&Ae==="onScroll"&&Nr("scroll",u),A||re===de||(A=[])):(A=A||[]).push(Ae,de))}v&&(A=A||[]).push("style",v);var Ae=A;(d.updateQueue=Ae)&&(d.flags|=4)}},DE=function(u,d,v,b){v!==b&&(d.flags|=4)};function rm(u,d){if(!Ur)switch(u.tailMode){case"hidden":d=u.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var b=null;v!==null;)v.alternate!==null&&(b=v),v=v.sibling;b===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function qi(u){var d=u.alternate!==null&&u.alternate.child===u.child,v=0,b=0;if(d)for(var x=u.child;x!==null;)v|=x.lanes|x.childLanes,b|=x.subtreeFlags&14680064,b|=x.flags&14680064,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)v|=x.lanes|x.childLanes,b|=x.subtreeFlags,b|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=b,u.childLanes=v,d}function wI(u,d,v){var b=d.pendingProps;switch(Yc(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(d),null;case 1:return $s(d.type)&&F_(),qi(d),null;case 3:return b=d.stateNode,Vu(),Dr(Gs),Dr(cs),K_(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(jp(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,So!==null&&(WE(So),So=null))),NE(u,d),qi(d),null;case 5:X_(d);var x=Xl(Lf.current);if(v=d.type,u!==null&&d.stateNode!=null)yT(u,d,v,b,x),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(n(166));return qi(d),null}if(u=Xl(sl.current),jp(d)){b=d.stateNode,v=d.type;var A=d.memoizedProps;switch(b[Jo]=d,b[Fu]=A,u=(d.mode&1)!==0,v){case"dialog":Nr("cancel",b),Nr("close",b);break;case"iframe":case"object":case"embed":Nr("load",b);break;case"video":case"audio":for(x=0;x<Hl.length;x++)Nr(Hl[x],b);break;case"source":Nr("error",b);break;case"img":case"image":case"link":Nr("error",b),Nr("load",b);break;case"details":Nr("toggle",b);break;case"input":pn(b,A),Nr("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!A.multiple},Nr("invalid",b);break;case"textarea":_e(b,A),Nr("invalid",b)}Yt(v,A),x=null;for(var z in A)if(A.hasOwnProperty(z)){var re=A[z];z==="children"?typeof re=="string"?b.textContent!==re&&(A.suppressHydrationWarning!==!0&&Dp(b.textContent,re,u),x=["children",re]):typeof re=="number"&&b.textContent!==""+re&&(A.suppressHydrationWarning!==!0&&Dp(b.textContent,re,u),x=["children",""+re]):i.hasOwnProperty(z)&&re!=null&&z==="onScroll"&&Nr("scroll",b)}switch(v){case"input":Wt(b),Qn(b,A,!0);break;case"textarea":Wt(b),Be(b);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(b.onclick=L_)}b=x,d.updateQueue=b,b!==null&&(d.flags|=4)}else{z=x.nodeType===9?x:x.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Oe(v)),u==="http://www.w3.org/1999/xhtml"?v==="script"?(u=z.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof b.is=="string"?u=z.createElement(v,{is:b.is}):(u=z.createElement(v),v==="select"&&(z=u,b.multiple?z.multiple=!0:b.size&&(z.size=b.size))):u=z.createElementNS(u,v),u[Jo]=d,u[Fu]=b,Wi(u,d,!1,!1),d.stateNode=u;e:{switch(z=an(v,b),v){case"dialog":Nr("cancel",u),Nr("close",u),x=b;break;case"iframe":case"object":case"embed":Nr("load",u),x=b;break;case"video":case"audio":for(x=0;x<Hl.length;x++)Nr(Hl[x],u);x=b;break;case"source":Nr("error",u),x=b;break;case"img":case"image":case"link":Nr("error",u),Nr("load",u),x=b;break;case"details":Nr("toggle",u),x=b;break;case"input":pn(u,b),x=vn(u,b),Nr("invalid",u);break;case"option":x=b;break;case"select":u._wrapperState={wasMultiple:!!b.multiple},x=pe({},b,{value:void 0}),Nr("invalid",u);break;case"textarea":_e(u,b),x=j(u,b),Nr("invalid",u);break;default:x=b}Yt(v,x),re=x;for(A in re)if(re.hasOwnProperty(A)){var de=re[A];A==="style"?Kt(u,de):A==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,de!=null&&yt(u,de)):A==="children"?typeof de=="string"?(v!=="textarea"||de!=="")&&Ut(u,de):typeof de=="number"&&Ut(u,""+de):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?de!=null&&A==="onScroll"&&Nr("scroll",u):de!=null&&C(u,A,de,z))}switch(v){case"input":Wt(u),Qn(u,b,!1);break;case"textarea":Wt(u),Be(u);break;case"option":b.value!=null&&u.setAttribute("value",""+We(b.value));break;case"select":u.multiple=!!b.multiple,A=b.value,A!=null?Y(u,!!b.multiple,A,!1):b.defaultValue!=null&&Y(u,!!b.multiple,b.defaultValue,!0);break;default:typeof x.onClick=="function"&&(u.onclick=L_)}switch(v){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return qi(d),null;case 6:if(u&&d.stateNode!=null)DE(u,d,u.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(n(166));if(v=Xl(Lf.current),Xl(sl.current),jp(d)){if(b=d.stateNode,v=d.memoizedProps,b[Jo]=d,(A=b.nodeValue!==v)&&(u=fs,u!==null))switch(u.tag){case 3:Dp(b.nodeValue,v,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&Dp(b.nodeValue,v,(u.mode&1)!==0)}A&&(d.flags|=4)}else b=(v.nodeType===9?v:v.ownerDocument).createTextNode(b),b[Jo]=d,d.stateNode=b}return qi(d),null;case 13:if(Dr(Gr),b=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Ur&&ma!==null&&(d.mode&1)!==0&&(d.flags&128)===0)uE(),rl(),d.flags|=98560,A=!1;else if(A=jp(d),b!==null&&b.dehydrated!==null){if(u===null){if(!A)throw Error(n(318));if(A=d.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Jo]=d}else rl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;qi(d),A=!1}else So!==null&&(WE(So),So=null),A=!0;if(!A)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=v,d):(b=b!==null,b!==(u!==null&&u.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(u===null||(Gr.current&1)!==0?Si===0&&(Si=3):KE())),d.updateQueue!==null&&(d.flags|=4),qi(d),null);case 4:return Vu(),NE(u,d),u===null&&Nu(d.stateNode.containerInfo),qi(d),null;case 10:return G_(d.type._context),qi(d),null;case 17:return $s(d.type)&&F_(),qi(d),null;case 19:if(Dr(Gr),A=d.memoizedState,A===null)return qi(d),null;if(b=(d.flags&128)!==0,z=A.rendering,z===null)if(b)rm(A,!1);else{if(Si!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(z=Qc(u),z!==null){for(d.flags|=128,rm(A,!1),b=z.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=v,v=d.child;v!==null;)A=v,u=b,A.flags&=14680066,z=A.alternate,z===null?(A.childLanes=0,A.lanes=u,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=z.childLanes,A.lanes=z.lanes,A.child=z.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=z.memoizedProps,A.memoizedState=z.memoizedState,A.updateQueue=z.updateQueue,A.type=z.type,u=z.dependencies,A.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),v=v.sibling;return Or(Gr,Gr.current&1|2),d.child}u=u.sibling}A.tail!==null&&ce()>id&&(d.flags|=128,b=!0,rm(A,!1),d.lanes=4194304)}else{if(!b)if(u=Qc(z),u!==null){if(d.flags|=128,b=!0,v=u.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),rm(A,!0),A.tail===null&&A.tailMode==="hidden"&&!z.alternate&&!Ur)return qi(d),null}else 2*ce()-A.renderingStartTime>id&&v!==1073741824&&(d.flags|=128,b=!0,rm(A,!1),d.lanes=4194304);A.isBackwards?(z.sibling=d.child,d.child=z):(v=A.last,v!==null?v.sibling=z:d.child=z,A.last=z)}return A.tail!==null?(d=A.tail,A.rendering=d,A.tail=d.sibling,A.renderingStartTime=ce(),d.sibling=null,v=Gr.current,Or(Gr,b?v&1|2:v&1),d):(qi(d),null);case 22:case 23:return XE(),b=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(va&1073741824)!==0&&(qi(d),d.subtreeFlags&6&&(d.flags|=8192)):qi(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function TI(u,d){switch(Yc(d),d.tag){case 1:return $s(d.type)&&F_(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Vu(),Dr(Gs),Dr(cs),K_(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 5:return X_(d),null;case 13:if(Dr(Gr),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(n(340));rl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return Dr(Gr),null;case 4:return Vu(),null;case 10:return G_(d.type._context),null;case 22:case 23:return XE(),null;case 24:return null;default:return null}}var cv=!1,$r=!1,Ms=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function Vf(u,d){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(b){Kr(u,d,b)}else v.current=null}function im(u,d,v){try{v()}catch(b){Kr(u,d,b)}}var ET=!1;function xI(u,d){if(Up=g_,u=pr(),Ip(u)){if("selectionStart"in u)var v={start:u.selectionStart,end:u.selectionEnd};else e:{v=(v=u.ownerDocument)&&v.defaultView||window;var b=v.getSelection&&v.getSelection();if(b&&b.rangeCount!==0){v=b.anchorNode;var x=b.anchorOffset,A=b.focusNode;b=b.focusOffset;try{v.nodeType,A.nodeType}catch{v=null;break e}var z=0,re=-1,de=-1,Ae=0,Ke=0,Je=u,qe=null;t:for(;;){for(var bt;Je!==v||x!==0&&Je.nodeType!==3||(re=z+x),Je!==A||b!==0&&Je.nodeType!==3||(de=z+b),Je.nodeType===3&&(z+=Je.nodeValue.length),(bt=Je.firstChild)!==null;)qe=Je,Je=bt;for(;;){if(Je===u)break t;if(qe===v&&++Ae===x&&(re=z),qe===A&&++Ke===b&&(de=z),(bt=Je.nextSibling)!==null)break;Je=qe,qe=Je.parentNode}Je=bt}v=re===-1||de===-1?null:{start:re,end:de}}else v=null}v=v||{start:0,end:0}}else v=null;for(Wc={focusedElem:u,selectionRange:v},g_=!1,Ct=d;Ct!==null;)if(d=Ct,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,Ct=u;else for(;Ct!==null;){d=Ct;try{var It=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(It!==null){var Lt=It.memoizedProps,ti=It.memoizedState,be=d.stateNode,me=be.getSnapshotBeforeUpdate(d.elementType===d.type?Lt:Xa(d.type,Lt),ti);be.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var we=d.stateNode.containerInfo;we.nodeType===1?we.textContent="":we.nodeType===9&&we.documentElement&&we.removeChild(we.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(it){Kr(d,d.return,it)}if(u=d.sibling,u!==null){u.return=d.return,Ct=u;break}Ct=d.return}return It=ET,ET=!1,It}function Jl(u,d,v){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var x=b=b.next;do{if((x.tag&u)===u){var A=x.destroy;x.destroy=void 0,A!==void 0&&im(d,v,A)}x=x.next}while(x!==b)}}function sm(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&u)===u){var b=v.create;v.destroy=b()}v=v.next}while(v!==d)}}function dv(u){var d=u.ref;if(d!==null){var v=u.stateNode;switch(u.tag){case 5:u=v;break;default:u=v}typeof d=="function"?d(u):d.current=u}}function ST(u){var d=u.alternate;d!==null&&(u.alternate=null,ST(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[Jo],delete d[Fu],delete d[D_],delete d[G],delete d[Mf])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function bT(u){return u.tag===5||u.tag===3||u.tag===4}function wT(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||bT(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function UE(u,d,v){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?v.nodeType===8?v.parentNode.insertBefore(u,d):v.insertBefore(u,d):(v.nodeType===8?(d=v.parentNode,d.insertBefore(u,v)):(d=v,d.appendChild(u)),v=v._reactRootContainer,v!=null||d.onclick!==null||(d.onclick=L_));else if(b!==4&&(u=u.child,u!==null))for(UE(u,d,v),u=u.sibling;u!==null;)UE(u,d,v),u=u.sibling}function fv(u,d,v){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?v.insertBefore(u,d):v.appendChild(u);else if(b!==4&&(u=u.child,u!==null))for(fv(u,d,v),u=u.sibling;u!==null;)fv(u,d,v),u=u.sibling}var Fi=null,To=!1;function cl(u,d,v){for(v=v.child;v!==null;)FE(u,d,v),v=v.sibling}function FE(u,d,v){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Tt,v)}catch{}switch(v.tag){case 5:$r||Vf(v,d);case 6:var b=Fi,x=To;Fi=null,cl(u,d,v),Fi=b,To=x,Fi!==null&&(To?(u=Fi,v=v.stateNode,u.nodeType===8?u.parentNode.removeChild(v):u.removeChild(v)):Fi.removeChild(v.stateNode));break;case 18:Fi!==null&&(To?(u=Fi,v=v.stateNode,u.nodeType===8?aE(u.parentNode,v):u.nodeType===1&&aE(u,v),sr(u)):aE(Fi,v.stateNode));break;case 4:b=Fi,x=To,Fi=v.stateNode.containerInfo,To=!0,cl(u,d,v),Fi=b,To=x;break;case 0:case 11:case 14:case 15:if(!$r&&(b=v.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){x=b=b.next;do{var A=x,z=A.destroy;A=A.tag,z!==void 0&&((A&2)!==0||(A&4)!==0)&&im(v,d,z),x=x.next}while(x!==b)}cl(u,d,v);break;case 1:if(!$r&&(Vf(v,d),b=v.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=v.memoizedProps,b.state=v.memoizedState,b.componentWillUnmount()}catch(re){Kr(v,d,re)}cl(u,d,v);break;case 21:cl(u,d,v);break;case 22:v.mode&1?($r=(b=$r)||v.memoizedState!==null,cl(u,d,v),$r=b):cl(u,d,v);break;default:cl(u,d,v)}}function Gf(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new Ms),d.forEach(function(b){var x=OI.bind(null,u,b);v.has(b)||(v.add(b),b.then(x,x))})}}function _a(u,d){var v=d.deletions;if(v!==null)for(var b=0;b<v.length;b++){var x=v[b];try{var A=u,z=d,re=z;e:for(;re!==null;){switch(re.tag){case 5:Fi=re.stateNode,To=!1;break e;case 3:Fi=re.stateNode.containerInfo,To=!0;break e;case 4:Fi=re.stateNode.containerInfo,To=!0;break e}re=re.return}if(Fi===null)throw Error(n(160));FE(A,z,x),Fi=null,To=!1;var de=x.alternate;de!==null&&(de.return=null),x.return=null}catch(Ae){Kr(x,d,Ae)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)BE(d,u),d=d.sibling}function BE(u,d){var v=u.alternate,b=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(_a(d,u),xo(u),b&4){try{Jl(3,u,u.return),sm(3,u)}catch(Lt){Kr(u,u.return,Lt)}try{Jl(5,u,u.return)}catch(Lt){Kr(u,u.return,Lt)}}break;case 1:_a(d,u),xo(u),b&512&&v!==null&&Vf(v,v.return);break;case 5:if(_a(d,u),xo(u),b&512&&v!==null&&Vf(v,v.return),u.flags&32){var x=u.stateNode;try{Ut(x,"")}catch(Lt){Kr(u,u.return,Lt)}}if(b&4&&(x=u.stateNode,x!=null)){var A=u.memoizedProps,z=v!==null?v.memoizedProps:A,re=u.type,de=u.updateQueue;if(u.updateQueue=null,de!==null)try{re==="input"&&A.type==="radio"&&A.name!=null&&Cn(x,A),an(re,z);var Ae=an(re,A);for(z=0;z<de.length;z+=2){var Ke=de[z],Je=de[z+1];Ke==="style"?Kt(x,Je):Ke==="dangerouslySetInnerHTML"?yt(x,Je):Ke==="children"?Ut(x,Je):C(x,Ke,Je,Ae)}switch(re){case"input":ut(x,A);break;case"textarea":Ue(x,A);break;case"select":var qe=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!A.multiple;var bt=A.value;bt!=null?Y(x,!!A.multiple,bt,!1):qe!==!!A.multiple&&(A.defaultValue!=null?Y(x,!!A.multiple,A.defaultValue,!0):Y(x,!!A.multiple,A.multiple?[]:"",!1))}x[Fu]=A}catch(Lt){Kr(u,u.return,Lt)}}break;case 6:if(_a(d,u),xo(u),b&4){if(u.stateNode===null)throw Error(n(162));x=u.stateNode,A=u.memoizedProps;try{x.nodeValue=A}catch(Lt){Kr(u,u.return,Lt)}}break;case 3:if(_a(d,u),xo(u),b&4&&v!==null&&v.memoizedState.isDehydrated)try{sr(d.containerInfo)}catch(Lt){Kr(u,u.return,Lt)}break;case 4:_a(d,u),xo(u);break;case 13:_a(d,u),xo(u),x=u.child,x.flags&8192&&(A=x.memoizedState!==null,x.stateNode.isHidden=A,!A||x.alternate!==null&&x.alternate.memoizedState!==null||(HE=ce())),b&4&&Gf(u);break;case 22:if(Ke=v!==null&&v.memoizedState!==null,u.mode&1?($r=(Ae=$r)||Ke,_a(d,u),$r=Ae):_a(d,u),xo(u),b&8192){if(Ae=u.memoizedState!==null,(u.stateNode.isHidden=Ae)&&!Ke&&(u.mode&1)!==0)for(Ct=u,Ke=u.child;Ke!==null;){for(Je=Ct=Ke;Ct!==null;){switch(qe=Ct,bt=qe.child,qe.tag){case 0:case 11:case 14:case 15:Jl(4,qe,qe.return);break;case 1:Vf(qe,qe.return);var It=qe.stateNode;if(typeof It.componentWillUnmount=="function"){b=qe,v=qe.return;try{d=b,It.props=d.memoizedProps,It.state=d.memoizedState,It.componentWillUnmount()}catch(Lt){Kr(b,v,Lt)}}break;case 5:Vf(qe,qe.return);break;case 22:if(qe.memoizedState!==null){Wu(Je);continue}}bt!==null?(bt.return=qe,Ct=bt):Wu(Je)}Ke=Ke.sibling}e:for(Ke=null,Je=u;;){if(Je.tag===5){if(Ke===null){Ke=Je;try{x=Je.stateNode,Ae?(A=x.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(re=Je.stateNode,de=Je.memoizedProps.style,z=de!=null&&de.hasOwnProperty("display")?de.display:null,re.style.display=cn("display",z))}catch(Lt){Kr(u,u.return,Lt)}}}else if(Je.tag===6){if(Ke===null)try{Je.stateNode.nodeValue=Ae?"":Je.memoizedProps}catch(Lt){Kr(u,u.return,Lt)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===u)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===u)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===u)break e;Ke===Je&&(Ke=null),Je=Je.return}Ke===Je&&(Ke=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:_a(d,u),xo(u),b&4&&Gf(u);break;case 21:break;default:_a(d,u),xo(u)}}function xo(u){var d=u.flags;if(d&2){try{e:{for(var v=u.return;v!==null;){if(bT(v)){var b=v;break e}v=v.return}throw Error(n(160))}switch(b.tag){case 5:var x=b.stateNode;b.flags&32&&(Ut(x,""),b.flags&=-33);var A=wT(u);fv(u,A,x);break;case 3:case 4:var z=b.stateNode.containerInfo,re=wT(u);UE(u,re,z);break;default:throw Error(n(161))}}catch(de){Kr(u,u.return,de)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function hv(u,d,v){Ct=u,zE(u)}function zE(u,d,v){for(var b=(u.mode&1)!==0;Ct!==null;){var x=Ct,A=x.child;if(x.tag===22&&b){var z=x.memoizedState!==null||cv;if(!z){var re=x.alternate,de=re!==null&&re.memoizedState!==null||$r;re=cv;var Ae=$r;if(cv=z,($r=de)&&!Ae)for(Ct=x;Ct!==null;)z=Ct,de=z.child,z.tag===22&&z.memoizedState!==null?TT(x):de!==null?(de.return=z,Ct=de):TT(x);for(;A!==null;)Ct=A,zE(A),A=A.sibling;Ct=x,cv=re,$r=Ae}Co(u)}else(x.subtreeFlags&8772)!==0&&A!==null?(A.return=x,Ct=A):Co(u)}}function Co(u){for(;Ct!==null;){var d=Ct;if((d.flags&8772)!==0){var v=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:$r||sm(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!$r)if(v===null)b.componentDidMount();else{var x=d.elementType===d.type?v.memoizedProps:Xa(d.type,v.memoizedProps);b.componentDidUpdate(x,v.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var A=d.updateQueue;A!==null&&fE(d,A,b);break;case 3:var z=d.updateQueue;if(z!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=d.child.stateNode;break;case 1:v=d.child.stateNode}fE(d,z,v)}break;case 5:var re=d.stateNode;if(v===null&&d.flags&4){v=re;var de=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":de.autoFocus&&v.focus();break;case"img":de.src&&(v.src=de.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ae=d.alternate;if(Ae!==null){var Ke=Ae.memoizedState;if(Ke!==null){var Je=Ke.dehydrated;Je!==null&&sr(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$r||d.flags&512&&dv(d)}catch(qe){Kr(d,d.return,qe)}}if(d===u){Ct=null;break}if(v=d.sibling,v!==null){v.return=d.return,Ct=v;break}Ct=d.return}}function Wu(u){for(;Ct!==null;){var d=Ct;if(d===u){Ct=null;break}var v=d.sibling;if(v!==null){v.return=d.return,Ct=v;break}Ct=d.return}}function TT(u){for(;Ct!==null;){var d=Ct;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{sm(4,d)}catch(de){Kr(d,v,de)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var x=d.return;try{b.componentDidMount()}catch(de){Kr(d,x,de)}}var A=d.return;try{dv(d)}catch(de){Kr(d,A,de)}break;case 5:var z=d.return;try{dv(d)}catch(de){Kr(d,z,de)}}}catch(de){Kr(d,d.return,de)}if(d===u){Ct=null;break}var re=d.sibling;if(re!==null){re.return=d.return,Ct=re;break}Ct=d.return}}var xT=Math.ceil,pv=k.ReactCurrentDispatcher,jE=k.ReactCurrentOwner,Ka=k.ReactCurrentBatchConfig,Vn=0,Bi=null,mi=null,Xi=0,va=0,$f=Vs(0),Si=0,am=null,qu=0,om=0,mv=0,lm=null,Xs=null,HE=0,id=1/0,Ql=null,gv=!1,VE=null,Xu=null,_v=!1,Ku=null,As=0,um=0,GE=null,vv=-1,cm=0;function Is(){return(Vn&6)!==0?ce():vv!==-1?vv:vv=ce()}function Yu(u){return(u.mode&1)===0?1:(Vn&2)!==0&&Xi!==0?Xi&-Xi:iT.transition!==null?(cm===0&&(cm=as()),cm):(u=bn,u!==0||(u=window.event,u=u===void 0?16:Iw(u.type)),u)}function Ro(u,d,v,b){if(50<um)throw um=0,GE=null,Error(n(185));qr(u,v,b),((Vn&2)===0||u!==Bi)&&(u===Bi&&((Vn&2)===0&&(om|=v),Si===4&&Zu(u,Xi)),Ks(u,b),v===1&&Vn===0&&(d.mode&1)===0&&(id=ce()+500,B_&&zu()))}function Ks(u,d){var v=u.callbackNode;Bc(u,d);var b=zs(u,u===Bi?Xi:0);if(b===0)v!==null&&ge(v),u.callbackNode=null,u.callbackPriority=0;else if(d=b&-b,u.callbackPriority!==d){if(v!=null&&ge(v),d===1)u.tag===0?qc(CT.bind(null,u)):tT(CT.bind(null,u)),N_(function(){(Vn&6)===0&&zu()}),v=null;else{switch(zc(b)){case 1:v=pt;break;case 4:v=Ze;break;case 16:v=ct;break;case 536870912:v=$t;break;default:v=ct}v=PT(v,yv.bind(null,u))}u.callbackPriority=d,u.callbackNode=v}}function yv(u,d){if(vv=-1,cm=0,(Vn&6)!==0)throw Error(n(327));var v=u.callbackNode;if(Wf()&&u.callbackNode!==v)return null;var b=zs(u,u===Bi?Xi:0);if(b===0)return null;if((b&30)!==0||(b&u.expiredLanes)!==0||d)d=Ev(u,b);else{d=b;var x=Vn;Vn|=2;var A=MT();(Bi!==u||Xi!==d)&&(Ql=null,id=ce()+500,ad(u,d));do try{MI();break}catch(re){RT(u,re)}while(!0);$l(),pv.current=A,Vn=x,mi!==null?d=0:(Bi=null,Xi=0,d=Si)}if(d!==0){if(d===2&&(x=ur(u),x!==0&&(b=x,d=$E(u,x))),d===1)throw v=am,ad(u,0),Zu(u,b),Ks(u,ce()),v;if(d===6)Zu(u,b);else{if(x=u.current.alternate,(b&30)===0&&!CI(x)&&(d=Ev(u,b),d===2&&(A=ur(u),A!==0&&(b=A,d=$E(u,A))),d===1))throw v=am,ad(u,0),Zu(u,b),Ks(u,ce()),v;switch(u.finishedWork=x,u.finishedLanes=b,d){case 0:case 1:throw Error(n(345));case 2:od(u,Xs,Ql);break;case 3:if(Zu(u,b),(b&130023424)===b&&(d=HE+500-ce(),10<d)){if(zs(u,0)!==0)break;if(x=u.suspendedLanes,(x&b)!==b){Is(),u.pingedLanes|=u.suspendedLanes&x;break}u.timeoutHandle=Du(od.bind(null,u,Xs,Ql),d);break}od(u,Xs,Ql);break;case 4:if(Zu(u,b),(b&4194240)===b)break;for(d=u.eventTimes,x=-1;0<b;){var z=31-Hn(b);A=1<<z,z=d[z],z>x&&(x=z),b&=~A}if(b=x,b=ce()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*xT(b/1960))-b,10<b){u.timeoutHandle=Du(od.bind(null,u,Xs,Ql),b);break}od(u,Xs,Ql);break;case 5:od(u,Xs,Ql);break;default:throw Error(n(329))}}}return Ks(u,ce()),u.callbackNode===v?yv.bind(null,u):null}function $E(u,d){var v=lm;return u.current.memoizedState.isDehydrated&&(ad(u,d).flags|=256),u=Ev(u,d),u!==2&&(d=Xs,Xs=v,d!==null&&WE(d)),u}function WE(u){Xs===null?Xs=u:Xs.push.apply(Xs,u)}function CI(u){for(var d=u;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var b=0;b<v.length;b++){var x=v[b],A=x.getSnapshot;x=x.value;try{if(!Re(A(),x))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Zu(u,d){for(d&=~mv,d&=~om,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var v=31-Hn(d),b=1<<v;u[v]=-1,d&=~b}}function CT(u){if((Vn&6)!==0)throw Error(n(327));Wf();var d=zs(u,0);if((d&1)===0)return Ks(u,ce()),null;var v=Ev(u,d);if(u.tag!==0&&v===2){var b=ur(u);b!==0&&(d=b,v=$E(u,b))}if(v===1)throw v=am,ad(u,0),Zu(u,d),Ks(u,ce()),v;if(v===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,od(u,Xs,Ql),Ks(u,ce()),null}function qE(u,d){var v=Vn;Vn|=1;try{return u(d)}finally{Vn=v,Vn===0&&(id=ce()+500,B_&&zu())}}function sd(u){Ku!==null&&Ku.tag===0&&(Vn&6)===0&&Wf();var d=Vn;Vn|=1;var v=Ka.transition,b=bn;try{if(Ka.transition=null,bn=1,u)return u()}finally{bn=b,Ka.transition=v,Vn=d,(Vn&6)===0&&zu()}}function XE(){va=$f.current,Dr($f)}function ad(u,d){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==-1&&(u.timeoutHandle=-1,Bp(v)),mi!==null)for(v=mi.return;v!==null;){var b=v;switch(Yc(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&F_();break;case 3:Vu(),Dr(Gs),Dr(cs),K_();break;case 5:X_(b);break;case 4:Vu();break;case 13:Dr(Gr);break;case 19:Dr(Gr);break;case 10:G_(b.type._context);break;case 22:case 23:XE()}v=v.return}if(Bi=u,mi=u=Mo(u.current,null),Xi=va=d,Si=0,am=null,mv=om=qu=0,Xs=lm=null,Jc!==null){for(d=0;d<Jc.length;d++)if(v=Jc[d],b=v.interleaved,b!==null){v.interleaved=null;var x=b.next,A=v.pending;if(A!==null){var z=A.next;A.next=x,b.next=z}v.pending=b}Jc=null}return u}function RT(u,d){do{var v=mi;try{if($l(),Wp.current=tv,Nf){for(var b=Xr.memoizedState;b!==null;){var x=b.queue;x!==null&&(x.pending=null),b=b.next}Nf=!1}if(Gu=0,Ei=ii=Xr=null,qp=!1,ed=0,jE.current=null,v===null||v.return===null){Si=1,am=d,mi=null;break}e:{var A=u,z=v.return,re=v,de=d;if(d=Xi,re.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ae=de,Ke=re,Je=Ke.tag;if((Ke.mode&1)===0&&(Je===0||Je===11||Je===15)){var qe=Ke.alternate;qe?(Ke.updateQueue=qe.updateQueue,Ke.memoizedState=qe.memoizedState,Ke.lanes=qe.lanes):(Ke.updateQueue=null,Ke.memoizedState=null)}var bt=mT(z);if(bt!==null){bt.flags&=-257,ME(bt,z,re,A,d),bt.mode&1&&Jp(A,Ae,d),d=bt,de=Ae;var It=d.updateQueue;if(It===null){var Lt=new Set;Lt.add(de),d.updateQueue=Lt}else It.add(de);break e}else{if((d&1)===0){Jp(A,Ae,d),KE();break e}de=Error(n(426))}}else if(Ur&&re.mode&1){var ti=mT(z);if(ti!==null){(ti.flags&65536)===0&&(ti.flags|=256),ME(ti,z,re,A,d),il(rd(de,re));break e}}A=de=rd(de,re),Si!==4&&(Si=2),lm===null?lm=[A]:lm.push(A),A=z;do{switch(A.tag){case 3:A.flags|=65536,d&=-d,A.lanes|=d;var be=Zp(A,de,d);oT(A,be);break e;case 1:re=de;var me=A.type,we=A.stateNode;if((A.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(Xu===null||!Xu.has(we)))){A.flags|=65536,d&=-d,A.lanes|=d;var it=av(A,re,d);oT(A,it);break e}}A=A.return}while(A!==null)}IT(v)}catch(Nt){d=Nt,mi===v&&v!==null&&(mi=v=v.return);continue}break}while(!0)}function MT(){var u=pv.current;return pv.current=tv,u===null?tv:u}function KE(){(Si===0||Si===3||Si===2)&&(Si=4),Bi===null||(qu&268435455)===0&&(om&268435455)===0||Zu(Bi,Xi)}function Ev(u,d){var v=Vn;Vn|=2;var b=MT();(Bi!==u||Xi!==d)&&(Ql=null,ad(u,d));do try{RI();break}catch(x){RT(u,x)}while(!0);if($l(),Vn=v,pv.current=b,mi!==null)throw Error(n(261));return Bi=null,Xi=0,Si}function RI(){for(;mi!==null;)AT(mi)}function MI(){for(;mi!==null&&!Te();)AT(mi)}function AT(u){var d=OT(u.alternate,u,va);u.memoizedProps=u.pendingProps,d===null?IT(u):mi=d,jE.current=null}function IT(u){var d=u;do{var v=d.alternate;if(u=d.return,(d.flags&32768)===0){if(v=wI(v,d,va),v!==null){mi=v;return}}else{if(v=TI(v,d),v!==null){v.flags&=32767,mi=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Si=6,mi=null;return}}if(d=d.sibling,d!==null){mi=d;return}mi=d=u}while(d!==null);Si===0&&(Si=5)}function od(u,d,v){var b=bn,x=Ka.transition;try{Ka.transition=null,bn=1,AI(u,d,v,b)}finally{Ka.transition=x,bn=b}return null}function AI(u,d,v,b){do Wf();while(Ku!==null);if((Vn&6)!==0)throw Error(n(327));v=u.finishedWork;var x=u.finishedLanes;if(v===null)return null;if(u.finishedWork=null,u.finishedLanes=0,v===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var A=v.lanes|v.childLanes;if(js(u,A),u===Bi&&(mi=Bi=null,Xi=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||_v||(_v=!0,PT(ct,function(){return Wf(),null})),A=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||A){A=Ka.transition,Ka.transition=null;var z=bn;bn=1;var re=Vn;Vn|=4,jE.current=null,xI(u,v),BE(v,u),yI(Wc),g_=!!Up,Wc=Up=null,u.current=v,hv(v),Me(),Vn=re,bn=z,Ka.transition=A}else u.current=v;if(_v&&(_v=!1,Ku=u,As=x),A=u.pendingLanes,A===0&&(Xu=null),jn(v.stateNode),Ks(u,ce()),d!==null)for(b=u.onRecoverableError,v=0;v<d.length;v++)x=d[v],b(x.value,{componentStack:x.stack,digest:x.digest});if(gv)throw gv=!1,u=VE,VE=null,u;return(As&1)!==0&&u.tag!==0&&Wf(),A=u.pendingLanes,(A&1)!==0?u===GE?um++:(um=0,GE=u):um=0,zu(),null}function Wf(){if(Ku!==null){var u=zc(As),d=Ka.transition,v=bn;try{if(Ka.transition=null,bn=16>u?16:u,Ku===null)var b=!1;else{if(u=Ku,Ku=null,As=0,(Vn&6)!==0)throw Error(n(331));var x=Vn;for(Vn|=4,Ct=u.current;Ct!==null;){var A=Ct,z=A.child;if((Ct.flags&16)!==0){var re=A.deletions;if(re!==null){for(var de=0;de<re.length;de++){var Ae=re[de];for(Ct=Ae;Ct!==null;){var Ke=Ct;switch(Ke.tag){case 0:case 11:case 15:Jl(8,Ke,A)}var Je=Ke.child;if(Je!==null)Je.return=Ke,Ct=Je;else for(;Ct!==null;){Ke=Ct;var qe=Ke.sibling,bt=Ke.return;if(ST(Ke),Ke===Ae){Ct=null;break}if(qe!==null){qe.return=bt,Ct=qe;break}Ct=bt}}}var It=A.alternate;if(It!==null){var Lt=It.child;if(Lt!==null){It.child=null;do{var ti=Lt.sibling;Lt.sibling=null,Lt=ti}while(Lt!==null)}}Ct=A}}if((A.subtreeFlags&2064)!==0&&z!==null)z.return=A,Ct=z;else e:for(;Ct!==null;){if(A=Ct,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Jl(9,A,A.return)}var be=A.sibling;if(be!==null){be.return=A.return,Ct=be;break e}Ct=A.return}}var me=u.current;for(Ct=me;Ct!==null;){z=Ct;var we=z.child;if((z.subtreeFlags&2064)!==0&&we!==null)we.return=z,Ct=we;else e:for(z=me;Ct!==null;){if(re=Ct,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:sm(9,re)}}catch(Nt){Kr(re,re.return,Nt)}if(re===z){Ct=null;break e}var it=re.sibling;if(it!==null){it.return=re.return,Ct=it;break e}Ct=re.return}}if(Vn=x,zu(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Tt,u)}catch{}b=!0}return b}finally{bn=v,Ka.transition=d}}return!1}function Sv(u,d,v){d=rd(v,d),d=Zp(u,d,1),u=Wa(u,d,1),d=Is(),u!==null&&(qr(u,1,d),Ks(u,d))}function Kr(u,d,v){if(u.tag===3)Sv(u,u,v);else for(;d!==null;){if(d.tag===3){Sv(d,u,v);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Xu===null||!Xu.has(b))){u=rd(v,u),u=av(d,u,1),d=Wa(d,u,1),u=Is(),d!==null&&(qr(d,1,u),Ks(d,u));break}}d=d.return}}function II(u,d,v){var b=u.pingCache;b!==null&&b.delete(d),d=Is(),u.pingedLanes|=u.suspendedLanes&v,Bi===u&&(Xi&v)===v&&(Si===4||Si===3&&(Xi&130023424)===Xi&&500>ce()-HE?ad(u,0):mv|=v),Ks(u,d)}function kT(u,d){d===0&&((u.mode&1)===0?d=1:(d=Fa,Fa<<=1,(Fa&130023424)===0&&(Fa=4194304)));var v=Is();u=Wl(u,d),u!==null&&(qr(u,d,v),Ks(u,v))}function kI(u){var d=u.memoizedState,v=0;d!==null&&(v=d.retryLane),kT(u,v)}function OI(u,d){var v=0;switch(u.tag){case 13:var b=u.stateNode,x=u.memoizedState;x!==null&&(v=x.retryLane);break;case 19:b=u.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(d),kT(u,v)}var OT;OT=function(u,d,v){if(u!==null)if(u.memoizedProps!==d.pendingProps||Gs.current)Rs=!0;else{if((u.lanes&v)===0&&(d.flags&128)===0)return Rs=!1,vT(u,d,v);Rs=(u.flags&131072)!==0}else Rs=!1,Ur&&(d.flags&1048576)!==0&&nT(d,j_,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;uv(u,d),u=d.pendingProps;var x=If(d,cs.current);Hu(d,v),x=td(null,d,b,u,x,v);var A=Y_();return d.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,$s(b)?(A=!0,ja(d)):A=!1,d.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,W_(d),x.updater=iv,d.stateNode=x,x._reactInternals=d,RE(d,b,u,v),d=LE(null,d,b,!0,A,v)):(d.tag=0,Ur&&A&&zp(d),$i(null,d,x,v),d=d.child),d;case 16:b=d.elementType;e:{switch(uv(u,d),u=d.pendingProps,x=b._init,b=x(b._payload),d.type=b,x=d.tag=LI(b),u=Xa(b,u),x){case 0:d=OE(null,d,b,u,v);break e;case 1:d=PE(null,d,b,u,v);break e;case 11:d=gT(null,d,b,u,v);break e;case 14:d=AE(null,d,b,Xa(b.type,u),v);break e}throw Error(n(306,b,""))}return d;case 0:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Xa(b,x),OE(u,d,b,x,v);case 1:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Xa(b,x),PE(u,d,b,x,v);case 3:e:{if(_T(d),u===null)throw Error(n(387));b=d.pendingProps,A=d.memoizedState,x=A.element,aT(u,d),Pf(d,b,null,v);var z=d.memoizedState;if(b=z.element,A.isDehydrated)if(A={element:b,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},d.updateQueue.baseState=A,d.memoizedState=A,d.flags&256){x=rd(Error(n(423)),d),d=ul(u,d,b,v,x);break e}else if(b!==x){x=rd(Error(n(424)),d),d=ul(u,d,b,v,x);break e}else for(ma=Uu(d.stateNode.containerInfo.firstChild),fs=d,Ur=!0,So=null,v=V_(d,null,b,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(rl(),b===x){d=wo(u,d,v);break e}$i(u,d,b,v)}d=d.child}return d;case 5:return pE(d),u===null&&Ws(d),b=d.type,x=d.pendingProps,A=u!==null?u.memoizedProps:null,z=x.children,Fp(b,x)?z=null:A!==null&&Fp(b,A)&&(d.flags|=32),kE(u,d),$i(u,d,z,v),d.child;case 6:return u===null&&Ws(d),null;case 13:return lv(u,d,v);case 4:return hE(d,d.stateNode.containerInfo),b=d.pendingProps,u===null?d.child=ei(d,null,b,v):$i(u,d,b,v),d.child;case 11:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Xa(b,x),gT(u,d,b,x,v);case 7:return $i(u,d,d.pendingProps,v),d.child;case 8:return $i(u,d,d.pendingProps.children,v),d.child;case 12:return $i(u,d,d.pendingProps.children,v),d.child;case 10:e:{if(b=d.type._context,x=d.pendingProps,A=d.memoizedProps,z=x.value,Or(Vp,b._currentValue),b._currentValue=z,A!==null)if(Re(A.value,z)){if(A.children===x.children&&!Gs.current){d=wo(u,d,v);break e}}else for(A=d.child,A!==null&&(A.return=d);A!==null;){var re=A.dependencies;if(re!==null){z=A.child;for(var de=re.firstContext;de!==null;){if(de.context===b){if(A.tag===1){de=ql(-1,v&-v),de.tag=2;var Ae=A.updateQueue;if(Ae!==null){Ae=Ae.shared;var Ke=Ae.pending;Ke===null?de.next=de:(de.next=Ke.next,Ke.next=de),Ae.pending=de}}A.lanes|=v,de=A.alternate,de!==null&&(de.lanes|=v),Gi(A.return,v,d),re.lanes|=v;break}de=de.next}}else if(A.tag===10)z=A.type===d.type?null:A.child;else if(A.tag===18){if(z=A.return,z===null)throw Error(n(341));z.lanes|=v,re=z.alternate,re!==null&&(re.lanes|=v),Gi(z,v,d),z=A.sibling}else z=A.child;if(z!==null)z.return=A;else for(z=A;z!==null;){if(z===d){z=null;break}if(A=z.sibling,A!==null){A.return=z.return,z=A;break}z=z.return}A=z}$i(u,d,x.children,v),d=d.child}return d;case 9:return x=d.type,b=d.pendingProps.children,Hu(d,v),x=Ga(x),b=b(x),d.flags|=1,$i(u,d,b,v),d.child;case 14:return b=d.type,x=Xa(b,d.pendingProps),x=Xa(b.type,x),AE(u,d,b,x,v);case 15:return ll(u,d,d.type,d.pendingProps,v);case 17:return b=d.type,x=d.pendingProps,x=d.elementType===b?x:Xa(b,x),uv(u,d),d.tag=1,$s(b)?(u=!0,ja(d)):u=!1,Hu(d,v),nd(d,b,x),RE(d,b,x,v),LE(null,d,b,!0,u,v);case 19:return $u(u,d,v);case 22:return IE(u,d,v)}throw Error(n(156,d.tag))};function PT(u,d){return $(u,d)}function PI(u,d,v,b){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ya(u,d,v,b){return new PI(u,d,v,b)}function bv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function LI(u){if(typeof u=="function")return bv(u)?1:0;if(u!=null){if(u=u.$$typeof,u===te)return 11;if(u===V)return 14}return 2}function Mo(u,d){var v=u.alternate;return v===null?(v=Ya(u.tag,d,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=d,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,d=u.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function wv(u,d,v,b,x,A){var z=2;if(b=u,typeof u=="function")bv(u)&&(z=1);else if(typeof u=="string")z=5;else e:switch(u){case O:return ld(v.children,x,A,d);case D:z=8,x|=8;break;case L:return u=Ya(12,v,d,x|2),u.elementType=L,u.lanes=A,u;case ne:return u=Ya(13,v,d,x),u.elementType=ne,u.lanes=A,u;case H:return u=Ya(19,v,d,x),u.elementType=H,u.lanes=A,u;case J:return Tv(v,x,A,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case B:z=10;break e;case ee:z=9;break e;case te:z=11;break e;case V:z=14;break e;case W:z=16,b=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return d=Ya(z,v,d,x),d.elementType=u,d.type=b,d.lanes=A,d}function ld(u,d,v,b){return u=Ya(7,u,b,d),u.lanes=v,u}function Tv(u,d,v,b){return u=Ya(22,u,b,d),u.elementType=J,u.lanes=v,u.stateNode={isHidden:!1},u}function YE(u,d,v){return u=Ya(6,u,null,d),u.lanes=v,u}function ZE(u,d,v){return d=Ya(4,u.children!==null?u.children:[],u.key,d),d.lanes=v,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function NI(u,d,v,b,x){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ui(0),this.expirationTimes=Ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.identifierPrefix=b,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function JE(u,d,v,b,x,A,z,re,de){return u=new NI(u,d,v,re,de),d===1?(d=1,A===!0&&(d|=8)):d=0,A=Ya(3,null,null,d),u.current=A,A.stateNode=u,A.memoizedState={element:b,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},W_(A),u}function DI(u,d,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:b==null?null:""+b,children:u,containerInfo:d,implementation:v}}function LT(u){if(!u)return Bu;u=u._reactInternals;e:{if(Ar(u)!==u||u.tag!==1)throw Error(n(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if($s(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(u.tag===1){var v=u.type;if($s(v))return Qw(u,v,d)}return d}function NT(u,d,v,b,x,A,z,re,de){return u=JE(v,b,!0,u,x,A,z,re,de),u.context=LT(null),v=u.current,b=Is(),x=Yu(v),A=ql(b,x),A.callback=d??null,Wa(v,A,x),u.current.lanes=x,qr(u,x,b),Ks(u,b),u}function xv(u,d,v,b){var x=d.current,A=Is(),z=Yu(x);return v=LT(v),d.context===null?d.context=v:d.pendingContext=v,d=ql(A,z),d.payload={element:u},b=b===void 0?null:b,b!==null&&(d.callback=b),u=Wa(x,d,z),u!==null&&(Ro(u,x,z,A),q_(u,x,z)),z}function Cv(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function DT(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<d?v:d}}function QE(u,d){DT(u,d),(u=u.alternate)&&DT(u,d)}var UT=typeof reportError=="function"?reportError:function(u){console.error(u)};function eS(u){this._internalRoot=u}dm.prototype.render=eS.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(n(409));xv(u,d,null,null)},dm.prototype.unmount=eS.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;sd(function(){xv(null,u,null,null)}),d[pa]=null}};function dm(u){this._internalRoot=u}dm.prototype.unstable_scheduleHydration=function(u){if(u){var d=z0();u={blockedOn:null,target:u,priority:d};for(var v=0;v<ku.length&&d!==0&&d<ku[v].priority;v++);ku.splice(v,0,u),v===0&&Mw(u)}};function Rv(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Mv(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function FT(){}function UI(u,d,v,b,x){if(x){if(typeof b=="function"){var A=b;b=function(){var Ae=Cv(z);A.call(Ae)}}var z=NT(d,b,u,0,null,!1,!1,"",FT);return u._reactRootContainer=z,u[pa]=z.current,Nu(u.nodeType===8?u.parentNode:u),sd(),z}for(;x=u.lastChild;)u.removeChild(x);if(typeof b=="function"){var re=b;b=function(){var Ae=Cv(de);re.call(Ae)}}var de=JE(u,0,!1,null,null,!1,!1,"",FT);return u._reactRootContainer=de,u[pa]=de.current,Nu(u.nodeType===8?u.parentNode:u),sd(function(){xv(d,de,v,b)}),de}function Av(u,d,v,b,x){var A=v._reactRootContainer;if(A){var z=A;if(typeof x=="function"){var re=x;x=function(){var de=Cv(z);re.call(de)}}xv(d,z,u,x)}else z=UI(v,d,u,x,b);return Cv(z)}B0=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var v=Di(d.pendingLanes);v!==0&&(Fl(d,v|1),Ks(d,ce()),(Vn&6)===0&&(id=ce()+500,zu()))}break;case 13:sd(function(){var b=Wl(u,1);if(b!==null){var x=Is();Ro(b,u,1,x)}}),QE(u,1)}},h_=function(u){if(u.tag===13){var d=Wl(u,134217728);if(d!==null){var v=Is();Ro(d,u,134217728,v)}QE(u,134217728)}},Cw=function(u){if(u.tag===13){var d=Yu(u),v=Wl(u,d);if(v!==null){var b=Is();Ro(v,u,d,b)}QE(u,d)}},z0=function(){return bn},j0=function(u,d){var v=bn;try{return bn=u,d()}finally{bn=v}},tt=function(u,d,v){switch(d){case"input":if(ut(u,v),d=v.name,v.type==="radio"&&d!=null){for(v=u;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<v.length;d++){var b=v[d];if(b!==u&&b.form===u.form){var x=U_(b);if(!x)throw Error(n(90));ir(b),ut(b,x)}}}break;case"textarea":Ue(u,v);break;case"select":d=v.value,d!=null&&Y(u,!!v.multiple,d,!1)}},wr=qE,oe=sd;var Iv={usingClientEntryPoint:!1,Events:[us,mn,U_,lt,Rn,qE]},fm={findFiberByHostInstance:Qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FI={bundleType:fm.bundleType,version:fm.version,rendererPackageName:fm.rendererPackageName,rendererConfig:fm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=yo(u),u===null?null:u.stateNode},findFiberByHostInstance:fm.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kv.isDisabled&&kv.supportsFiber)try{Tt=kv.inject(FI),tn=kv}catch{}}return eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iv,eo.createPortal=function(u,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rv(d))throw Error(n(200));return DI(u,d,null,v)},eo.createRoot=function(u,d){if(!Rv(u))throw Error(n(299));var v=!1,b="",x=UT;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(x=d.onRecoverableError)),d=JE(u,1,!1,null,null,v,!1,b,x),u[pa]=d.current,Nu(u.nodeType===8?u.parentNode:u),new eS(d)},eo.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=yo(d),u=u===null?null:u.stateNode,u},eo.flushSync=function(u){return sd(u)},eo.hydrate=function(u,d,v){if(!Mv(d))throw Error(n(200));return Av(null,u,d,!0,v)},eo.hydrateRoot=function(u,d,v){if(!Rv(u))throw Error(n(405));var b=v!=null&&v.hydratedSources||null,x=!1,A="",z=UT;if(v!=null&&(v.unstable_strictMode===!0&&(x=!0),v.identifierPrefix!==void 0&&(A=v.identifierPrefix),v.onRecoverableError!==void 0&&(z=v.onRecoverableError)),d=NT(d,null,u,1,v??null,x,!1,A,z),u[pa]=d.current,Nu(u),b)for(u=0;u<b.length;u++)v=b[u],x=v._getVersion,x=x(v._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[v,x]:d.mutableSourceEagerHydrationData.push(v,x);return new dm(d)},eo.render=function(u,d,v){if(!Mv(d))throw Error(n(200));return Av(null,u,d,!1,v)},eo.unmountComponentAtNode=function(u){if(!Mv(u))throw Error(n(40));return u._reactRootContainer?(sd(function(){Av(null,null,u,!1,function(){u._reactRootContainer=null,u[pa]=null})}),!0):!1},eo.unstable_batchedUpdates=qE,eo.unstable_renderSubtreeIntoContainer=function(u,d,v,b){if(!Mv(v))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return Av(u,d,v,!1,b)},eo.version="18.3.1-next-f1338f8080-20240426",eo}var JU;function bz(){if(JU)return o2.exports;JU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),o2.exports=Ese(),o2.exports}var eN=bz();class wz{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function Tz(t){let e=P.useRef({isFocused:!1,observer:null});gz(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=use(r=>{t==null||t(r)});return P.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=a=>{e.current.isFocused=!1,i.disabled&&n(new wz("blur",a)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var a;(a=e.current.observer)===null||a===void 0||a.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let Sse=!1,X1=null,HO=new Set,Eb=new Map,Ig=!1,VO=!1;const bse={Tab:!0,Escape:!0};function tN(t,e){for(let n of HO)n(t,e)}function wse(t){return!(t.metaKey||!mse()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function GC(t){Ig=!0,wse(t)&&(X1="keyboard",tN("keyboard",t))}function yl(t){X1="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Ig=!0,tN("pointer",t))}function xz(t){_se(t)&&(Ig=!0,X1="virtual")}function Cz(t){t.target===window||t.target===document||Sse||!t.isTrusted||(!Ig&&!VO&&(X1="virtual",tN("virtual",t)),Ig=!1,VO=!1)}function Rz(){Ig=!1,VO=!0}function GO(t){if(typeof window>"u"||Eb.get(Jm(t)))return;const e=Jm(t),n=mp(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Ig=!0,r.apply(this,arguments)},n.addEventListener("keydown",GC,!0),n.addEventListener("keyup",GC,!0),n.addEventListener("click",xz,!0),e.addEventListener("focus",Cz,!0),e.addEventListener("blur",Rz,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",yl,!0),n.addEventListener("pointermove",yl,!0),n.addEventListener("pointerup",yl,!0)):(n.addEventListener("mousedown",yl,!0),n.addEventListener("mousemove",yl,!0),n.addEventListener("mouseup",yl,!0)),e.addEventListener("beforeunload",()=>{Mz(t)},{once:!0}),Eb.set(e,{focus:r})}const Mz=(t,e)=>{const n=Jm(t),r=mp(t);e&&r.removeEventListener("DOMContentLoaded",e),Eb.has(n)&&(n.HTMLElement.prototype.focus=Eb.get(n).focus,r.removeEventListener("keydown",GC,!0),r.removeEventListener("keyup",GC,!0),r.removeEventListener("click",xz,!0),n.removeEventListener("focus",Cz,!0),n.removeEventListener("blur",Rz,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",yl,!0),r.removeEventListener("pointermove",yl,!0),r.removeEventListener("pointerup",yl,!0)):(r.removeEventListener("mousedown",yl,!0),r.removeEventListener("mousemove",yl,!0),r.removeEventListener("mouseup",yl,!0)),Eb.delete(n))};function Tse(t){const e=mp(t);let n;return e.readyState!=="loading"?GO(t):(n=()=>{GO(t)},e.addEventListener("DOMContentLoaded",n)),()=>Mz(t,n)}typeof document<"u"&&Tse();function Az(){return X1!=="pointer"}const xse=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Cse(t,e,n){let r=mp(n==null?void 0:n.target);const i=typeof window<"u"?Jm(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?Jm(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,a=typeof window<"u"?Jm(n==null?void 0:n.target).HTMLElement:HTMLElement,o=typeof window<"u"?Jm(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||r.activeElement instanceof i&&!xse.has(r.activeElement.type)||r.activeElement instanceof s||r.activeElement instanceof a&&r.activeElement.isContentEditable,!(t&&e==="keyboard"&&n instanceof o&&!bse[n.key])}function Rse(t,e,n){GO(),P.useEffect(()=>{let r=(i,s)=>{Cse(!!(n!=null&&n.isTextInput),i,s)&&t(Az())};return HO.add(r),()=>{HO.delete(r)}},e)}function Mse(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=P.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),a=Tz(s),o=P.useCallback(l=>{const c=mp(l.target),f=c?jO(c):jO();l.target===l.currentTarget&&f===vz(l.nativeEvent)&&(n&&n(l),i&&i(!0),a(l))},[i,n,a]);return{focusProps:{onFocus:!e&&(n||i||r)?o:void 0,onBlur:!e&&(r||i)?s:void 0}}}function Ase(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=P.useRef({isFocusWithin:!1}),{addGlobalListener:a,removeAllGlobalListeners:o}=Sz(),l=P.useCallback(p=>{p.currentTarget.contains(p.target)&&s.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(s.current.isFocusWithin=!1,o(),n&&n(p),i&&i(!1))},[n,i,s,o]),c=Tz(l),f=P.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const m=mp(p.target),_=jO(m);if(!s.current.isFocusWithin&&_===vz(p.nativeEvent)){r&&r(p),i&&i(!0),s.current.isFocusWithin=!0,c(p);let y=p.currentTarget;a(m,"focus",E=>{if(s.current.isFocusWithin&&!_z(y,E.target)){let S=new wz("blur",new m.defaultView.FocusEvent("blur",{relatedTarget:E.target}));S.target=y,S.currentTarget=y,l(S)}},{capture:!0})}},[r,i,c,a,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:f,onBlur:l}}}let $C=!1,c2=0;function $O(){$C=!0,setTimeout(()=>{$C=!1},50)}function QU(t){t.pointerType==="touch"&&$O()}function Ise(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",QU):document.addEventListener("touchend",$O),c2++,()=>{c2--,!(c2>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",QU):document.removeEventListener("touchend",$O))}}function Iz(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,a]=P.useState(!1),o=P.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;P.useEffect(Ise,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=Sz(),{hoverProps:f,triggerHoverEnd:p}=P.useMemo(()=>{let m=(E,S)=>{if(o.pointerType=S,i||S==="touch"||o.isHovered||!E.currentTarget.contains(E.target))return;o.isHovered=!0;let w=E.currentTarget;o.target=w,l(mp(E.target),"pointerover",R=>{o.isHovered&&o.target&&!_z(o.target,R.target)&&_(R,R.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:w,pointerType:S}),n&&n(!0),a(!0)},_=(E,S)=>{let w=o.target;o.pointerType="",o.target=null,!(S==="touch"||!o.isHovered||!w)&&(o.isHovered=!1,c(),r&&r({type:"hoverend",target:w,pointerType:S}),n&&n(!1),a(!1))},y={};return typeof PointerEvent<"u"?(y.onPointerEnter=E=>{$C&&E.pointerType==="mouse"||m(E,E.pointerType)},y.onPointerLeave=E=>{!i&&E.currentTarget.contains(E.target)&&_(E,E.pointerType)}):(y.onTouchStart=()=>{o.ignoreEmulatedMouseEvents=!0},y.onMouseEnter=E=>{!o.ignoreEmulatedMouseEvents&&!$C&&m(E,"mouse"),o.ignoreEmulatedMouseEvents=!1},y.onMouseLeave=E=>{!i&&E.currentTarget.contains(E.target)&&_(E,"mouse")}),{hoverProps:y,triggerHoverEnd:_}},[e,n,r,i,o,l,c]);return P.useEffect(()=>{i&&p({currentTarget:o.target},o.pointerType)},[i]),{hoverProps:f,isHovered:s}}function kz(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=P.useRef({isFocused:!1,isFocusVisible:e||Az()}),[s,a]=P.useState(!1),[o,l]=P.useState(()=>i.current.isFocused&&i.current.isFocusVisible),c=P.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),f=P.useCallback(_=>{i.current.isFocused=_,a(_),c()},[c]);Rse(_=>{i.current.isFocusVisible=_,c()},[],{isTextInput:n});let{focusProps:p}=Mse({isDisabled:r,onFocusChange:f}),{focusWithinProps:m}=Ase({isDisabled:!r,onFocusWithinChange:f});return{isFocused:s,isFocusVisible:o,focusProps:r?m:p}}var kse=Object.defineProperty,Ose=(t,e,n)=>e in t?kse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d2=(t,e,n)=>(Ose(t,typeof e!="symbol"?e+"":e,n),n);let Pse=class{constructor(){d2(this,"current",this.detect()),d2(this,"handoffState","pending"),d2(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},hg=new Pse;function K1(t){var e,n;return hg.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function GM(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function gp(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return GM(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=gp();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function v0(){let[t]=P.useState(gp);return P.useEffect(()=>()=>t.dispose(),[t]),t}let sa=(t,e)=>{hg.isServer?P.useEffect(t,e):P.useLayoutEffect(t,e)};function Jg(t){let e=P.useRef(t);return sa(()=>{e.current=t},[t]),e}let ar=function(t){let e=Jg(t);return Fe.useCallback((...n)=>e.current(...n),[e])};function Lse(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function Nse(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Dse({disabled:t=!1}={}){let e=P.useRef(null),[n,r]=P.useState(!1),i=v0(),s=ar(()=>{e.current=null,r(!1),i.dispose()}),a=ar(o=>{if(i.dispose(),e.current===null){e.current=o.currentTarget,r(!0);{let l=K1(o.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",c=>{if(e.current){let f=Lse(c);r(Nse(f,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:a,onPointerUp:s,onClick:s}}}let Oz=P.createContext(void 0);function Y1(){return P.useContext(Oz)}function Use({value:t,children:e}){return Fe.createElement(Oz.Provider,{value:t},e)}function WO(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Kh(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Kh),r}var WC=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(WC||{}),Rh=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Rh||{});function Bs(){let t=Bse();return P.useCallback(e=>Fse({mergeRefs:t,...e}),[t])}function Fse({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:o}){o=o??zse;let l=Pz(e,t);if(s)return KT(l,n,r,a,o);let c=i??0;if(c&2){let{static:f=!1,...p}=l;if(f)return KT(p,n,r,a,o)}if(c&1){let{unmount:f=!0,...p}=l;return Kh(f?0:1,{0(){return null},1(){return KT({...p,hidden:!0,style:{display:"none"}},n,r,a,o)}})}return KT(l,n,r,a,o)}function KT(t,e={},n,r,i){let{as:s=n,children:a,refName:o="ref",...l}=f2(t,["unmount","static"]),c=t.ref!==void 0?{[o]:t.ref}:{},f=typeof a=="function"?a(e):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let p={};if(e){let m=!1,_=[];for(let[y,E]of Object.entries(e))typeof E=="boolean"&&(m=!0),E===!0&&_.push(y.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(m){p["data-headlessui-state"]=_.join(" ");for(let y of _)p[`data-${y}`]=""}}if(s===P.Fragment&&(Object.keys(lh(l)).length>0||Object.keys(lh(p)).length>0))if(!P.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(lh(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(lh(l)).concat(Object.keys(lh(p))).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`))}else{let m=f.props,_=m==null?void 0:m.className,y=typeof _=="function"?(...w)=>WO(_(...w),l.className):WO(_,l.className),E=y?{className:y}:{},S=Pz(f.props,lh(f2(l,["ref"])));for(let w in p)w in S&&delete p[w];return P.cloneElement(f,Object.assign({},S,p,c,{ref:i(jse(f),c.ref)},E))}return P.createElement(s,Object.assign({},f2(l,["ref"]),s!==P.Fragment&&c,s!==P.Fragment&&p),f)}function Bse(){let t=P.useRef([]),e=P.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function zse(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Pz(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let a=n[r];for(let o of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;o(i,...s)}}});return e}function Lz(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let a of s)a==null||a(...i)}});return e}function Ss(t){var e;return Object.assign(P.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function lh(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function f2(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function jse(t){return Fe.version.split(".")[0]>="19"?t.props.ref:t.ref}function Hse(t,e,n){let[r,i]=P.useState(n),s=t!==void 0,a=P.useRef(s),o=P.useRef(!1),l=P.useRef(!1);return s&&!a.current&&!o.current?(o.current=!0,a.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&a.current&&!l.current&&(l.current=!0,a.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?t:r,ar(c=>(s||i(c),e==null?void 0:e(c)))]}function Vse(t){let[e]=P.useState(t);return e}function Nz(t={},e=null,n=[]){for(let[r,i]of Object.entries(t))Uz(n,Dz(e,r),i);return n}function Dz(t,e){return t?t+"["+e+"]":e}function Uz(t,e,n){if(Array.isArray(n))for(let[r,i]of n.entries())Uz(t,Dz(e,r.toString()),i);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):Nz(n,e,t)}function Gse(t){var e,n;let r=(e=t==null?void 0:t.form)!=null?e:t.closest("form");if(r){for(let i of r.elements)if(i!==t&&(i.tagName==="INPUT"&&i.type==="submit"||i.tagName==="BUTTON"&&i.type==="submit"||i.nodeName==="INPUT"&&i.type==="image")){i.click();return}(n=r.requestSubmit)==null||n.call(r)}}let $se="span";var kg=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(kg||{});function Wse(t,e){var n;let{features:r=1,...i}=t,s={ref:e,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Bs()({ourProps:s,theirProps:i,slot:{},defaultTag:$se,name:"Hidden"})}let Xy=Ss(Wse),Fz=P.createContext(null);function qse(t){let[e,n]=P.useState(null);return Fe.createElement(Fz.Provider,{value:{target:e}},t.children,Fe.createElement(Xy,{features:kg.Hidden,ref:n}))}function Xse({children:t}){let e=P.useContext(Fz);if(!e)return Fe.createElement(Fe.Fragment,null,t);let{target:n}=e;return n?eN.createPortal(Fe.createElement(Fe.Fragment,null,t),n):null}function Kse({data:t,form:e,disabled:n,onReset:r,overrides:i}){let[s,a]=P.useState(null),o=v0();return P.useEffect(()=>{if(r&&s)return o.addEventListener(s,"reset",r)},[s,e,r]),Fe.createElement(Xse,null,Fe.createElement(Yse,{setForm:a,formId:e}),Nz(t).map(([l,c])=>Fe.createElement(Xy,{features:kg.Hidden,...lh({key:l,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:e,disabled:n,name:l,value:c,...i})})))}function Yse({setForm:t,formId:e}){return P.useEffect(()=>{if(e){let n=document.getElementById(e);n&&t(n)}},[t,e]),e?null:Fe.createElement(Xy,{features:kg.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:n=>{if(!n)return;let r=n.closest("form");r&&t(r)}})}let Bz=P.createContext(void 0);function nN(){return P.useContext(Bz)}function Zse({id:t,children:e}){return Fe.createElement(Bz.Provider,{value:t},e)}function Jse(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&Qse(n)?!1:r}function Qse(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let zz=Symbol();function eae(t,e=!0){return Object.assign(t,{[zz]:e})}function Ul(...t){let e=P.useRef(t);P.useEffect(()=>{e.current=t},[t]);let n=ar(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[zz]))?void 0:n}let $M=P.createContext(null);$M.displayName="DescriptionContext";function jz(){let t=P.useContext($M);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,jz),e}return t}function Hz(){var t,e;return(e=(t=P.useContext($M))==null?void 0:t.value)!=null?e:void 0}function rN(){let[t,e]=P.useState([]);return[t.length>0?t.join(" "):void 0,P.useMemo(()=>function(n){let r=ar(s=>(e(a=>[...a,s]),()=>e(a=>{let o=a.slice(),l=o.indexOf(s);return l!==-1&&o.splice(l,1),o}))),i=P.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Fe.createElement($M.Provider,{value:i},n.children)},[e])]}let tae="p";function nae(t,e){let n=P.useId(),r=Y1(),{id:i=`headlessui-description-${n}`,...s}=t,a=jz(),o=Ul(e);sa(()=>a.register(i),[i,a.register]);let l=r||!1,c=P.useMemo(()=>({...a.slot,disabled:l}),[a.slot,l]),f={ref:o,...a.props,id:i};return Bs()({ourProps:f,theirProps:s,slot:c,defaultTag:tae,name:a.name||"Description"})}let rae=Ss(nae),iN=Object.assign(rae,{});var qC=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(qC||{});let WM=P.createContext(null);WM.displayName="LabelContext";function Vz(){let t=P.useContext(WM);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Vz),e}return t}function sN(t){var e,n,r;let i=(n=(e=P.useContext(WM))==null?void 0:e.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function Gz({inherit:t=!1}={}){let e=sN(),[n,r]=P.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,P.useMemo(()=>function(s){let a=ar(l=>(r(c=>[...c,l]),()=>r(c=>{let f=c.slice(),p=f.indexOf(l);return p!==-1&&f.splice(p,1),f}))),o=P.useMemo(()=>({register:a,slot:s.slot,name:s.name,props:s.props,value:s.value}),[a,s.slot,s.name,s.props,s.value]);return Fe.createElement(WM.Provider,{value:o},s.children)},[r])]}let iae="label";function sae(t,e){var n;let r=P.useId(),i=Vz(),s=nN(),a=Y1(),{id:o=`headlessui-label-${r}`,htmlFor:l=s??((n=i.props)==null?void 0:n.htmlFor),passive:c=!1,...f}=t,p=Ul(e);sa(()=>i.register(o),[o,i.register]);let m=ar(S=>{let w=S.currentTarget;if(w instanceof HTMLLabelElement&&S.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(S),w instanceof HTMLLabelElement){let R=document.getElementById(w.htmlFor);if(R){let C=R.getAttribute("disabled");if(C==="true"||C==="")return;let k=R.getAttribute("aria-disabled");if(k==="true"||k==="")return;(R instanceof HTMLInputElement&&(R.type==="radio"||R.type==="checkbox")||R.role==="radio"||R.role==="checkbox"||R.role==="switch")&&R.click(),R.focus({preventScroll:!0})}}}),_=a||!1,y=P.useMemo(()=>({...i.slot,disabled:_}),[i.slot,_]),E={ref:p,...i.props,id:o,htmlFor:l,onClick:m};return c&&("onClick"in E&&(delete E.htmlFor,delete E.onClick),"onClick"in f&&delete f.onClick),Bs()({ourProps:E,theirProps:f,slot:y,defaultTag:l?iae:"div",name:i.name||"Label"})}let aae=Ss(sae),aN=Object.assign(aae,{}),oae=P.createContext(()=>{});function lae({value:t,children:e}){return Fe.createElement(oae.Provider,{value:t},e)}let uae=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function $z(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let a=e[i].call(n,...s);a&&(n=a,r.forEach(o=>o()))}}}function Wz(t){return P.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let cae=new uae(()=>$z(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function y0(t,e){let n=cae.get(e),r=P.useId(),i=Wz(n);if(sa(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let s=i.indexOf(r),a=i.length;return s===-1&&(s=a,a+=1),s===a-1}let qO=new Map,Sb=new Map;function e4(t){var e;let n=(e=Sb.get(t))!=null?e:0;return Sb.set(t,n+1),n!==0?()=>t4(t):(qO.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>t4(t))}function t4(t){var e;let n=(e=Sb.get(t))!=null?e:1;if(n===1?Sb.delete(t):Sb.set(t,n-1),n!==1)return;let r=qO.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,qO.delete(t))}function dae(t,{allowed:e,disallowed:n}={}){let r=y0(t,"inert-others");sa(()=>{var i,s;if(!r)return;let a=gp();for(let l of(i=n==null?void 0:n())!=null?i:[])l&&a.add(e4(l));let o=(s=e==null?void 0:e())!=null?s:[];for(let l of o){if(!l)continue;let c=K1(l);if(!c)continue;let f=l.parentElement;for(;f&&f!==c.body;){for(let p of f.children)o.some(m=>p.contains(m))||a.add(e4(p));f=f.parentElement}}return a.dispose},[r,e,n])}function fae(t,e,n){let r=Jg(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});P.useEffect(()=>{if(!t)return;let i=e===null?null:e instanceof HTMLElement?e:e.current;if(!i)return;let s=gp();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(i));a.observe(i),s.add(()=>a.disconnect())}return()=>s.dispose()},[e,r,t])}let XC=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),hae=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Md=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Md||{}),XO=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(XO||{}),pae=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(pae||{});function mae(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(XC)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function gae(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(hae)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var qz=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(qz||{});function _ae(t,e=0){var n;return t===((n=K1(t))==null?void 0:n.body)?!1:Kh(e,{0(){return t.matches(XC)},1(){let r=t;for(;r!==null;){if(r.matches(XC))return!0;r=r.parentElement}return!1}})}var vae=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(vae||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ud(t){t==null||t.focus({preventScroll:!0})}let yae=["textarea","input"].join(",");function Eae(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,yae))!=null?n:!1}function Sae(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function bb(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?n?Sae(t):t:e&64?gae(t):mae(t);i.length>0&&a.length>1&&(a=a.filter(_=>!i.some(y=>y!=null&&"current"in y?(y==null?void 0:y.current)===_:y===_))),r=r??s.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(r))-1;if(e&4)return Math.max(0,a.indexOf(r))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},f=0,p=a.length,m;do{if(f>=p||f+p<=0)return 0;let _=l+f;if(e&16)_=(_+p)%p;else{if(_<0)return 3;if(_>=p)return 1}m=a[_],m==null||m.focus(c),f+=o}while(m!==s.activeElement);return e&6&&Eae(m)&&m.select(),2}function Xz(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function bae(){return/Android/gi.test(window.navigator.userAgent)}function wae(){return Xz()||bae()}function rS(t,e,n,r){let i=Jg(n);P.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[t,e,r])}function Kz(t,e,n,r){let i=Jg(n);P.useEffect(()=>{if(!t)return;function s(a){i.current(a)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[t,e,r])}const n4=30;function Tae(t,e,n){let r=y0(t,"outside-click"),i=Jg(n),s=P.useCallback(function(l,c){if(l.defaultPrevented)return;let f=c(l);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let p=function m(_){return typeof _=="function"?m(_()):Array.isArray(_)||_ instanceof Set?_:[_]}(e);for(let m of p)if(m!==null&&(m.contains(f)||l.composed&&l.composedPath().includes(m)))return;return!_ae(f,qz.Loose)&&f.tabIndex!==-1&&l.preventDefault(),i.current(l,f)},[i,e]),a=P.useRef(null);rS(r,"pointerdown",l=>{var c,f;a.current=((f=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:f[0])||l.target},!0),rS(r,"mousedown",l=>{var c,f;a.current=((f=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:f[0])||l.target},!0),rS(r,"click",l=>{wae()||a.current&&(s(l,()=>a.current),a.current=null)},!0);let o=P.useRef({x:0,y:0});rS(r,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),rS(r,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=n4||Math.abs(c.y-o.current.y)>=n4))return s(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),Kz(r,"blur",l=>s(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function qM(...t){return P.useMemo(()=>K1(...t),[...t])}function Yz(t,e,n,r){let i=Jg(n);P.useEffect(()=>{t=t??window;function s(a){i.current(a)}return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s,r)},[t,e,r])}function xae(t,e){return P.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function Cae(){let t;return{before({doc:e}){var n;let r=e.documentElement,i=(n=e.defaultView)!=null?n:window;t=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,t-i);n.style(r,"paddingRight",`${s}px`)}}}function Rae(){return Xz()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=gp();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,a=null;e.addEventListener(t,"click",o=>{if(o.target instanceof HTMLElement)try{let l=o.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),f=t.querySelector(c);f&&!r(f)&&(a=f)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(o.target instanceof HTMLElement)if(r(o.target)){let l=o.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(o.target instanceof HTMLElement){if(o.target.tagName==="INPUT")return;if(r(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;s!==l&&window.scrollTo(0,s),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Mae(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function Aae(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Qm=$z(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:gp(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:Aae(n)},i=[Rae(),Cae(),Mae()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Qm.subscribe(()=>{let t=Qm.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&Qm.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Qm.dispatch("TEARDOWN",n)}});function Iae(t,e,n=()=>({containers:[]})){let r=Wz(Qm),i=e?r.get(e):void 0,s=i?i.count>0:!1;return sa(()=>{if(!(!e||!t))return Qm.dispatch("PUSH",e,n),()=>Qm.dispatch("POP",e,n)},[t,e]),s}function kae(t,e,n=()=>[document.body]){let r=y0(t,"scroll-lock");Iae(r,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function Oae(t=0){let[e,n]=P.useState(t),r=P.useCallback(l=>n(l),[e]),i=P.useCallback(l=>n(c=>c|l),[e]),s=P.useCallback(l=>(e&l)===l,[e]),a=P.useCallback(l=>n(c=>c&~l),[n]),o=P.useCallback(l=>n(c=>c^l),[n]);return{flags:e,setFlag:r,addFlag:i,hasFlag:s,removeFlag:a,toggleFlag:o}}var Pae={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_94c02df4-1f86-4303-bdb6-5b978537e664",VERCEL_PROJECT_ID:"prj_yyCGrzapWaI3YODtOLBpxlai91pH",NOW_BUILDER:"1",npm_package_devDependencies__types_node:"^20.11.30",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",VERCEL_GIT_REPO_OWNER:"",USER:"runner",npm_config_user_agent:"pnpm/9.15.3 npm/? node/v18.18.2 linux x64",CI:"true",TURBO_RUN_SUMMARY:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_94c02df4-1f86-4303-bdb6-5b978537e664",PIPX_HOME:"/opt/pipx",VERCEL_PROJECT_SETTINGS_INSTALL_COMMAND:"pnpm install",npm_package_scripts_start_dev:"vite",npm_package_devDependencies_vite:"^6.2.4",npm_node_execpath:"/home/runner/.nvm/versions/node/v18.18.2/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",VITE_FIREBASE_MESSAGING_SENDER_ID:"1072000975600",npm_package_devDependencies__7nohe_openapi_react_query_codegen:"^1.6.2",npm_package_devDependencies__tanstack_react_query_devtools:"^5.65.1",npm_package_devDependencies_openai:"^4.82.0",HOME:"/home/runner",npm_package_scripts_tsc_check:"tsc --noEmit",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",VITE_RECAPTCHA_SITE_KEY:"6LcBG2ArAAAAANSlSl82BWSfAK9SFPSDeAIPKP_l",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"SesameAILabs",TURBO_DOWNLOAD_LOCAL_ENABLED:"true",VERCEL_ENV:"production",VITE_CLIENT_BUILD_NUMBER:"58",COREPACK_ROOT:"/home/runner/.nvm/versions/node/v18.18.2/lib/node_modules/corepack",npm_package_dependencies__sentry_react:"^9.17.0",npm_package_dependencies__sentry_vite_plugin:"^3.4.0",GRADLE_HOME:"/usr/share/gradle-8.14.3",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/28.2.13676358",VERCEL_ORG_ID:"team_SplzzrdhX7HpUZv91Lx6yQvG",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",npm_package_scripts_api_verify_generated:"tsx ../scripts/verify-generated-files",npm_package_devDependencies_babel_plugin_relay:"^18.2.0",GITHUB_REPOSITORY_OWNER_ID:"136667101",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",SYSTEMD_EXEC_PID:"712",npm_package_scripts_api_generate:"tsx ../scripts/filter-openapi.ts && npx openapi-rq -i ./openapi-filtered.json -o ./src/api/generated && tsx ../scripts/add-generated-headers && rm ./openapi-filtered.json",npm_package_dependencies__sesameailabs_ui:"workspace:*",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",VERCEL_GIT_COMMIT_SHA:"",VERCEL_GIT_PULL_REQUEST_ID:"",VERCEL_TARGET_ENV:"production",npm_package_dependencies_eventemitter3:"^5.0.1",npm_package_dependencies_react_router_dom:"^7.4.1",npm_package_devDependencies_tailwindcss:"^3.4.7",npm_package_devDependencies_typescript:"^5.4.2",NVM_DIR:"/home/runner/.nvm",VERCEL_GIT_COMMIT_REF:"",VITE_LOGIN_MODE:"redirect",npm_package_dependencies_bowser:"2.11.0",npm_package_devDependencies__sesameailabs_eslint_config:"workspace:*",npm_package_devDependencies__types_react_dom:"^18.2.22",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20250710.1.0",npm_package_dependencies__custom_react_hooks_use_media_devices:"^1.5.1",npm_package_devDependencies__playwright_test:"^1.50.1",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.12/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",VERCEL_GIT_PROVIDER:"",VITE_AUTH_DESTINATION:"sesame-ai-demo.firebaseapp.com",npm_package_scripts_api_sign_generated:"tsx ../scripts/add-generated-headers",npm_package_dependencies_zustand:"^4.3.3",npm_package_devDependencies__vitejs_plugin_react:"^4.3.4",npm_package_devDependencies_vite_plugin_require:"^1.1.10",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.10/x64",JOURNAL_STREAM:"9:6304",GITHUB_WORKFLOW:"Deploy / Prod / Consumer Web App",_:"/home/runner/.nvm/versions/node/v18.18.2/bin/vercel",npm_package_private:"true",npm_package_dependencies_gsap:"^3.12.5",npm_package_dependencies_query_string:"^9.1.0",npm_package_devDependencies_autoprefixer:"^10",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/runner-provisioner.service/memory.pressure",GOROOT_1_24_X64:"/opt/hostedtoolcache/go/1.24.4/x64",VITE_DATADOG_RUM_CLIENT_TOKEN:"pubdd980a347a9e4fe18c474b1aa7e40e99",npm_package_scripts_prepare:"cd ../ui && pnpm build",npm_package_scripts_api_check_generated_artifacts:"git diff --quiet ./src/api/generated || (echo '  API client changes detected. Please commit the generated files.' && exit 1)",npm_config_registry:"https://registry.npmjs.org/",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"false",GITHUB_RUN_ID:"16223537844",STATS_VMFE:"true",VERCEL_URL:"",npm_package_devDependencies_node_fetch:"^3.3.2",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"5bbec6b79e5a45a2471e0b28470d1fd781cd11e4",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",VERCEL_GIT_COMMIT_AUTHOR_NAME:"",VITE_FIREBASE_MEASUREMENT_ID:"NFF945RX62",VITE_FIREBASE_STORAGE_BUCKET:"sesame-ai-demo.firebasestorage.app",GITHUB_WORKFLOW_REF:"SesameAILabs/sesame/.github/workflows/vercel-web-consumer-app-prod-deploy.yaml@refs/heads/main",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",VERCEL_GIT_REPO_ID:"",VITE_FIREBASE_AUTH_DOMAIN:"app.sesame.com",npm_package_dependencies_firebaseui:"^6.1.0",npm_config_node_gyp:"/home/runner/.cache/node/corepack/pnpm/9.15.3/dist/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/sesame/sesame/sesame/web/consumer-app/node_modules/.bin:/home/runner/.cache/node/corepack/pnpm/9.15.3/dist/node-gyp-bin:/home/runner/work/sesame/sesame/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/web/consumer-app/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/web/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/node_modules/.bin:/home/runner/work/sesame/sesame/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/web/consumer-app/vendor/bin:/pnpm10/node_modules/.bin:/node22/bin:/home/runner/.nvm/versions/node/v18.18.2/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_c28a809d-6ee5-4c68-82c5-239ddc653412",INVOCATION_ID:"a161665ad694422c83f8d28c6ffb7849",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",TURBO_REMOTE_ONLY:"true",npm_package_name:"consumer-app",NODE:"/home/runner/.nvm/versions/node/v18.18.2/bin/node",GITHUB_ACTION:"__run_6",GITHUB_RUN_NUMBER:"59",GITHUB_TRIGGERING_ACTOR:"donaldchen",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",VITE_SESAME_ENV:"prod",npm_package_dependencies__sesameailabs_web_client:"workspace:*",npm_config_frozen_lockfile:"",YARN_NODE_LINKER:"node-modules",VITE_ENVIRONMENT:"prod",npm_package_dependencies__ffmpeg_ffmpeg:"^0.12.10",npm_package_devDependencies_glob:"^11.0.1",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",npm_package_dependencies_react_dom:"^18.2.0",npm_package_devDependencies_eslint:"^9.0.0",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 1000029192",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"main",GITHUB_REPOSITORY:"SesameAILabs/sesame",STATS_D_D:"false",__VERCEL_BUILD_RUNNING:"1",npm_package_devDependencies_dotenv:"^16.4.7",npm_package_devDependencies_wavefile:"^11.0.0",npm_lifecycle_script:"tsc && vite build",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",npm_package_dependencies_react_responsive:"^10.0.0",GITHUB_REPOSITORY_ID:"656276710",GITHUB_ACTIONS:"true",STATS_PIP:"false",npm_package_version:"0.0.1",npm_package_devDependencies__types_react:"^18.2.67",npm_lifecycle_event:"build",NODE_PATH:"/home/runner/work/sesame/sesame/node_modules/.pnpm/vite@6.2.5_@types+node@20.17.12_jiti@2.4.2_lightningcss@1.29.2_sass@1.86.3_terser@5.37.0_tsx@4.19.3_yaml@2.7.0/node_modules/vite/bin/node_modules:/home/runner/work/sesame/sesame/node_modules/.pnpm/vite@6.2.5_@types+node@20.17.12_jiti@2.4.2_lightningcss@1.29.2_sass@1.86.3_terser@5.37.0_tsx@4.19.3_yaml@2.7.0/node_modules/vite/node_modules:/home/runner/work/sesame/sesame/node_modules/.pnpm/vite@6.2.5_@types+node@20.17.12_jiti@2.4.2_lightningcss@1.29.2_sass@1.86.3_terser@5.37.0_tsx@4.19.3_yaml@2.7.0/node_modules:/home/runner/work/sesame/sesame/node_modules/.pnpm/node_modules",GITHUB_REF_PROTECTED:"true",VITE_FIREBASE_PROJECT_ID:"sesame-ai-demo",npm_package_scripts_build:"tsc && vite build",GITHUB_WORKSPACE:"/home/runner/work/sesame/sesame",ACCEPT_EULA:"Y",GITHUB_JOB:"Deploy-Production",RUNNER_PERFLOG:"/home/runner/perflog",VERCEL_GIT_COMMIT_AUTHOR_LOGIN:"",VITE_DATADOG_CLIENT_TOKEN:"pubc6988a80d0b195496943ccc888005970",VITE_DATADOG_RUM_APPLICATION_ID:"8d4f492d-f4b0-4237-9e00-c6aec780b500",VITE_GOOGLE_ANALYTICS_TRACKING_ID:"G-ZZLPJBMBEN",VITE_SENTRY_AUTH_TOKEN:"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",GEM_HOME:"/home/runner/work/sesame/sesame/sesame/web/consumer-app/vendor/bundle/ruby/3.2.3",GITHUB_SHA:"5bbec6b79e5a45a2471e0b28470d1fd781cd11e4",GITHUB_RUN_ATTEMPT:"1",STATS_D_TC:"true",TURBO_CACHE:"remote:rw",VITE_FIREBASE_APP_ID:"1:1072000975600:web:75b0bf3a9bb8d92e767835",npm_package_dependencies__tanstack_react_query:"^5.65.1",GITHUB_REF:"refs/heads/main",GITHUB_ACTOR:"donaldchen",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",VERCEL:"1",npm_package_scripts_eslint_fix:"eslint . --quiet --fix",npm_package_dependencies__gsap_react:"^2.1.1",npm_package_dependencies_clsx:"^2.1.1",VERCEL_PROJECT_SETTINGS_BUILD_COMMAND:"pnpm build",npm_package_dependencies_firebase:"^11.0.1",npm_package_devDependencies__types_node_fetch:"^2.6.12",npm_package_devDependencies_tsx:"^4.19.3",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_94c02df4-1f86-4303-bdb6-5b978537e664",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/sesame/sesame/sesame/web/consumer-app",GITHUB_ACTOR_ID:"3821698",RUNNER_WORKSPACE:"/home/runner/work/sesame",VITE_SESAME_API_URL:"https://sesameai.app",npm_execpath:"/home/runner/.cache/node/corepack/pnpm/9.15.3/bin/pnpm.cjs",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",STATS_TIS:"mining",GITHUB_EVENT_NAME:"workflow_dispatch",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_94c02df4-1f86-4303-bdb6-5b978537e664",NX_DAEMON:"false",npm_package_dependencies_react_ga4:"^2.1.0",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",VERCEL_OIDC_TOKEN:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Im1yay00MzAyZWMxYjY3MGY0OGE5OGFkNjFkYWRlNGEyM2JlNyJ9.eyJpc3MiOiJodHRwczovL29pZGMudmVyY2VsLmNvbS9zZXNhbWUtYWkiLCJzdWIiOiJvd25lcjpzZXNhbWUtYWk6cHJvamVjdDpzZXNhbWUtd2ViLWNvbnN1bWVyLWFwcDplbnZpcm9ubWVudDpkZXZlbG9wbWVudCIsInNjb3BlIjoib3duZXI6c2VzYW1lLWFpOnByb2plY3Q6c2VzYW1lLXdlYi1jb25zdW1lci1hcHA6ZW52aXJvbm1lbnQ6ZGV2ZWxvcG1lbnQiLCJhdWQiOiJodHRwczovL3ZlcmNlbC5jb20vc2VzYW1lLWFpIiwib3duZXIiOiJzZXNhbWUtYWkiLCJvd25lcl9pZCI6InRlYW1fU3BsenpyZGhYN0hwVVp2OTFMeDZ5UXZHIiwicHJvamVjdCI6InNlc2FtZS13ZWItY29uc3VtZXItYXBwIiwicHJvamVjdF9pZCI6InByal95eUNHcnphcFdhSTNZT0R0T0xCcHhsYWk5MXBIIiwiZW52aXJvbm1lbnQiOiJkZXZlbG9wbWVudCIsInVzZXJfaWQiOiJUU040bllhWjF0TWE1TUExaUY4NkwwS3IiLCJuYmYiOjE3NTIyNDcxNDcsImlhdCI6MTc1MjI0NzE0NywiZXhwIjoxNzUyMjkwMzQ3fQ.UwFolURysh-cJkITRWoM9GwTAEUtrK-tQvLR_ROzauR5_OgTf0hbTBI5oh7mydFx11GF9B9SRMIpkph936G5gvepJt_Qc_OSKRGQjahA9voGk0EMf-5ZjWAcM4LRgV9qPmZ4ga9WMxX3Hn4XQ-WymXaN2CoucsubmuhJb5eaI6RZGRveQ4hcMgXgtgi8O90hxugZRP3Q6an5XL0vtiq8W-m0L8JmPIAPhklrC4P-AJkpjOPEQPvJT_zLG8se6h7LarseWEYNfwCcjy8ijUJzD7Aft7acmUcSmRCsBFyUgcXpSiC29PjHHiE4mLNt3LFvDUsg6xENWmVK3R9Ve-pbvA",npm_package_dependencies__ffmpeg_util:"^0.12.2",npm_package_dependencies_use_debounce:"^10.0.4",npm_package_devDependencies_postcss:"^8",npm_command:"run-script",PNPM_SCRIPT_SRC_DIR:"/home/runner/work/sesame/sesame/sesame/web/consumer-app",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",VERCEL_GIT_COMMIT_MESSAGE:"",VERCEL_GIT_PREVIOUS_SHA:"",VITE_RUDDERSTACK_WRITE_KEY:"2wpiqnS6W3104MQz7mwfyQjME6d",VERCEL_PROJECT_SETTINGS_NODE_VERSION:"22.x",npm_package_scripts_preview:"vite preview",npm_package_dependencies__firebase_app:"^0.10.17",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",STATS_EXTP:"https://provjobdprod.z13.web.core.windows.net/settings/provjobdsettings-latest/provjobd.data",VITE_FIREBASE_API_KEY:"AIzaSyDtC7Uwb5pGAsdmrH2T4Gqdk5Mga07jYPM",VITE_STATSIG_CLIENT_KEY:"client-TGCzyFkjJ0ZvNupjjxCKPpxPEO8WdmZjQhxLgJlgM6H",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_94c02df4-1f86-4303-bdb6-5b978537e664",VERCEL_GIT_REPO_SLUG:"",npm_package_scripts_eslint:"eslint .",npm_package_dependencies_react:"^18.2.0",INIT_CWD:"/home/runner/work/sesame/sesame/sesame/web/consumer-app",NODE_ENV:"production",SENTRY_PIPELINE:"vite-plugin/3.4.0"},r4,i4;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((r4=process==null?void 0:Pae)==null?void 0:r4.NODE_ENV)==="test"&&typeof((i4=Element==null?void 0:Element.prototype)==null?void 0:i4.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Lae=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(Lae||{});function Nae(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function Dae(t,e,n,r){let[i,s]=P.useState(n),{hasFlag:a,addFlag:o,removeFlag:l}=Oae(t&&i?3:0),c=P.useRef(!1),f=P.useRef(!1),p=v0();return sa(()=>{var m;if(t){if(n&&s(!0),!e){n&&o(3);return}return(m=r==null?void 0:r.start)==null||m.call(r,n),Uae(e,{inFlight:c,prepare(){f.current?f.current=!1:f.current=c.current,c.current=!0,!f.current&&(n?(o(3),l(4)):(o(4),l(2)))},run(){f.current?n?(l(3),o(4)):(l(4),o(3)):n?l(1):o(1)},done(){var _;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),n||s(!1),(_=r==null?void 0:r.end)==null||_.call(r,n))}})}},[t,n,e,p]),t?[i,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Uae(t,{prepare:e,run:n,done:r,inFlight:i}){let s=gp();return Bae(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(Fae(t,r))})}),s.dispose}function Fae(t,e){var n,r;let i=gp();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let a=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(o=>o instanceof CSSTransition))!=null?r:[];return a.length===0?(e(),i.dispose):(Promise.allSettled(a.map(o=>o.finished)).then(()=>{s||e()}),i.dispose)}function Bae(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function oN(t,e){let n=P.useRef([]),r=ar(t);P.useEffect(()=>{let i=[...n.current];for(let[s,a]of e.entries())if(n.current[s]!==a){let o=r(e,i);return n.current=e,o}},[r,...e])}let XM=P.createContext(null);XM.displayName="OpenClosedContext";var du=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(du||{});function KM(){return P.useContext(XM)}function zae({value:t,children:e}){return Fe.createElement(XM.Provider,{value:t},e)}function jae({children:t}){return Fe.createElement(XM.Provider,{value:null},t)}function Hae(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let fh=[];Hae(()=>{function t(e){if(!(e.target instanceof HTMLElement)||e.target===document.body||fh[0]===e.target)return;let n=e.target;n=n.closest(XC),fh.unshift(n??e.target),fh=fh.filter(r=>r!=null&&r.isConnected),fh.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Zz(t){let e=ar(t),n=P.useRef(!1);P.useEffect(()=>(n.current=!1,()=>{n.current=!0,GM(()=>{n.current&&e()})}),[e])}function Vae(){let t=typeof document>"u";return"useSyncExternalStore"in WU?(e=>e.useSyncExternalStore)(WU)(()=>()=>{},()=>!1,()=>!t):!1}function Z1(){let t=Vae(),[e,n]=P.useState(hg.isHandoffComplete);return e&&hg.isHandoffComplete===!1&&n(!1),P.useEffect(()=>{e!==!0&&n(!0)},[e]),P.useEffect(()=>hg.handoff(),[]),t?!1:e}let Jz=P.createContext(!1);function Gae(){return P.useContext(Jz)}function s4(t){return Fe.createElement(Jz.Provider,{value:t.force},t.children)}function $ae(t){let e=Gae(),n=P.useContext(e9),[r,i]=P.useState(()=>{var s;if(!e&&n!==null)return(s=n.current)!=null?s:null;if(hg.isServer)return null;let a=t==null?void 0:t.getElementById("headlessui-portal-root");if(a)return a;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return P.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),P.useEffect(()=>{e||n!==null&&i(n.current)},[n,i,e]),r}let Qz=P.Fragment,Wae=Ss(function(t,e){let{ownerDocument:n=null,...r}=t,i=P.useRef(null),s=Ul(eae(_=>{i.current=_}),e),a=qM(i),o=n??a,l=$ae(o),[c]=P.useState(()=>{var _;return hg.isServer?null:(_=o==null?void 0:o.createElement("div"))!=null?_:null}),f=P.useContext(KO),p=Z1();sa(()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))},[l,c]),sa(()=>{if(c&&f)return f.register(c)},[f,c]),Zz(()=>{var _;!l||!c||(c instanceof Node&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&((_=l.parentElement)==null||_.removeChild(l)))});let m=Bs();return p?!l||!c?null:eN.createPortal(m({ourProps:{ref:s},theirProps:r,slot:{},defaultTag:Qz,name:"Portal"}),c):null});function qae(t,e){let n=Ul(e),{enabled:r=!0,ownerDocument:i,...s}=t,a=Bs();return r?Fe.createElement(Wae,{...s,ownerDocument:i,ref:n}):a({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:Qz,name:"Portal"})}let Xae=P.Fragment,e9=P.createContext(null);function Kae(t,e){let{target:n,...r}=t,i={ref:Ul(e)},s=Bs();return Fe.createElement(e9.Provider,{value:n},s({ourProps:i,theirProps:r,defaultTag:Xae,name:"Popover.Group"}))}let KO=P.createContext(null);function Yae(){let t=P.useContext(KO),e=P.useRef([]),n=ar(s=>(e.current.push(s),t&&t.register(s),()=>r(s))),r=ar(s=>{let a=e.current.indexOf(s);a!==-1&&e.current.splice(a,1),t&&t.unregister(s)}),i=P.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,P.useMemo(()=>function({children:s}){return Fe.createElement(KO.Provider,{value:i},s)},[i])]}let Zae=Ss(qae),t9=Ss(Kae),Jae=Object.assign(Zae,{Group:t9});function Qae(t,e=typeof document<"u"?document.defaultView:null,n){let r=y0(t,"escape");Yz(e,"keydown",i=>{r&&(i.defaultPrevented||i.key===qC.Escape&&n(i))})}function eoe(){var t;let[e]=P.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=P.useState((t=e==null?void 0:e.matches)!=null?t:!1);return sa(()=>{if(!e)return;function i(s){r(s.matches)}return e.addEventListener("change",i),()=>e.removeEventListener("change",i)},[e]),n}function toe({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=qM(n),i=ar(()=>{var s,a;let o=[];for(let l of t)l!==null&&(l instanceof HTMLElement?o.push(l):"current"in l&&l.current instanceof HTMLElement&&o.push(l.current));if(e!=null&&e.current)for(let l of e.current)o.push(l);for(let l of(s=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((a=n==null?void 0:n.getRootNode())==null?void 0:a.host))||o.some(c=>l.contains(c))||o.push(l));return o});return{resolveContainers:i,contains:ar(s=>i().some(a=>a.contains(s)))}}let n9=P.createContext(null);function a4({children:t,node:e}){let[n,r]=P.useState(null),i=r9(e??n);return Fe.createElement(n9.Provider,{value:i},t,i===null&&Fe.createElement(Xy,{features:kg.Hidden,ref:s=>{var a,o;if(s){for(let l of(o=(a=K1(s))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?o:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(s)){r(l);break}}}}))}function r9(t=null){var e;return(e=P.useContext(n9))!=null?e:t}function lN(){let t=P.useRef(!1);return sa(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var eb=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(eb||{});function noe(){let t=P.useRef(0);return Kz(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function i9(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let roe="div";var $m=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))($m||{});function ioe(t,e){let n=P.useRef(null),r=Ul(n,e),{initialFocus:i,initialFocusFallback:s,containers:a,features:o=15,...l}=t;Z1()||(o=0);let c=qM(n);loe(o,{ownerDocument:c});let f=uoe(o,{ownerDocument:c,container:n,initialFocus:i,initialFocusFallback:s});coe(o,{ownerDocument:c,container:n,containers:a,previousActiveElement:f});let p=noe(),m=ar(R=>{let C=n.current;C&&(k=>k())(()=>{Kh(p.current,{[eb.Forwards]:()=>{bb(C,Md.First,{skipElements:[R.relatedTarget,s]})},[eb.Backwards]:()=>{bb(C,Md.Last,{skipElements:[R.relatedTarget,s]})}})})}),_=y0(!!(o&2),"focus-trap#tab-lock"),y=v0(),E=P.useRef(!1),S={ref:r,onKeyDown(R){R.key=="Tab"&&(E.current=!0,y.requestAnimationFrame(()=>{E.current=!1}))},onBlur(R){if(!(o&4))return;let C=i9(a);n.current instanceof HTMLElement&&C.add(n.current);let k=R.relatedTarget;k instanceof HTMLElement&&k.dataset.headlessuiFocusGuard!=="true"&&(s9(C,k)||(E.current?bb(n.current,Kh(p.current,{[eb.Forwards]:()=>Md.Next,[eb.Backwards]:()=>Md.Previous})|Md.WrapAround,{relativeTo:R.target}):R.target instanceof HTMLElement&&Ud(R.target)))}},w=Bs();return Fe.createElement(Fe.Fragment,null,_&&Fe.createElement(Xy,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:kg.Focusable}),w({ourProps:S,theirProps:l,defaultTag:roe,name:"FocusTrap"}),_&&Fe.createElement(Xy,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:kg.Focusable}))}let soe=Ss(ioe),aoe=Object.assign(soe,{features:$m});function ooe(t=!0){let e=P.useRef(fh.slice());return oN(([n],[r])=>{r===!0&&n===!1&&GM(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=fh.slice())},[t,fh,e]),ar(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function loe(t,{ownerDocument:e}){let n=!!(t&8),r=ooe(n);oN(()=>{n||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Ud(r())},[n]),Zz(()=>{n&&Ud(r())})}function uoe(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:i}){let s=P.useRef(null),a=y0(!!(t&1),"focus-trap#initial-focus"),o=lN();return oN(()=>{if(t===0)return;if(!a){i!=null&&i.current&&Ud(i.current);return}let l=n.current;l&&GM(()=>{if(!o.current)return;let c=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===c){s.current=c;return}}else if(l.contains(c)){s.current=c;return}if(r!=null&&r.current)Ud(r.current);else{if(t&16){if(bb(l,Md.First|Md.AutoFocus)!==XO.Error)return}else if(bb(l,Md.First)!==XO.Error)return;if(i!=null&&i.current&&(Ud(i.current),(e==null?void 0:e.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}s.current=e==null?void 0:e.activeElement})},[i,a,t]),s}function coe(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:i}){let s=lN(),a=!!(t&4);Yz(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!s.current)return;let l=i9(r);n.current instanceof HTMLElement&&l.add(n.current);let c=i.current;if(!c)return;let f=o.target;f&&f instanceof HTMLElement?s9(l,f)?(i.current=f,Ud(f)):(o.preventDefault(),o.stopPropagation(),Ud(c)):Ud(i.current)},!0)}function s9(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function a9(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:l9)!==P.Fragment||Fe.Children.count(t.children)===1}let YM=P.createContext(null);YM.displayName="TransitionContext";var doe=(t=>(t.Visible="visible",t.Hidden="hidden",t))(doe||{});function foe(){let t=P.useContext(YM);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function hoe(){let t=P.useContext(ZM);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let ZM=P.createContext(null);ZM.displayName="NestingContext";function JM(t){return"children"in t?JM(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function o9(t,e){let n=Jg(t),r=P.useRef([]),i=lN(),s=v0(),a=ar((_,y=Rh.Hidden)=>{let E=r.current.findIndex(({el:S})=>S===_);E!==-1&&(Kh(y,{[Rh.Unmount](){r.current.splice(E,1)},[Rh.Hidden](){r.current[E].state="hidden"}}),s.microTask(()=>{var S;!JM(r)&&i.current&&((S=n.current)==null||S.call(n))}))}),o=ar(_=>{let y=r.current.find(({el:E})=>E===_);return y?y.state!=="visible"&&(y.state="visible"):r.current.push({el:_,state:"visible"}),()=>a(_,Rh.Unmount)}),l=P.useRef([]),c=P.useRef(Promise.resolve()),f=P.useRef({enter:[],leave:[]}),p=ar((_,y,E)=>{l.current.splice(0),e&&(e.chains.current[y]=e.chains.current[y].filter(([S])=>S!==_)),e==null||e.chains.current[y].push([_,new Promise(S=>{l.current.push(S)})]),e==null||e.chains.current[y].push([_,new Promise(S=>{Promise.all(f.current[y].map(([w,R])=>R)).then(()=>S())})]),y==="enter"?c.current=c.current.then(()=>e==null?void 0:e.wait.current).then(()=>E(y)):E(y)}),m=ar((_,y,E)=>{Promise.all(f.current[y].splice(0).map(([S,w])=>w)).then(()=>{var S;(S=l.current.shift())==null||S()}).then(()=>E(y))});return P.useMemo(()=>({children:r,register:o,unregister:a,onStart:p,onStop:m,wait:c,chains:f}),[o,a,r,p,m,f,c])}let l9=P.Fragment,u9=WC.RenderStrategy;function poe(t,e){var n,r;let{transition:i=!0,beforeEnter:s,afterEnter:a,beforeLeave:o,afterLeave:l,enter:c,enterFrom:f,enterTo:p,entered:m,leave:_,leaveFrom:y,leaveTo:E,...S}=t,[w,R]=P.useState(null),C=P.useRef(null),k=a9(t),M=Ul(...k?[C,e,R]:e===null?[]:[e]),N=(n=S.unmount)==null||n?Rh.Unmount:Rh.Hidden,{show:O,appear:D,initial:L}=foe(),[B,ee]=P.useState(O?"visible":"hidden"),te=hoe(),{register:ne,unregister:H}=te;sa(()=>ne(C),[ne,C]),sa(()=>{if(N===Rh.Hidden&&C.current){if(O&&B!=="visible"){ee("visible");return}return Kh(B,{hidden:()=>H(C),visible:()=>ne(C)})}},[B,C,ne,H,O,N]);let V=Z1();sa(()=>{if(k&&V&&B==="visible"&&C.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[C,B,V,k]);let W=L&&!D,J=D&&O&&L,X=P.useRef(!1),ie=o9(()=>{X.current||(ee("hidden"),H(C))},te),pe=ar(Le=>{X.current=!0;let We=Le?"enter":"leave";ie.onStart(C,We,ot=>{ot==="enter"?s==null||s():ot==="leave"&&(o==null||o())})}),Z=ar(Le=>{let We=Le?"enter":"leave";X.current=!1,ie.onStop(C,We,ot=>{ot==="enter"?a==null||a():ot==="leave"&&(l==null||l())}),We==="leave"&&!JM(ie)&&(ee("hidden"),H(C))});P.useEffect(()=>{k&&i||(pe(O),Z(O))},[O,k,i]);let le=!(!i||!k||!V||W),[,ae]=Dae(le,w,O,{start:pe,end:Z}),Ee=lh({ref:M,className:((r=WO(S.className,J&&c,J&&f,ae.enter&&c,ae.enter&&ae.closed&&f,ae.enter&&!ae.closed&&p,ae.leave&&_,ae.leave&&!ae.closed&&y,ae.leave&&ae.closed&&E,!ae.transition&&O&&m))==null?void 0:r.trim())||void 0,...Nae(ae)}),ke=0;B==="visible"&&(ke|=du.Open),B==="hidden"&&(ke|=du.Closed),ae.enter&&(ke|=du.Opening),ae.leave&&(ke|=du.Closing);let $e=Bs();return Fe.createElement(ZM.Provider,{value:ie},Fe.createElement(zae,{value:ke},$e({ourProps:Ee,theirProps:S,defaultTag:l9,features:u9,visible:B==="visible",name:"Transition.Child"})))}function moe(t,e){let{show:n,appear:r=!1,unmount:i=!0,...s}=t,a=P.useRef(null),o=a9(t),l=Ul(...o?[a,e]:e===null?[]:[e]);Z1();let c=KM();if(n===void 0&&c!==null&&(n=(c&du.Open)===du.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,p]=P.useState(n?"visible":"hidden"),m=o9(()=>{n||p("hidden")}),[_,y]=P.useState(!0),E=P.useRef([n]);sa(()=>{_!==!1&&E.current[E.current.length-1]!==n&&(E.current.push(n),y(!1))},[E,n]);let S=P.useMemo(()=>({show:n,appear:r,initial:_}),[n,r,_]);sa(()=>{n?p("visible"):!JM(m)&&a.current!==null&&p("hidden")},[n,m]);let w={unmount:i},R=ar(()=>{var M;_&&y(!1),(M=t.beforeEnter)==null||M.call(t)}),C=ar(()=>{var M;_&&y(!1),(M=t.beforeLeave)==null||M.call(t)}),k=Bs();return Fe.createElement(ZM.Provider,{value:m},Fe.createElement(YM.Provider,{value:S},k({ourProps:{...w,as:P.Fragment,children:Fe.createElement(c9,{ref:l,...w,...s,beforeEnter:R,beforeLeave:C})},theirProps:{},defaultTag:P.Fragment,features:u9,visible:f==="visible",name:"Transition"})))}function goe(t,e){let n=P.useContext(YM)!==null,r=KM()!==null;return Fe.createElement(Fe.Fragment,null,!n&&r?Fe.createElement(YO,{ref:e,...t}):Fe.createElement(c9,{ref:e,...t}))}let YO=Ss(moe),c9=Ss(poe),$b=Ss(goe),d9=Object.assign(YO,{Child:$b,Root:YO});var _oe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(_oe||{}),voe=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(voe||{});let yoe={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},uN=P.createContext(null);uN.displayName="DialogContext";function QM(t){let e=P.useContext(uN);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,QM),n}return e}function Eoe(t,e){return Kh(e.type,yoe,t,e)}let o4=Ss(function(t,e){let n=P.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:s,initialFocus:a,role:o="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:f=!1,...p}=t,m=P.useRef(!1);o=function(){return o==="dialog"||o==="alertdialog"?o:(m.current||(m.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let _=KM();i===void 0&&_!==null&&(i=(_&du.Open)===du.Open);let y=P.useRef(null),E=Ul(y,e),S=qM(y),w=i?0:1,[R,C]=P.useReducer(Eoe,{titleId:null,descriptionId:null,panelRef:P.createRef()}),k=ar(()=>s(!1)),M=ar(Z=>C({type:0,id:Z})),N=Z1()?w===0:!1,[O,D]=Yae(),L={get current(){var Z;return(Z=R.panelRef.current)!=null?Z:y.current}},B=r9(),{resolveContainers:ee}=toe({mainTreeNode:B,portals:O,defaultContainers:[L]}),te=_!==null?(_&du.Closing)===du.Closing:!1;dae(c||te?!1:N,{allowed:ar(()=>{var Z,le;return[(le=(Z=y.current)==null?void 0:Z.closest("[data-headlessui-portal]"))!=null?le:null]}),disallowed:ar(()=>{var Z;return[(Z=B==null?void 0:B.closest("body > *:not(#headlessui-portal-root)"))!=null?Z:null]})}),Tae(N,ee,Z=>{Z.preventDefault(),k()}),Qae(N,S==null?void 0:S.defaultView,Z=>{Z.preventDefault(),Z.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),k()}),kae(c||te?!1:N,S,ee),fae(N,y,k);let[ne,H]=rN(),V=P.useMemo(()=>[{dialogState:w,close:k,setTitleId:M,unmount:f},R],[w,R,k,M,f]),W=P.useMemo(()=>({open:w===0}),[w]),J={ref:E,id:r,role:o,tabIndex:-1,"aria-modal":c?void 0:w===0?!0:void 0,"aria-labelledby":R.titleId,"aria-describedby":ne,unmount:f},X=!eoe(),ie=$m.None;N&&!c&&(ie|=$m.RestoreFocus,ie|=$m.TabLock,l&&(ie|=$m.AutoFocus),X&&(ie|=$m.InitialFocus));let pe=Bs();return Fe.createElement(jae,null,Fe.createElement(s4,{force:!0},Fe.createElement(Jae,null,Fe.createElement(uN.Provider,{value:V},Fe.createElement(t9,{target:y},Fe.createElement(s4,{force:!1},Fe.createElement(H,{slot:W},Fe.createElement(D,null,Fe.createElement(aoe,{initialFocus:a,initialFocusFallback:y,containers:ee,features:ie},Fe.createElement(lae,{value:k},pe({ourProps:J,theirProps:p,slot:W,defaultTag:Soe,features:boe,visible:w===0,name:"Dialog"})))))))))))}),Soe="div",boe=WC.RenderStrategy|WC.Static;function woe(t,e){let{transition:n=!1,open:r,...i}=t,s=KM(),a=t.hasOwnProperty("open")||s!==null,o=t.hasOwnProperty("onClose");if(!a&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!s&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!i.static?Fe.createElement(a4,null,Fe.createElement(d9,{show:r,transition:n,unmount:i.unmount},Fe.createElement(o4,{ref:e,...i}))):Fe.createElement(a4,null,Fe.createElement(o4,{ref:e,open:r,...i}))}let Toe="div";function xoe(t,e){let n=P.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...s}=t,[{dialogState:a,unmount:o},l]=QM("Dialog.Panel"),c=Ul(e,l.panelRef),f=P.useMemo(()=>({open:a===0}),[a]),p=ar(S=>{S.stopPropagation()}),m={ref:c,id:r,onClick:p},_=i?$b:P.Fragment,y=i?{unmount:o}:{},E=Bs();return Fe.createElement(_,{...y},E({ourProps:m,theirProps:s,slot:f,defaultTag:Toe,name:"Dialog.Panel"}))}let Coe="div";function Roe(t,e){let{transition:n=!1,...r}=t,[{dialogState:i,unmount:s}]=QM("Dialog.Backdrop"),a=P.useMemo(()=>({open:i===0}),[i]),o={ref:e,"aria-hidden":!0},l=n?$b:P.Fragment,c=n?{unmount:s}:{},f=Bs();return Fe.createElement(l,{...c},f({ourProps:o,theirProps:r,slot:a,defaultTag:Coe,name:"Dialog.Backdrop"}))}let Moe="h2";function Aoe(t,e){let n=P.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=t,[{dialogState:s,setTitleId:a}]=QM("Dialog.Title"),o=Ul(e);P.useEffect(()=>(a(r),()=>a(null)),[r,a]);let l=P.useMemo(()=>({open:s===0}),[s]),c={ref:o,id:r};return Bs()({ourProps:c,theirProps:i,slot:l,defaultTag:Moe,name:"Dialog.Title"})}let Ioe=Ss(woe),cN=Ss(xoe);Ss(Roe);let koe=Ss(Aoe),Ooe=Object.assign(Ioe,{Panel:cN,Title:koe,Description:iN}),Poe="div";function Loe(t,e){let n=`headlessui-control-${P.useId()}`,[r,i]=Gz(),[s,a]=rN(),o=Y1(),{disabled:l=o||!1,...c}=t,f=P.useMemo(()=>({disabled:l}),[l]),p={ref:e,disabled:l||void 0,"aria-disabled":l||void 0},m=Bs();return Fe.createElement(Use,{value:l},Fe.createElement(i,{value:r},Fe.createElement(a,{value:s},Fe.createElement(Zse,{id:n},m({ourProps:p,theirProps:{...c,children:Fe.createElement(qse,null,typeof c.children=="function"?c.children(f):c.children)},slot:f,defaultTag:Poe,name:"Field"})))))}let f9=Ss(Loe),Noe="input";function Doe(t,e){let n=P.useId(),r=nN(),i=Y1(),{id:s=r||`headlessui-input-${n}`,disabled:a=i||!1,autoFocus:o=!1,invalid:l=!1,...c}=t,f=sN(),p=Hz(),{isFocused:m,focusProps:_}=kz({autoFocus:o}),{isHovered:y,hoverProps:E}=Iz({isDisabled:a}),S=Lz({ref:e,id:s,"aria-labelledby":f,"aria-describedby":p,"aria-invalid":l?"true":void 0,disabled:a||void 0,autoFocus:o},_,E),w=P.useMemo(()=>({disabled:a,invalid:l,hover:y,focus:m,autofocus:o}),[a,l,y,m,o]);return Bs()({ourProps:S,theirProps:c,slot:w,defaultTag:Noe,name:"Input"})}let Uoe=Ss(Doe),dN=P.createContext(null);dN.displayName="GroupContext";let Foe=P.Fragment;function Boe(t){var e;let[n,r]=P.useState(null),[i,s]=Gz(),[a,o]=rN(),l=P.useMemo(()=>({switch:n,setSwitch:r}),[n,r]),c={},f=t,p=Bs();return Fe.createElement(o,{name:"Switch.Description",value:a},Fe.createElement(s,{name:"Switch.Label",value:i,props:{htmlFor:(e=l.switch)==null?void 0:e.id,onClick(m){n&&(m.currentTarget instanceof HTMLLabelElement&&m.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},Fe.createElement(dN.Provider,{value:l},p({ourProps:c,theirProps:f,slot:{},defaultTag:Foe,name:"Switch.Group"}))))}let zoe="button";function joe(t,e){var n;let r=P.useId(),i=nN(),s=Y1(),{id:a=i||`headlessui-switch-${r}`,disabled:o=s||!1,checked:l,defaultChecked:c,onChange:f,name:p,value:m,form:_,autoFocus:y=!1,...E}=t,S=P.useContext(dN),[w,R]=P.useState(null),C=P.useRef(null),k=Ul(C,e,S===null?null:S.setSwitch,R),M=Vse(c),[N,O]=Hse(l,f,M??!1),D=v0(),[L,B]=P.useState(!1),ee=ar(()=>{B(!0),O==null||O(!N),D.nextFrame(()=>{B(!1)})}),te=ar(Le=>{if(Jse(Le.currentTarget))return Le.preventDefault();Le.preventDefault(),ee()}),ne=ar(Le=>{Le.key===qC.Space?(Le.preventDefault(),ee()):Le.key===qC.Enter&&Gse(Le.currentTarget)}),H=ar(Le=>Le.preventDefault()),V=sN(),W=Hz(),{isFocusVisible:J,focusProps:X}=kz({autoFocus:y}),{isHovered:ie,hoverProps:pe}=Iz({isDisabled:o}),{pressed:Z,pressProps:le}=Dse({disabled:o}),ae=P.useMemo(()=>({checked:N,disabled:o,hover:ie,focus:J,active:Z,autofocus:y,changing:L}),[N,ie,J,Z,o,L,y]),Ee=Lz({id:a,ref:k,role:"switch",type:xae(t,w),tabIndex:t.tabIndex===-1?0:(n=t.tabIndex)!=null?n:0,"aria-checked":N,"aria-labelledby":V,"aria-describedby":W,disabled:o||void 0,autoFocus:y,onClick:te,onKeyUp:ne,onKeyPress:H},X,pe,le),ke=P.useCallback(()=>{if(M!==void 0)return O==null?void 0:O(M)},[O,M]),$e=Bs();return Fe.createElement(Fe.Fragment,null,p!=null&&Fe.createElement(Kse,{disabled:o,data:{[p]:m||"on"},overrides:{type:"checkbox",checked:N},form:_,onReset:ke}),$e({ourProps:Ee,theirProps:E,slot:ae,defaultTag:zoe,name:"Switch"}))}let Hoe=Ss(joe),Voe=Boe,Goe=aN,$oe=iN,Woe=Object.assign(Hoe,{Group:Voe,Label:Goe,Description:$oe});var Qg={DEFAULT:0,XS:480,SM:640,MD:768,LG:1024,XL:1280},h9=({width:t=24,height:e=24})=>{const n=Fe.useMemo(()=>({maxWidth:`${t}px`,maxHeight:`${e}px`}),[t,e]);return U.jsx("div",{className:"inline-flex items-center gap-2",style:n,children:U.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin fill-green18",fill:"none",viewBox:"0 0 100 101",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),U.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})},bl=(...t)=>t.filter(Boolean).join(" "),Wb=(t=>(t.BUTTON="button",t.SUBMIT="submit",t.RESET="reset",t))(Wb||{}),qb=(t=>(t.SMALL="sm",t.MEDIUM="md",t.LARGE="lg",t.XLARGE="xl",t))(qb||{}),vi=(t=>(t.PRIMARY="primary",t.BRAND="brand",t.SECONDARY="secondary",t.TERTIARY="tertiary",t.DELETE="delete",t.GHOST="ghost",t.DANGER="danger",t))(vi||{}),Qi=({isDisabled:t=!1,isActive:e=!1,className:n="",label:r,iconStart:i=null,iconEnd:s=null,isLoading:a=!1,type:o="button",size:l="md",variant:c="primary",title:f,onClick:p=XU.noop,onTouchEnd:m=XU.noop,fullWidth:_=!1,href:y,target:E,rel:S,isSymmetrical:w=!0,textClassName:R="text-sm font-normal"})=>{const C=(k,M,N)=>{if(M&&!N)return"p-1";switch(k){case"sm":return"px-2 py-1";case"lg":return"px-6 py-5";case"xl":return"px-12 py-5";case"md":default:return"px-4 py-3"}};return U.jsxs("button",{className:bl(n,"rounded-lg box-border cursor-pointer","disabled:cursor-not-allowed",c==="brand"?"":"disabled:opacity-50",_?"w-full":"w-fit",C(l,!!i,!!r),c==="primary"?"bg-white shadow-subtle":"",c==="ghost"?"bg-transparent":"",c==="brand"?"bg-green18 disabled:bg-white":"",c==="secondary"||c==="danger"?"bg-buttonSecondaryBackground":"",c==="tertiary"?"text-green15 bg-buttonTertiaryBackground hover:text-green2  active:text-green2 focus:text-green2":"",c==="delete"?"bg-red-400 hover:bg-red-500":"",e&&c==="tertiary"?"!bg-buttonBrandBackgroundActive !text-green2":"","group relative","overflow-hidden"),disabled:t,rel:S,title:f,type:o,onClick:k=>{y?E==="_blank"||k.metaKey||k.ctrlKey?window.open(y,"_blank"):window.location.href=y:p()},onTouchEnd:k=>{m==null||m(k)},children:[U.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:a?U.jsx(h9,{height:24,width:24}):U.jsxs(U.Fragment,{children:[i?U.jsx("span",{className:bl("flex-shrink-0",t&&c==="brand"?"opacity-30":""),children:i}):null,r?U.jsx("span",{className:bl(R,"flex-1 text-center",c==="primary"?"text-secondary":"",c==="secondary"?"text-tertiary":"",c==="danger"?"text-red-500":"",c==="brand"?"text-green2":"",t&&c==="brand"?"text-green15 opacity-30":""),children:r}):null,i!=null&&s==null&&w&&r!=null?U.jsx("span",{className:"flex-shrink-0 invisible w-6",children:i}):null,s==null?null:U.jsx("span",{className:bl("flex-shrink-0",r==null?"":"ml-2",t&&c==="brand"?"opacity-30":""),children:s})]})}),U.jsx("div",{className:bl("absolute inset-0 inline-flex items-center justify-center bg-transparent group-hover:bg-black opacity-10 w-full")})]})},Ps=(t=>(t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t))(Ps||{}),pg=(t=>(t.SEASON_SANS="SeasonSans",t.SEASON_MIX="SeasonMix",t))(pg||{}),lo=({children:t,className:e="",level:n="h2",fontVariant:r="SeasonSans"})=>{let i="";switch(n){case"h1":i="text-3xl";break;case"h2":i="text-2xl";break;case"h3":i="text-xl";break;case"h4":i="text-lg";break;case"h5":i="text-base";break}return Fe.createElement(n,{className:bl(r==="SeasonMix"?"font-seasonMix":"font-seasonSans","flex font-semibold text-main",i,e)},t)},qoe=({className:t=""})=>U.jsx("hr",{className:bl("border-gray1 my-4",t)}),Xoe=({fillColor:t="#111111",fillOpacity:e="0.5"})=>U.jsx("svg",{fill:"none",height:"15",viewBox:"0 0 15 15",width:"15",xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M3.16406 13.2344L1.22656 13.9766C1.10677 14.0234 0.994792 13.9948 0.890625 13.8906C0.791667 13.7917 0.768229 13.6771 0.820312 13.5469L1.58594 11.6562L10.5078 2.75L12.0781 4.32031L3.16406 13.2344ZM12.8594 3.55469L11.2734 1.97656L12.1484 1.10938C12.3672 0.901042 12.5911 0.789062 12.8203 0.773438C13.0495 0.757812 13.263 0.848958 13.4609 1.04688L13.7891 1.375C13.9922 1.57812 14.0885 1.79427 14.0781 2.02344C14.0677 2.2474 13.9531 2.46875 13.7344 2.6875L12.8594 3.55469Z",fill:t,fillOpacity:e})}),Koe=({fillColor:t})=>U.jsxs("svg",{height:"24px",version:"1.1",viewBox:"0 0 48 48",width:"24px",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z",fill:t??"#EA4335"}),U.jsx("path",{d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z",fill:t??"#4285F4"}),U.jsx("path",{d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z",fill:t??"#FBBC05"}),U.jsx("path",{d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z",fill:t??"#34A853"}),U.jsx("path",{d:"M0 0h48v48H0z",fill:"none"})]}),p9=(t=>(t.GOOGLE="Google",t.EDIT="Edit",t))(p9||{}),Yoe=({fillColor:t,icon:e})=>{switch(e){case"Google":return U.jsx(Koe,{fillColor:t});case"Edit":return U.jsx(Xoe,{fillColor:t});default:return null}},Zoe=({className:t="",starSize:e=36})=>U.jsx("svg",{className:t,fill:"currentColor",height:e,viewBox:"0 0 36 34",width:e,children:U.jsx("path",{d:"M7.35938 32.9219C7.02604 32.6719 6.82292 32.3438 6.75 31.9375C6.6875 31.5312 6.75521 31.0417 6.95312 30.4688L10.2188 20.7656L1.89062 14.7812C1.39062 14.4375 1.04688 14.0833 0.859375 13.7188C0.671875 13.3438 0.640625 12.9583 0.765625 12.5625C0.890625 12.1875 1.13542 11.9062 1.5 11.7188C1.875 11.5312 2.36458 11.4375 2.96875 11.4375H13.1875L16.2969 1.75C16.4844 1.17708 16.724 0.744792 17.0156 0.453125C17.3073 0.151042 17.651 0 18.0469 0C18.4635 0 18.8177 0.151042 19.1094 0.453125C19.401 0.744792 19.6406 1.17708 19.8281 1.75L22.9219 11.4375H33.1406C33.7552 11.4375 34.2448 11.5312 34.6094 11.7188C34.974 11.9062 35.224 12.1875 35.3594 12.5625C35.4844 12.9583 35.4479 13.3438 35.25 13.7188C35.0625 14.0833 34.724 14.4375 34.2344 14.7812L25.9062 20.7656L29.1719 30.4688C29.3698 31.0417 29.4323 31.5312 29.3594 31.9375C29.2969 32.3438 29.099 32.6719 28.7656 32.9219C28.4427 33.1719 28.0729 33.2552 27.6562 33.1719C27.25 33.099 26.8073 32.8906 26.3281 32.5469L18.0469 26.4688L9.79688 32.5469C9.31771 32.8906 8.86979 33.099 8.45312 33.1719C8.04688 33.2552 7.68229 33.1719 7.35938 32.9219Z"})}),Joe=({className:t="",starSize:e=36})=>U.jsx("svg",{className:t,fill:"currentColor",height:e,viewBox:"0 0 36 34",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M7.35938 32.9219C7.02604 32.6719 6.82292 32.3438 6.75 31.9375C6.6875 31.5312 6.75521 31.0417 6.95312 30.4688L10.2188 20.7656L1.89062 14.7812C1.39062 14.4375 1.04688 14.0833 0.859375 13.7188C0.671875 13.3438 0.640625 12.9583 0.765625 12.5625C0.890625 12.1875 1.13542 11.9062 1.5 11.7188C1.875 11.5208 2.36458 11.4271 2.96875 11.4375L13.1875 11.5L16.2969 1.75C16.4844 1.17708 16.724 0.744792 17.0156 0.453125C17.3073 0.151042 17.651 0 18.0469 0C18.4635 0 18.8177 0.151042 19.1094 0.453125C19.401 0.744792 19.6406 1.17708 19.8281 1.75L22.9219 11.5L33.1406 11.4375C33.7552 11.4271 34.2448 11.5208 34.6094 11.7188C34.974 11.9062 35.224 12.1875 35.3594 12.5625C35.4844 12.9583 35.4479 13.3438 35.25 13.7188C35.0625 14.0833 34.724 14.4375 34.2344 14.7812L25.9062 20.7656L29.1719 30.4688C29.3698 31.0417 29.4323 31.5312 29.3594 31.9375C29.2969 32.3438 29.099 32.6719 28.7656 32.9219C28.4427 33.1719 28.0729 33.2552 27.6562 33.1719C27.25 33.099 26.8073 32.8906 26.3281 32.5469L18.0469 26.4688L9.79688 32.5469C9.31771 32.8906 8.86979 33.099 8.45312 33.1719C8.04688 33.2552 7.68229 33.1719 7.35938 32.9219ZM9.64062 29.7656C9.66146 29.7969 9.70833 29.7865 9.78125 29.7344L17.2656 24.0312C17.5156 23.8229 17.7812 23.7188 18.0625 23.7188C18.3438 23.7188 18.6094 23.8229 18.8594 24.0312L26.3281 29.7344C26.401 29.7865 26.4479 29.7969 26.4688 29.7656C26.4792 29.7448 26.4792 29.6979 26.4688 29.625L23.375 20.7344C23.3021 20.5365 23.2656 20.349 23.2656 20.1719C23.276 19.9844 23.3281 19.8177 23.4219 19.6719C23.5156 19.5156 23.6562 19.375 23.8438 19.25L31.5781 13.9062C31.651 13.8646 31.6771 13.8229 31.6562 13.7812C31.6458 13.75 31.599 13.7344 31.5156 13.7344L22.1094 13.9062C21.7865 13.9167 21.5156 13.8542 21.2969 13.7188C21.0885 13.5729 20.9375 13.3333 20.8438 13L18.1406 4C18.1198 3.91667 18.0885 3.875 18.0469 3.875C18.0156 3.875 17.9896 3.91667 17.9688 4L15.2812 13C15.1771 13.3333 15.0208 13.5729 14.8125 13.7188C14.6042 13.8542 14.3333 13.9167 14 13.9062L4.60938 13.7344C4.52604 13.7344 4.47917 13.75 4.46875 13.7812C4.44792 13.8229 4.47396 13.8646 4.54688 13.9062L12.2812 19.25C12.4688 19.375 12.6094 19.5156 12.7031 19.6719C12.7969 19.8177 12.8438 19.9844 12.8438 20.1719C12.8542 20.349 12.8229 20.5365 12.75 20.7344L9.64062 29.625C9.61979 29.6979 9.61979 29.7448 9.64062 29.7656Z"})}),KC=({href:t,children:e,openInNewTab:n=!1})=>U.jsx("a",{className:"underline cursor-pointer",href:t,rel:n?"noopener noreferrer":void 0,target:n?"_blank":void 0,children:e}),m9=(t=>(t.LIGHT="light",t.NORMAL="normal",t.BOLD="bold",t))(m9||{}),eA=(t=>(t.NORMAL="normal",t.ERROR="error",t))(eA||{}),Li=({children:t,className:e="",weight:n="normal",ref:r,decoration:i="none",style:s,variant:a="normal",fontSizeClassName:o="text-sm"})=>U.jsx("p",{className:bl(e,o,n==="bold"?"font-bold":"",n==="light"?"font-light":"",i==="italic"?"italic":"",a==="error"?"text-red1":"text-gray2 dark:text-gray2"),ref:r,style:s,children:t}),g9=({isOpen:t,onClose:e,children:n})=>U.jsx(d9,{appear:!0,as:U.Fragment,show:t,children:U.jsxs(Ooe,{as:"div",className:"relative z-[100]",onClose:e,children:[U.jsx($b,{as:U.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:U.jsx("div",{className:"fixed inset-0 backdrop-blur-[50px] bg-black/30"})}),U.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:U.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:U.jsx($b,{as:U.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n})})})]})}),Qoe=({isOpen:t=!1,onClose:e,title:n,children:r})=>U.jsx(g9,{isOpen:t,onClose:e,children:U.jsxs(cN,{className:bl("transform overflow-hidden rounded-xl bg-light1 text-left align-middle shadow-xl transition-all","w-auto max-w-[80%] xs:max-w-[400px] min-w-[200px] xs:min-w-[400px]","max-h-modal","flex-shrink"),children:[n?U.jsx(lo,{className:"mb-4",level:"h3",children:n}):null,U.jsx("div",{className:"overflow-y-auto",children:r})]})}),ele=({isOpen:t=!1,onClose:e,title:n,children:r,fullWidth:i=!1})=>U.jsx(g9,{isOpen:t,onClose:e,children:U.jsxs(cN,{className:bl("transform overflow-hidden rounded-xl bg-light1 text-left align-middle shadow-xl transition-all",i?"w-full max-w-4xl":"w-modal","h-modal"),children:[n?U.jsx(lo,{className:"mb-4",level:"h2",children:n}):null,U.jsx("div",{className:"overflow-y-auto h-full",children:r})]})});function l4(t){return t.replace(/\s(\S+)$/," $1")}var u4=({className:t="",checked:e,onChange:n,label:r,description:i,isDisabled:s,id:a})=>U.jsx(f9,{disabled:s,children:U.jsxs("div",{className:"flex items-start justify-between gap-8",children:[r||i?U.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[r?U.jsx(aN,{className:"text-base font-medium text-tertiary",htmlFor:a,children:l4(r)}):null,i?U.jsx(iN,{className:"text-xs text-quaternary",children:l4(i)}):null]}):null,U.jsx(Woe,{checked:e,className:bl("group inline-flex h-8 w-12 items-center rounded-full bg-gray-200 transition data-[checked]:bg-green11",t),disabled:s,id:a,onChange:n,children:U.jsx("span",{className:"size-6 translate-x-1 rounded-full bg-white transition group-data-[checked]:translate-x-5"})})]})}),tle=({className:t="",id:e,isDisabled:n=!1,label:r,isReadOnly:i=!1,type:s="text",placeholder:a,value:o,suffix:l,...c})=>U.jsx("div",{className:"w-full max-w-md",children:U.jsxs(f9,{children:[r?U.jsx(aN,{className:"text-xs text-quaternary",htmlFor:e,children:r}):null,U.jsxs("div",{className:"relative",children:[U.jsx(Uoe,{className:bl("mt-2 block w-full rounded-lg border-none bg-white py-3 px-3 text-xs text-tertiary","focus:outline-none data-[focus]:outline-2 data-[focus]:-outline-offset-2 data-[focus]:outline-white/25",n||i?"bg-light2 cursor-not-allowed":"",l?"pr-8":""),disabled:n,placeholder:a,readOnly:i,type:s,value:o,...c}),l?U.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-tertiary",children:l}):null]})]})}),YT={},c4;function nle(){if(c4)return YT;c4=1;var t=bz();return YT.createRoot=t.createRoot,YT.hydrateRoot=t.hydrateRoot,YT}var rle=nle();const ile=Xg(rle),_9=Fe.createContext(void 0),sle=({children:t})=>{const[e,n]=P.useState(!1),[r,i]=P.useState(void 0),[s,a]=P.useState(void 0),o=P.useMemo(()=>({setIsOpen:n,isOpen:e,setModal:i,modal:r,alertProps:s,setAlertProps:a}),[e,r,s]);return U.jsx(_9.Provider,{value:o,children:t})},tA=()=>{const t=P.useContext(_9);if(!t)throw new Error("useModal must be used within a ModalProvider");return t},fN=P.createContext(null),ale=({children:t})=>{const[e,n]=P.useState(""),r=P.useMemo(()=>({setTitle:n,title:e}),[e]);return U.jsx(fN.Provider,{value:r,children:t})};class d4{constructor(){kt(this,"_fns");this._fns=[]}eject(e){const n=this._fns.indexOf(e);n!==-1&&(this._fns=[...this._fns.slice(0,n),...this._fns.slice(n+1)])}use(e){this._fns=[...this._fns,e]}}const Dn={BASE:"",CREDENTIALS:"include",ENCODE_PATH:void 0,HEADERS:void 0,PASSWORD:void 0,TOKEN:void 0,USERNAME:void 0,VERSION:"1.0.0",WITH_CREDENTIALS:!1,interceptors:{request:new d4,response:new d4}},ole="sesame.com",iC="https://www.sesame.com",nA="Consumer-Web-App",v9=1,y9="https://www.sesame.com/terms",E9="https://www.sesame.com/privacy",S9=50;class lle{constructor(){this.NAME="call_start_attempt"}get sendToStatsig(){return!0}}class ule{constructor(e,n){this.NAME="call_end",this.call_duration_ms=e,this.had_buffer_underrun=n>0,this.buffer_underrun_time_ms=n}get sendToStatsig(){return!0}}var b9=(t=>(t.MicPermissionDenied="mic_permission_denied",t))(b9||{});class cle{constructor(e){this.NAME="expected_call_error",this.error=e}}class f4{constructor(e,n,r){this.NAME="start_call_error",this.type=e,this.message=n,this.details=r}}class h4{constructor(e,n,r){this.NAME="in_call_error",this.type=e,this.message=n,this.details=r}}class Id{constructor(e,n,r){this.NAME="sesame_error",this.type=e,this.message=n,this.details=r}}class dle{constructor(e){this.NAME="call_dropped",this.code=e}get sendToStatsig(){return!0}}class fle{constructor(e,n,r){this.NAME="time_to_first_word",this.time_to_session_started=e,this.time_to_call_connected=n,this.time_to_audio_played=r}}class hle{constructor(e,n){this.NAME="websocket_closed",this.code=e,this.was_connected=n}}class ple{constructor(e,n){this.NAME="websocket_connected",this.attempts=e,this.total_time_ms=n}}class mle{constructor(){this.NAME="login_attempt"}}class w9{constructor(){this.NAME="login_success"}}class gle{constructor(e,n,r){this.NAME="login_error",this.type=e,this.message=n,this.details=r}}class _le{constructor(e,n){this.NAME="call_feedback",this.rating=e,this.free_form_feedback=n}get sendToDatadog(){return!1}}var YC=(t=>(t.FirstWordLatency="first_word_latency",t.AgentResponseLatency="agent_response_latency",t.BufferUnderruns="buffer_underruns",t))(YC||{});class ZO{constructor(e,n,r,i,s,a){this.NAME="quality_report",this.axis=e,this.raw_value=n,this.observations=r,this.rating=i,this.offset_ms=s,this.truncated=a}get sendToStatsig(){return!0}get value(){return this.raw_value}}class vle{constructor(){this.NAME="call_connect_audio_context_unlocked"}}class yle{constructor(){this.NAME="call_connect_audio_session_initialize_begin"}}class Ele{constructor(){this.NAME="call_connect_audio_session_initialized"}}class Sle{constructor(){this.NAME="call_connect_session_handler_created"}}class ble{constructor(e,n){this.NAME="webrtc_stats",this.offset_ms=e,this.truncated=n}}class wle{constructor(){this.NAME="account_creation_logged_in"}}class Tle{constructor(){this.NAME="account_creation_onboarding_viewed"}}class xle{constructor(){this.NAME="account_creation_onboarding_completed"}}class Cle{constructor(e){this.NAME="webrtc_connected",this.time_to_webrtc_connected_ms=e}}class Rle{constructor(e,n){this.NAME="audio_recording_prepared",this.elapsed_ms=e,this.wav_file_size=n}}class Mle{constructor(e){this.NAME="audio_recording_failed",this.error=e}}const Og=256,Ale="Maya";var sC=(t=>(t[t.TryAgainLater=1013]="TryAgainLater",t[t.CallDurationLimitExceeded=4001]="CallDurationLimitExceeded",t[t.Overloaded=4002]="Overloaded",t[t.FirstMessageNotReceived=4050]="FirstMessageNotReceived",t))(sC||{});const p4=1e3;class fi extends Error{constructor(e,n,r){super(e),this.code=n,this.details=r,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class yy extends fi{constructor(e,n){super(e,"SERVICE_UNAVAILABLE",n)}}class T9 extends fi{constructor(e,n){super(e,"TIMEOUT_ERROR",n)}}class Ile extends fi{constructor(e,n){super(e,"CONNECTION_ERROR",n)}}class kle extends fi{constructor(e,n){super(e,"CONNECTION_CLOSE_ERROR",n)}}class Ole extends fi{constructor(e,n){super(e,"USER_NOT_AUTHENTICATED_ERROR",n)}}class rA extends fi{constructor(e,n){super(e,"SERVER_CALL_DISCONNECT_ERROR",n)}}class x9 extends rA{constructor(e,n){super(e,n)}}class C9 extends fi{constructor(e,n){super(e,"TRANSPORT_ERROR",n),this.closeConnection=(n==null?void 0:n.close_connection)??!1}}class h2 extends fi{constructor(e,n){super(e,"INVALID_MESSAGE_ERROR",n)}}class Ple extends fi{constructor(e,n){super(e,"CALL_STATE_ERROR",n)}}class p2 extends fi{constructor(e,n){super(e,"CALL_CONNECT_ERROR",n)}}class R9 extends fi{constructor(e,n){super(e,"CALL_DROPPED_ERROR",n)}}class Lle extends fi{constructor(e,n){super(e,"AUDIO_ERROR",n)}}class ZC extends fi{constructor(e,n){super(e,"UNKNOWN_ERROR",n)}}class JO extends fi{constructor(e,n){super(e,"AUDIO_INPUT_NOT_RECORDING",n)}}class m4 extends fi{constructor(e,n){super(e,"AUDIO_OUTPUT_NOT_PLAYING",n)}}class Nle extends fi{constructor(e,n){super(e,"INVALID_MESSAGE_TYPE_ERROR",n)}}class QO extends fi{constructor(e,n){super(e,"UNSUPPORTED_BROWSER_ERROR",n)}}class ea extends fi{constructor(e,n){super(e,"WEBRTC_ERROR",n)}}var wb=(t=>(t.DUMMY="dummy",t.DISABLE_CALLING="disable_calling",t.UPLOAD_CLIENT_RECORDING="upload_client_recording",t.VIDEO_DOWNLOAD="video_download",t.SESAME_COM_LOGIN="sesame_com_login",t.CONSUMER_WEB_APP="consumer_web_app",t.USE_STUNNER="use_stunner",t.SHOW_CALL_INFO="show_call_info",t))(wb||{}),eg=(t=>(t.DUMMY="dummy",t.WEB_AUDIO_CONFIG="web_audio_config",t.VIDEO_DOWNLOAD_CONFIG="video_download_config",t.WEBSOCKET_CONFIG="websocket_config",t.BACKOFF_CONFIG="backoff_config",t.DATADOG_CONFIG="datadog_config",t))(eg||{});const g4={dummy:{value:"default"},web_audio_config:{min_buffer_ms:60,max_buffer_ms:800,target_buffer_ms:120,buffer_padding_multiplier:1.25,rtt_logging_interval_ms:1e3,rtt_history_count:5,poor_rtt_threshold_ms:300},video_download_config:{max_duration_s:1800,max_share_size_mb:50},websocket_config:{message_timeout_ms:5e3,record_input_timeout_ms:3e3,play_output_timeout_ms:1e4},backoff_config:{delay_first_attempt:!1,num_of_attempts:3,starting_delay:200,max_delay:1e3,time_multiple:2,first_message_timeout_ms:500},datadog_config:{logs_enabled:!0,log_session_sample_rate:100,rum_enabled:!0,rum_session_sample_rate:100,enable_error_tracking:!0}};var _4={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_94c02df4-1f86-4303-bdb6-5b978537e664",VERCEL_PROJECT_ID:"prj_yyCGrzapWaI3YODtOLBpxlai91pH",NOW_BUILDER:"1",npm_package_devDependencies__types_node:"^20.11.30",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",VERCEL_GIT_REPO_OWNER:"",USER:"runner",npm_config_user_agent:"pnpm/9.15.3 npm/? node/v18.18.2 linux x64",CI:"true",TURBO_RUN_SUMMARY:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_94c02df4-1f86-4303-bdb6-5b978537e664",PIPX_HOME:"/opt/pipx",VERCEL_PROJECT_SETTINGS_INSTALL_COMMAND:"pnpm install",npm_package_scripts_start_dev:"vite",npm_package_devDependencies_vite:"^6.2.4",npm_node_execpath:"/home/runner/.nvm/versions/node/v18.18.2/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",VITE_FIREBASE_MESSAGING_SENDER_ID:"1072000975600",npm_package_devDependencies__7nohe_openapi_react_query_codegen:"^1.6.2",npm_package_devDependencies__tanstack_react_query_devtools:"^5.65.1",npm_package_devDependencies_openai:"^4.82.0",HOME:"/home/runner",npm_package_scripts_tsc_check:"tsc --noEmit",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",VITE_RECAPTCHA_SITE_KEY:"6LcBG2ArAAAAANSlSl82BWSfAK9SFPSDeAIPKP_l",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"SesameAILabs",TURBO_DOWNLOAD_LOCAL_ENABLED:"true",VERCEL_ENV:"production",VITE_CLIENT_BUILD_NUMBER:"58",COREPACK_ROOT:"/home/runner/.nvm/versions/node/v18.18.2/lib/node_modules/corepack",npm_package_dependencies__sentry_react:"^9.17.0",npm_package_dependencies__sentry_vite_plugin:"^3.4.0",GRADLE_HOME:"/usr/share/gradle-8.14.3",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/28.2.13676358",VERCEL_ORG_ID:"team_SplzzrdhX7HpUZv91Lx6yQvG",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",npm_package_scripts_api_verify_generated:"tsx ../scripts/verify-generated-files",npm_package_devDependencies_babel_plugin_relay:"^18.2.0",GITHUB_REPOSITORY_OWNER_ID:"136667101",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",SYSTEMD_EXEC_PID:"712",npm_package_scripts_api_generate:"tsx ../scripts/filter-openapi.ts && npx openapi-rq -i ./openapi-filtered.json -o ./src/api/generated && tsx ../scripts/add-generated-headers && rm ./openapi-filtered.json",npm_package_dependencies__sesameailabs_ui:"workspace:*",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",VERCEL_GIT_COMMIT_SHA:"",VERCEL_GIT_PULL_REQUEST_ID:"",VERCEL_TARGET_ENV:"production",npm_package_dependencies_eventemitter3:"^5.0.1",npm_package_dependencies_react_router_dom:"^7.4.1",npm_package_devDependencies_tailwindcss:"^3.4.7",npm_package_devDependencies_typescript:"^5.4.2",NVM_DIR:"/home/runner/.nvm",VERCEL_GIT_COMMIT_REF:"",VITE_LOGIN_MODE:"redirect",npm_package_dependencies_bowser:"2.11.0",npm_package_devDependencies__sesameailabs_eslint_config:"workspace:*",npm_package_devDependencies__types_react_dom:"^18.2.22",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20250710.1.0",npm_package_dependencies__custom_react_hooks_use_media_devices:"^1.5.1",npm_package_devDependencies__playwright_test:"^1.50.1",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.12/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",VERCEL_GIT_PROVIDER:"",VITE_AUTH_DESTINATION:"sesame-ai-demo.firebaseapp.com",npm_package_scripts_api_sign_generated:"tsx ../scripts/add-generated-headers",npm_package_dependencies_zustand:"^4.3.3",npm_package_devDependencies__vitejs_plugin_react:"^4.3.4",npm_package_devDependencies_vite_plugin_require:"^1.1.10",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.10/x64",JOURNAL_STREAM:"9:6304",GITHUB_WORKFLOW:"Deploy / Prod / Consumer Web App",_:"/home/runner/.nvm/versions/node/v18.18.2/bin/vercel",npm_package_private:"true",npm_package_dependencies_gsap:"^3.12.5",npm_package_dependencies_query_string:"^9.1.0",npm_package_devDependencies_autoprefixer:"^10",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/runner-provisioner.service/memory.pressure",GOROOT_1_24_X64:"/opt/hostedtoolcache/go/1.24.4/x64",VITE_DATADOG_RUM_CLIENT_TOKEN:"pubdd980a347a9e4fe18c474b1aa7e40e99",npm_package_scripts_prepare:"cd ../ui && pnpm build",npm_package_scripts_api_check_generated_artifacts:"git diff --quiet ./src/api/generated || (echo '  API client changes detected. Please commit the generated files.' && exit 1)",npm_config_registry:"https://registry.npmjs.org/",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"false",GITHUB_RUN_ID:"16223537844",STATS_VMFE:"true",VERCEL_URL:"",npm_package_devDependencies_node_fetch:"^3.3.2",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"5bbec6b79e5a45a2471e0b28470d1fd781cd11e4",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",VERCEL_GIT_COMMIT_AUTHOR_NAME:"",VITE_FIREBASE_MEASUREMENT_ID:"NFF945RX62",VITE_FIREBASE_STORAGE_BUCKET:"sesame-ai-demo.firebasestorage.app",GITHUB_WORKFLOW_REF:"SesameAILabs/sesame/.github/workflows/vercel-web-consumer-app-prod-deploy.yaml@refs/heads/main",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",VERCEL_GIT_REPO_ID:"",VITE_FIREBASE_AUTH_DOMAIN:"app.sesame.com",npm_package_dependencies_firebaseui:"^6.1.0",npm_config_node_gyp:"/home/runner/.cache/node/corepack/pnpm/9.15.3/dist/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/sesame/sesame/sesame/web/consumer-app/node_modules/.bin:/home/runner/.cache/node/corepack/pnpm/9.15.3/dist/node-gyp-bin:/home/runner/work/sesame/sesame/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/web/consumer-app/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/web/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/node_modules/.bin:/home/runner/work/sesame/sesame/node_modules/.bin:/home/runner/work/sesame/sesame/sesame/web/consumer-app/vendor/bin:/pnpm10/node_modules/.bin:/node22/bin:/home/runner/.nvm/versions/node/v18.18.2/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_c28a809d-6ee5-4c68-82c5-239ddc653412",INVOCATION_ID:"a161665ad694422c83f8d28c6ffb7849",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",TURBO_REMOTE_ONLY:"true",npm_package_name:"consumer-app",NODE:"/home/runner/.nvm/versions/node/v18.18.2/bin/node",GITHUB_ACTION:"__run_6",GITHUB_RUN_NUMBER:"59",GITHUB_TRIGGERING_ACTOR:"donaldchen",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",VITE_SESAME_ENV:"prod",npm_package_dependencies__sesameailabs_web_client:"workspace:*",npm_config_frozen_lockfile:"",YARN_NODE_LINKER:"node-modules",VITE_ENVIRONMENT:"prod",npm_package_dependencies__ffmpeg_ffmpeg:"^0.12.10",npm_package_devDependencies_glob:"^11.0.1",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",npm_package_dependencies_react_dom:"^18.2.0",npm_package_devDependencies_eslint:"^9.0.0",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 1000029192",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"main",GITHUB_REPOSITORY:"SesameAILabs/sesame",STATS_D_D:"false",__VERCEL_BUILD_RUNNING:"1",npm_package_devDependencies_dotenv:"^16.4.7",npm_package_devDependencies_wavefile:"^11.0.0",npm_lifecycle_script:"tsc && vite build",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",npm_package_dependencies_react_responsive:"^10.0.0",GITHUB_REPOSITORY_ID:"656276710",GITHUB_ACTIONS:"true",STATS_PIP:"false",npm_package_version:"0.0.1",npm_package_devDependencies__types_react:"^18.2.67",npm_lifecycle_event:"build",NODE_PATH:"/home/runner/work/sesame/sesame/node_modules/.pnpm/vite@6.2.5_@types+node@20.17.12_jiti@2.4.2_lightningcss@1.29.2_sass@1.86.3_terser@5.37.0_tsx@4.19.3_yaml@2.7.0/node_modules/vite/bin/node_modules:/home/runner/work/sesame/sesame/node_modules/.pnpm/vite@6.2.5_@types+node@20.17.12_jiti@2.4.2_lightningcss@1.29.2_sass@1.86.3_terser@5.37.0_tsx@4.19.3_yaml@2.7.0/node_modules/vite/node_modules:/home/runner/work/sesame/sesame/node_modules/.pnpm/vite@6.2.5_@types+node@20.17.12_jiti@2.4.2_lightningcss@1.29.2_sass@1.86.3_terser@5.37.0_tsx@4.19.3_yaml@2.7.0/node_modules:/home/runner/work/sesame/sesame/node_modules/.pnpm/node_modules",GITHUB_REF_PROTECTED:"true",VITE_FIREBASE_PROJECT_ID:"sesame-ai-demo",npm_package_scripts_build:"tsc && vite build",GITHUB_WORKSPACE:"/home/runner/work/sesame/sesame",ACCEPT_EULA:"Y",GITHUB_JOB:"Deploy-Production",RUNNER_PERFLOG:"/home/runner/perflog",VERCEL_GIT_COMMIT_AUTHOR_LOGIN:"",VITE_DATADOG_CLIENT_TOKEN:"pubc6988a80d0b195496943ccc888005970",VITE_DATADOG_RUM_APPLICATION_ID:"8d4f492d-f4b0-4237-9e00-c6aec780b500",VITE_GOOGLE_ANALYTICS_TRACKING_ID:"G-ZZLPJBMBEN",VITE_SENTRY_AUTH_TOKEN:"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",GEM_HOME:"/home/runner/work/sesame/sesame/sesame/web/consumer-app/vendor/bundle/ruby/3.2.3",GITHUB_SHA:"5bbec6b79e5a45a2471e0b28470d1fd781cd11e4",GITHUB_RUN_ATTEMPT:"1",STATS_D_TC:"true",TURBO_CACHE:"remote:rw",VITE_FIREBASE_APP_ID:"1:1072000975600:web:75b0bf3a9bb8d92e767835",npm_package_dependencies__tanstack_react_query:"^5.65.1",GITHUB_REF:"refs/heads/main",GITHUB_ACTOR:"donaldchen",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",VERCEL:"1",npm_package_scripts_eslint_fix:"eslint . --quiet --fix",npm_package_dependencies__gsap_react:"^2.1.1",npm_package_dependencies_clsx:"^2.1.1",VERCEL_PROJECT_SETTINGS_BUILD_COMMAND:"pnpm build",npm_package_dependencies_firebase:"^11.0.1",npm_package_devDependencies__types_node_fetch:"^2.6.12",npm_package_devDependencies_tsx:"^4.19.3",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_94c02df4-1f86-4303-bdb6-5b978537e664",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/sesame/sesame/sesame/web/consumer-app",GITHUB_ACTOR_ID:"3821698",RUNNER_WORKSPACE:"/home/runner/work/sesame",VITE_SESAME_API_URL:"https://sesameai.app",npm_execpath:"/home/runner/.cache/node/corepack/pnpm/9.15.3/bin/pnpm.cjs",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",STATS_TIS:"mining",GITHUB_EVENT_NAME:"workflow_dispatch",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_94c02df4-1f86-4303-bdb6-5b978537e664",NX_DAEMON:"false",npm_package_dependencies_react_ga4:"^2.1.0",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",VERCEL_OIDC_TOKEN:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Im1yay00MzAyZWMxYjY3MGY0OGE5OGFkNjFkYWRlNGEyM2JlNyJ9.eyJpc3MiOiJodHRwczovL29pZGMudmVyY2VsLmNvbS9zZXNhbWUtYWkiLCJzdWIiOiJvd25lcjpzZXNhbWUtYWk6cHJvamVjdDpzZXNhbWUtd2ViLWNvbnN1bWVyLWFwcDplbnZpcm9ubWVudDpkZXZlbG9wbWVudCIsInNjb3BlIjoib3duZXI6c2VzYW1lLWFpOnByb2plY3Q6c2VzYW1lLXdlYi1jb25zdW1lci1hcHA6ZW52aXJvbm1lbnQ6ZGV2ZWxvcG1lbnQiLCJhdWQiOiJodHRwczovL3ZlcmNlbC5jb20vc2VzYW1lLWFpIiwib3duZXIiOiJzZXNhbWUtYWkiLCJvd25lcl9pZCI6InRlYW1fU3BsenpyZGhYN0hwVVp2OTFMeDZ5UXZHIiwicHJvamVjdCI6InNlc2FtZS13ZWItY29uc3VtZXItYXBwIiwicHJvamVjdF9pZCI6InByal95eUNHcnphcFdhSTNZT0R0T0xCcHhsYWk5MXBIIiwiZW52aXJvbm1lbnQiOiJkZXZlbG9wbWVudCIsInVzZXJfaWQiOiJUU040bllhWjF0TWE1TUExaUY4NkwwS3IiLCJuYmYiOjE3NTIyNDcxNDcsImlhdCI6MTc1MjI0NzE0NywiZXhwIjoxNzUyMjkwMzQ3fQ.UwFolURysh-cJkITRWoM9GwTAEUtrK-tQvLR_ROzauR5_OgTf0hbTBI5oh7mydFx11GF9B9SRMIpkph936G5gvepJt_Qc_OSKRGQjahA9voGk0EMf-5ZjWAcM4LRgV9qPmZ4ga9WMxX3Hn4XQ-WymXaN2CoucsubmuhJb5eaI6RZGRveQ4hcMgXgtgi8O90hxugZRP3Q6an5XL0vtiq8W-m0L8JmPIAPhklrC4P-AJkpjOPEQPvJT_zLG8se6h7LarseWEYNfwCcjy8ijUJzD7Aft7acmUcSmRCsBFyUgcXpSiC29PjHHiE4mLNt3LFvDUsg6xENWmVK3R9Ve-pbvA",npm_package_dependencies__ffmpeg_util:"^0.12.2",npm_package_dependencies_use_debounce:"^10.0.4",npm_package_devDependencies_postcss:"^8",npm_command:"run-script",PNPM_SCRIPT_SRC_DIR:"/home/runner/work/sesame/sesame/sesame/web/consumer-app",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",VERCEL_GIT_COMMIT_MESSAGE:"",VERCEL_GIT_PREVIOUS_SHA:"",VITE_RUDDERSTACK_WRITE_KEY:"2wpiqnS6W3104MQz7mwfyQjME6d",VERCEL_PROJECT_SETTINGS_NODE_VERSION:"22.x",npm_package_scripts_preview:"vite preview",npm_package_dependencies__firebase_app:"^0.10.17",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",STATS_EXTP:"https://provjobdprod.z13.web.core.windows.net/settings/provjobdsettings-latest/provjobd.data",VITE_FIREBASE_API_KEY:"AIzaSyDtC7Uwb5pGAsdmrH2T4Gqdk5Mga07jYPM",VITE_STATSIG_CLIENT_KEY:"client-TGCzyFkjJ0ZvNupjjxCKPpxPEO8WdmZjQhxLgJlgM6H",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_94c02df4-1f86-4303-bdb6-5b978537e664",VERCEL_GIT_REPO_SLUG:"",npm_package_scripts_eslint:"eslint .",npm_package_dependencies_react:"^18.2.0",INIT_CWD:"/home/runner/work/sesame/sesame/sesame/web/consumer-app",NODE_ENV:"production",SENTRY_PIPELINE:"vite-plugin/3.4.0"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Dle=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},hN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|o>>4;let m=(o&15)<<2|c>>6,_=c&63;l||(_=64,a||(m=64)),r.push(n[f],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(M9(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Dle(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||p==null)throw new Ule;const m=s<<2|o>>4;if(r.push(m),c!==64){const _=o<<4&240|c>>2;if(r.push(_),p!==64){const y=c<<6&192|p;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ule extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fle=function(t){const e=M9(t);return hN.encodeByteArray(e,!0)},A9=function(t){return Fle(t).replace(/\./g,"")},I9=function(t){try{return hN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ble=()=>k9().__FIREBASE_DEFAULTS__,zle=()=>{if(typeof process>"u"||typeof _4>"u")return;const t=_4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jle=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&I9(t[1]);return e&&JSON.parse(e)},pN=()=>{try{return Ble()||zle()||jle()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hle=t=>{var e,n;return(n=(e=pN())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},O9=()=>{var t;return(t=pN())===null||t===void 0?void 0:t.config},P9=t=>{var e;return(e=pN())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xb=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vle(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oa())}function Gle(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $le(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Wle(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qle(){const t=Oa();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mN(){try{return typeof indexedDB=="object"}catch{return!1}}function Xle(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kle="FirebaseError";class _p extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Kle,Object.setPrototypeOf(this,_p.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E0.prototype.create)}}class E0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Yle(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new _p(i,o,r)}}function Yle(t,e){return t.replace(Zle,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Zle=/\{\$([^}]+)}/g;function Jle(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function JC(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(v4(s)&&v4(a)){if(!JC(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function v4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qle(t,e){const n=new eue(t,e);return n.subscribe.bind(n)}class eue{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tue(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=m2),i.error===void 0&&(i.error=m2),i.complete===void 0&&(i.complete=m2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tue(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function m2(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nue=1e3,rue=2,iue=4*60*60*1e3,sue=.5;function aue(t,e=nue,n=rue){const r=e*Math.pow(n,t),i=Math.round(sue*r*(Math.random()-.5)*2);return Math.min(iue,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t){return t&&t._delegate?t._delegate:t}var Zn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Zn||(Zn={}));var eP;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(eP||(eP={}));const Rt=Zn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wd=t=>{switch(typeof t){case"undefined":return Rt.undefined;case"string":return Rt.string;case"number":return isNaN(t)?Rt.nan:Rt.number;case"boolean":return Rt.boolean;case"function":return Rt.function;case"bigint":return Rt.bigint;case"symbol":return Rt.symbol;case"object":return Array.isArray(t)?Rt.array:t===null?Rt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Rt.promise:typeof Map<"u"&&t instanceof Map?Rt.map:typeof Set<"u"&&t instanceof Set?Rt.set:typeof Date<"u"&&t instanceof Date?Rt.date:Rt.object;default:return Rt.unknown}},rt=Zn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),oue=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class jo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof jo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}jo.create=t=>new jo(t);const Ky=(t,e)=>{let n;switch(t.code){case rt.invalid_type:t.received===Rt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Zn.jsonStringifyReplacer)}`;break;case rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Zn.joinValues(t.keys,", ")}`;break;case rt.invalid_union:n="Invalid input";break;case rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Zn.joinValues(t.options)}`;break;case rt.invalid_enum_value:n=`Invalid enum value. Expected ${Zn.joinValues(t.options)}, received '${t.received}'`;break;case rt.invalid_arguments:n="Invalid function arguments";break;case rt.invalid_return_type:n="Invalid function return type";break;case rt.invalid_date:n="Invalid date";break;case rt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Zn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case rt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case rt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case rt.custom:n="Invalid input";break;case rt.invalid_intersection_types:n="Intersection results could not be merged";break;case rt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case rt.not_finite:n="Number must be finite";break;default:n=e.defaultError,Zn.assertNever(t)}return{message:n}};let N9=Ky;function lue(t){N9=t}function QC(){return N9}const eR=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:e,defaultError:o}).message;return{...i,path:s,message:o}},uue=[];function vt(t,e){const n=QC(),r=eR({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ky?void 0:Ky].filter(i=>!!i)});t.common.issues.push(r)}class ua{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return un;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return ua.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return un;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}}const un=Object.freeze({status:"aborted"}),ay=t=>({status:"dirty",value:t}),Pa=t=>({status:"valid",value:t}),tP=t=>t.status==="aborted",nP=t=>t.status==="dirty",Pg=t=>t.status==="valid",Kb=t=>typeof Promise<"u"&&t instanceof Promise;function tR(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function D9(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Vt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Vt||(Vt={}));var tb,nb;class Cc{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const y4=(t,e)=>{if(Pg(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new jo(t.common.issues);return this._error=n,this._error}}};function Sn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var l,c;const{message:f}=t;return a.code==="invalid_enum_value"?{message:f??o.defaultError}:typeof o.data>"u"?{message:(l=f??r)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:o.defaultError}},description:i}}class kn{get description(){return this._def.description}_getType(e){return wd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:wd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ua,ctx:{common:e.parent.common,data:e.data,parsedType:wd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Kb(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wd(e)},s=this._parseSync({data:e,path:i.path,parent:i});return y4(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wd(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Pg(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Pg(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wd(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Kb(i)?i:Promise.resolve(i));return y4(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:rt.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Eu({schema:this,typeName:ln.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return yc.create(this,this._def)}nullable(){return Qh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _u.create(this)}promise(){return Zy.create(this,this._def)}or(e){return Qb.create([this,e],this._def)}and(e){return e1.create(this,e,this._def)}transform(e){return new Eu({...Sn(this._def),schema:this,typeName:ln.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new s1({...Sn(this._def),innerType:this,defaultValue:n,typeName:ln.ZodDefault})}brand(){return new gN({typeName:ln.ZodBranded,type:this,...Sn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new a1({...Sn(this._def),innerType:this,catchValue:n,typeName:ln.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Q1.create(this,e)}readonly(){return o1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cue=/^c[^\s-]{8,}$/i,due=/^[0-9a-z]+$/,fue=/^[0-9A-HJKMNP-TV-Z]{26}$/i,hue=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pue=/^[a-z0-9_-]{21}$/i,mue=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gue=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_ue=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vue="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let g2;const yue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Eue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Sue=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bue=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,wue=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Tue=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,U9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xue=new RegExp(`^${U9}$`);function F9(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Cue(t){return new RegExp(`^${F9(t)}$`)}function B9(t){let e=`${U9}T${F9(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Rue(t,e){return!!((e==="v4"||!e)&&yue.test(t)||(e==="v6"||!e)&&Sue.test(t))}function Mue(t,e){if(!mue.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function Aue(t,e){return!!((e==="v4"||!e)&&Eue.test(t)||(e==="v6"||!e)&&bue.test(t))}class fu extends kn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Rt.string){const s=this._getOrReturnCtx(e);return vt(s,{code:rt.invalid_type,expected:Rt.string,received:s.parsedType}),un}const r=new ua;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?vt(i,{code:rt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&vt(i,{code:rt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")_ue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"email",code:rt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")g2||(g2=new RegExp(vue,"u")),g2.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"emoji",code:rt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")hue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"uuid",code:rt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")pue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"nanoid",code:rt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")cue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"cuid",code:rt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")due.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"cuid2",code:rt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")fue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"ulid",code:rt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),vt(i,{validation:"url",code:rt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"regex",code:rt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?B9(s).test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?xue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?Cue(s).test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?gue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"duration",code:rt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?Rue(e.data,s.version)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"ip",code:rt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?Mue(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"jwt",code:rt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?Aue(e.data,s.version)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"cidr",code:rt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?wue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"base64",code:rt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?Tue.test(e.data)||(i=this._getOrReturnCtx(e,i),vt(i,{validation:"base64url",code:rt.invalid_string,message:s.message}),r.dirty()):Zn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:rt.invalid_string,...Vt.errToObj(r)})}_addCheck(e){return new fu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Vt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Vt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Vt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Vt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Vt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Vt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Vt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Vt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Vt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Vt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Vt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Vt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Vt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Vt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Vt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Vt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Vt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Vt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Vt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Vt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Vt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Vt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Vt.errToObj(n)})}nonempty(e){return this.min(1,Vt.errToObj(e))}trim(){return new fu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}fu.create=t=>{var e;return new fu({checks:[],typeName:ln.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};function Iue(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class Yh extends kn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Rt.number){const s=this._getOrReturnCtx(e);return vt(s,{code:rt.invalid_type,expected:Rt.number,received:s.parsedType}),un}let r;const i=new ua;for(const s of this._def.checks)s.kind==="int"?Zn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?Iue(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.not_finite,message:s.message}),i.dirty()):Zn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Vt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Vt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Vt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Vt.toString(n))}setLimit(e,n,r,i){return new Yh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Vt.toString(i)}]})}_addCheck(e){return new Yh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Vt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Vt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Vt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Vt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Vt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Vt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Vt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Vt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Vt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Zn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Yh.create=t=>new Yh({checks:[],typeName:ln.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Sn(t)});class Zh extends kn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Rt.bigint)return this._getInvalidInput(e);let r;const i=new ua;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:rt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Zn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return vt(n,{code:rt.invalid_type,expected:Rt.bigint,received:n.parsedType}),un}gte(e,n){return this.setLimit("min",e,!0,Vt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Vt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Vt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Vt.toString(n))}setLimit(e,n,r,i){return new Zh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Vt.toString(i)}]})}_addCheck(e){return new Zh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Vt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Vt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Vt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Vt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Vt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zh.create=t=>{var e;return new Zh({checks:[],typeName:ln.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};class Yb extends kn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Rt.boolean){const r=this._getOrReturnCtx(e);return vt(r,{code:rt.invalid_type,expected:Rt.boolean,received:r.parsedType}),un}return Pa(e.data)}}Yb.create=t=>new Yb({typeName:ln.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Sn(t)});class Lg extends kn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Rt.date){const s=this._getOrReturnCtx(e);return vt(s,{code:rt.invalid_type,expected:Rt.date,received:s.parsedType}),un}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return vt(s,{code:rt.invalid_date}),un}const r=new ua;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),vt(i,{code:rt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Zn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Lg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Vt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Vt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Lg.create=t=>new Lg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ln.ZodDate,...Sn(t)});class nR extends kn{_parse(e){if(this._getType(e)!==Rt.symbol){const r=this._getOrReturnCtx(e);return vt(r,{code:rt.invalid_type,expected:Rt.symbol,received:r.parsedType}),un}return Pa(e.data)}}nR.create=t=>new nR({typeName:ln.ZodSymbol,...Sn(t)});class Zb extends kn{_parse(e){if(this._getType(e)!==Rt.undefined){const r=this._getOrReturnCtx(e);return vt(r,{code:rt.invalid_type,expected:Rt.undefined,received:r.parsedType}),un}return Pa(e.data)}}Zb.create=t=>new Zb({typeName:ln.ZodUndefined,...Sn(t)});class Jb extends kn{_parse(e){if(this._getType(e)!==Rt.null){const r=this._getOrReturnCtx(e);return vt(r,{code:rt.invalid_type,expected:Rt.null,received:r.parsedType}),un}return Pa(e.data)}}Jb.create=t=>new Jb({typeName:ln.ZodNull,...Sn(t)});class Yy extends kn{constructor(){super(...arguments),this._any=!0}_parse(e){return Pa(e.data)}}Yy.create=t=>new Yy({typeName:ln.ZodAny,...Sn(t)});class mg extends kn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pa(e.data)}}mg.create=t=>new mg({typeName:ln.ZodUnknown,...Sn(t)});class qd extends kn{_parse(e){const n=this._getOrReturnCtx(e);return vt(n,{code:rt.invalid_type,expected:Rt.never,received:n.parsedType}),un}}qd.create=t=>new qd({typeName:ln.ZodNever,...Sn(t)});class rR extends kn{_parse(e){if(this._getType(e)!==Rt.undefined){const r=this._getOrReturnCtx(e);return vt(r,{code:rt.invalid_type,expected:Rt.void,received:r.parsedType}),un}return Pa(e.data)}}rR.create=t=>new rR({typeName:ln.ZodVoid,...Sn(t)});class _u extends kn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Rt.array)return vt(n,{code:rt.invalid_type,expected:Rt.array,received:n.parsedType}),un;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(vt(n,{code:a?rt.too_big:rt.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(vt(n,{code:rt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(vt(n,{code:rt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new Cc(n,a,n.path,o)))).then(a=>ua.mergeArray(r,a));const s=[...n.data].map((a,o)=>i.type._parseSync(new Cc(n,a,n.path,o)));return ua.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new _u({...this._def,minLength:{value:e,message:Vt.toString(n)}})}max(e,n){return new _u({...this._def,maxLength:{value:e,message:Vt.toString(n)}})}length(e,n){return new _u({...this._def,exactLength:{value:e,message:Vt.toString(n)}})}nonempty(e){return this.min(1,e)}}_u.create=(t,e)=>new _u({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ln.ZodArray,...Sn(e)});function Qv(t){if(t instanceof oi){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=yc.create(Qv(r))}return new oi({...t._def,shape:()=>e})}else return t instanceof _u?new _u({...t._def,type:Qv(t.element)}):t instanceof yc?yc.create(Qv(t.unwrap())):t instanceof Qh?Qh.create(Qv(t.unwrap())):t instanceof Rc?Rc.create(t.items.map(e=>Qv(e))):t}class oi extends kn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Zn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Rt.object){const c=this._getOrReturnCtx(e);return vt(c,{code:rt.invalid_type,expected:Rt.object,received:c.parsedType}),un}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof qd&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const f=s[c],p=i.data[c];l.push({key:{status:"valid",value:c},value:f._parse(new Cc(i,p,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof qd){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of o)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(c==="strict")o.length>0&&(vt(i,{code:rt.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of o){const p=i.data[f];l.push({key:{status:"valid",value:f},value:c._parse(new Cc(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of l){const p=await f.key,m=await f.value;c.push({key:p,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>ua.mergeObjectSync(r,c)):ua.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Vt.errToObj,new oi({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,a,o;const l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=Vt.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new oi({...this._def,unknownKeys:"strip"})}passthrough(){return new oi({...this._def,unknownKeys:"passthrough"})}extend(e){return new oi({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new oi({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ln.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new oi({...this._def,catchall:e})}pick(e){const n={};return Zn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new oi({...this._def,shape:()=>n})}omit(e){const n={};return Zn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new oi({...this._def,shape:()=>n})}deepPartial(){return Qv(this)}partial(e){const n={};return Zn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new oi({...this._def,shape:()=>n})}required(e){const n={};return Zn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof yc;)s=s._def.innerType;n[r]=s}}),new oi({...this._def,shape:()=>n})}keyof(){return z9(Zn.objectKeys(this.shape))}}oi.create=(t,e)=>new oi({shape:()=>t,unknownKeys:"strip",catchall:qd.create(),typeName:ln.ZodObject,...Sn(e)});oi.strictCreate=(t,e)=>new oi({shape:()=>t,unknownKeys:"strict",catchall:qd.create(),typeName:ln.ZodObject,...Sn(e)});oi.lazycreate=(t,e)=>new oi({shape:t,unknownKeys:"strip",catchall:qd.create(),typeName:ln.ZodObject,...Sn(e)});class Qb extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new jo(o.ctx.common.issues));return vt(n,{code:rt.invalid_union,unionErrors:a}),un}if(n.common.async)return Promise.all(r.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=l._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new jo(l));return vt(n,{code:rt.invalid_union,unionErrors:o}),un}}get options(){return this._def.options}}Qb.create=(t,e)=>new Qb({options:t,typeName:ln.ZodUnion,...Sn(e)});const vd=t=>t instanceof n1?vd(t.schema):t instanceof Eu?vd(t.innerType()):t instanceof r1?[t.value]:t instanceof Jh?t.options:t instanceof i1?Zn.objectValues(t.enum):t instanceof s1?vd(t._def.innerType):t instanceof Zb?[void 0]:t instanceof Jb?[null]:t instanceof yc?[void 0,...vd(t.unwrap())]:t instanceof Qh?[null,...vd(t.unwrap())]:t instanceof gN||t instanceof o1?vd(t.unwrap()):t instanceof a1?vd(t._def.innerType):[];class iA extends kn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Rt.object)return vt(n,{code:rt.invalid_type,expected:Rt.object,received:n.parsedType}),un;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(vt(n,{code:rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),un)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const a=vd(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new iA({typeName:ln.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Sn(r)})}}function rP(t,e){const n=wd(t),r=wd(e);if(t===e)return{valid:!0,data:t};if(n===Rt.object&&r===Rt.object){const i=Zn.objectKeys(e),s=Zn.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const l=rP(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===Rt.array&&r===Rt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],l=rP(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===Rt.date&&r===Rt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class e1 extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,a)=>{if(tP(s)||tP(a))return un;const o=rP(s.value,a.value);return o.valid?((nP(s)||nP(a))&&n.dirty(),{status:n.value,value:o.data}):(vt(r,{code:rt.invalid_intersection_types}),un)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}e1.create=(t,e,n)=>new e1({left:t,right:e,typeName:ln.ZodIntersection,...Sn(n)});class Rc extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Rt.array)return vt(r,{code:rt.invalid_type,expected:Rt.array,received:r.parsedType}),un;if(r.data.length<this._def.items.length)return vt(r,{code:rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),un;!this._def.rest&&r.data.length>this._def.items.length&&(vt(r,{code:rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Cc(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>ua.mergeArray(n,a)):ua.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Rc({...this._def,rest:e})}}Rc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Rc({items:t,typeName:ln.ZodTuple,rest:null,...Sn(e)})};class t1 extends kn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Rt.object)return vt(r,{code:rt.invalid_type,expected:Rt.object,received:r.parsedType}),un;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in r.data)i.push({key:s._parse(new Cc(r,o,r.path,o)),value:a._parse(new Cc(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?ua.mergeObjectAsync(n,i):ua.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof kn?new t1({keyType:e,valueType:n,typeName:ln.ZodRecord,...Sn(r)}):new t1({keyType:fu.create(),valueType:e,typeName:ln.ZodRecord,...Sn(n)})}}class iR extends kn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Rt.map)return vt(r,{code:rt.invalid_type,expected:Rt.map,received:r.parsedType}),un;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:i._parse(new Cc(r,o,r.path,[c,"key"])),value:s._parse(new Cc(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,f=await l.value;if(c.status==="aborted"||f.status==="aborted")return un;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(c.value,f.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,f=l.value;if(c.status==="aborted"||f.status==="aborted")return un;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),o.set(c.value,f.value)}return{status:n.value,value:o}}}}iR.create=(t,e,n)=>new iR({valueType:e,keyType:t,typeName:ln.ZodMap,...Sn(n)});class Ng extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Rt.set)return vt(r,{code:rt.invalid_type,expected:Rt.set,received:r.parsedType}),un;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(vt(r,{code:rt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(vt(r,{code:rt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function a(l){const c=new Set;for(const f of l){if(f.status==="aborted")return un;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>s._parse(new Cc(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new Ng({...this._def,minSize:{value:e,message:Vt.toString(n)}})}max(e,n){return new Ng({...this._def,maxSize:{value:e,message:Vt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ng.create=(t,e)=>new Ng({valueType:t,minSize:null,maxSize:null,typeName:ln.ZodSet,...Sn(e)});class Ey extends kn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Rt.function)return vt(n,{code:rt.invalid_type,expected:Rt.function,received:n.parsedType}),un;function r(o,l){return eR({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,QC(),Ky].filter(c=>!!c),issueData:{code:rt.invalid_arguments,argumentsError:l}})}function i(o,l){return eR({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,QC(),Ky].filter(c=>!!c),issueData:{code:rt.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Zy){const o=this;return Pa(async function(...l){const c=new jo([]),f=await o._def.args.parseAsync(l,s).catch(_=>{throw c.addIssue(r(l,_)),c}),p=await Reflect.apply(a,this,f);return await o._def.returns._def.type.parseAsync(p,s).catch(_=>{throw c.addIssue(i(p,_)),c})})}else{const o=this;return Pa(function(...l){const c=o._def.args.safeParse(l,s);if(!c.success)throw new jo([r(l,c.error)]);const f=Reflect.apply(a,this,c.data),p=o._def.returns.safeParse(f,s);if(!p.success)throw new jo([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ey({...this._def,args:Rc.create(e).rest(mg.create())})}returns(e){return new Ey({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Ey({args:e||Rc.create([]).rest(mg.create()),returns:n||mg.create(),typeName:ln.ZodFunction,...Sn(r)})}}class n1 extends kn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}n1.create=(t,e)=>new n1({getter:t,typeName:ln.ZodLazy,...Sn(e)});class r1 extends kn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return vt(n,{received:n.data,code:rt.invalid_literal,expected:this._def.value}),un}return{status:"valid",value:e.data}}get value(){return this._def.value}}r1.create=(t,e)=>new r1({value:t,typeName:ln.ZodLiteral,...Sn(e)});function z9(t,e){return new Jh({values:t,typeName:ln.ZodEnum,...Sn(e)})}class Jh extends kn{constructor(){super(...arguments),tb.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return vt(n,{expected:Zn.joinValues(r),received:n.parsedType,code:rt.invalid_type}),un}if(tR(this,tb)||D9(this,tb,new Set(this._def.values)),!tR(this,tb).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return vt(n,{received:n.data,code:rt.invalid_enum_value,options:r}),un}return Pa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Jh.create(e,{...this._def,...n})}exclude(e,n=this._def){return Jh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}tb=new WeakMap;Jh.create=z9;class i1 extends kn{constructor(){super(...arguments),nb.set(this,void 0)}_parse(e){const n=Zn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Rt.string&&r.parsedType!==Rt.number){const i=Zn.objectValues(n);return vt(r,{expected:Zn.joinValues(i),received:r.parsedType,code:rt.invalid_type}),un}if(tR(this,nb)||D9(this,nb,new Set(Zn.getValidEnumValues(this._def.values))),!tR(this,nb).has(e.data)){const i=Zn.objectValues(n);return vt(r,{received:r.data,code:rt.invalid_enum_value,options:i}),un}return Pa(e.data)}get enum(){return this._def.values}}nb=new WeakMap;i1.create=(t,e)=>new i1({values:t,typeName:ln.ZodNativeEnum,...Sn(e)});class Zy extends kn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Rt.promise&&n.common.async===!1)return vt(n,{code:rt.invalid_type,expected:Rt.promise,received:n.parsedType}),un;const r=n.parsedType===Rt.promise?n.data:Promise.resolve(n.data);return Pa(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Zy.create=(t,e)=>new Zy({type:t,typeName:ln.ZodPromise,...Sn(e)});class Eu extends kn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ln.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{vt(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return un;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?un:l.status==="dirty"||n.value==="dirty"?ay(l.value):l});{if(n.value==="aborted")return un;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?un:o.status==="dirty"||n.value==="dirty"?ay(o.value):o}}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?un:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?un:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Pg(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Pg(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:n.value,value:o})):a);Zn.assertNever(i)}}Eu.create=(t,e,n)=>new Eu({schema:t,typeName:ln.ZodEffects,effect:e,...Sn(n)});Eu.createWithPreprocess=(t,e,n)=>new Eu({schema:e,effect:{type:"preprocess",transform:t},typeName:ln.ZodEffects,...Sn(n)});class yc extends kn{_parse(e){return this._getType(e)===Rt.undefined?Pa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yc.create=(t,e)=>new yc({innerType:t,typeName:ln.ZodOptional,...Sn(e)});class Qh extends kn{_parse(e){return this._getType(e)===Rt.null?Pa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qh.create=(t,e)=>new Qh({innerType:t,typeName:ln.ZodNullable,...Sn(e)});class s1 extends kn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Rt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}s1.create=(t,e)=>new s1({innerType:t,typeName:ln.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Sn(e)});class a1 extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Kb(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new jo(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new jo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}a1.create=(t,e)=>new a1({innerType:t,typeName:ln.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Sn(e)});class sR extends kn{_parse(e){if(this._getType(e)!==Rt.nan){const r=this._getOrReturnCtx(e);return vt(r,{code:rt.invalid_type,expected:Rt.nan,received:r.parsedType}),un}return{status:"valid",value:e.data}}}sR.create=t=>new sR({typeName:ln.ZodNaN,...Sn(t)});const kue=Symbol("zod_brand");class gN extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Q1 extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?un:s.status==="dirty"?(n.dirty(),ay(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?un:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Q1({in:e,out:n,typeName:ln.ZodPipeline})}}class o1 extends kn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Pg(i)&&(i.value=Object.freeze(i.value)),i);return Kb(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}o1.create=(t,e)=>new o1({innerType:t,typeName:ln.ZodReadonly,...Sn(e)});function j9(t,e={},n){return t?Yy.create().superRefine((r,i)=>{var s,a;if(!t(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(a=(s=o.fatal)!==null&&s!==void 0?s:n)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...c,fatal:l})}}):Yy.create()}const Oue={object:oi.lazycreate};var ln;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ln||(ln={}));const Pue=(t,e={message:`Input not instance of ${t.name}`})=>j9(n=>n instanceof t,e),H9=fu.create,V9=Yh.create,Lue=sR.create,Nue=Zh.create,G9=Yb.create,Due=Lg.create,Uue=nR.create,Fue=Zb.create,Bue=Jb.create,zue=Yy.create,jue=mg.create,Hue=qd.create,Vue=rR.create,Gue=_u.create,$ue=oi.create,Wue=oi.strictCreate,que=Qb.create,Xue=iA.create,Kue=e1.create,Yue=Rc.create,Zue=t1.create,Jue=iR.create,Que=Ng.create,ece=Ey.create,tce=n1.create,nce=r1.create,rce=Jh.create,ice=i1.create,sce=Zy.create,E4=Eu.create,ace=yc.create,oce=Qh.create,lce=Eu.createWithPreprocess,uce=Q1.create,cce=()=>H9().optional(),dce=()=>V9().optional(),fce=()=>G9().optional(),hce={string:t=>fu.create({...t,coerce:!0}),number:t=>Yh.create({...t,coerce:!0}),boolean:t=>Yb.create({...t,coerce:!0}),bigint:t=>Zh.create({...t,coerce:!0}),date:t=>Lg.create({...t,coerce:!0})},pce=un;var et=Object.freeze({__proto__:null,defaultErrorMap:Ky,setErrorMap:lue,getErrorMap:QC,makeIssue:eR,EMPTY_PATH:uue,addIssueToContext:vt,ParseStatus:ua,INVALID:un,DIRTY:ay,OK:Pa,isAborted:tP,isDirty:nP,isValid:Pg,isAsync:Kb,get util(){return Zn},get objectUtil(){return eP},ZodParsedType:Rt,getParsedType:wd,ZodType:kn,datetimeRegex:B9,ZodString:fu,ZodNumber:Yh,ZodBigInt:Zh,ZodBoolean:Yb,ZodDate:Lg,ZodSymbol:nR,ZodUndefined:Zb,ZodNull:Jb,ZodAny:Yy,ZodUnknown:mg,ZodNever:qd,ZodVoid:rR,ZodArray:_u,ZodObject:oi,ZodUnion:Qb,ZodDiscriminatedUnion:iA,ZodIntersection:e1,ZodTuple:Rc,ZodRecord:t1,ZodMap:iR,ZodSet:Ng,ZodFunction:Ey,ZodLazy:n1,ZodLiteral:r1,ZodEnum:Jh,ZodNativeEnum:i1,ZodPromise:Zy,ZodEffects:Eu,ZodTransformer:Eu,ZodOptional:yc,ZodNullable:Qh,ZodDefault:s1,ZodCatch:a1,ZodNaN:sR,BRAND:kue,ZodBranded:gN,ZodPipeline:Q1,ZodReadonly:o1,custom:j9,Schema:kn,ZodSchema:kn,late:Oue,get ZodFirstPartyTypeKind(){return ln},coerce:hce,any:zue,array:Gue,bigint:Nue,boolean:G9,date:Due,discriminatedUnion:Xue,effect:E4,enum:rce,function:ece,instanceof:Pue,intersection:Kue,lazy:tce,literal:nce,map:Jue,nan:Lue,nativeEnum:ice,never:Hue,null:Bue,nullable:oce,number:V9,object:$ue,oboolean:fce,onumber:dce,optional:ace,ostring:cce,pipeline:uce,preprocess:lce,promise:sce,record:Zue,set:Que,strictObject:Wue,string:H9,symbol:Uue,transformer:E4,tuple:Yue,undefined:Fue,union:que,unknown:jue,void:Vue,NEVER:pce,ZodIssueCode:rt,quotelessJson:oue,ZodError:jo}),Hr=(t=>(t.DISCONNECTING="Disconnecting",t.DISCONNECTED="Disconnected",t.CONNECTING="Connecting",t.CONNECTED="Connected",t))(Hr||{}),Un=(t=>(t.Initialize="initialize",t.CallConnect="call_connect",t.CallConnectResponse="call_connect_response",t.CallDisconnect="call_disconnect",t.CallDisconnectResponse="call_disconnect_response",t.Chat="chat",t.ChatGet="chat_get",t.ClientActivityState="client_activity_state",t.ClientLocationState="client_location_state",t.ClientVoiceState="client_voice_state",t.Audio="audio",t.Image="image",t.Error="error",t.Agent="agent",t.UpdateProfile="update_profile",t.DemoSession="demo_session",t.DemoTranscriptSession="demo_transcript_session",t.DirectiveSessionEvent="directive_session_event",t.Ping="ping",t.PingResponse="ping_response",t.WebRtcConfig="webrtc_config",t.WebRtcIceCandidate="webrtc_ice_candidate",t))(Un||{});const Pc=et.object({type:et.nativeEnum(Un),session_id:et.string().optional().default(""),call_id:et.number().int().nullable().optional(),request_id:et.string().nullable().optional()}),Xo=(t,e)=>Pc.extend({type:et.literal(t),content:e}),mce=et.object({session_id:et.string()}),gce=et.object({sample_rate:et.number().int(),audio_codec:et.enum(["none","opus"]),reconnect:et.boolean(),is_private:et.boolean().optional(),settings:et.record(et.any()).optional(),client_name:et.string().optional(),client_metadata:et.record(et.any()).optional(),webrtc_offer_sdp:et.string().optional()}),_ce=et.object({sample_rate:et.number().int(),audio_codec:et.enum(["none","opus"]),webrtc_answer_sdp:et.string().nullable().optional()}),vce=et.object({reason:et.enum(["user_request","other_reason","shutdown","error","call_duration_limit_exceeded"])}),yce=et.object({id:et.number().int().optional(),sender:et.string(),content:et.string(),created_at:et.string()}),Ece=et.object({messages:et.array(yce)}),Sce=et.object({limit:et.number().int(),timestamp:et.string()}),bce=et.object({activity:et.string()}),wce=et.object({latitude:et.number(),longitude:et.number(),address:et.string(),timezone:et.string(),date:et.string().optional()}),Tce=et.object({voice:et.string()}),xce=et.object({audio_data:et.string()}),Cce=et.object({image_uri:et.string(),x:et.number().optional(),y:et.number().optional(),save_image:et.boolean(),image_metadata:et.record(et.any()).optional()}),Rce=et.object({code:et.number().int(),message:et.string().nullish(),detail:et.string().nullish(),close_connection:et.boolean().nullish()}),Mce=et.object({type:et.string(),content:et.string(),created_at:et.string()}),Ace=et.object({settings:et.record(et.any())}),Ice=et.object({content:et.string(),is_quiet:et.boolean()}),kce=Xo("initialize",mce),Oce=Xo("call_connect",gce),Pce=Pc.extend({type:et.literal("call_connect_response"),call_id:et.number().int(),content:_ce}),Lce=Pc.extend({type:et.literal("call_disconnect"),call_id:et.number().int(),content:vce}),Nce=Xo("call_disconnect_response",et.object({}).optional()),Dce=Xo("chat",Ece),Uce=Xo("chat_get",Sce),Fce=Xo("client_activity_state",bce),Bce=Xo("client_location_state",wce),zce=Xo("client_voice_state",Tce),jce=Pc.extend({type:et.literal("audio"),call_id:et.number().int(),content:xce}),Hce=Xo("image",Cce),Vce=Xo("error",Rce),Gce=Xo("agent",Mce),$ce=Xo("update_profile",Ace),Wce=Pc.extend({type:et.literal("demo_session"),content:et.string()}),qce=Pc.extend({type:et.literal("demo_transcript_session"),content:et.string()}),Xce=Xo("directive_session_event",Ice),Kce=Pc.extend({type:et.literal("ping"),content:et.string()}),Yce=Pc.extend({type:et.literal("ping_response"),content:et.string()}),Zce=et.object({ice_servers:et.array(et.object({urls:et.array(et.string()),username:et.string().optional(),credential:et.string().optional()}))}),Jce=Pc.extend({type:et.literal("webrtc_config"),content:Zce}),Qce=et.object({sdp:et.string(),sdp_mid:et.string().optional(),sdp_m_line_index:et.number().optional()}),ede=Pc.extend({type:et.literal("webrtc_ice_candidate"),content:Qce}),S4=et.discriminatedUnion("type",[kce,Oce,Pce,Lce,Nce,Dce,Uce,Fce,Bce,zce,jce,Hce,Vce,Gce,$ce,Wce,qce,Xce,Kce,Yce,Jce,ede]);class tde{constructor(e,n,r){this.transport=e,this.audioReceivedCallback=null,this.agentMessageReceivedCallback=null,this.errorCallback=null,this.closeCallback=null,this.webRtcConfigMessageReceivedCallback=null,this.pendingRpcCalls=new Map,this.timeoutIds=[],this.transport.onMessage(this.handleMessage.bind(this)),this.transport.onError(this.handleError.bind(this)),this.transport.onClose(this.handleClose.bind(this)),this.logger=n,this.websocketConfig=r}async connect(){const e=await this.transport.connect(),n=this.parseMessage(e);if(n.type!==Un.Initialize)throw new h2("Initialize message expected upon connect");return this.logger.info("Received initialize message:",n),n.content.session_id}async disconnect(){for(const e of this.timeoutIds)e!=null&&clearTimeout(e);await this.transport.disconnect()}isConnected(){return this.transport.isConnected()}async callConnect(e){return this.logger.debug("Sending call connect message:",e),this.invokeRpc(e)}async callDisconnect(e){return this.logger.debug("Sending call disconnect message:",e),this.invokeRpc(e)}async sendPing(e){return this.invokeRpc(e)}parseMessage(e){const n=JSON.parse(e),r=S4.safeParse(n);if(!r.success)throw this.logger.error("Invalid message format: "+e),new h2("Invalid message format: "+r.error.message);return r.data}invokeRpc(e,n=this.websocketConfig.message_timeout_ms){return new Promise((r,i)=>{const s=L9();e.request_id=s;const a=setTimeout(()=>{this.pendingRpcCalls.has(s)&&(this.pendingRpcCalls.delete(s),this.logger.error(`RPC call to '${e.type}' timed out after ${n}ms`),i(new T9(`RPC call to '${e.type}' timed out after ${n}ms`)))},n);this.timeoutIds.push(a);const o=c=>{clearTimeout(a),this.timeoutIds=this.timeoutIds.filter(f=>f!==a),i(c)},l=c=>{clearTimeout(a),this.timeoutIds=this.timeoutIds.filter(f=>f!==a),r(c)};this.pendingRpcCalls.set(s,{resolve:l,reject:o}),this.sendMessage(e)})}sendAudio(e){this.sendMessage(e)}onAudioReceived(e){this.audioReceivedCallback=e}sendAgentMessage(e){this.sendMessage(e)}onAgentMessageReceived(e){this.agentMessageReceivedCallback=e}sendClientLocationState(e){this.sendMessage(e)}sendImage(e){this.sendMessage(e)}sendDirectiveSessionEvent(e){this.sendMessage(e)}sendWebRtcIceCandidates(e){this.sendMessage(e)}onWebRtcConfigMessageReceived(e){this.webRtcConfigMessageReceivedCallback=e}onError(e){this.errorCallback=e}onClose(e){this.closeCallback=e}outstandingRpcCalls(){return this.pendingRpcCalls.size}handleMessage(e,n){var r,i,s,a;try{const o=this.parseMessage(e);if(o.type!==Un.Audio&&o.type!==Un.PingResponse&&this.logger.info("Received "+o.type+" message:",o),o.request_id){const l=this.pendingRpcCalls.get(o.request_id);if(l){this.pendingRpcCalls.delete(o.request_id),l.resolve(o);return}this.logger.error("Received unexpected RPC response:",o)}switch(o.type){case Un.Initialize:(r=this.errorCallback)==null||r.call(this,new h2("Received initialize message more than once!"));break;case Un.Audio:if(this.audioReceivedCallback){const l=this.base64ToArrayBuffer(o.content.audio_data);this.audioReceivedCallback(l,n)}break;case Un.Error:if(this.errorCallback){const l=o.content,c=new C9(l.message??"Unknown error",{request_id:o.request_id,details:l.detail});this.errorCallback(c)}break;case Un.CallDisconnect:{const l=o,c=l.content.reason;c==="call_duration_limit_exceeded"?(i=this.errorCallback)==null||i.call(this,new x9("Call duration limit exceeded")):(s=this.errorCallback)==null||s.call(this,new rA("Server disconnected the call",{reason:c}));const f={type:Un.CallDisconnectResponse,session_id:l.session_id,request_id:l.request_id,call_id:l.call_id};this.sendMessage(f)}break;case Un.Agent:this.agentMessageReceivedCallback&&this.agentMessageReceivedCallback(o);break;case Un.WebRtcConfig:this.webRtcConfigMessageReceivedCallback&&this.webRtcConfigMessageReceivedCallback(o);break;case Un.Ping:case Un.PingResponse:case Un.Chat:case Un.ChatGet:case Un.ClientActivityState:case Un.ClientLocationState:case Un.ClientVoiceState:case Un.DemoSession:case Un.DemoTranscriptSession:case Un.DirectiveSessionEvent:case Un.UpdateProfile:case Un.Image:case Un.CallConnect:case Un.CallConnectResponse:case Un.CallDisconnectResponse:break;default:break}}catch(o){const l=o instanceof Error?o.message:String(o);(a=this.errorCallback)==null||a.call(this,new Nle(`Failed to handle message data ${l}`))}}handleError(e){var n;(n=this.errorCallback)==null||n.call(this,e)}handleClose(e){var n;this.invalidateTimeouts(),(n=this.closeCallback)==null||n.call(this,e)}invalidateTimeouts(){for(const e of this.timeoutIds)e!=null&&clearTimeout(e)}sendMessage(e){const n=S4.safeParse(e);if(!n.success)throw new Error("Invalid message format: "+n.error.message);this.transport.send(JSON.stringify(n.data))}base64ToArrayBuffer(e){const n=atob(e),r=n.length,i=new Uint8Array(r);for(let s=0;s<r;s++)i[s]=n.charCodeAt(s);return i.buffer}}class nde{constructor(){this.last10TrackedEvents=[]}async initialize(e){console.log("Analytics initialized: ",e)}identify(e,n,r,i,s){console.log("Analytics identified: ",n,r)}track(e){console.log("Analytics tracked: ",e),this.last10TrackedEvents.push(e),this.last10TrackedEvents.length>10&&this.last10TrackedEvents.shift()}setContext(e,n){console.log("Analytics set context: ",e,n)}unsetContext(e){console.log("Analytics unset context: ",e)}reset(){this.last10TrackedEvents=[]}}function ai(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function kd(t){return function e(n){return arguments.length===0||ai(n)?e:t.apply(this,arguments)}}function uh(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return ai(n)?e:kd(function(i){return t(n,i)});default:return ai(n)&&ai(r)?e:ai(n)?kd(function(i){return t(i,r)}):ai(r)?kd(function(i){return t(n,i)}):t(n,r)}}}function _N(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return ai(n)?e:uh(function(s,a){return t(n,s,a)});case 2:return ai(n)&&ai(r)?e:ai(n)?uh(function(s,a){return t(s,r,a)}):ai(r)?uh(function(s,a){return t(n,s,a)}):kd(function(s){return t(n,r,s)});default:return ai(n)&&ai(r)&&ai(i)?e:ai(n)&&ai(r)?uh(function(s,a){return t(s,a,i)}):ai(n)&&ai(i)?uh(function(s,a){return t(s,r,a)}):ai(r)&&ai(i)?uh(function(s,a){return t(n,s,a)}):ai(n)?kd(function(s){return t(s,r,i)}):ai(r)?kd(function(s){return t(n,s,i)}):ai(i)?kd(function(s){return t(n,r,s)}):t(n,r,i)}}}function ZT(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var rde=kd(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function b4(t){return Object.prototype.toString.call(t)==="[object Object]"}const ide=Number.isInteger||function(e){return e<<0===e};function sde(t){return Object.prototype.toString.call(t)==="[object String]"}function ade(t,e){var n=t<0?e.length+t:t;return sde(e)?e.charAt(n):e[n]}function ode(t){return new RegExp(t.source,t.flags?t.flags:(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":"")+(t.dotAll?"s":""))}function $9(t,e,n){if(n||(n=new ude),lde(t))return t;var r=function(s){var a=n.get(t);if(a)return a;n.set(t,s);for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=$9(t[o],!0,n));return s};switch(rde(t)){case"Object":return r(Object.create(Object.getPrototypeOf(t)));case"Array":return r(Array(t.length));case"Date":return new Date(t.valueOf());case"RegExp":return ode(t);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}function lde(t){var e=typeof t;return t==null||e!="object"&&e!="function"}var ude=function(){function t(){this.map={},this.length=0}return t.prototype.set=function(e,n){var r=this.hash(e),i=this.map[r];i||(this.map[r]=i=[]),i.push([e,n]),this.length+=1},t.prototype.hash=function(e){var n=[];for(var r in e)n.push(Object.prototype.toString.call(e[r]));return n.join()},t.prototype.get=function(e){if(this.length<=180){for(var n in this.map)for(var a=this.map[n],r=0;r<a.length;r+=1){var i=a[r];if(i[0]===e)return i[1]}return}var s=this.hash(e),a=this.map[s];if(a)for(var r=0;r<a.length;r+=1){var i=a[r];if(i[0]===e)return i[1]}},t}(),fr=kd(function(e){return e!=null&&typeof e.clone=="function"?e.clone():$9(e)});function cde(t,e){for(var n=e,r=0;r<t.length;r+=1){if(n==null)return;var i=t[r];ide(i)?n=ade(i,n):n=n[i]}return n}var dde=_N(function(e,n,r){var i={},s;n=n||{},r=r||{};for(s in n)ZT(s,n)&&(i[s]=ZT(s,r)?e(s,n[s],r[s]):n[s]);for(s in r)ZT(s,r)&&!ZT(s,i)&&(i[s]=r[s]);return i}),fde=_N(function t(e,n,r){return dde(function(i,s,a){return b4(s)&&b4(a)?t(e,s,a):e(i,s,a)},n,r)}),hde=_N(function(e,n,r){return fde(function(i,s,a){return e(s,a)},n,r)}),pde=uh(cde),W9=uh(function(e,n){var r={};for(var i in n)e(n[i],i,n)&&(r[i]=n[i]);return r});const jt=t=>typeof t=="function"&&!!(t.constructor&&t.call&&t.apply),es=t=>typeof t=="string",Su=t=>t===null,Ia=t=>typeof t>"u",bu=t=>Su(t)||Ia(t),mde=t=>typeof t=="bigint",Pi=t=>!Ia(t),Jy=t=>!bu(t),gde=t=>Jy(t)&&t!=="",vN=t=>t instanceof Error,iP=(t,e)=>{const n=e.split(".");return pde(n,t)},_de=(t,e)=>!!iP(t,e),vde=t=>typeof t=="object",yde=t=>!Su(t)&&vde(t)&&!Array.isArray(t),Sr=t=>!Su(t)&&Object.prototype.toString.call(t)==="[object Object]",Ede=(t,e)=>{if(!Array.isArray(t)||!Array.isArray(e))return fr(e);const n=fr(t);return e.forEach((r,i)=>{n[i]=Array.isArray(r)||yde(r)?ys(n[i],r):r}),n},ys=(t,e)=>hde(Ede,t,e),Dg=t=>Sr(t)&&Object.keys(t).length>0,rb=t=>{const e=W9(Pi,t);return Object.keys(e).forEach(n=>{const r=e[n];Sr(r)&&(e[n]=rb(r))}),e},Um=t=>{const e=W9(Jy,t);return Object.keys(e).forEach(n=>{const r=e[n];Sr(r)&&(e[n]=Um(r))}),e},Sde=t=>t.replace(/^\s+|\s+$/gm,""),bde=t=>t.replace(/ {2,}/g," "),w4=t=>t.replace(/^\.+/,""),aR=t=>{let e=t;if(!es(t)&&!bu(t))try{e=JSON.stringify(t)}catch{e=null}return e},wde=t=>{const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return globalThis.btoa(e)},Tde=t=>wde(new TextEncoder().encode(t)),oR=(t,e,n,r,i)=>{const s={category:t,name:e,properties:n,options:r,callback:void 0};jt(i)&&(s.callback=i),jt(r)&&(s.category=t,s.name=e,s.properties=n,s.options=void 0,s.callback=r),jt(n)&&(s.category=t,s.name=e,s.properties=void 0,s.options=void 0,s.callback=n),jt(e)&&(s.category=t,s.name=void 0,s.properties=void 0,s.options=void 0,s.callback=e),jt(t)&&(s.category=void 0,s.name=void 0,s.properties=void 0,s.options=void 0,s.callback=t),Sr(t)?(s.name=void 0,s.category=void 0,s.properties=t,jt(e)?s.options=void 0:s.options=e):Sr(e)&&(s.name=void 0,s.properties=e,jt(n)?s.options=void 0:s.options=n),es(t)&&!es(e)&&(s.category=void 0,s.name=t),Pi(s.category)||(s.category=void 0),Pi(s.name)||(s.name=void 0),s.properties=s.properties?fr(s.properties):{},Pi(s.options)?s.options=fr(s.options):s.options=void 0;const a=es(s.name)?s.name:s.properties.name,o=es(s.category)?s.category:s.properties.category;return s.properties=ys(Sr(s.properties)?s.properties:{},{...a&&{name:a},...o&&{category:o}}),s},yN=(t,e,n,r)=>{const i={name:t,properties:e,options:n,callback:void 0};return jt(r)&&(i.callback=r),jt(n)&&(i.properties=e,i.options=void 0,i.callback=n),jt(e)&&(i.properties=void 0,i.options=void 0,i.callback=e),i.properties=Jy(i.properties)?fr(i.properties):{},Pi(i.options)?i.options=fr(i.options):i.options=void 0,i},q9=(t,e,n,r)=>{const i={userId:t,traits:e,options:n,callback:void 0};return jt(r)&&(i.callback=r),jt(n)&&(i.userId=t,i.traits=e,i.options=void 0,i.callback=n),jt(e)&&(i.userId=t,i.traits=void 0,i.options=void 0,i.callback=e),(Sr(t)||Su(t))&&(i.userId=null,i.traits=t,jt(e)?i.options=void 0:i.options=e),i.userId=aR(i.userId),Sr(i.traits)?i.traits=fr(i.traits):i.traits=void 0,Pi(i.options)?i.options=fr(i.options):i.options=void 0,i},X9=(t,e,n,r)=>{const i={to:t,from:e,options:n,callback:void 0};return jt(r)&&(i.callback=r),jt(n)&&(i.to=t,i.from=e,i.options=void 0,i.callback=n),jt(e)?(i.to=t,i.from=void 0,i.options=void 0,i.callback=e):(Sr(e)||Su(e))&&(i.to=t,i.from=void 0,i.options=e),Pi(i.to)&&(i.to=aR(i.to)),Pi(i.from)?i.from=aR(i.from):i.from=void 0,Pi(i.options)?i.options=fr(i.options):i.options=void 0,i},K9=(t,e,n,r)=>{const i={groupId:t,traits:e,options:n,callback:void 0};return jt(r)&&(i.callback=r),jt(n)&&(i.groupId=t,i.traits=e,i.options=void 0,i.callback=n),jt(e)&&(i.groupId=t,i.traits=void 0,i.options=void 0,i.callback=e),(Sr(t)||Su(t))&&(i.groupId=null,i.traits=t,jt(e)?i.options=void 0:i.options=e),i.groupId=aR(i.groupId),Sr(i.traits)?i.traits=fr(i.traits):i.traits=void 0,Pi(i.options)?i.options=fr(i.options):i.options=void 0,i};let Lv=function(t){return t.LOADED="Page Loaded",t.UNLOADED="Page Unloaded",t}({});const sP="CapabilitiesManager",Ec="ConfigManager",Y9="EventManager",T4="PluginsManager",ib="UserSessionManager",iS="ErrorHandler",Nv="PluginEngine",x4="StoreManager",xde="readyApi",Cde="EventRepository",Rde="ExternalSrcLoader",Mde="HttpClient",Ade="RudderStackAnalytics",sS="AnalyticsCore";function Ide(t){return crypto.getRandomValues(new Uint8Array(t))}var C4=4096,aC=[],Mh=0,_2;for(;Mh<256;Mh++)aC[Mh]=(Mh+256).toString(16).substring(1);function kde(){(!_2||Mh+16>C4)&&(_2=Ide(C4),Mh=0);for(var t=0,e,n="";t<16;t++)e=_2[Mh+t],t==6?n+=aC[e&15|64]:t==8?n+=aC[e&63|128]:n+=aC[e],t&1&&t>1&&t<11&&(n+="-");return Mh+=16,n}var tg=256,oC=[],JT;for(;tg--;)oC[tg]=(tg+256).toString(16).substring(1);function Ode(){var t=0,e,n="";if(!JT||tg+16>256){for(JT=Array(t=256);t--;)JT[t]=256*Math.random()|0;t=tg=0}for(;t<16;t++)e=JT[tg+t],t==6?n+=oC[e&15|64]:t==8?n+=oC[e&63|128]:n+=oC[e],t&1&&t>1&&t<11&&(n+="-");return tg++,n}const Pde=()=>!bu(globalThis.crypto)&&jt(globalThis.crypto.getRandomValues),EN=()=>Pde()?kde():Ode(),Lde=t=>{let e=!1,n=!1;function r(){e||(e=!0,t(n),setTimeout(()=>{e=!1},0))}globalThis.addEventListener("beforeunload",()=>{n=!1,r()}),globalThis.addEventListener("blur",()=>{n=!0,r()}),globalThis.addEventListener("focus",()=>{e=!1}),document.addEventListener("pagehide",()=>{n=document.visibilityState==="hidden",r()}),document.addEventListener("visibilitychange",()=>{n=!0,document.visibilityState==="hidden"?r():e=!1})},aP=t=>t.toISOString(),Nde=()=>aP(new Date),rr=":: ",Dde=t=>`A script with the id "${t}" is already loaded. Skipping the loading of this script to prevent conflicts.`,R4=(t,e)=>`Failed to load the script with the id "${t}" from URL "${e}".`,Ude=(t,e,n)=>`A timeout of ${n} ms occurred while trying to load the script with id "${t}" from URL "${e}".`,Fde=(t,e)=>`${t}${rr}A circular reference has been detected in the object and the property "${e}" has been dropped from the output.`,Bde="Failed to convert the value to a JSON string.",zde="Failed to encode the cookie data.",jde="JSONStringify",Hde="[BigInt]",Z9="[Circular Reference]",Vde=(t,e,n)=>{const r=[];return function(i,s){if(!(e!=null&&e.includes(i))&&!(t&&bu(s))){if(typeof s!="object"||Su(s))return s;for(;r.length>0&&r[r.length-1]!==this;)r.pop();return r.includes(s)?(n==null||n.warn(Fde(jde,i)),Z9):(r.push(s),s)}}},Ah=(t,e,n,r)=>{try{return JSON.stringify(t,Vde(e,n,r))}catch(i){return r==null||r.warn(Bde,i),null}},Gde=t=>{const e=[];return function(r,i){if(mde(i))return Hde;for(;e.length>0&&e[e.length-1]!==this;)e.pop();return e.includes(i)?Z9:(e.push(i),i)}},J9=(t,e)=>{const n=Array.isArray(t)?[]:{};for(const r in t)if(Object.hasOwnProperty.call(t,r)){const i=t[r],s=e.call(t,r,i);Sr(s)||Array.isArray(s)?n[r]=J9(s,e):n[r]=s}return n},gr=(t,e)=>{const n=Gde(),r=n.call(t,"",t);return Sr(t)||Array.isArray(t)?J9(t,n):r},Q9="[MANUAL ERROR]",ew=(t,e)=>{let n=t;return vN(t)?n.message=`${e}: ${t.message}`:n=new Error(`${e}: ${Ah(t)}`),n},Ci=t=>{vN(t)&&(t.stack=`${t.stack??""}
${Q9}`),globalThis.dispatchEvent(new ErrorEvent("error",{error:t}))},M4="RudderLabs JavaScript SDK",l1="3.11.17",$de="com.rudderlabs.javascript",ej="npm",A4="RudderJS-Initiated",Wde="ad-block page request",qde="/ad-blocked",Tb="preloadedEventsBuffer",Xde="Consent Management Interaction",Kde="ajs_trait_",Yde="ajs_prop_",I4="ajs_aid",k4="ajs_uid",O4="ajs_event",Zde=10*1e3,Jde=31536e3*1e3,u1=30*60*1e3,P4=10*1e3,Qde=10*1e3,efe=250,tj=(t="app")=>{globalThis.RudderStackGlobals||(globalThis.RudderStackGlobals={}),globalThis.RudderStackGlobals[t]||(globalThis.RudderStackGlobals[t]={})},c1=(t,e,n="app")=>{tj(n),globalThis.RudderStackGlobals[n][t]=e},nj=(t,e="app")=>(tj(e),globalThis.RudderStackGlobals[e][t]);function tfe(t,e,n=efe){let r;return(...i)=>{globalThis.clearTimeout(r),r=globalThis.setTimeout(()=>{t.apply(e,i)},n)}}const L4=(t,e)=>{const n={};return t.forEach((r,i)=>{if(i.startsWith(e)){const s=i.substring(e.length);n[s]=t.get(i)}}),n},nfe=(t=[])=>{const e={trait:Kde,properties:Yde},n=new URLSearchParams(globalThis.location.search);n.get(O4)&&t.unshift(["track",n.get(O4),L4(n,e.properties)]),n.get(k4)&&t.unshift(["identify",n.get(k4),L4(n,e.trait)]),n.get(I4)&&t.unshift(["setAnonymousId",n.get(I4)])},rfe=t=>{const e="load";let n=[],r=0;for(;r<t.length;){if(t[r]&&t[r][0]===e){n=fr(t[r]),t.splice(r,1);break}r+=1}return n},ife=t=>{const e="consent",n=t.filter(i=>i[0]===e),r=t.filter(i=>i[0]!==e);t.splice(0,t.length,...n,...r)},sfe=t=>{const e=nj(Tb)||[];nfe(e),e.length>0&&(t.enqueuePreloadBufferEvents(e),c1(Tb,[]))},afe=(t,e)=>{const n=t.shift();let r;if(jt(e[n])){switch(n){case"page":r=oR(...t);break;case"track":r=yN(...t);break;case"identify":r=q9(...t);break;case"alias":r=X9(...t);break;case"group":r=K9(...t);break;default:e[n](...t);break}r&&e[n](r)}},ofe=10*1e3,lfe="RS_JS_SDK",ufe=(t,e,n=!0,r=null,i=null,s={})=>{const a=document.createElement("script");return a.type="text/javascript",a.onload=r,a.onerror=i,a.src=t,a.id=e,a.async=n,Object.keys(s).forEach(o=>{a.setAttribute(o,s[o])}),a.setAttribute("data-loader",lfe),a},cfe=t=>{var s,a,o,l;const e=document.getElementsByTagName("head");if(e.length>0){(a=e[0])==null||a.insertBefore(t,(s=e[0])==null?void 0:s.firstChild);return}const n=document.getElementsByTagName("script");if(n.length>0&&((o=n[0])!=null&&o.parentNode)){(l=n[0])==null||l.parentNode.insertBefore(t,n[0]);return}const r=document.createElement("head");r.appendChild(t);const i=document.getElementsByTagName("html")[0];i==null||i.insertBefore(r,i.firstChild)},dfe=(t,e,n,r=!0,i)=>new Promise((s,a)=>{document.getElementById(e)&&a(new Error(Dde(e)));try{let l;cfe(ufe(t,e,r,()=>{globalThis.clearTimeout(l),s(e)},()=>{globalThis.clearTimeout(l),a(new Error(R4(e,t)))},i)),l=globalThis.setTimeout(()=>{a(new Error(Ude(e,t,n)))},n)}catch(l){a(ew(l,R4(e,t)))}});class rj{constructor(e,n,r=ofe){kt(this,"hasErrorHandler",!1);this.errorHandler=e,this.logger=n,this.timeout=r,this.hasErrorHandler=!!this.errorHandler,this.onError=this.onError.bind(this)}loadJSFile(e){const{url:n,id:r,timeout:i,async:s,callback:a,extraAttributes:o}=e,l=!jt(a);dfe(n,r,i||this.timeout,s,o).then(c=>{l||a(c)}).catch(c=>{this.onError(c),l||a()})}onError(e){var n;if(this.hasErrorHandler)(n=this.errorHandler)==null||n.onError(e,Rde);else throw e}}var ffe=Symbol.for("preact-signals");function sA(){if(Fh>1)Fh--;else{for(var t,e=!1;xb!==void 0;){var n=xb;for(xb=void 0,oP++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&sj(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=r}}if(oP=0,Fh--,e)throw t}}function Aa(t){if(Fh>0)return t();Fh++;try{return t()}finally{sA()}}var zr=void 0,xb=void 0,Fh=0,oP=0,lR=0;function ij(t){if(zr!==void 0){var e=t.n;if(e===void 0||e.t!==zr)return e={i:0,S:t,p:zr.s,n:void 0,t:zr,e:void 0,x:void 0,r:e},zr.s!==void 0&&(zr.s.n=e),zr.s=e,t.n=e,32&zr.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=zr.s,e.n=void 0,zr.s.n=e,zr.s=e),e}}function Da(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}Da.prototype.brand=ffe;Da.prototype.h=function(){return!0};Da.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};Da.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};Da.prototype.subscribe=function(t){var e=this;return Xd(function(){var n=e.value,r=zr;zr=void 0;try{t(n)}finally{zr=r}})};Da.prototype.valueOf=function(){return this.value};Da.prototype.toString=function(){return this.value+""};Da.prototype.toJSON=function(){return this.value};Da.prototype.peek=function(){var t=zr;zr=void 0;try{return this.value}finally{zr=t}};Object.defineProperty(Da.prototype,"value",{get:function(){var t=ij(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(oP>100)throw new Error("Cycle detected");this.v=t,this.i++,lR++,Fh++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{sA()}}}});function at(t){return new Da(t)}function sj(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function aj(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function oj(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function tw(t){Da.call(this,void 0),this.x=t,this.s=void 0,this.g=lR-1,this.f=4}(tw.prototype=new Da).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===lR))return!0;if(this.g=lR,this.f|=1,this.i>0&&!sj(this))return this.f&=-2,!0;var t=zr;try{aj(this),zr=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return zr=t,oj(this),this.f&=-2,!0};tw.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}Da.prototype.S.call(this,t)};tw.prototype.U=function(t){if(this.t!==void 0&&(Da.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};tw.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(tw.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=ij(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function lj(t){var e=t.u;if(t.u=void 0,typeof e=="function"){Fh++;var n=zr;zr=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,SN(t),r}finally{zr=n,sA()}}}function SN(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,lj(t)}function hfe(t){if(zr!==this)throw new Error("Out-of-order effect");oj(this),zr=t,this.f&=-2,8&this.f&&SN(this),sA()}function nw(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}nw.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};nw.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,lj(this),aj(this),Fh++;var t=zr;return zr=this,hfe.bind(this,t)};nw.prototype.N=function(){2&this.f||(this.f|=2,this.o=xb,xb=this)};nw.prototype.d=function(){this.f|=8,1&this.f||SN(this)};function Xd(t){var e=new nw(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}class uj{constructor(){this.items=[]}enqueue(e){this.items.push(e)}dequeue(){return this.items.length===0?null:this.items.shift()}isEmpty(){return this.items.length===0}size(){return this.items.length}clear(){this.items=[]}}const QT={LOG:0,INFO:1,DEBUG:2,WARN:3,ERROR:4,NONE:5},N4="LOG",pfe="ERROR",mfe="RS SDK",gfe="font-weight: bold; background: black; color: white;",_fe="font-weight: normal;";let vfe=class{constructor(e=N4,n="",r=console){this.minLogLevel=QT[e],this.scope=n,this.logProvider=r}log(...e){this.outputLog("LOG",e)}info(...e){this.outputLog("INFO",e)}debug(...e){this.outputLog("DEBUG",e)}warn(...e){this.outputLog("WARN",e)}error(...e){this.outputLog("ERROR",e)}outputLog(e,n){var r,i;this.minLogLevel<=QT[e]&&((i=(r=this.logProvider)[e.toLowerCase()])==null||i.call(r,...this.formatLogData(n)))}setScope(e){this.scope=e||this.scope}setMinLogLevel(e){this.minLogLevel=QT[e],Ia(this.minLogLevel)&&(this.minLogLevel=QT[N4])}formatLogData(e){if(Array.isArray(e)&&e.length>0){let n=`%c ${mfe}`;this.scope&&(n=`${n} - ${this.scope}`);const r=es(e[0])?e[0].trim():"";n=`${n} %c ${r}`;const i=[n,gfe,_fe];return es(e[0])||i.push(e[0]),i.push(...e.slice(1)),i}return e}};const Tu=new vfe;let Dv=function(t){return t.HANDLEDEXCEPTION="handledException",t.UNHANDLEDEXCEPTION="unhandledException",t.UNHANDLEDREJECTION="unhandledPromiseRejection",t}({});const cj=["localStorage","memoryStorage","cookieStorage","sessionStorage","none"],lP="cookieStorage",yfe='"getSourceConfig" must be a function. Please make sure that it is defined and returns a valid source configuration object.',D4="Unable to process/parse source configuration response.",Efe="The source is disabled. Please enable the source in the dashboard to send events.",Sfe="Failed to prepare data for the request.",bfe="Failed to generate the event object.",wfe="Failed to invoke plugin because the extension point name is missing.",Tfe="Failed to invoke plugin because the extension point name is invalid.",xfe=t=>`Failed to load the SDK as the base URL for ${t} is not valid.`,Cfe=(t,e,n)=>`${t}${rr}The consent manager "${e}" is not supported. Please choose one of the following supported consent managers: "${Object.keys(n)}".`,Rfe=t=>`${t}${rr}Failed to initialize the error reporting plugin.`,U4=t=>`${t}${rr}Failed to notify the error.`,Mfe=t=>`${t}${rr}Plugin name is missing.`,Afe=(t,e)=>`${t}${rr}Plugin "${e}" already exists.`,Ife=(t,e)=>`${t}${rr}Plugin "${e}" not found.`,kfe=(t,e)=>`${t}${rr}Plugin "${e}" not found in plugins but found in byName. This indicates a bug in the plugin engine. Please report this issue to the development team.`,Ofe=(t,e,n)=>`${t}${rr}Plugin "${e}" could not be loaded because some of its dependencies "${n}" do not exist.`,Pfe=(t,e,n)=>`${t}${rr}Failed to invoke the "${e}" extension point of plugin "${n}".`,Lfe=(t,e)=>`${t}${rr}The "${e}" storage type is `,Nfe=t=>`Failed to fetch the source config. Reason: ${t}`,Dfe=(t,e)=>`${t}${rr}The write key "${e}" is invalid. It must be a non-empty string. Please check that the write key is correct and try again.`,Ufe=(t,e)=>`${t}${rr}The data plane URL "${e}" is invalid. It must be a valid URL string. Please check that the data plane URL is correct and try again.`,Ffe=t=>`${t}${rr}The provided callback is not a function.`,Bfe=(t,e,n,r)=>`${t} with status: ${e}, ${n} for URL: ${r}.`,zfe=(t,e,n)=>`${t} due to timeout or no connection (${e?e.type:""}) for URL: ${n}.`,jfe=(t,e)=>`${t} for URL: ${e}`,Hfe=t=>`Failed to save the value for "${t}" to storage`,Vfe=t=>`Failed to retrieve or parse data for "${t}" from storage`,Gfe=t=>`The server responded with status ${t} while setting the cookies. As a fallback, the cookies will be set client side.`,$fe=t=>`The server failed to set the ${t} cookie. As a fallback, the cookies will be set client side.`,Wfe="Failed to set/remove cookies via server. As a fallback, the cookies will be managed client side.",qfe=(t,e,n)=>`${t}${rr}The storage type "${e}" is not supported. Please choose one of the following supported types: "${cj}". The default type "${n}" will be used instead.`,Xfe=(t,e,n,r)=>`${t}${rr}The storage encryption version "${e}" is not supported. Please choose one of the following supported versions: "${Object.keys(n)}". The default version "${r}" will be used instead.`,Kfe=(t,e,n)=>`${t}${rr}The storage data migration has been disabled because the configured storage encryption version (${e}) is not the latest (${n}). To enable storage data migration, please update the storage encryption version to the latest version.`,Yfe=(t,e,n)=>`${t}${rr}The provided cookie domain (${e}) does not match the current webpage's domain (${n}). Hence, the cookies will be set client-side.`,Zfe=(t,e,n,r)=>`${t}${rr}The "${e}" property defined under "${n}" is a reserved keyword. Please choose a different property name to avoid conflicts with reserved keywords (${r}).`,Jfe=t=>`${t}${rr}The Beacon API is not supported by your browser. The events will be sent using XHR instead.`,Qfe=(t,e,n)=>`${t}${rr}The session timeout value "${e}" is not a number. The default timeout of ${n} ms will be used instead.`,ehe=t=>`${t}${rr}The session timeout value is 0, which disables the automatic session tracking feature. If you want to enable session tracking, please provide a positive integer value for the timeout.`,the=(t,e,n)=>`${t}${rr}The session timeout value ${e} ms is less than the recommended minimum of ${n} ms. Please consider increasing the timeout value to ensure optimal performance and reliability.`,nhe=(t,e,n)=>`${t}${rr}The provided session ID (${e}) is either invalid, not a positive integer, or not at least "${n}" digits long. A new session ID will be auto-generated instead.`,rhe=t=>`${t}${rr}The storage is either full or unavailable, so the data will not be persisted. Switching to in-memory storage.`,ihe=(t,e,n,r)=>`${t}${rr}The storage type "${n}" is not available for entry "${e}". The SDK will initialize the entry with "${r}" storage type instead.`,F4="Failed to invoke the ready callback",she="API Callback Invocation Failed",ahe="NativeDestinationQueuePlugin initialization failed",ohe="XhrQueuePlugin initialization failed",lhe="DeviceModeTransformationPlugin initialization failed",uhe="NativeDestinationQueuePlugin event enqueue failed",che="XhrQueuePlugin event enqueue failed",dhe=(t,e)=>`${t}${rr}The provided source config URL "${e}" is invalid. Using the default source config URL instead.`,fhe=(t,e)=>`Failed to load the polyfill script with ID "${t}" from URL ${e}.`,hhe=(t,e,n)=>`${t}${rr}The pre-consent storage strategy "${e}" is not supported. Please choose one of the following supported strategies: "none, session, anonymousId". The default strategy "${n}" will be used instead.`,phe=(t,e,n)=>`${t}${rr}The pre-consent events delivery type "${e}" is not supported. Please choose one of the following supported types: "immediate, buffer". The default type "${n}" will be used instead.`,mhe=(t,e,n,r)=>{const i=n.length===1,s=i?` '${n[0]}' plugin was`:` ['${n.join("', '")}'] plugins were`,a=`${t}${rr}${e}, but${s} not configured to load.`;return r?`${a} So, ${i?"the plugin":"those plugins"} will be loaded automatically.`:`${a} Ignore if this was intentional. Otherwise, consider adding ${i?"it":"them"} to the 'plugins' load API option.`},ghe=(t,e)=>`${t}${rr}The provided polyfill URL "${e}" is invalid. The default polyfill URL will be used instead.`,_he=t=>`The cookie data for ${t} seems to be encrypted using SDK versions < v3. The data is dropped. This can potentially stem from using SDK versions < v3 on other sites or web pages that can share cookies with this webpage. We recommend using the same SDK (v3) version everywhere or avoid disabling the storage data migration.`,vhe=t=>`${t}${rr}Page Unloaded event can only be tracked when the Beacon transport is active. Please enable "useBeacon" load API option.`,dj={All:!0},fj="js-integrations",hj="plugins",yhe=new RegExp("^(https?:\\/\\/)(((([a-zA-Z\\d]([a-zA-Z\\d-]*[a-zA-Z\\d])*)\\.)+[a-zA-Z]{2,}|localhost|((25[0-5]|2[0-4][0-9]|[0-1]?[0-9]?[0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[0-1]?[0-9]?[0-9]?)))(\\:\\d+)?(\\/[-a-zA-Z\\d%_.~+]*)*(\\?[;&a-zA-Z\\d%_.~+=-]*)?(\\#[-a-zA-Z\\d_]*)?$"),d1="modern",pj="https://cdn.rudderlabs.com",bN="v3",mj=`${pj}/${bN}/${d1}/${fj}`,gj=`${pj}/${bN}/${d1}/${hj}`,_j="https://api.rudderstack.com",Wm="v3",Ehe="xhr",uP={iubenda:"IubendaConsentManager",oneTrust:"OneTrustConsentManager",ketch:"KetchConsentManager",custom:"CustomConsentManager"},lC={[Wm]:"StorageEncryption",legacy:"StorageEncryptionLegacy"},She={[Ehe]:"XhrQueue",beacon:"BeaconQueue"},bhe="rsaRequest",whe="rsaMetrics",The={logLevel:"ERROR",configUrl:_j,loadIntegration:!0,sessions:{autoTrack:!0,timeout:u1},sameSiteCookie:"Lax",polyfillIfRequired:!0,integrations:dj,useBeacon:!1,beaconQueueOptions:{},destinationsQueueOptions:{},queueOptions:{},lockIntegrationsVersion:!1,lockPluginsVersion:!1,uaChTrackLevel:"none",plugins:[],useGlobalIntegrationsConfigInEvents:!1,bufferDataPlaneEventsUntilReady:!1,dataPlaneEventsBufferTimeout:Qde,storage:{encryption:{version:Wm},migrate:!0,cookie:{}},sendAdblockPageOptions:{},useServerSideCookies:!1},xhe=at(fr(The)),vr={userId:"",userTraits:{},anonymousId:"",groupId:"",groupTraits:{},initialReferrer:"",initialReferringDomain:"",sessionInfo:{},authToken:null},Che=10,Rhe={autoTrack:!0,timeout:u1},Mhe={userId:at(vr.userId),userTraits:at(vr.userTraits),anonymousId:at(vr.anonymousId),groupId:at(vr.groupId),groupTraits:at(vr.groupTraits),initialReferrer:at(vr.initialReferrer),initialReferringDomain:at(vr.initialReferringDomain),sessionInfo:at(vr.sessionInfo),authToken:at(vr.authToken)},Ahe={isOnline:at(!0),storage:{isLocalStorageAvailable:at(!1),isCookieStorageAvailable:at(!1),isSessionStorageAvailable:at(!1)},isBeaconAvailable:at(!1),isLegacyDOM:at(!1),isUaCHAvailable:at(!1),isCryptoAvailable:at(!1),isIE11:at(!1),isAdBlocked:at(!1)},Ihe={isErrorReportingEnabled:at(!1),isMetricsReportingEnabled:at(!1),isErrorReportingPluginLoaded:at(!1),breadcrumbs:at([])},khe=at(void 0),Ohe={activeDataplaneUrl:at(void 0),integrationsCDNPath:at(mj),pluginsCDNPath:at(gj),sourceConfigUrl:at(void 0),status:at(void 0),initialized:at(!1),logLevel:at("ERROR"),loaded:at(!1),readyCallbacks:at([]),writeKey:at(void 0),dataPlaneUrl:at(void 0)},Phe={enabled:at(!1),initialized:at(!1),data:at({}),activeConsentManagerPluginName:at(void 0),preConsent:at({enabled:!1}),postConsent:at({}),resolutionStrategy:at("and"),provider:at(void 0),metadata:at(void 0)},Lhe={retries:at(0),dropped:at(0),sent:at(0),queued:at(0),triggered:at(0),metricsServiceUrl:at(void 0)},Nhe={app:at({name:M4,namespace:$de,version:l1,installType:ej}),traits:at(null),library:at({name:M4,version:l1,snippetVersion:globalThis.RudderSnippetVersion}),userAgent:at(""),device:at(null),network:at(null),os:at({name:"",version:""}),locale:at(null),screen:at({density:0,width:0,height:0,innerWidth:0,innerHeight:0}),"ua-ch":at(void 0),timezone:at(void 0)},Dhe={configuredDestinations:at([]),activeDestinations:at([]),loadOnlyIntegrations:at({}),failedDestinations:at([]),loadIntegration:at(!0),initializedDestinations:at([]),clientDestinationsReady:at(!1),integrationsConfig:at({})},Uhe={toBeProcessedArray:at([]),readyCallbacksArray:at([])},Fhe={ready:at(!1),loadedPlugins:at([]),failedPlugins:at([]),pluginsToLoadFromConfig:at([]),activePlugins:at([]),totalPluginsToLoad:at(0)},Bhe={encryptionPluginName:at(void 0),migrate:at(!1),type:at(void 0),cookie:at(void 0),entries:at({}),trulyAnonymousTracking:at(!1)},zhe={isEnabledServerSideCookies:at(!1),dataServiceUrl:at(void 0)},jhe={eventsQueuePluginName:at(void 0),deliveryEnabled:at(!0)},Hhe={enabled:at(!1),pageLifecycle:{enabled:at(!1),visitId:at(void 0),pageLoadedTimestamp:at(void 0)}},Vhe={capabilities:Ahe,consents:Phe,context:Nhe,eventBuffer:Uhe,lifecycle:Ohe,loadOptions:xhe,metrics:Lhe,nativeDestinations:Dhe,plugins:Fhe,reporting:Ihe,session:Mhe,source:khe,storage:Bhe,serverCookies:zhe,dataPlaneEvents:jhe,autoTrack:Hhe},q={...fr(Vhe)};class Ghe{constructor(e={},n){kt(this,"plugins",[]);kt(this,"byName",{});kt(this,"cache",{});kt(this,"config",{throws:!0});this.config={throws:!0,...e},this.logger=n}register(e,n){var i,s;if(!e.name){const a=Mfe(Nv);if(this.config.throws)throw new Error(a);(i=this.logger)==null||i.error(a,e)}if(this.byName[e.name]){const a=Afe(Nv,e.name);if(this.config.throws)throw new Error(a);(s=this.logger)==null||s.error(a)}this.cache={},this.plugins=this.plugins.slice();let r=this.plugins.length;this.plugins.forEach((a,o)=>{var l;(l=a.deps)!=null&&l.includes(e.name)&&(r=Math.min(r,o))}),this.plugins.splice(r,0,e),this.byName[e.name]=e,jt(e.initialize)&&e.initialize(n)}unregister(e){var i,s;const n=this.byName[e];if(!n){const a=Ife(Nv,e);if(this.config.throws)throw new Error(a);(i=this.logger)==null||i.error(a)}const r=this.plugins.indexOf(n);if(r===-1){const a=kfe(Nv,e);if(this.config.throws)throw new Error(a);(s=this.logger)==null||s.error(a)}this.cache={},delete this.byName[e],this.plugins=this.plugins.slice(),this.plugins.splice(r,1)}getPlugin(e){return this.byName[e]}getPlugins(e){const n=e??".";return this.cache[n]||(this.cache[n]=this.plugins.filter(r=>{var i,s;if((i=r.deps)!=null&&i.some(a=>!this.byName[a])){const a=r.deps.filter(o=>!this.byName[o]);return(s=this.logger)==null||s.error(Ofe(Nv,r.name,a)),!1}return n==="."?!0:_de(r,n)})),this.cache[n]}processRawPlugins(e){e(this.plugins),this.cache={}}invoke(e,n=!0,...r){let i=e;if(!i)throw new Error(wfe);const s=i.startsWith("!"),a=this.config.throws??i.endsWith("!");if(i=i.replace(/(^!|!$)/g,""),!i)throw new Error(Tfe);const o=i.split(".");o.pop();const l=o.join(".");return(n?this.getPlugins(i):[this.getPlugins(i)[0]]).map(f=>{var m;const p=iP(f,i);if(!jt(p)||s)return p;try{return p.apply(iP(f,l),r)}catch(_){if(a)throw _;(m=this.logger)==null||m.error(Pfe(Nv,i,f.name),_)}return null})}invokeSingle(e,...n){return this.invoke(e,!1,...n)[0]}invokeMultiple(e,...n){return this.invoke(e,!0,...n)}}const vj=new Ghe({throws:!0},Tu),$he="RS_JS_SDK",Whe=t=>{let e;try{es(t)?e=t:t instanceof Error||t instanceof ErrorEvent?e=t.message:e=t.message?t.message:Ah(t)}catch(n){e=`Unknown error: ${n.message}`}return e},qhe=t=>{try{if(t instanceof Error||t instanceof ErrorEvent||t instanceof PromiseRejectionEvent&&t.reason)return t;if(t instanceof Event){const e=t.target;if(e&&e.localName!=="script"||e!=null&&e.dataset&&(e.dataset.loader!==$he||e.dataset.isnonnativesdk!=="true"))return;const n=`Error in loading a third-party script from URL ${e==null?void 0:e.src} with ID ${e==null?void 0:e.id}.`;return Object.create(t,{message:{value:n}})}return t}catch(e){return e}};class Xhe{constructor(e,n){this.logger=e,this.pluginEngine=n,this.errorBuffer=new uj,this.attachEffect()}attachEffect(){if(q.reporting.isErrorReportingPluginLoaded.value===!0)for(;this.errorBuffer.size()>0;){const e=this.errorBuffer.dequeue();e&&this.notifyError(e.error,e.errorState)}}attachErrorListeners(){var e;"addEventListener"in globalThis?(globalThis.addEventListener("error",n=>{this.onError(n,void 0,void 0,void 0,Dv.UNHANDLEDEXCEPTION)}),globalThis.addEventListener("unhandledrejection",n=>{this.onError(n,void 0,void 0,void 0,Dv.UNHANDLEDREJECTION)})):(e=this.logger)==null||e.debug("Failed to attach global error listeners.")}init(e,n){if(this.httpClient=e,!!this.pluginEngine)try{const i=this.pluginEngine.invokeSingle("errorReporting.init",q,this.pluginEngine,n,this.logger,!0);i instanceof Promise&&i.then(s=>{this.errReportingClient=s}).catch(s=>{var a;(a=this.logger)==null||a.error(Rfe(iS),s)})}catch(r){this.onError(r,iS)}}onError(e,n="",r="",i=!1,s=Dv.HANDLEDEXCEPTION){var f,p,m,_,y;let a,o;if(s===Dv.HANDLEDEXCEPTION){if(o=Whe(e),!o)return;o=bde(`${n}${rr}${r} ${o}`),a=new Error(o),vN(e)&&(a=Object.create(e,{message:{value:o}}))}else a=qhe(e);const l=q.reporting.isErrorReportingEnabled.value,c=q.reporting.isErrorReportingPluginLoaded.value;try{if(l){const E={severity:"error",unhandled:s!==Dv.HANDLEDEXCEPTION,severityReason:{type:s}};c?a&&this.notifyError(a,E):this.errorBuffer.enqueue({error:a,errorState:E})}}catch(E){(f=this.logger)==null||f.error(U4(iS),E)}if(s===Dv.HANDLEDEXCEPTION)if(this.logger){if(this.logger.error(o),i)throw a}else throw a;else(m=(p=e.error)==null?void 0:p.stack)!=null&&m.includes(Q9)&&((y=this.logger)==null||y.error("An unknown error occurred:",(_=e.error)==null?void 0:_.message))}leaveBreadcrumb(e){if(this.pluginEngine)try{this.pluginEngine.invokeSingle("errorReporting.breadcrumb",this.pluginEngine,this.errReportingClient,e,this.logger,q)}catch(n){this.onError(n,iS,"errorReporting.breadcrumb")}}notifyError(e,n){var r;if(this.pluginEngine&&this.httpClient)try{this.pluginEngine.invokeSingle("errorReporting.notify",this.pluginEngine,this.errReportingClient,e,q,this.logger,this.httpClient,n)}catch(i){(r=this.logger)==null||r.error(U4(iS),i)}}}const aA=new Xhe(Tu,vj),Khe=t=>t.config.connectionMode!=="cloud"||t.config.useNativeSDKToSend===!0||t.config.useNativeSDK===!0,Yhe=t=>t.config.connectionMode==="hybrid"||t.config.useNativeSDKToSend===!0,B4=t=>t.filter(Khe),yj=["BeaconQueue","Bugsnag","CustomConsentManager","DeviceModeDestinations","DeviceModeTransformation","ErrorReporting","ExternalAnonymousId","GoogleLinker","IubendaConsentManager","KetchConsentManager","NativeDestinationQueue","OneTrustConsentManager","StorageEncryption","StorageEncryptionLegacy","StorageMigrator","XhrQueue"],Zhe={rudderAnalyticsRemotePlugins:{url:()=>Promise.resolve(window.RudderStackGlobals&&window.RudderStackGlobals.app&&window.RudderStackGlobals.app.pluginsCDNPath?`${window.RudderStackGlobals.app.pluginsCDNPath}/rsa-plugins.js`:"https://cdn.rudderlabs.com/v3/modern/plugins/rsa-plugins.js"),format:"esm",from:"vite"}},Jhe=async(t,e)=>{const n=typeof t=="function"?await t():t,r=document.createElement("script");r.type="text/javascript",r.onload=e,r.src=n,document.getElementsByTagName("head")[0].appendChild(r)};function Ej(t,e){const n=Object.assign(t,e);for(const r of Object.keys(n))typeof n[r]=="object"&&typeof e[r]=="object"&&(n[r]=Ej(n[r],e[r]));return n}const z4=t=>Ej({},(globalThis.__federation_shared__||{}).default||{});async function Qhe(t){const e=Zhe[t];if(e.inited)return e.lib;if(e.format==="var")return new Promise(n=>{const r=()=>{e.inited||(e.lib=window[t],e.lib.init(z4(e.from)),e.inited=!0),n(e.lib)};return Jhe(e.url,r)});if(["esm","systemjs"].includes(e.format))return new Promise((n,r)=>{(typeof e.url=="function"?e.url:()=>Promise.resolve(e.url))().then(s=>{import(s).then(a=>{if(!e.inited){const o=z4(e.from);a.init(o),e.lib=a,e.lib.init(o),e.inited=!0}n(e.lib)}).catch(r)})})}function Ys(t,e){if(!(t!=null&&t.default)&&e){let n=Object.create(null);return n.default=t,n.__esModule=!0,n}return t}function Zs(t,e){return Qhe(t).then(n=>n.get(e).then(r=>r()))}const epe=t=>{switch(t){case"BeaconQueue":return()=>Zs("rudderAnalyticsRemotePlugins","./BeaconQueue").then(e=>Ys(e,!0));case"Bugsnag":return()=>Zs("rudderAnalyticsRemotePlugins","./Bugsnag").then(e=>Ys(e,!0));case"CustomConsentManager":return()=>Zs("rudderAnalyticsRemotePlugins","./CustomConsentManager").then(e=>Ys(e,!0));case"DeviceModeDestinations":return()=>Zs("rudderAnalyticsRemotePlugins","./DeviceModeDestinations").then(e=>Ys(e,!0));case"DeviceModeTransformation":return()=>Zs("rudderAnalyticsRemotePlugins","./DeviceModeTransformation").then(e=>Ys(e,!0));case"ErrorReporting":return()=>Zs("rudderAnalyticsRemotePlugins","./ErrorReporting").then(e=>Ys(e,!0));case"ExternalAnonymousId":return()=>Zs("rudderAnalyticsRemotePlugins","./ExternalAnonymousId").then(e=>Ys(e,!0));case"GoogleLinker":return()=>Zs("rudderAnalyticsRemotePlugins","./GoogleLinker").then(e=>Ys(e,!0));case"KetchConsentManager":return()=>Zs("rudderAnalyticsRemotePlugins","./KetchConsentManager").then(e=>Ys(e,!0));case"IubendaConsentManager":return()=>Zs("rudderAnalyticsRemotePlugins","./IubendaConsentManager").then(e=>Ys(e,!0));case"NativeDestinationQueue":return()=>Zs("rudderAnalyticsRemotePlugins","./NativeDestinationQueue").then(e=>Ys(e,!0));case"OneTrustConsentManager":return()=>Zs("rudderAnalyticsRemotePlugins","./OneTrustConsentManager").then(e=>Ys(e,!0));case"StorageEncryption":return()=>Zs("rudderAnalyticsRemotePlugins","./StorageEncryption").then(e=>Ys(e,!0));case"StorageEncryptionLegacy":return()=>Zs("rudderAnalyticsRemotePlugins","./StorageEncryptionLegacy").then(e=>Ys(e,!0));case"StorageMigrator":return()=>Zs("rudderAnalyticsRemotePlugins","./StorageMigrator").then(e=>Ys(e,!0));case"XhrQueue":return()=>Zs("rudderAnalyticsRemotePlugins","./XhrQueue").then(e=>Ys(e,!0));default:return}},v2=t=>{const e={};return t.forEach(n=>{if(yj.includes(n)){const r=epe(n);r&&(e[n]=r)}}),e},cP=()=>({}),tpe=()=>({}),npe=t=>(v2==null?void 0:v2(t))||{},y2={...cP(),...tpe()},rpe=t=>({...npe(t)});class ipe{constructor(e,n,r){this.engine=e,this.errorHandler=n,this.logger=r,this.onError=this.onError.bind(this)}init(){q.lifecycle.status.value="pluginsLoading",c1("pluginsCDNPath",q.lifecycle.pluginsCDNPath.value),this.setActivePlugins(),this.registerLocalPlugins(),this.registerRemotePlugins(),this.attachEffects()}attachEffects(){Xd(()=>{(q.plugins.activePlugins.value.length===0||q.plugins.loadedPlugins.value.length+q.plugins.failedPlugins.value.length===q.plugins.totalPluginsToLoad.value)&&Aa(()=>{q.plugins.ready.value=!0,q.lifecycle.status.value="pluginsReady"})})}getPluginsToLoadBasedOnConfig(){let e=q.plugins.pluginsToLoadFromConfig.value;if(!e)return[];const n=[{configurationStatus:()=>Pi(q.dataPlaneEvents.eventsQueuePluginName.value),configurationStatusStr:"Data plane events delivery is enabled",activePluginName:q.dataPlaneEvents.eventsQueuePluginName.value,supportedPlugins:Object.values(She),shouldAddMissingPlugins:!0},{configurationStatus:()=>q.reporting.isErrorReportingEnabled.value,configurationStatusStr:"Error reporting is enabled",supportedPlugins:["ErrorReporting","Bugsnag"]},{configurationStatus:()=>B4(q.nativeDestinations.configuredDestinations.value).length>0,configurationStatusStr:"Device mode destinations are connected to the source",supportedPlugins:["DeviceModeDestinations","NativeDestinationQueue"]},{configurationStatus:()=>B4(q.nativeDestinations.configuredDestinations.value).some(i=>i.shouldApplyDeviceModeTransformation),configurationStatusStr:"Device mode transformations are enabled for at least one destination",supportedPlugins:["DeviceModeTransformation"]},{configurationStatus:()=>Pi(q.consents.activeConsentManagerPluginName.value),configurationStatusStr:"Consent management is enabled",activePluginName:q.consents.activeConsentManagerPluginName.value,supportedPlugins:Object.values(uP)},{configurationStatus:()=>Pi(q.storage.encryptionPluginName.value),configurationStatusStr:"Storage encryption is enabled",activePluginName:q.storage.encryptionPluginName.value,supportedPlugins:Object.values(lC)},{configurationStatus:()=>q.storage.migrate.value,configurationStatusStr:"Storage migration is enabled",supportedPlugins:["StorageMigrator"]}],r=!1;return n.forEach(i=>{i.configurationStatus()?(e=e.filter(i.activePluginName?s=>!(s!==i.activePluginName&&i.supportedPlugins.includes(s)):s=>Pi(s)),this.addMissingPlugins(i,r,e)):e=e.filter(i.basePlugins!==void 0?s=>!(i.basePlugins.includes(s)||i.supportedPlugins.includes(s)):s=>!i.supportedPlugins.includes(s))}),[...Object.keys(cP()),...e]}addMissingPlugins(e,n,r){var o;const i=e.shouldAddMissingPlugins||n;let s;e.activePluginName?s=[...e.basePlugins||[],e.activePluginName]:s=[...e.supportedPlugins];const a=s.filter(l=>!r.includes(l));a.length>0&&(i&&r.push(...a),(o=this.logger)==null||o.warn(mhe(T4,e.configurationStatusStr,a,i)))}setActivePlugins(){const e=this.getPluginsToLoadBasedOnConfig(),n=[...Object.keys(y2),...yj],r=[],i=[];e.forEach(s=>{n.includes(s)?r.push(s):i.push(s)}),i.length>0&&this.onError(new Error(`Ignoring loading of unknown plugins: ${i.join(",")}. Mandatory plugins: ${Object.keys(cP()).join(",")}. Load option plugins: ${q.plugins.pluginsToLoadFromConfig.value.join(",")}`)),Aa(()=>{q.plugins.totalPluginsToLoad.value=e.length,q.plugins.activePlugins.value=r,q.plugins.failedPlugins.value=i})}registerLocalPlugins(){Object.values(y2).forEach(e=>{jt(e)&&q.plugins.activePlugins.value.includes(e().name)&&this.register([e()])})}registerRemotePlugins(){const e=rpe(q.plugins.activePlugins.value);Promise.all(Object.keys(e).map(async n=>{await e[n]().then(r=>this.register([r.default()])).catch(r=>{q.plugins.failedPlugins.value=[...q.plugins.failedPlugins.value,n],this.onError(r,n)})})).catch(n=>{this.onError(n)})}invokeMultiple(e,...n){try{return this.engine.invokeMultiple(e,...n)}catch(r){return this.onError(r,e),[]}}invokeSingle(e,...n){try{return this.engine.invokeSingle(e,...n)}catch(r){return this.onError(r,e),null}}register(e){e.forEach(n=>{try{this.engine.register(n,q)}catch(r){q.plugins.failedPlugins.value=[...q.plugins.failedPlugins.value,n.name],this.onError(r)}})}unregisterLocalPlugins(){Object.values(y2).forEach(e=>{try{this.engine.unregister(e().name)}catch(n){this.onError(n)}})}onError(e,n){if(this.errorHandler)this.errorHandler.onError(e,T4,n);else throw e}}const j4=(t,e)=>{try{return JSON.parse(t||"")}catch(n){const r=ew(n,"Failed to parse response data");if(jt(e))e(r);else throw r}},E2="The request failed",spe={headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},method:"GET"},H4=(t,e,n)=>{const r=ys(spe,e||{});return n&&(r.headers=ys(r.headers,{Authorization:n})),r.url=t,r},V4=(t,e=Zde,n)=>new Promise((r,i)=>{let s;if(t.sendRawData===!0)s=t.data;else if(s=Ah(t.data,!1,[],n),Su(s)){i({error:new Error(Sfe),undefined:void 0,options:t});return}const a=new XMLHttpRequest,o=c=>{i({error:new Error(Bfe(E2,a.status,a.statusText,t.url)),xhr:a,options:t})},l=c=>{i({error:new Error(zfe(E2,c,t.url)),xhr:a,options:t})};a.ontimeout=l,a.onerror=l,a.onload=()=>{a.status>=200&&a.status<400?r({response:a.responseText,xhr:a,options:t}):o()},a.open(t.method,t.url,!0),t.withCredentials===!0&&(a.withCredentials=!0),a.timeout=e,Object.keys(t.headers).forEach(c=>{t.headers[c]&&a.setRequestHeader(c,t.headers[c])});try{a.send(s)}catch(c){i({error:ew(c,jfe(E2,t.url)),xhr:a,options:t})}});class wN{constructor(e,n){kt(this,"hasErrorHandler",!1);this.errorHandler=e,this.logger=n,this.hasErrorHandler=!!this.errorHandler,this.onError=this.onError.bind(this)}async getData(e){const{url:n,options:r,timeout:i,isRawResponse:s}=e;try{const a=await V4(H4(n,r,this.basicAuthHeader),i,this.logger);return{data:s?a.response:j4(a.response,this.onError),details:a}}catch(a){return this.onError(a.error??a),{data:void 0,details:a}}}getAsyncData(e){const{callback:n,url:r,options:i,timeout:s,isRawResponse:a}=e,o=!jt(n);V4(H4(r,i,this.basicAuthHeader),s,this.logger).then(l=>{o||n(a?l.response:j4(l.response,this.onError),l)}).catch(l=>{this.onError(l.error??l),o||n(void 0,l)})}onError(e){var n;if(this.hasErrorHandler)(n=this.errorHandler)==null||n.onError(e,Mde);else throw e}setAuthHeader(e,n=!1){const r=n?e:Tde(`${e}:`);this.basicAuthHeader=`Basic ${r}`}resetAuthHeader(){this.basicAuthHeader=void 0}}const ape=new wN(aA,Tu),ao="cookieStorage",io="localStorage",wl="sessionStorage",cc="memoryStorage",gg="none",ope="rl_user_id",lpe="rl_trait",upe="rl_anonymous_id",cpe="rl_group_id",dpe="rl_group_trait",fpe="rl_page_init_referrer",hpe="rl_page_init_referring_domain",ppe="rl_session",mpe="rl_auth_token",ey={userId:ope,userTraits:lpe,anonymousId:upe,groupId:cpe,groupTraits:dpe,initialReferrer:fpe,initialReferringDomain:hpe,sessionInfo:ppe,authToken:mpe},gpe="test_rudder_cookie",_pe="test_rudder_ls",vpe="test_rudder_ss",ype="__tld__",Sj="clientDataInCookie",bj="clientDataInLocalStorage",Epe="clientDataInMemory",wj="clientDataInSessionStorage",Tj=["userId","userTraits","anonymousId","groupId","groupTraits","initialReferrer","initialReferringDomain","sessionInfo","authToken"],oy={[ao]:Sj,[io]:bj,[cc]:Epe,[wl]:wj},G4=(t,e)=>{try{return encodeURIComponent(t)}catch(n){e==null||e.error(zde,n);return}},$4=t=>{try{return decodeURIComponent(t)}catch{return}},Spe=t=>{const e={},n=t.split(/\s*;\s*/);let r;return n[0]&&n.forEach(i=>{r=i.split("=");const s=r[0]?$4(r[0]):void 0;s&&(e[s]=r[1]?$4(r[1]):void 0)}),e},bpe=(t,e,n,r)=>{const i={...n||{}};let s=`${G4(t,r)}=${G4(e,r)}`;Su(e)&&(i.maxage=-1),i.maxage&&(i.expires=new Date(+new Date+i.maxage)),i.path&&(s+=`; path=${i.path}`),i.domain&&(s+=`; domain=${i.domain}`),i.expires&&(s+=`; expires=${i.expires.toUTCString()}`),i.samesite&&(s+=`; samesite=${i.samesite}`),i.secure&&(s+="; secure"),globalThis.document.cookie=s},dP=()=>{const t=globalThis.document.cookie;return Spe(t)},wpe=t=>dP()[t],hh=function(t,e,n,r){switch(arguments.length){case 4:case 3:case 2:return bpe(t,e,n,r);case 1:return t?wpe(t):dP();default:return dP()}},Tpe=(t,e)=>{const n=new URL(q.lifecycle.sourceConfigUrl.value),r=`${n.origin}${n.pathname}?view=ad`,i=new wN(t,e);i.setAuthHeader(q.lifecycle.writeKey.value),i.getAsyncData({url:r,options:{method:"HEAD",headers:{"Content-Type":void 0}},isRawResponse:!0,callback:(s,a)=>{var o;q.capabilities.isAdBlocked.value=(a==null?void 0:a.error)!==void 0||((o=a==null?void 0:a.xhr)==null?void 0:o.responseURL)!==r}})},xpe=()=>!bu(globalThis.crypto)&&jt(globalThis.crypto.getRandomValues),W4=()=>!bu(globalThis.navigator.userAgentData),Cpe=()=>!bu(globalThis.navigator.sendBeacon)&&jt(globalThis.navigator.sendBeacon),Rpe=()=>!!globalThis.navigator.userAgent.match(/Trident.*rv:11\./),Mpe=(t,e="none")=>{var n;e==="none"&&t(void 0),e==="default"&&t(navigator.userAgentData),e==="full"&&((n=navigator.userAgentData)==null||n.getHighEntropyValues(["architecture","bitness","brands","mobile","model","platform","platformVersion","uaFullVersion","fullVersionList","wow64"]).then(r=>{t(r)}).catch(()=>{t()}))},Ape=()=>{const t=globalThis.document.createElement("div");return t.setAttribute("data-a-b","c"),t.dataset?t.dataset.aB==="c":!1},fP={URL:()=>!jt(globalThis.URL)||!jt(globalThis.URLSearchParams),Promise:()=>!jt(globalThis.Promise),"Number.isNaN":()=>!jt(globalThis.Number.isNaN),"Number.isInteger":()=>!jt(globalThis.Number.isInteger),"Array.from":()=>!jt(globalThis.Array.from),"Array.prototype.find":()=>!jt(globalThis.Array.prototype.find),"Array.prototype.includes":()=>!jt(globalThis.Array.prototype.includes),"String.prototype.endsWith":()=>!jt(globalThis.String.prototype.endsWith),"String.prototype.startsWith":()=>!jt(globalThis.String.prototype.startsWith),"String.prototype.includes":()=>!jt(globalThis.String.prototype.includes),"String.prototype.replaceAll":()=>!jt(globalThis.String.prototype.replaceAll),"String.fromCodePoint":()=>!jt(globalThis.String.fromCodePoint),"Object.entries":()=>!jt(globalThis.Object.entries),"Object.values":()=>!jt(globalThis.Object.values),"Object.assign":()=>!jt(globalThis.Object.assign),"Object.fromEntries":()=>!jt(globalThis.Object.fromEntries),"Element.prototype.dataset":()=>!Ape(),TextEncoder:()=>!jt(globalThis.TextEncoder)||!jt(globalThis.TextDecoder),requestAnimationFrame:()=>!jt(globalThis.requestAnimationFrame)||!jt(globalThis.cancelAnimationFrame),CustomEvent:()=>!jt(globalThis.CustomEvent),"navigator.sendBeacon":()=>!jt(globalThis.navigator.sendBeacon),ArrayBuffer:()=>!jt(globalThis.Uint8Array),Set:()=>!jt(globalThis.Set),atob:()=>!jt(globalThis.atob)},Ipe=()=>{const t=Object.keys(fP);let e=!1;for(let n=0;n<t.length;n++){const r=fP[t[n]];if(jt(r)&&r()){e=!0;break}}return e},q4=()=>{let t={density:0,width:0,height:0,innerWidth:0,innerHeight:0};return t={width:globalThis.screen.width,height:globalThis.screen.height,density:globalThis.devicePixelRatio,innerWidth:globalThis.innerWidth,innerHeight:globalThis.innerHeight},t},xj=t=>{const e=["QuotaExceededError","NS_ERROR_DOM_QUOTA_REACHED"],n=[22,1014],r=e.includes(t.name)||n.includes(t.code);return t instanceof DOMException&&r},Sy=(t=io,e,n)=>{let r,i;const s=Lfe(sP,t);let a="unavailable",o=!0,l;try{switch(t){case cc:return!0;case ao:r=e,i=gpe;break;case io:r=e??globalThis.localStorage,i=_pe;break;case wl:r=e??globalThis.sessionStorage,i=vpe;break;default:return!1}if(r&&(r.setItem(i,"true"),r.getItem(i)))return r.removeItem(i),!0;o=!1}catch(c){o=!1,l=c,xj(c)&&(a="full")}return o||n==null||n.warn(`${s}${a}.`,l),!1},kpe=t=>{const e=document.createElement("a");return e.href=t,e.hostname},Ope=t=>{const e=typeof globalThis.URL!="function"?kpe(t):new URL(t).hostname,n=(e==null?void 0:e.split("."))??[],r=n[n.length-1],i=[];if(n.length===4&&r&&r===parseInt(r,10).toString())return i;if(n.length<=1)return n[0]&&n[0].indexOf("localhost")!==-1?["localhost"]:i;for(let s=n.length-2;s>=0;s-=1)i.push(n.slice(s).join("."));return i},Ppe=t=>{const e=Ope(t);for(let n=0;n<e.length;n+=1){const r=e[n],i=ype,s={domain:`${r.indexOf("localhost")!==-1?"":"."}${r}`};if(hh(i,1,s),hh(i))return hh(i,null,s),r}return""},Lpe=()=>{const t=`.${Ppe(globalThis.location.href)}`;return{maxage:Jde,path:"/",domain:!t||t==="."?void 0:t,samesite:"Lax",enabled:!0}},Npe=()=>({enabled:!0}),Dpe=()=>({enabled:!0}),Upe=()=>({enabled:!0}),_y=class _y{constructor(e={},n){kt(this,"isSupportAvailable",!0);kt(this,"isEnabled",!0);kt(this,"length",0);if(_y.globalSingleton)return _y.globalSingleton;this.options=Lpe(),this.logger=n,this.configure(e),_y.globalSingleton=this}configure(e){return this.options=ys(this.options??{},e),e.sameDomainCookiesOnly&&delete this.options.domain,this.isSupportAvailable=Sy(ao,this),this.isEnabled=!!(this.options.enabled&&this.isSupportAvailable),this.options}setItem(e,n){return hh(e,n,this.options,this.logger),this.length=Object.keys(hh()).length,!0}getItem(e){const n=hh(e);return Ia(n)?null:n}removeItem(e){const n=this.setItem(e,null);return this.length=Object.keys(hh()).length,n}clear(){}key(e){return this.keys()[e]??null}keys(){return Object.keys(hh())}};kt(_y,"globalSingleton",null);let uR=_y;class Fpe{constructor(e,n){kt(this,"isEnabled",!0);kt(this,"length",0);kt(this,"data",{});this.options=Upe(),this.logger=n,this.configure(e??{})}configure(e){return this.options=ys(this.options,e),this.isEnabled=!!this.options.enabled,this.options}setItem(e,n){return this.data[e]=n,this.length=Object.keys(this.data).length,n}getItem(e){return e in this.data?this.data[e]:null}removeItem(e){return e in this.data&&delete this.data[e],this.length=Object.keys(this.data).length,null}clear(){this.data={},this.length=0}key(e){return this.keys()[e]??null}keys(){return Object.keys(this.data)}}const hP=new Fpe({},Tu);function Bpe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uC={exports:{}},zpe=uC.exports,X4;function jpe(){return X4||(X4=1,function(t,e){(function(n,r){t.exports=r()})(zpe,function(){function n(_){return _=JSON.stringify(_),!!/^\{[\s\S]*\}$/.test(_)}function r(_){return _===void 0||typeof _=="function"?_+"":JSON.stringify(_)}function i(_){if(typeof _=="string")try{return JSON.parse(_)}catch{return _}}function s(_){return{}.toString.call(_)==="[object Function]"}function a(_){return Object.prototype.toString.call(_)==="[object Array]"}function o(_){var y="_Is_Incognit",E="yes";try{_||(_=window.localStorage),_.setItem(y,E),_.removeItem(y)}catch{var S={};S._data={},S.setItem=function(R,C){return S._data[R]=String(C)},S.getItem=function(R){return S._data.hasOwnProperty(R)?S._data[R]:void 0},S.removeItem=function(R){return delete S._data[R]},S.clear=function(){return S._data={}},_=S}finally{_.getItem(y)===E&&_.removeItem(y)}return _}var l=o();function c(){if(!(this instanceof c))return new c}c.prototype={set:function(y,E){if(y&&!n(y))l.setItem(y,r(E));else if(n(y))for(var S in y)this.set(S,y[S]);return this},get:function(y){if(y===void 0){var E={};return this.forEach(function(M,N){return E[M]=N}),E}if(y.charAt(0)==="?")return this.has(y.substr(1));var S=arguments;if(S.length>1){for(var w={},R=0,C=S.length;R<C;R++){var k=i(l.getItem(S[R]));this.has(S[R])&&(w[S[R]]=k)}return w}return i(l.getItem(y))},clear:function(){return l.clear(),this},remove:function(y){var E=this.get(y);return l.removeItem(y),E},has:function(y){return{}.hasOwnProperty.call(this.get(),y)},keys:function(){var y=[];return this.forEach(function(E){y.push(E)}),y},forEach:function(y){for(var E=0,S=l.length;E<S;E++){var w=l.key(E);y(w,this.get(w))}return this},search:function(y){for(var E=this.keys(),S={},w=0,R=E.length;w<R;w++)E[w].indexOf(y)>-1&&(S[E[w]]=this.get(E[w]));return S},len:function(){return l.length}};var f=null;function p(_,y){var E=arguments,S=null;if(f||(f=c()),E.length===0)return f.get();if(E.length===1){if(typeof _=="string")return f.get(_);if(n(_))return f.set(_)}if(E.length===2&&typeof _=="string"){if(!y)return f.remove(_);if(y&&typeof y=="string")return f.set(_,y);y&&s(y)&&(S=null,S=y(_,f.get(_)),p.set(_,S))}if(E.length===2&&a(_)&&s(y))for(var w=0,R=_.length;w<R;w++)S=y(_[w],f.get(_[w])),p.set(_[w],S);return p}for(var m in c.prototype)p[m]=c.prototype[m];return p})}(uC)),uC.exports}var Hpe=jpe();const pm=Bpe(Hpe);class Vpe{constructor(e={},n){kt(this,"isSupportAvailable",!0);kt(this,"isEnabled",!0);kt(this,"length",0);this.options=Npe(),this.logger=n,this.configure(e)}configure(e){return this.options=ys(this.options,e),this.isSupportAvailable=Sy(io),this.isEnabled=!!(this.options.enabled&&this.isSupportAvailable),this.options}setItem(e,n){pm.set(e,n),this.length=pm.len()}getItem(e){const n=pm.get(e);return Ia(n)?null:n}removeItem(e){pm.remove(e),this.length=pm.len()}clear(){pm.clear(),this.length=0}key(e){return this.keys()[e]??null}keys(){return pm.keys()}}const Cj=new Vpe({},Tu);class Gpe{constructor(e={},n){kt(this,"isSupportAvailable",!0);kt(this,"isEnabled",!0);kt(this,"length",0);this.options=Dpe(),this.logger=n,this.configure(e)}configure(e){return this.options=ys(this.options,e),this.isSupportAvailable=Sy(wl),this.isSupportAvailable&&(this.store=globalThis.sessionStorage),this.isEnabled=!!(this.options.enabled&&this.isSupportAvailable),this.options}setItem(e,n){this.store&&(this.store.setItem(e,n),this.length=this.store.length)}getItem(e){if(!this.store)return null;const n=this.store.getItem(e);return Ia(n)?null:n}removeItem(e){this.store&&(this.store.removeItem(e),this.length=this.store.length)}clear(){var e;(e=this.store)==null||e.clear(),this.length=0}key(e){var n;return((n=this.store)==null?void 0:n.key(e))??null}keys(){const e=[];if(!this.store)return e;for(let n=0;n<this.store.length;n+=1){const r=this.store.key(n);r!==null&&e.push(r)}return e}}const Rj=new Gpe({},Tu),vl=t=>{switch(t){case io:return Cj;case wl:return Rj;case cc:return hP;case ao:return new uR({},Tu);default:return hP}},$pe=t=>{const e=new uR({},Tu).configure(t);q.storage.cookie.value={maxage:e.maxage,path:e.path,domain:e.domain,samesite:e.samesite,expires:e.expires,secure:e.secure}},Wpe=t=>{Cj.configure(t)},qpe=t=>{hP.configure(t)},Xpe=t=>{Rj.configure(t)},Kpe=(t={},e={},n={},r={})=>{$pe(t),Wpe(e),qpe(n),Xpe(r)};class Ype{constructor(e,n,r){kt(this,"hasErrorHandler",!1);this.id=e.id,this.name=e.name,this.isEncrypted=e.isEncrypted??!1,this.validKeys=e.validKeys??{},this.engine=n??vl(io),this.noKeyValidation=Object.keys(this.validKeys).length===0,this.noCompoundKey=e.noCompoundKey,this.originalEngine=this.engine,this.errorHandler=e.errorHandler??aA,this.hasErrorHandler=!!this.errorHandler,this.logger=e.logger??Tu,this.pluginsManager=r}createValidKey(e){const{name:n,id:r,validKeys:i,noKeyValidation:s,noCompoundKey:a}=this;if(s)return a?e:[n,r,e].join(".");let o;return Object.values(i).forEach(l=>{l===e&&(o=a?e:[n,r,e].join("."))}),o}swapQueueStoreToInMemoryEngine(){const{name:e,id:n,validKeys:r,noCompoundKey:i}=this,s=vl(cc);Object.keys(r).forEach(a=>{const o=this.get(r[a]),l=i?a:[e,n,a].join(".");s.setItem(l,o),this.remove(a)}),this.engine=s}set(e,n){var i;const r=this.createValidKey(e);if(r)try{this.engine.setItem(r,this.encrypt(Ah(n,!1,[],this.logger)))}catch(s){xj(s)?((i=this.logger)==null||i.warn(rhe(`Store ${this.id}`)),this.swapQueueStoreToInMemoryEngine(),this.set(e,n)):this.onError(ew(s,Hfe(e)))}}get(e){var i;const n=this.createValidKey(e);let r;try{return!n||(r=this.decrypt(this.engine.getItem(n)),bu(r))?null:JSON.parse(r)}catch(s){return this.onError(new Error(`${Vfe(e)}: ${s.message}`)),es(r)&&r.startsWith("RudderEncrypt:")&&((i=this.logger)==null||i.warn(_he(e))),null}}remove(e){const n=this.createValidKey(e);n&&this.engine.removeItem(n)}getOriginalEngine(){return this.originalEngine}decrypt(e){return bu(e)?null:this.crypto(e,"decrypt")}encrypt(e){return this.crypto(e,"encrypt")}crypto(e,n){if(!this.isEncrypted||!e||typeof e!="string"||Sde(e)==="")return e;const i=`storage.${n}`,s=this.pluginsManager?this.pluginsManager.invokeSingle(i,e):e;return typeof s>"u"?e:s??""}onError(e){var n;if(this.hasErrorHandler)(n=this.errorHandler)==null||n.onError(e,`Store ${this.id}`);else throw e}}const Zpe=(t,e)=>{var r;let n;if(t.consents.preConsent.value.enabled)switch((r=t.consents.preConsent.value.storage)==null?void 0:r.strategy){case"none":n=gg;break;case"session":e!=="sessionInfo"&&(n=gg);break;case"anonymousId":e!=="anonymousId"&&(n=gg);break}return n};class Jpe{constructor(e,n,r){kt(this,"stores",{});kt(this,"isInitialized",!1);kt(this,"hasErrorHandler",!1);this.errorHandler=n,this.logger=r,this.hasErrorHandler=!!this.errorHandler,this.pluginsManager=e,this.onError=this.onError.bind(this)}init(){var r;if(this.isInitialized)return;const e=q.loadOptions.value,n={cookieStorageOptions:{samesite:e.sameSiteCookie,secure:e.secureCookie,domain:e.setCookieDomain,sameDomainCookiesOnly:e.sameDomainCookiesOnly,enabled:!0},localStorageOptions:{enabled:!0},inMemoryStorageOptions:{enabled:!0},sessionStorageOptions:{enabled:!0}};Kpe(rb(ys(n.cookieStorageOptions,((r=q.storage.cookie)==null?void 0:r.value)??{})),rb(n.localStorageOptions),rb(n.inMemoryStorageOptions),rb(n.sessionStorageOptions)),this.initClientDataStores(),this.isInitialized=!0}initClientDataStores(){this.initializeStorageState(),[cc,io,ao,wl].forEach(n=>{var r;(r=vl(n))!=null&&r.isEnabled&&this.setStore({id:oy[n],name:oy[n],isEncrypted:!0,noCompoundKey:!0,type:n})})}initializeStorageState(){var a;let e=q.storage.type.value,n=(a=q.loadOptions.value.storage)==null?void 0:a.entries;const r=q.consents.postConsent.value.storage;(Pi(r==null?void 0:r.type)||Pi(r==null?void 0:r.entries))&&(e=r==null?void 0:r.type,n=r==null?void 0:r.entries);let i=!0,s={};Tj.forEach(o=>{var y;const l=o,c=o,f=(y=n==null?void 0:n[l])==null?void 0:y.type,m=Zpe(q,o)??f??e??lP,_=this.getResolvedStorageTypeForEntry(m,o);_!==gg&&(i=!1),s={...s,[o]:{type:_,key:ey[c]}}}),Aa(()=>{q.storage.type.value=e,q.storage.entries.value=s,q.storage.trulyAnonymousTracking.value=i})}getResolvedStorageTypeForEntry(e,n){var i,s,a,o,l,c;let r=e;switch(e){case io:(i=vl(io))!=null&&i.isEnabled||(r=cc);break;case wl:(s=vl(wl))!=null&&s.isEnabled||(r=cc);break;case cc:case gg:break;case ao:default:(a=vl(ao))!=null&&a.isEnabled?r=ao:(o=vl(io))!=null&&o.isEnabled?r=io:(l=vl(wl))!=null&&l.isEnabled?r=wl:r=cc;break}return r!==e&&((c=this.logger)==null||c.warn(ihe(x4,n,e,r))),r}setStore(e){const n=vl(e.type);return this.stores[e.id]=new Ype(e,n,this.pluginsManager),this.stores[e.id]}getStore(e){return this.stores[e]}onError(e){var n;if(this.hasErrorHandler)(n=this.errorHandler)==null||n.onError(e,x4);else throw e}}const Qpe=t=>Sr(t)&&Sr(t.source)&&!bu(t.source.id)&&Sr(t.source.config)&&Array.isArray(t.source.destinations),eme=t=>typeof t=="string"&&cj.includes(t),Mj=t=>{const e=new URL(t),{host:n,protocol:r}=e,i=n.split(".");let s;return i.length>2?s=`${i[i.length-2]}.${i[i.length-1]}`:s=n,{topDomain:s,protocol:r}},tme=t=>{const{topDomain:e,protocol:n}=Mj(t);return`${n}//${e}`},nme=(t,e)=>{const n=e?window.location.origin:tme(window.location.href),r=t.startsWith("/")?t.substring(1):t;return`${n}/${r}`},rme=t=>{const{topDomain:e}=Mj(window.location.href);return e===t},ime=t=>{const e=[];return t.forEach(n=>{n.enabled&&!n.deleted&&e.push({id:n.id,displayName:n.destinationDefinition.displayName,config:n.config,shouldApplyDeviceModeTransformation:n.shouldApplyDeviceModeTransformation||!1,propagateEventsUntransformedOnError:n.propagateEventsUntransformedOnError||!1,userFriendlyId:`${n.destinationDefinition.displayName.replaceAll(" ","-")}___${n.id}`})}),e},Qy=t=>t!=null&&t.endsWith("/")?Qy(t.substring(0,t.length-1)):t,pP=t=>{try{return new URL(t).host}catch{return null}},Aj=t=>pP(t)??"",sme=t=>{const e={};try{const n=new URL(t),r="utm_";n.searchParams.forEach((i,s)=>{if(s.startsWith(r)){let a=s.substring(r.length);a==="campaign"&&(a="name"),e[a]=i}})}catch{}return e},ame=t=>{let e=t;try{const n=new URL(t);e=n.origin+n.pathname+n.search}catch{}return e},ome=t=>t.replace(/\/{2,}/g,"/"),e0=t=>{if(!es(t))return!1;try{return jt(globalThis.URL)&&new URL(t),yhe.test(t)}catch{return!1}},lme=()=>{var t,e;return!!((e=(t=window.chrome)==null?void 0:t.runtime)!=null&&e.id)},S2="none",b2="immediate",ume=t=>{var e,n;return((n=(e=t==null?void 0:t.statsCollection)==null?void 0:e.errors)==null?void 0:n.enabled)===!0},cme=t=>{var e,n;return((n=(e=t==null?void 0:t.statsCollection)==null?void 0:e.metrics)==null?void 0:n.enabled)===!0},dme=t=>{const e={sendPageEvent:!1,trackConsent:!1,discardPreConsentEvents:!1};if(Sr(t)){const n=fr(t);e.storage=n.storage,Dg(n.integrations)&&(e.integrations=n.integrations),e.discardPreConsentEvents=n.discardPreConsentEvents===!0,e.sendPageEvent=n.sendPageEvent===!0,e.trackConsent=n.trackConsent===!0,Dg(n.consentManagement)&&(e.consentManagement=ys(n.consentManagement,{enabled:q.consents.enabled.value}))}return e},K4=t=>Dg(t)||Array.isArray(t),fme=(t,e)=>{let{provider:n}=t;const r=n?uP[n]:void 0;return n&&!r&&(e==null||e.error(Cfe(Ec,n,uP)),n=void 0),{provider:n,consentManagerPluginName:r}},Ij=(t,e)=>{let n,r=[],i=[],s=!1,a,o=(t==null?void 0:t.enabled)===!0;Dg(t)&&o&&({provider:a,consentManagerPluginName:n}=fme(t,e),K4(t.allowedConsentIds)&&(r=t.allowedConsentIds,s=!0),K4(t.deniedConsentIds)&&(i=t.deniedConsentIds,s=!0));const l={allowedConsentIds:r,deniedConsentIds:i};return o=o&&!!n,{provider:a,consentManagerPluginName:n,initialized:s,enabled:o,consentsData:l}},hme=()=>{const t=document.getElementsByTagName("script"),e=/(?:^|\/)rsa(\.min)?\.js$/;for(const n of t){const r=n.getAttribute("src");if(r&&e.test(r))return r}},pme=t=>{q.reporting.isErrorReportingEnabled.value=ume(t.source.config)&&!lme(),q.reporting.isMetricsReportingEnabled.value=cme(t.source.config)},mme=t=>{const{useServerSideCookies:e,dataServiceEndpoint:n,storage:r,setCookieDomain:i,sameDomainCookiesOnly:s}=q.loadOptions.value;let a=r==null?void 0:r.cookie,o=!1,l;if(e){o=e;const c=a.domain??i,f=Pi(c)&&!rme(w4(c))||s,p=nme(n??bhe,f);if(e0(p)){l=Qy(p);const m=pP(window.location.href),_=pP(p);m!==_&&(a={...a,samesite:"None",secure:!0}),!s&&f&&_!==w4(c)&&(o=!1,t==null||t.warn(Yfe(Ec,c,_)))}else o=!1}return{sscEnabled:o,cookieOptions:a,finalDataServiceUrl:l}},gme=t=>{var f;const{storage:e}=q.loadOptions.value;let n=e==null?void 0:e.type;Pi(n)&&!eme(n)&&(t==null||t.warn(qfe(Ec,n,lP)),n=lP);let r=(f=e==null?void 0:e.encryption)==null?void 0:f.version;const i=r&&lC[r];!Ia(r)&&Ia(i)?(t==null||t.warn(Xfe(Ec,r,lC,Wm)),r=Wm):Ia(r)&&(r=Wm);const s=e==null?void 0:e.migrate,a=s&&r===Wm;s===!0&&a!==s&&(t==null||t.warn(Kfe(Ec,r,Wm)));const{sscEnabled:o,finalDataServiceUrl:l,cookieOptions:c}=mme(t);Aa(()=>{q.storage.type.value=n,q.storage.cookie.value=c,q.serverCookies.isEnabledServerSideCookies.value=o,q.serverCookies.dataServiceUrl.value=l,q.storage.encryptionPluginName.value=lC[r],q.storage.migrate.value=a})},_me=t=>{var p,m,_,y;const{provider:e,consentManagerPluginName:n,initialized:r,enabled:i,consentsData:s}=Ij(q.loadOptions.value.consentManagement,t),a=q.loadOptions.value.preConsent;let o=((p=a==null?void 0:a.storage)==null?void 0:p.strategy)??S2;const l=["none","session","anonymousId"];Pi(o)&&!l.includes(o)&&(o=S2,t==null||t.warn(hhe(Ec,(m=a==null?void 0:a.storage)==null?void 0:m.strategy,S2)));let c=((_=a==null?void 0:a.events)==null?void 0:_.delivery)??b2;const f=["immediate","buffer"];Pi(c)&&!f.includes(c)&&(c=b2,t==null||t.warn(phe(Ec,(y=a==null?void 0:a.events)==null?void 0:y.delivery,b2))),Aa(()=>{var E;q.consents.activeConsentManagerPluginName.value=n,q.consents.initialized.value=r,q.consents.enabled.value=i,q.consents.data.value=s,q.consents.provider.value=e,q.consents.preConsent.value={enabled:((E=q.loadOptions.value.preConsent)==null?void 0:E.enabled)===!0&&r===!1&&i===!0,storage:{strategy:o},events:{delivery:c}}})},vme=t=>{var r;let e=q.consents.resolutionStrategy.value,n;Sr(t.consentManagementMetadata)&&(q.consents.provider.value&&(e=((r=t.consentManagementMetadata.providers.find(i=>i.provider===q.consents.provider.value))==null?void 0:r.resolutionStrategy)??q.consents.resolutionStrategy.value),n=t.consentManagementMetadata),q.consents.provider.value==="custom"&&(e=void 0),Aa(()=>{q.consents.metadata.value=fr(n),q.consents.resolutionStrategy.value=e})},yme=t=>{if(q.dataPlaneEvents.deliveryEnabled.value){const e="XhrQueue";let n=e;q.loadOptions.value.useBeacon&&(q.capabilities.isBeaconAvailable.value?n="BeaconQueue":(n=e,t==null||t.warn(Jfe(Ec)))),Aa(()=>{q.dataPlaneEvents.eventsQueuePluginName.value=n})}},Eme=(t,e,n,r,i)=>{const s=new URLSearchParams({p:ej,v:l1,build:d1,writeKey:e,lockIntegrationsVersion:n.toString(),lockPluginsVersion:r.toString()});let a=_j,o=s,l="/sourceConfig/",c="";if(e0(t)){const f=new URL(t);Qy(f.pathname).endsWith("/sourceConfig")||(f.pathname=`${Qy(f.pathname)}/sourceConfig/`),f.pathname=ome(f.pathname),s.forEach((p,m)=>{f.searchParams.get(m)===null&&f.searchParams.set(m,p)}),a=f.origin,l=f.pathname,o=f.searchParams,c=f.hash}else i==null||i.warn(dhe(Ec,t));return`${a}${l}?${o}${c}`},kj=(t,e,n,r,i,s)=>{let a="";if(s){if(!e0(s))throw new Error(xfe(t));return Qy(s)}const o=hme();return a=o?o.split("/").slice(0,-1).concat(e).join("/"):n,i&&(a=a.replace(`/${bN}/${d1}/${e}`,`/${r}/${d1}/${e}`)),a},Sme=(t,e,n)=>kj("integrations",fj,mj,t,e,n),bme=(t,e,n)=>kj("plugins",hj,gj,t,e,n);class wme{constructor(e,n,r){kt(this,"hasErrorHandler",!1);this.errorHandler=n,this.logger=r,this.httpClient=e,this.hasErrorHandler=!!this.errorHandler,this.onError=this.onError.bind(this),this.processConfig=this.processConfig.bind(this)}attachEffects(){Xd(()=>{var e;(e=this.logger)==null||e.setMinLogLevel(q.lifecycle.logLevel.value)})}init(){this.attachEffects();const{logLevel:e,configUrl:n,lockIntegrationsVersion:r,lockPluginsVersion:i,destSDKBaseURL:s,pluginsSDKBaseURL:a,integrations:o}=q.loadOptions.value;q.lifecycle.activeDataplaneUrl.value=Qy(q.lifecycle.dataPlaneUrl.value);const l=Sme(l1,r,s),c=bme(l1,i,a);gme(this.logger),_me(this.logger),yme(this.logger),Aa(()=>{q.lifecycle.integrationsCDNPath.value=l,q.lifecycle.pluginsCDNPath.value=c,e&&(q.lifecycle.logLevel.value=e),q.lifecycle.sourceConfigUrl.value=Eme(n,q.lifecycle.writeKey.value,r,i,this.logger),q.metrics.metricsServiceUrl.value=`${q.lifecycle.activeDataplaneUrl.value}/${whe}`,q.nativeDestinations.loadOnlyIntegrations.value=o}),this.getConfig()}onError(e,n,r){var i;if(this.hasErrorHandler)(i=this.errorHandler)==null||i.onError(e,Ec,n,r);else throw e}processConfig(e,n){var s;if(!e){this.onError(Nfe(n==null?void 0:n.error));return}let r;try{es(e)?r=JSON.parse(e):r=e}catch(a){this.onError(a,D4,!0);return}if(!Qpe(r)){this.onError(new Error(D4),void 0,!0);return}if(r.source.enabled===!1){(s=this.logger)==null||s.error(Efe);return}pme(r);const i=r.source.destinations.length>0?ime(r.source.destinations):[];Aa(()=>{q.source.value={config:r.source.config,id:r.source.id,workspaceId:r.source.workspaceId},q.nativeDestinations.configuredDestinations.value=i,q.plugins.pluginsToLoadFromConfig.value=q.loadOptions.value.plugins??[],vme(r),q.lifecycle.status.value="configured"})}getConfig(){const e=q.loadOptions.value.getSourceConfig;if(e){if(!jt(e))throw new Error(yfe);const n=e();n instanceof Promise?n.then(r=>this.processConfig(r)).catch(r=>{this.onError(r,"SourceConfig")}):this.processConfig(n)}else this.httpClient.getAsyncData({url:q.lifecycle.sourceConfigUrl.value,options:{headers:{"Content-Type":void 0}},callback:this.processConfig})}}const Tme=()=>{const t=/([A-Z]+[+-]\d+)/.exec(new Date().toString());return t!=null&&t[1]?t[1]:"NA"},Oj=()=>(document==null?void 0:document.referrer)||"$direct",xme=()=>{const t=document.getElementsByTagName("link");let e="";for(let n=0;t[n];n+=1){const r=t[n];if(r.getAttribute("rel")==="canonical"&&!e){e=r.getAttribute("href")??"";break}}return e},Cme=()=>{if(Ia(globalThis.navigator))return null;let{userAgent:t}=globalThis.navigator;const{brave:e}=globalThis.navigator;if(e&&Object.getPrototypeOf(e).isBrave){const n=t.match(/(chrome)\/([\w.]+)/i);n&&(t=`${t} Brave/${n[2]}`)}return t},Rme=()=>Ia(globalThis.navigator)?null:globalThis.navigator.language??globalThis.navigator.browserLanguage,Pj=()=>{const t=xme();let e=globalThis.location.pathname;const{href:n}=globalThis.location;let r=n;const{search:i}=globalThis.location;if(t)try{const l=new URL(t);l.search===""?r=t+i:r=t,e=l.pathname}catch{}const s=ame(r),{title:a}=document,o=Oj();return{path:e,referrer:o,referring_domain:Aj(o),search:i,title:a,url:s,tab_url:n}},Mme=`https://polyfill-fastly.io/v3/polyfill.min.js?version=3.111.0&features=${Object.keys(fP).join("%2C")}`,Ame=10*1e3,Y4="rudderstackPolyfill";class Ime{constructor(e,n){this.logger=n,this.errorHandler=e,this.externalSrcLoader=new rj(this.errorHandler,this.logger),this.onError=this.onError.bind(this),this.onReady=this.onReady.bind(this)}init(){try{this.prepareBrowserCapabilities(),this.attachWindowListeners()}catch(e){this.onError(e)}}detectBrowserCapabilities(){Aa(()=>{q.capabilities.storage.isCookieStorageAvailable.value=Sy(ao,vl(ao),this.logger),q.capabilities.storage.isLocalStorageAvailable.value=Sy(io,void 0,this.logger),q.capabilities.storage.isSessionStorageAvailable.value=Sy(wl,void 0,this.logger),q.capabilities.isBeaconAvailable.value=Cpe(),q.capabilities.isUaCHAvailable.value=W4(),q.capabilities.isCryptoAvailable.value=xpe(),q.capabilities.isIE11.value=Rpe(),q.capabilities.isOnline.value=globalThis.navigator.onLine,q.context.userAgent.value=Cme(),q.context.locale.value=Rme(),q.context.screen.value=q4(),q.context.timezone.value=Tme(),W4()&&Mpe(e=>{q.context["ua-ch"].value=e},q.loadOptions.value.uaChTrackLevel)}),Xd(()=>{q.loadOptions.value.sendAdblockPage===!0&&q.lifecycle.sourceConfigUrl.value!==void 0&&Tpe(this.errorHandler,this.logger)})}prepareBrowserCapabilities(){var i;q.capabilities.isLegacyDOM.value=Ipe();const e=q.loadOptions.value.polyfillURL;let n=Mme;if(Jy(e)&&(e0(e)?n=e:(i=this.logger)==null||i.warn(ghe(sP,e))),q.loadOptions.value.polyfillIfRequired&&q.capabilities.isLegacyDOM.value&&e0(n)){const s=n!==q.loadOptions.value.polyfillURL;if(s){const a=`RS_polyfillCallback_${q.lifecycle.writeKey.value}`,o=()=>{this.onReady(),delete globalThis[a]};globalThis[a]=o,n=`${n}&callback=${a}`}this.externalSrcLoader.loadJSFile({url:n,id:Y4,async:!0,timeout:Ame,callback:a=>{a?s||this.onReady():this.onError(new Error(fhe(Y4,n)))}})}else this.onReady()}attachWindowListeners(){globalThis.addEventListener("offline",()=>{q.capabilities.isOnline.value=!1}),globalThis.addEventListener("online",()=>{q.capabilities.isOnline.value=!0}),globalThis.addEventListener("resize",tfe(()=>{q.context.screen.value=q4()},this))}onReady(){this.detectBrowserCapabilities(),q.lifecycle.status.value="browserCapabilitiesReady"}onError(e){if(this.errorHandler)this.errorHandler.onError(e,sP);else throw e}}const kme="web",Ome=["integrations","anonymousId","originalTimestamp"],Z4=["library","consentManagement","userAgent","ua-ch","screen"],w2=["id","anonymous_id","user_id","sent_at","timestamp","received_at","original_timestamp","event","event_text","channel","context_ip","context_request_ip","context_passed_ip","group_id","previous_id"],Lj=t=>typeof t=="number"&&!Number.isNaN(t),Pme=(t,e)=>e.toString().length>=t,Nj=t=>Lj(t)&&t>=0&&Number.isInteger(t),J4=10,Q4=t=>{const e=Date.now();return!t||e>t},Lme=()=>Date.now(),Nme=(t,e)=>!t||!Nj(t)||!Pme(J4,t)?(e==null||e.warn(nhe(ib,t,J4)),!1):!0,Dme=t=>{const e=Date.now(),n=t||u1;return{id:e,expiresAt:e+n,timeout:n,sessionStart:void 0,autoTrack:!0}},Ume=(t,e)=>({id:Nme(t,e)?t:Lme(),sessionStart:void 0,manualTrack:!0}),sb=t=>t===ao||t===io||t===wl||t===cc,mP=()=>EN(),Fme=t=>{const e=Pj(),n={};return Object.keys(e).forEach(r=>{n[r]=(t==null?void 0:t[r])||e[r]}),n.initial_referrer=(t==null?void 0:t.initial_referrer)||q.session.initialReferrer.value,n.initial_referring_domain=(t==null?void 0:t.initial_referring_domain)||q.session.initialReferringDomain.value,n},Bme=(t,e)=>{const n=(e==null?void 0:e.page)||{},r=t,i=Pj();return Object.keys(i).forEach(s=>{Ia(r[s])&&(r[s]=n[s]||i[s])}),Ia(r.initial_referrer)&&(r.initial_referrer=n.initial_referrer||q.session.initialReferrer.value),Ia(r.initial_referring_domain)&&(r.initial_referring_domain=n.initial_referring_domain||q.session.initialReferringDomain.value),r},T2=(t,e,n)=>{Sr(t)&&Object.keys(t).forEach(r=>{(w2.includes(r)||w2.includes(r.toLowerCase()))&&(n==null||n.warn(Zfe(Y9,r,e,w2)))})},zme=(t,e)=>{const{properties:n,traits:r,context:i}=t,{traits:s}=i;T2(n,"properties",e),T2(r,"traits",e),T2(s,"context.traits",e)},jme=(t,e)=>{e.anonymousId&&es(e.anonymousId)&&(t.anonymousId=e.anonymousId),Dg(e.integrations)&&(t.integrations=e.integrations),e.originalTimestamp&&es(e.originalTimestamp)&&(t.originalTimestamp=e.originalTimestamp)},Hme=(t,e,n)=>{let r=t;return Object.keys(e).forEach(i=>{if(!Ome.includes(i)&&!Z4.includes(i)){if(i!=="context")r=ys(r,{[i]:e[i]});else if(!Ia(e[i])&&Sr(e[i])){const s={};Object.keys(e[i]).forEach(a=>{Z4.includes(a)||(s[a]=e[i][a])}),r=ys(r,{...s})}}}),r},Vme=(t,e)=>{Sr(e)&&(jme(t,e),t.context=Hme(t.context,e))},Gme=t=>{let e;return q.loadOptions.value.useGlobalIntegrationsConfigInEvents?e=q.consents.postConsent.value.integrations??q.nativeDestinations.loadOnlyIntegrations.value:t?e=t:e=dj,fr(e)},aS=(t,e,n,r)=>{var a,o,l;const i={channel:kme,context:{traits:fr(q.session.userTraits.value),sessionId:q.session.sessionInfo.value.id||void 0,sessionStart:q.session.sessionInfo.value.sessionStart||void 0,...q.consents.enabled.value&&{consentManagement:{deniedConsentIds:fr(q.consents.data.value.deniedConsentIds),allowedConsentIds:fr(q.consents.data.value.allowedConsentIds),provider:q.consents.provider.value,resolutionStrategy:q.consents.resolutionStrategy.value}},"ua-ch":q.context["ua-ch"].value,app:q.context.app.value,library:q.context.library.value,userAgent:q.context.userAgent.value,os:q.context.os.value,locale:q.context.locale.value,screen:q.context.screen.value,campaign:sme(globalThis.location.href),page:Fme(n),timezone:q.context.timezone.value,...q.autoTrack.enabled.value&&{autoTrack:{...q.autoTrack.pageLifecycle.enabled.value&&{page:{visitId:q.autoTrack.pageLifecycle.visitId.value}}}}},originalTimestamp:Nde(),messageId:EN(),userId:t.userId||q.session.userId.value};sb((a=q.storage.entries.value.anonymousId)==null?void 0:a.type)?i.anonymousId=q.session.anonymousId.value:i.anonymousId=mP(),q.storage.trulyAnonymousTracking.value&&(i.context.trulyAnonymousTracking=!0),t.type==="identify"&&(i.context.traits=((o=q.storage.entries.value.userTraits)==null?void 0:o.type)!==gg?fr(q.session.userTraits.value):t.context.traits),t.type==="group"&&((t.groupId||q.session.groupId.value)&&(i.groupId=t.groupId||q.session.groupId.value),(t.traits||q.session.groupTraits.value)&&(i.traits=((l=q.storage.entries.value.groupTraits)==null?void 0:l.type)!==gg?fr(q.session.groupTraits.value):t.traits));const s=ys(t,i);return s.event===void 0&&(s.event=null),s.properties===void 0&&(s.properties=null),Vme(s,e),zme(s,r),s.integrations=Gme(s.integrations),s};class $me{constructor(e){this.logger=e}generatePageEvent(e,n,r,i){let s=r??{};return s=Bme(s,i),aS({properties:s,name:n,category:e,type:"page"},i,s,this.logger)}generateTrackEvent(e,n,r){return aS({properties:n,event:e,type:"track"},r,void 0,this.logger)}generateIdentifyEvent(e,n,r){return aS({userId:e,type:"identify",context:{traits:n}},r,void 0,this.logger)}generateAliasEvent(e,n,r){const s=aS({previousId:n,type:"alias"},r,void 0,this.logger);return s.userId=e??s.userId,s}generateGroupEvent(e,n,r){const i={type:"group"};return e&&(i.groupId=e),n&&(i.traits=n),aS(i,r,void 0,this.logger)}create(e){let n;switch(e.type){case"page":n=this.generatePageEvent(e.category,e.name,e.properties,e.options);break;case"track":n=this.generateTrackEvent(e.name,e.properties,e.options);break;case"identify":n=this.generateIdentifyEvent(e.userId,e.traits,e.options);break;case"alias":n=this.generateAliasEvent(e.to,e.from,e.options);break;case"group":n=this.generateGroupEvent(e.groupId,e.traits,e.options);break}return n}}class Wme{constructor(e,n,r,i){this.eventRepository=e,this.userSessionManager=n,this.errorHandler=r,this.logger=i,this.eventFactory=new $me(this.logger),this.onError=this.onError.bind(this)}init(){this.eventRepository.init()}resume(){this.eventRepository.resume()}addEvent(e){this.userSessionManager.refreshSession();const n=this.eventFactory.create(e);n?this.eventRepository.enqueue(n,e.callback):this.onError(new Error(bfe))}onError(e,n,r){if(this.errorHandler)this.errorHandler.onError(e,Y9,n,r);else throw e}}class qme{constructor(e,n,r,i,s){this.storeManager=i,this.pluginsManager=r,this.logger=n,this.errorHandler=e,this.httpClient=s,this.onError=this.onError.bind(this),this.serverSideCookieDebounceFuncs={}}init(){this.syncStorageDataToState(),this.registerEffects()}syncStorageDataToState(){this.migrateStorageIfNeeded(),this.migrateDataFromPreviousStorage(),this.setUserId(this.getUserId()),this.setUserTraits(this.getUserTraits()),this.setGroupId(this.getGroupId()),this.setGroupTraits(this.getGroupTraits());const{externalAnonymousIdCookieName:e,anonymousIdOptions:n}=q.loadOptions.value;let r;Jy(e)&&typeof e=="string"&&(r=this.getExternalAnonymousIdByCookieName(e)),this.setAnonymousId(r??this.getAnonymousId(n)),this.setAuthToken(this.getAuthToken()),this.setInitialReferrerInfo(),this.configureSessionTracking()}configureSessionTracking(){let e=this.getSessionInfo();if(this.isPersistenceEnabledForStorageEntry("sessionInfo")){const n=this.getConfiguredSessionTrackingInfo(),r=e??Rhe;e={...r,...n,autoTrack:n.autoTrack&&r.manualTrack!==!0},!e.autoTrack&&e.manualTrack!==!0&&(e=vr.sessionInfo)}else e=vr.sessionInfo;q.session.sessionInfo.value=e,q.session.sessionInfo.value.autoTrack&&this.startOrRenewAutoTracking(q.session.sessionInfo.value)}setInitialReferrerInfo(){const e=this.getInitialReferrer(),n=this.getInitialReferringDomain();if(e&&n)this.setInitialReferrer(e),this.setInitialReferringDomain(n);else{const r=e||Oj();this.setInitialReferrer(r),this.setInitialReferringDomain(Aj(r))}}isPersistenceEnabledForStorageEntry(e){var n;return sb((n=q.storage.entries.value[e])==null?void 0:n.type)}migrateDataFromPreviousStorage(){const e=q.storage.entries.value,n=[ao,io,wl];Object.keys(e).forEach(r=>{var o,l;const i=r,s=(o=e[i])==null?void 0:o.type,a=(l=this.storeManager)==null?void 0:l.getStore(oy[s]);a&&n.forEach(c=>{var p;const f=(p=this.storeManager)==null?void 0:p.getStore(oy[c]);if(f&&c!==s){const m=f.get(ey[i]);gde(m)&&a.set(ey[i],m),f.remove(ey[i])}})})}migrateStorageIfNeeded(){if(!q.storage.migrate.value)return;const e=[Sj,bj,wj],n=[];e.forEach(r=>{var s;const i=(s=this.storeManager)==null?void 0:s.getStore(r);i&&n.push(i)}),Object.keys(ey).forEach(r=>{const i=ey[r];n.forEach(s=>{var o;const a=(o=this.pluginsManager)==null?void 0:o.invokeSingle("storage.migrate",i,s.engine,this.errorHandler,this.logger);bu(a)||s.set(i,a)})})}getConfiguredSessionTrackingInfo(){var i,s,a,o,l;let e=((i=q.loadOptions.value.sessions)==null?void 0:i.autoTrack)!==!1;if(!e)return{autoTrack:e};let n;const r=(s=q.loadOptions.value.sessions)==null?void 0:s.timeout;return Nj(r)?n=r:((a=this.logger)==null||a.warn(Qfe(ib,r,u1)),n=u1),n===0&&((o=this.logger)==null||o.warn(ehe(ib)),e=!1),n>0&&n<P4&&((l=this.logger)==null||l.warn(the(ib,n,P4))),{timeout:n,autoTrack:e}}onError(e,n){if(this.errorHandler)this.errorHandler.onError(e,ib,n);else throw e}getEncryptedCookieData(e,n){const r=[];return e.forEach(i=>{const s=n==null?void 0:n.encrypt(Ah(i.value,!1,[],this.logger));Jy(s)&&r.push({name:i.name,value:s})}),r}makeRequestToSetCookie(e,n){var r,i,s,a,o,l,c,f;(f=this.httpClient)==null||f.getAsyncData({url:q.serverCookies.dataServiceUrl.value,options:{method:"POST",data:Ah({reqType:"setCookies",workspaceId:(r=q.source.value)==null?void 0:r.workspaceId,data:{options:{maxAge:(i=q.storage.cookie.value)==null?void 0:i.maxage,path:(s=q.storage.cookie.value)==null?void 0:s.path,domain:(a=q.storage.cookie.value)==null?void 0:a.domain,sameSite:(o=q.storage.cookie.value)==null?void 0:o.samesite,secure:(l=q.storage.cookie.value)==null?void 0:l.secure,expires:(c=q.storage.cookie.value)==null?void 0:c.expires},cookies:e}}),sendRawData:!0,withCredentials:!0},isRawResponse:!0,callback:n})}setServerSideCookies(e,n,r){try{const i=this.getEncryptedCookieData(e,r);i.length>0&&this.makeRequestToSetCookie(i,(s,a)=>{var o,l,c;((o=a==null?void 0:a.xhr)==null?void 0:o.status)===200?e.forEach(f=>{var y;const p=r==null?void 0:r.get(f.name),m=Ah(f.value,!1,[]);Ah(p,!1,[])!==m&&((y=this.logger)==null||y.error($fe(f.name)),n&&n(f.name,f.value))}):((c=this.logger)==null||c.error(Gfe((l=a==null?void 0:a.xhr)==null?void 0:l.status)),e.forEach(f=>{n&&n(f.name,f.value)}))})}catch(i){this.onError(i,Wfe),e.forEach(s=>{n&&n(s.name,s.value)})}}syncValueToStorage(e,n){var s,a,o;const r=q.storage.entries.value,i=(s=r[e])==null?void 0:s.type;if(sb(i)){const l=(a=this.storeManager)==null?void 0:a.getStore(oy[i]),c=(o=r[e])==null?void 0:o.key;n&&(es(n)||Dg(n))?q.serverCookies.isEnabledServerSideCookies.value&&i===ao?(this.serverSideCookieDebounceFuncs[e]&&globalThis.clearTimeout(this.serverSideCookieDebounceFuncs[e]),this.serverSideCookieDebounceFuncs[e]=globalThis.setTimeout(()=>{this.setServerSideCookies([{name:c,value:n}],(f,p)=>{l==null||l.set(f,p)},l)},Che)):l==null||l.set(c,n):l==null||l.remove(c)}}registerEffects(){Tj.forEach(e=>{Xd(()=>{this.syncValueToStorage(e,q.session[e].value)})})}setAnonymousId(e,n){var i;let r=e;(!es(e)||!r)&&(r=void 0),this.isPersistenceEnabledForStorageEntry("anonymousId")?(!r&&n&&(r=(i=this.pluginsManager)==null?void 0:i.invokeSingle("userSession.anonymousIdGoogleLinker",n)),r=r||mP()):r=vr.anonymousId,q.session.anonymousId.value=r}getAnonymousId(e){var r,i;const n=(r=q.storage.entries.value.anonymousId)==null?void 0:r.type;if(sb(n)){let s=this.getEntryValue("anonymousId");!s&&e&&(s=(i=this.pluginsManager)==null?void 0:i.invokeSingle("storage.getAnonymousId",vl,e)),q.session.anonymousId.value=s||mP()}return q.session.anonymousId.value}getEntryValue(e){var i,s,a;const n=q.storage.entries.value,r=(i=n[e])==null?void 0:i.type;if(sb(r)){const o=(s=this.storeManager)==null?void 0:s.getStore(oy[r]),l=(a=n[e])==null?void 0:a.key;return(o==null?void 0:o.get(l))??null}return null}getExternalAnonymousIdByCookieName(e){const n=vl(ao);return n!=null&&n.isEnabled?n.getItem(e)??null:null}getUserId(){return this.getEntryValue("userId")}getUserTraits(){return this.getEntryValue("userTraits")}getGroupId(){return this.getEntryValue("groupId")}getGroupTraits(){return this.getEntryValue("groupTraits")}getInitialReferrer(){return this.getEntryValue("initialReferrer")}getInitialReferringDomain(){return this.getEntryValue("initialReferringDomain")}getSessionInfo(){return this.getEntryValue("sessionInfo")}getAuthToken(){return this.getEntryValue("authToken")}getSessionId(){const e=this.getSessionInfo()??vr.sessionInfo;return e.autoTrack&&!Q4(e.expiresAt)||e.manualTrack?e.id??null:null}refreshSession(){let e=this.getSessionInfo()??vr.sessionInfo;(e.autoTrack||e.manualTrack)&&(e.autoTrack&&(this.startOrRenewAutoTracking(e),e=q.session.sessionInfo.value),e.sessionStart===void 0?e={...e,sessionStart:!0}:e.sessionStart&&(e={...e,sessionStart:!1})),q.session.sessionInfo.value=e,q.lifecycle.status.value!=="readyExecuted"&&this.syncValueToStorage("sessionInfo",e)}reset(e,n){const{session:r}=q,{manualTrack:i,autoTrack:s}=r.sessionInfo.value;Aa(()=>{r.userId.value=vr.userId,r.userTraits.value=vr.userTraits,r.groupId.value=vr.groupId,r.groupTraits.value=vr.groupTraits,r.authToken.value=vr.authToken,e===!0&&this.setAnonymousId(),!n&&(s?(r.sessionInfo.value=vr.sessionInfo,this.startOrRenewAutoTracking(r.sessionInfo.value)):i&&this.startManualTrackingInternal())})}setUserId(e){q.session.userId.value=this.isPersistenceEnabledForStorageEntry("userId")&&e?e:vr.userId}setUserTraits(e){q.session.userTraits.value=this.isPersistenceEnabledForStorageEntry("userTraits")&&Sr(e)?ys(q.session.userTraits.value??vr.userTraits,e):vr.userTraits}setGroupId(e){q.session.groupId.value=this.isPersistenceEnabledForStorageEntry("groupId")&&e?e:vr.groupId}setGroupTraits(e){q.session.groupTraits.value=this.isPersistenceEnabledForStorageEntry("groupTraits")&&Sr(e)?ys(q.session.groupTraits.value??vr.groupTraits,e):vr.groupTraits}setInitialReferrer(e){q.session.initialReferrer.value=this.isPersistenceEnabledForStorageEntry("initialReferrer")&&e?e:vr.initialReferrer}setInitialReferringDomain(e){q.session.initialReferringDomain.value=this.isPersistenceEnabledForStorageEntry("initialReferringDomain")&&e?e:vr.initialReferringDomain}startOrRenewAutoTracking(e){if(Q4(e.expiresAt))q.session.sessionInfo.value=Dme(e.timeout);else{const n=Date.now(),r=e.timeout;q.session.sessionInfo.value=ys(e,{expiresAt:n+r})}}start(e){q.session.sessionInfo.value=Ume(e,this.logger)}startManualTrackingInternal(){this.start(Date.now())}end(){q.session.sessionInfo.value=vr.sessionInfo}setAuthToken(e){q.session.authToken.value=this.isPersistenceEnabledForStorageEntry("authToken")&&e?e:vr.authToken}}const Xme=["BeaconQueue","Bugsnag","CustomConsentManager","DeviceModeDestinations","DeviceModeTransformation","ErrorReporting","ExternalAnonymousId","GoogleLinker","IubendaConsentManager","KetchConsentManager","NativeDestinationQueue","OneTrustConsentManager","StorageEncryption","StorageEncryptionLegacy","StorageMigrator","XhrQueue"],Kme=(t,e)=>{var a,o,l,c;const n=fr(e);return es(n.setCookieDomain)||delete n.setCookieDomain,["Strict","Lax","None"].includes(n.sameSiteCookie)||delete n.sameSiteCookie,n.secureCookie=n.secureCookie===!0,n.sameDomainCookiesOnly=n.sameDomainCookiesOnly===!0,["none","default","full"].includes(n.uaChTrackLevel)||delete n.uaChTrackLevel,Dg(n.integrations)||delete n.integrations,n.plugins=n.plugins??Xme,n.useGlobalIntegrationsConfigInEvents=n.useGlobalIntegrationsConfigInEvents===!0,n.bufferDataPlaneEventsUntilReady=n.bufferDataPlaneEventsUntilReady===!0,n.sendAdblockPage=n.sendAdblockPage===!0,n.useServerSideCookies=n.useServerSideCookies===!0,n.dataServiceEndpoint&&typeof n.dataServiceEndpoint!="string"&&delete n.dataServiceEndpoint,Sr(n.sendAdblockPageOptions)||delete n.sendAdblockPageOptions,Pi(n.loadIntegration)?n.loadIntegration=n.loadIntegration===!0:delete n.loadIntegration,Sr(n.storage)?(n.storage=Um(n.storage),n.storage.migrate=((a=n.storage)==null?void 0:a.migrate)===!0):delete n.storage,Sr(n.beaconQueueOptions)?n.beaconQueueOptions=Um(n.beaconQueueOptions):delete n.beaconQueueOptions,Sr(n.destinationsQueueOptions)?n.destinationsQueueOptions=Um(n.destinationsQueueOptions):delete n.destinationsQueueOptions,Sr(n.queueOptions)?n.queueOptions=Um(n.queueOptions):delete n.queueOptions,n.lockIntegrationsVersion=n.lockIntegrationsVersion===!0,n.lockPluginsVersion=n.lockPluginsVersion===!0,Lj(n.dataPlaneEventsBufferTimeout)||delete n.dataPlaneEventsBufferTimeout,Sr((o=n.storage)==null?void 0:o.cookie)?n.storage.cookie=Um((c=n.storage)==null?void 0:c.cookie):(l=n.storage)==null||delete l.cookie,Sr(n.preConsent)?n.preConsent=Um(n.preConsent):delete n.preConsent,ys(t,n)},eF="dataplaneEventsQueue",tF="destinationsEventsQueue",Yme="transformEvent",Zme=(t,e)=>Object.keys(t).filter(n=>t[n]!==!0||!e[n]).reduce((n,r)=>{const i=fr(n);return i[r]=t[r],i},{}),Jme=(t,e)=>{const n=fr(t),r=e.nativeDestinations.integrationsConfig.value,i=Zme(t.integrations,r);return n.integrations=ys(r,i),n},Qme=t=>{var e,n,r;return t.consents.preConsent.value.enabled&&((e=t.consents.preConsent.value.events)==null?void 0:e.delivery)==="buffer"&&(((n=t.consents.preConsent.value.storage)==null?void 0:n.strategy)==="session"||((r=t.consents.preConsent.value.storage)==null?void 0:r.strategy)==="none")};class ege{constructor(e,n,r,i){this.pluginsManager=e,this.errorHandler=r,this.logger=i,this.httpClient=new wN(r,i),this.storeManager=n,this.onError=this.onError.bind(this)}init(){try{this.dataplaneEventsQueue=this.pluginsManager.invokeSingle(`${eF}.init`,q,this.httpClient,this.storeManager,this.errorHandler,this.logger)}catch(r){this.onError(r,ohe)}try{this.dmtEventsQueue=this.pluginsManager.invokeSingle(`${Yme}.init`,q,this.pluginsManager,this.httpClient,this.storeManager,this.errorHandler,this.logger)}catch(r){this.onError(r,lhe)}try{this.destinationsEventsQueue=this.pluginsManager.invokeSingle(`${tF}.init`,q,this.pluginsManager,this.storeManager,this.dmtEventsQueue,this.errorHandler,this.logger)}catch(r){this.onError(r,ahe)}Xd(()=>{var r,i;q.nativeDestinations.clientDestinationsReady.value===!0&&((r=this.destinationsEventsQueue)==null||r.start(),(i=this.dmtEventsQueue)==null||i.start())});const e=Qme(q);let n;Xd(()=>{var s,a;const r=q.loadOptions.value.bufferDataPlaneEventsUntilReady===!0&&q.nativeDestinations.clientDestinationsReady.value===!1;(q.nativeDestinations.activeDestinations.value.some(o=>Yhe(o))===!1||r===!1)&&!e&&((s=this.dataplaneEventsQueue)==null?void 0:s.scheduleTimeoutActive)!==!0&&(globalThis.clearTimeout(n),(a=this.dataplaneEventsQueue)==null||a.start())}),q.loadOptions.value.bufferDataPlaneEventsUntilReady===!0&&(n=globalThis.setTimeout(()=>{var r,i;((r=this.dataplaneEventsQueue)==null?void 0:r.scheduleTimeoutActive)!==!0&&((i=this.dataplaneEventsQueue)==null||i.start())},q.loadOptions.value.dataPlaneEventsBufferTimeout))}resume(){var e,n,r,i;((e=this.dataplaneEventsQueue)==null?void 0:e.scheduleTimeoutActive)!==!0&&(q.consents.postConsent.value.discardPreConsentEvents&&((n=this.dataplaneEventsQueue)==null||n.clear(),(r=this.destinationsEventsQueue)==null||r.clear()),(i=this.dataplaneEventsQueue)==null||i.start())}enqueue(e,n){let r;try{r=Jme(e,q),this.pluginsManager.invokeSingle(`${eF}.enqueue`,q,this.dataplaneEventsQueue,r,this.errorHandler,this.logger)}catch(i){this.onError(i,che)}try{const i=fr(e);this.pluginsManager.invokeSingle(`${tF}.enqueue`,q,this.destinationsEventsQueue,i,this.errorHandler,this.logger)}catch(i){this.onError(i,uhe)}try{n==null||n(r)}catch(i){this.onError(i,she)}}onError(e,n,r){if(this.errorHandler)this.errorHandler.onError(e,Cde,n,r);else throw e}}const nF=t=>{const e=new CustomEvent(t,{detail:{analyticsInstance:globalThis.rudderanalytics},bubbles:!0,cancelable:!0,composed:!0});globalThis.document.dispatchEvent(e)},tge=t=>es(t)&&t.trim().length>0,nge=t=>e0(t);class rF{constructor(){this.preloadBuffer=new uj,this.initialized=!1,this.errorHandler=aA,this.logger=Tu,this.externalSrcLoader=new rj(this.errorHandler,this.logger),this.capabilitiesManager=new Ime(this.errorHandler,this.logger),this.httpClient=ape}load(e,n,r={}){var i;if(!q.lifecycle.status.value){if(!tge(e)){this.logger.error(Dfe(sS,e));return}if(!nge(n)){this.logger.error(Ufe(sS,n));return}Aa(()=>{q.lifecycle.writeKey.value=fr(e),q.lifecycle.dataPlaneUrl.value=fr(n),q.loadOptions.value=Kme(q.loadOptions.value,r),q.lifecycle.status.value="mounted"}),(i=this.logger)==null||i.setMinLogLevel(q.loadOptions.value.logLevel??pfe),c1("state",q,e),this.startLifecycle()}}startLifecycle(){Xd(()=>{try{switch(q.lifecycle.status.value){case"mounted":this.onMounted();break;case"browserCapabilitiesReady":this.onBrowserCapabilitiesReady();break;case"configured":this.onConfigured();break;case"pluginsLoading":break;case"pluginsReady":this.onPluginsReady();break;case"initialized":this.onInitialized();break;case"loaded":this.onLoaded();break;case"destinationsLoading":break;case"destinationsReady":this.onDestinationsReady();break;case"ready":this.onReady();break;case"readyExecuted":default:break}}catch(e){this.errorHandler.onError(ew(e,"Failed to load the SDK"),sS)}})}onBrowserCapabilitiesReady(){sfe(this),this.prepareInternalServices(),this.loadConfig()}onLoaded(){this.processBufferedEvents(),q.consents.preConsent.value.enabled===!0?q.lifecycle.status.value="ready":this.loadDestinations()}onMounted(){this.capabilitiesManager.init()}enqueuePreloadBufferEvents(e){Array.isArray(e)&&e.forEach(n=>this.preloadBuffer.enqueue(fr(n)))}processDataInPreloadBuffer(){for(;this.preloadBuffer.size()>0;){const e=this.preloadBuffer.dequeue();e&&afe([...e],this)}}prepareInternalServices(){this.pluginsManager=new ipe(vj,this.errorHandler,this.logger),this.storeManager=new Jpe(this.pluginsManager,this.errorHandler,this.logger),this.configManager=new wme(this.httpClient,this.errorHandler,this.logger),this.userSessionManager=new qme(this.errorHandler,this.logger,this.pluginsManager,this.storeManager,this.httpClient),this.eventRepository=new ege(this.pluginsManager,this.storeManager,this.errorHandler,this.logger),this.eventManager=new Wme(this.eventRepository,this.userSessionManager,this.errorHandler,this.logger)}loadConfig(){var e;q.lifecycle.writeKey.value&&this.httpClient.setAuthHeader(q.lifecycle.writeKey.value),(e=this.configManager)==null||e.init()}onPluginsReady(){var e,n,r,i,s;this.errorHandler.init(this.httpClient,this.externalSrcLoader),(e=this.storeManager)==null||e.init(),(n=this.userSessionManager)==null||n.init(),q.consents.enabled.value&&!q.consents.initialized.value&&((r=this.pluginsManager)==null||r.invokeSingle("consentManager.init",q,this.logger),q.consents.preConsent.value.enabled===!1&&((i=this.pluginsManager)==null||i.invokeSingle("consentManager.updateConsentsInfo",q,this.storeManager,this.logger))),(s=this.eventManager)==null||s.init(),q.lifecycle.status.value="initialized"}onConfigured(){var e;(e=this.pluginsManager)==null||e.init()}onInitialized(){this.processDataInPreloadBuffer(),jt(q.loadOptions.value.onLoaded)&&q.loadOptions.value.onLoaded(globalThis.rudderanalytics),Aa(()=>{q.lifecycle.loaded.value=!0,q.lifecycle.status.value="loaded"}),this.initialized=!0,nF("RSA_Initialised")}onReady(){q.lifecycle.status.value="readyExecuted",q.eventBuffer.readyCallbacksArray.value.forEach(e=>{try{e()}catch(n){this.errorHandler.onError(n,sS,F4)}}),nF("RSA_Ready")}processBufferedEvents(){let e=q.eventBuffer.toBeProcessedArray.value;for(;e.length>0;){const n=e.shift();if(q.eventBuffer.toBeProcessedArray.value=e,n){const r=n[0];jt(this[r])&&this[r](...n.slice(1),!0)}e=q.eventBuffer.toBeProcessedArray.value}}loadDestinations(){var n,r;if(q.nativeDestinations.clientDestinationsReady.value)return;(n=this.pluginsManager)==null||n.invokeSingle("nativeDestinations.setActiveDestinations",q,this.pluginsManager,this.errorHandler,this.logger);const e=q.nativeDestinations.activeDestinations.value.length;if(e===0){q.lifecycle.status.value="destinationsReady";return}q.lifecycle.status.value="destinationsLoading",(r=this.pluginsManager)==null||r.invokeSingle("nativeDestinations.load",q,this.externalSrcLoader,this.errorHandler,this.logger),Xd(()=>{(e===0||q.nativeDestinations.initializedDestinations.value.length+q.nativeDestinations.failedDestinations.value.length===e)&&Aa(()=>{q.lifecycle.status.value="destinationsReady",q.nativeDestinations.clientDestinationsReady.value=!0})})}onDestinationsReady(){q.lifecycle.status.value!=="ready"&&(q.lifecycle.status.value="ready")}ready(e,n=!1){const r="ready";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}if(this.errorHandler.leaveBreadcrumb(`New ${r} invocation`),!jt(e)){this.logger.error(Ffe(xde));return}if(q.lifecycle.status.value==="readyExecuted")try{e()}catch(i){this.errorHandler.onError(i,sS,F4)}else q.eventBuffer.readyCallbacksArray.value=[...q.eventBuffer.readyCallbacksArray.value,e]}page(e,n=!1){var i;const r="page";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb(`New ${r} event`),q.metrics.triggered.value+=1,(i=this.eventManager)==null||i.addEvent({type:"page",category:e.category,name:e.name,properties:e.properties,options:e.options,callback:e.callback}),q.capabilities.isAdBlocked.value===!0&&e.category!==A4&&this.page(oR(A4,Wde,{path:qde},q.loadOptions.value.sendAdblockPageOptions))}track(e,n=!1){var i;const r="track";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb(`New ${r} event - ${e.name}`),q.metrics.triggered.value+=1,(i=this.eventManager)==null||i.addEvent({type:r,name:e.name||void 0,properties:e.properties,options:e.options,callback:e.callback})}identify(e,n=!1){var s,a,o;const r="identify";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb(`New ${r} event`),q.metrics.triggered.value+=1,!!(e.userId&&q.session.userId.value&&e.userId!==q.session.userId.value)&&this.reset(),Su(e.userId)||(s=this.userSessionManager)==null||s.setUserId(e.userId),(a=this.userSessionManager)==null||a.setUserTraits(e.traits),(o=this.eventManager)==null||o.addEvent({type:r,userId:e.userId,traits:e.traits,options:e.options,callback:e.callback})}alias(e,n=!1){var s,a,o;const r="alias";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb(`New ${r} event`),q.metrics.triggered.value+=1;const i=e.from??((s=this.userSessionManager)==null?void 0:s.getUserId())??((a=this.userSessionManager)==null?void 0:a.getAnonymousId());(o=this.eventManager)==null||o.addEvent({type:r,to:e.to,from:i,options:e.options,callback:e.callback})}group(e,n=!1){var i,s,a;const r="group";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb(`New ${r} event`),q.metrics.triggered.value+=1,Su(e.groupId)||(i=this.userSessionManager)==null||i.setGroupId(e.groupId),(s=this.userSessionManager)==null||s.setGroupTraits(e.traits),(a=this.eventManager)==null||a.addEvent({type:r,groupId:e.groupId,traits:e.traits,options:e.options,callback:e.callback})}reset(e,n=!1){var i;const r="reset";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb(`New ${r} invocation, resetAnonymousId: ${e}`),(i=this.userSessionManager)==null||i.reset(e)}getAnonymousId(e){var n;return(n=this.userSessionManager)==null?void 0:n.getAnonymousId(e)}setAnonymousId(e,n,r=!1){var s;const i="setAnonymousId";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[i,e,n]];return}this.errorHandler.leaveBreadcrumb(`New ${i} invocation`),(s=this.userSessionManager)==null||s.setAnonymousId(e,n)}getUserId(){return q.session.userId.value}getUserTraits(){return q.session.userTraits.value}getGroupId(){return q.session.groupId.value}getGroupTraits(){return q.session.groupTraits.value}startSession(e,n=!1){var i;const r="startSession";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb(`New ${r} invocation`),(i=this.userSessionManager)==null||i.start(e)}endSession(e=!1){var r;const n="endSession";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[n]];return}this.errorHandler.leaveBreadcrumb(`New ${n} invocation`),(r=this.userSessionManager)==null||r.end()}getSessionId(){var n;return((n=this.userSessionManager)==null?void 0:n.getSessionId())??null}consent(e,n=!1){var i,s,a,o;const r="consent";if(!q.lifecycle.loaded.value){q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,[r,e]];return}this.errorHandler.leaveBreadcrumb("New consent invocation"),Aa(()=>{q.consents.preConsent.value={...q.consents.preConsent.value,enabled:!1},q.consents.postConsent.value=dme(e);const{initialized:l,consentsData:c}=Ij(q.consents.postConsent.value.consentManagement,this.logger);q.consents.initialized.value=l||q.consents.initialized.value,q.consents.data.value=c}),q.consents.enabled.value&&!q.consents.initialized.value&&((i=this.pluginsManager)==null||i.invokeSingle("consentManager.updateConsentsInfo",q,this.storeManager,this.logger)),(s=this.storeManager)==null||s.initializeStorageState(),(a=this.userSessionManager)==null||a.syncStorageDataToState(),(o=this.eventManager)==null||o.resume(),this.loadDestinations(),this.sendTrackingEvents(n)}sendTrackingEvents(e){if(q.consents.postConsent.value.trackConsent){const n=yN(Xde);e?q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,["track",n]]:this.track(n)}if(q.consents.postConsent.value.sendPageEvent){const n=oR();e?q.eventBuffer.toBeProcessedArray.value=[...q.eventBuffer.toBeProcessedArray.value,["page",n]]:this.page(n)}}setAuthToken(e){var n;(n=this.userSessionManager)==null||n.setAuthToken(e)}}const vy=class vy{constructor(){kt(this,"analyticsInstances",{});kt(this,"defaultAnalyticsKey","");kt(this,"logger",Tu);try{if(vy.globalSingleton)return vy.globalSingleton;aA.attachErrorListeners(),this.setDefaultInstanceKey=this.setDefaultInstanceKey.bind(this),this.getAnalyticsInstance=this.getAnalyticsInstance.bind(this),this.load=this.load.bind(this),this.ready=this.ready.bind(this),this.triggerBufferedLoadEvent=this.triggerBufferedLoadEvent.bind(this),this.page=this.page.bind(this),this.track=this.track.bind(this),this.identify=this.identify.bind(this),this.alias=this.alias.bind(this),this.group=this.group.bind(this),this.reset=this.reset.bind(this),this.getAnonymousId=this.getAnonymousId.bind(this),this.setAnonymousId=this.setAnonymousId.bind(this),this.getUserId=this.getUserId.bind(this),this.getUserTraits=this.getUserTraits.bind(this),this.getGroupId=this.getGroupId.bind(this),this.getGroupTraits=this.getGroupTraits.bind(this),this.startSession=this.startSession.bind(this),this.endSession=this.endSession.bind(this),this.getSessionId=this.getSessionId.bind(this),this.setAuthToken=this.setAuthToken.bind(this),this.consent=this.consent.bind(this),vy.globalSingleton=this,q.autoTrack.pageLifecycle.visitId.value=EN(),q.autoTrack.pageLifecycle.pageLoadedTimestamp.value=Date.now(),this.triggerBufferedLoadEvent(),globalThis.rudderanalytics=this}catch(e){Ci(e)}}setDefaultInstanceKey(e){es(e)&&e&&(this.defaultAnalyticsKey=e)}getAnalyticsInstance(e){try{let n=e;return(!es(n)||!n)&&(n=this.defaultAnalyticsKey),!!this.analyticsInstances[n]||(this.analyticsInstances[n]=new rF),this.analyticsInstances[n]}catch(n){Ci(n);return}}load(e,n,r){var i;try{if(this.analyticsInstances[e])return;this.setDefaultInstanceKey(e);const s=nj(Tb);this.trackPageLifecycleEvents(s,r),ife(s),c1(Tb,fr(s)),this.analyticsInstances[e]=new rF,(i=this.getAnalyticsInstance(e))==null||i.load(e,n,gr(r))}catch(s){Ci(s)}}trackPageLifecycleEvents(e,n){const{autoTrack:r,useBeacon:i}=n??{},{enabled:s=!1,options:a={},pageLifecycle:o}=r??{},{events:l=[Lv.LOADED,Lv.UNLOADED],enabled:c=s,options:f=a}=o??{};q.autoTrack.pageLifecycle.enabled.value=c,q.autoTrack.enabled.value=s||c,c&&(this.trackPageLoadedEvent(l,f,e),this.setupPageUnloadTracking(l,i,f))}trackPageLoadedEvent(e,n,r){(e.length===0||e.includes(Lv.LOADED))&&r.unshift(["track",Lv.LOADED,{},{...n,originalTimestamp:aP(new Date(q.autoTrack.pageLifecycle.pageLoadedTimestamp.value))}])}setupPageUnloadTracking(e,n,r){(e.length===0||e.includes(Lv.UNLOADED))&&(n===!0?Lde(i=>{if(i===!1&&q.lifecycle.loaded.value){const s=Date.now(),a=s-q.autoTrack.pageLifecycle.pageLoadedTimestamp.value;this.track(Lv.UNLOADED,{visitDuration:a},{...r,originalTimestamp:aP(new Date(s))})}}):this.logger.warn(vhe(Ade)))}triggerBufferedLoadEvent(){const e=Array.isArray(globalThis.rudderanalytics)?globalThis.rudderanalytics:[],n=rfe(e);c1(Tb,fr([...e])),n.length>0&&(n.shift(),this.load.apply(null,n))}ready(e){var n;try{(n=this.getAnalyticsInstance())==null||n.ready(gr(e))}catch(r){Ci(r)}}page(e,n,r,i,s){var a;try{(a=this.getAnalyticsInstance())==null||a.page(oR(gr(e),gr(n),gr(r),gr(i),gr(s)))}catch(o){Ci(o)}}track(e,n,r,i){var s;try{(s=this.getAnalyticsInstance())==null||s.track(yN(gr(e),gr(n),gr(r),gr(i)))}catch(a){Ci(a)}}identify(e,n,r,i){var s;try{(s=this.getAnalyticsInstance())==null||s.identify(q9(gr(e),gr(n),gr(r),gr(i)))}catch(a){Ci(a)}}alias(e,n,r,i){var s;try{(s=this.getAnalyticsInstance())==null||s.alias(X9(gr(e),gr(n),gr(r),gr(i)))}catch(a){Ci(a)}}group(e,n,r,i){var s;try{(s=this.getAnalyticsInstance())==null||s.group(K9(gr(e),gr(n),gr(r),gr(i)))}catch(a){Ci(a)}}reset(e){var n;try{(n=this.getAnalyticsInstance())==null||n.reset(gr(e))}catch(r){Ci(r)}}getAnonymousId(e){var n;try{return(n=this.getAnalyticsInstance())==null?void 0:n.getAnonymousId(gr(e))}catch(r){Ci(r);return}}setAnonymousId(e,n){var r;try{(r=this.getAnalyticsInstance())==null||r.setAnonymousId(gr(e),gr(n))}catch(i){Ci(i)}}getUserId(){var e;try{return(e=this.getAnalyticsInstance())==null?void 0:e.getUserId()}catch(n){Ci(n);return}}getUserTraits(){var e;try{return(e=this.getAnalyticsInstance())==null?void 0:e.getUserTraits()}catch(n){Ci(n);return}}getGroupId(){var e;try{return(e=this.getAnalyticsInstance())==null?void 0:e.getGroupId()}catch(n){Ci(n);return}}getGroupTraits(){var e;try{return(e=this.getAnalyticsInstance())==null?void 0:e.getGroupTraits()}catch(n){Ci(n);return}}startSession(e){var n;try{(n=this.getAnalyticsInstance())==null||n.startSession(gr(e))}catch(r){Ci(r)}}endSession(){var e;try{(e=this.getAnalyticsInstance())==null||e.endSession()}catch(n){Ci(n)}}getSessionId(){var e;try{return(e=this.getAnalyticsInstance())==null?void 0:e.getSessionId()}catch(n){Ci(n);return}}setAuthToken(e){var n;try{(n=this.getAnalyticsInstance())==null||n.setAuthToken(gr(e))}catch(r){Ci(r)}}consent(e){var n;try{(n=this.getAnalyticsInstance())==null||n.consent(gr(e))}catch(r){Ci(r)}}};kt(vy,"globalSingleton",null);let gP=vy;const Ai={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},dc=console,qm={};Object.keys(Ai).forEach(t=>{qm[t]=dc[t]});const oS="Datadog Browser SDK:",Jn={debug:qm.debug.bind(dc,oS),log:qm.log.bind(dc,oS),info:qm.info.bind(dc,oS),warn:qm.warn.bind(dc,oS),error:qm.error.bind(dc,oS)},oA="https://docs.datadoghq.com",Dj=`${oA}/real_user_monitoring/browser/troubleshooting`,lA="More details:";function Uj(t,e){return(...n)=>{try{return t(...n)}catch(r){Jn.error(e,r)}}}function Bh(t){return t!==0&&Math.random()*100<=t}function cR(t,e){return+t.toFixed(e)}function rge(t){return rw(t)&&t>=0&&t<=100}function rw(t){return typeof t=="number"}const Ua=1e3,mo=60*Ua,Fj=60*mo,ige=24*Fj,Bj=365*ige;function uA(t){return{relative:t,timeStamp:age(t)}}function sge(t){return{relative:cA(t),timeStamp:t}}function age(t){const e=Pl()-performance.now();return e>iw()?Math.round(S0(e,t)):lge(t)}function oge(){return Math.round(Pl()-S0(iw(),performance.now()))}function _n(t){return rw(t)?cR(t*1e6,0):t}function Pl(){return new Date().getTime()}function Us(){return Pl()}function Ll(){return performance.now()}function ca(){return{relative:Ll(),timeStamp:Us()}}function zj(){return{relative:0,timeStamp:iw()}}function Fs(t,e){return e-t}function S0(t,e){return t+e}function cA(t){return t-iw()}function lge(t){return Math.round(S0(iw(),t))}function uge(t){return t<Bj}let x2;function iw(){return x2===void 0&&(x2=performance.timing.navigationStart),x2}const Kd=1024,jj=1024*Kd,cge=/[^\u0000-\u007F]/;function TN(t){return cge.test(t)?window.TextEncoder!==void 0?new TextEncoder().encode(t).length:new Blob([t]).size:t.length}function dge(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function f1(t){return{...t}}function dR(t,e){return Object.keys(t).some(n=>t[n]===e)}function Ug(t){return Object.keys(t).length===0}function fge(t,e){const n={};for(const r of Object.keys(t))n[r]=e(t[r]);return n}function sf(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let t=_dd_temp_;return delete Object.prototype._dd_temp_,typeof t!="object"&&(typeof self=="object"?t=self:typeof window=="object"?t=window:t={}),t}function ep(t,e){const n=sf();let r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=t[n.Zone.__symbol__(e)]),r||(r=t[e]),r}let fR,Hj=!1;function hge(t){fR=t}function pge(t){Hj=t}function mge(t,e,n){const r=n.value;n.value=function(...i){return(fR?Pt(r):r).apply(this,i)}}function Pt(t){return function(){return Fg(t,this,arguments)}}function Fg(t,e,n){try{return t.apply(e,n)}catch(r){Vj(r)}}function Vj(t){if(_P(t),fR)try{fR(t)}catch(e){_P(e)}}function _P(...t){Hj&&Jn.error("[MONITOR]",...t)}function aa(t,e){return ep(sf(),"setTimeout")(Pt(t),e)}function Tl(t){ep(sf(),"clearTimeout")(t)}function b0(t,e){return ep(sf(),"setInterval")(Pt(t),e)}function dA(t){ep(sf(),"clearInterval")(t)}class hr{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.observers.push(e),this.observers.length===1&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:()=>{this.observers=this.observers.filter(n=>e!==n),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(e){this.observers.forEach(n=>n(e))}}function Gj(...t){return new hr(e=>{const n=t.map(r=>r.subscribe(i=>e.notify(i)));return()=>n.forEach(r=>r.unsubscribe())})}function sw(t,e,n){const r=n&&n.leading!==void 0?n.leading:!0,i=n&&n.trailing!==void 0?n.trailing:!0;let s=!1,a,o;return{throttled:(...l)=>{if(s){a=l;return}r?t(...l):a=l,s=!0,o=aa(()=>{i&&a&&t(...a),s=!1,a=void 0},e)},cancel:()=>{Tl(o),s=!1,a=void 0}}}function Mr(){}function da(t){return t?(parseInt(t,10)^Math.random()*16>>parseInt(t,10)/4).toString(16):`10000000-1000-4000-8000-${1e11}`.replace(/[018]/g,da)}const hR=/([\w-]+)\s*=\s*([^;]+)/g;function h1(t,e){for(hR.lastIndex=0;;){const n=hR.exec(t);if(n){if(n[1]===e)return n[2]}else break}}function gge(t){const e=new Map;for(hR.lastIndex=0;;){const n=hR.exec(t);if(n)e.set(n[1],n[2]);else break}return e}function $j(t,e,n=""){const r=t.charCodeAt(e-1),s=r>=55296&&r<=56319?e+1:e;return t.length<=s?t:`${t.slice(0,s)}${n}`}function _ge(){return Wj()===0}function iFe(){return Wj()===1}let ex;function Wj(){return ex??(ex=vge())}function vge(t=window){var e;const n=t.navigator.userAgent;return t.chrome||/HeadlessChrome/.test(n)?0:((e=t.navigator.vendor)===null||e===void 0?void 0:e.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?1:2}function aw(t,e,n=0,r){const i=new Date;i.setTime(i.getTime()+n);const s=`expires=${i.toUTCString()}`,a=r&&r.crossSite?"none":"strict",o=r&&r.domain?`;domain=${r.domain}`:"",l=r&&r.secure?";secure":"",c=r&&r.partitioned?";partitioned":"";document.cookie=`${t}=${e};${s};path=/;samesite=${a}${o}${l}${c}`}function xN(t){return h1(document.cookie,t)}let C2;function Ih(t){return C2||(C2=gge(document.cookie)),C2.get(t)}function qj(t,e){aw(t,"",0,e)}function yge(t){if(document.cookie===void 0||document.cookie===null)return!1;try{const e=`dd_cookie_test_${da()}`,n="test";aw(e,n,mo,t);const r=xN(e)===n;return qj(e,t),r}catch(e){return Jn.error(e),!1}}let R2;function Ege(){if(R2===void 0){const t=`dd_site_test_${da()}`,e="test",n=window.location.hostname.split(".");let r=n.pop();for(;n.length&&!xN(t);)r=`${n.pop()}.${r}`,aw(t,e,Ua,{domain:r});qj(t,{domain:r}),R2=r}return R2}const w0="_dd_s";function Sge(t,e){for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(e(r,n,t))return r}}function pR(t){return Object.values(t)}function CN(t){return Object.entries(t)}function vp(t){return t===null?"null":Array.isArray(t)?"array":typeof t}function mR(t){const e={...t};return["id","name","email"].forEach(r=>{r in e&&(e[r]=String(e[r]))}),e}function Xj(t){const e=vp(t)==="object";return e||Jn.error("Unsupported user:",t),e}function bge(){return Math.floor(Math.random()*Math.pow(36,10)).toString(36).padStart(10,"0")}const e_=4*Fj,Kj=15*mo,wge=Bj,p1={COOKIE:"cookie",LOCAL_STORAGE:"local-storage"},Yj=/^([a-zA-Z]+)=([a-z0-9-]+)$/,RN="&";function Tge(t){return!!t&&(t.indexOf(RN)!==-1||Yj.test(t))}const xge="1";function Xm(t,e){const n={isExpired:xge};return e.trackAnonymousUser&&(t!=null&&t.anonymousId?n.anonymousId=t==null?void 0:t.anonymousId:n.anonymousId=bge()),n}function cC(t){return Ug(t)}function Zj(t){return!cC(t)}function gR(t){return t.isExpired!==void 0||!Cge(t)}function Cge(t){return(t.created===void 0||Pl()-Number(t.created)<e_)&&(t.expire===void 0||Pl()<Number(t.expire))}function Jj(t){t.expire=String(Pl()+Kj)}function MN(t){return CN(t).map(([e,n])=>e==="anonymousId"?`aid=${n}`:`${e}=${n}`).join(RN)}function Qj(t){const e={};return Tge(t)&&t.split(RN).forEach(n=>{const r=Yj.exec(n);if(r!==null){const[,i,s]=r;i==="aid"?e.anonymousId=s:e[i]=s}}),e}const Rge="_dd",Mge="_dd_r",Age="_dd_l",Ige="rum",kge="logs";function Oge(t){if(!Ih(w0)){const n=Ih(Rge),r=Ih(Mge),i=Ih(Age),s={};n&&(s.id=n),i&&/^[01]$/.test(i)&&(s[kge]=i),r&&/^[012]$/.test(r)&&(s[Ige]=r),Zj(s)&&(Jj(s),t.persistSession(s))}}function iF(t){const e=Uge(t);return yge(e)?{type:p1.COOKIE,cookieOptions:e}:void 0}function Pge(t,e){const n={isLockEnabled:_ge(),persistSession:Lge(e),retrieveSession:Dge,expireSession:r=>Nge(e,r,t)};return Oge(n),n}function Lge(t){return e=>{aw(w0,MN(e),Kj,t)}}function Nge(t,e,n){const r=Xm(e,n);aw(w0,MN(r),n.trackAnonymousUser?wge:e_,t)}function Dge(){const t=xN(w0);return Qj(t)}function Uge(t){const e={};return e.secure=!!t.useSecureSessionCookie||!!t.usePartitionedCrossSiteSessionCookie,e.crossSite=!!t.usePartitionedCrossSiteSessionCookie,e.partitioned=!!t.usePartitionedCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=Ege()),e}const Fge="_dd_test_";function sF(){try{const t=da(),e=`${Fge}${t}`;localStorage.setItem(e,t);const n=localStorage.getItem(e);return localStorage.removeItem(e),t===n?{type:p1.LOCAL_STORAGE}:void 0}catch{return}}function Bge(t){return{isLockEnabled:!1,persistSession:eH,retrieveSession:zge,expireSession:e=>jge(e,t)}}function eH(t){localStorage.setItem(w0,MN(t))}function zge(){const t=localStorage.getItem(w0);return Qj(t)}function jge(t,e){eH(Xm(t,e))}const Hge=10,Vge=100,tH=[];let dC;function Km(t,e,n=0){var r;const{isLockEnabled:i,persistSession:s,expireSession:a}=e,o=m=>s({...m,lock:c}),l=()=>{const m=e.retrieveSession(),_=m.lock;return m.lock&&delete m.lock,{session:m,lock:_}};if(dC||(dC=t),t!==dC){tH.push(t);return}if(i&&n>=Vge){aF(e);return}let c,f=l();if(i){if(f.lock){tx(t,e,n);return}if(c=da(),o(f.session),f=l(),f.lock!==c){tx(t,e,n);return}}let p=t.process(f.session);if(i&&(f=l(),f.lock!==c)){tx(t,e,n);return}if(p&&(gR(p)?a(p):(Jj(p),i?o(p):s(p))),i&&!(p&&gR(p))){if(f=l(),f.lock!==c){tx(t,e,n);return}s(f.session),p=f.session}(r=t.after)===null||r===void 0||r.call(t,p||f.session),aF(e)}function tx(t,e,n){aa(()=>{Km(t,e,n+1)},Hge)}function aF(t){dC=void 0;const e=tH.shift();e&&Km(e,t)}const oF=Ua;function Gge(t){switch(t.sessionPersistence){case p1.COOKIE:return iF(t);case p1.LOCAL_STORAGE:return sF();case void 0:{let e=iF(t);return!e&&t.allowFallbackToLocalStorage&&(e=sF()),e}default:Jn.error(`Invalid session persistence '${String(t.sessionPersistence)}'`)}}function $ge(t,e,n,r){const i=new hr,s=new hr,a=new hr,o=t.type===p1.COOKIE?Pge(e,t.cookieOptions):Bge(e),{expireSession:l}=o,c=b0(y,oF);let f;S();const{throttled:p,cancel:m}=sw(()=>{Km({process:O=>{if(cC(O))return;const D=E(O);return w(D),D},after:O=>{Zj(O)&&!R()&&M(O),f=O}},o)},oF);function _(){Km({process:O=>R()?E(O):void 0},o)}function y(){Km({process:O=>gR(O)?Xm(O,e):void 0,after:E},o)}function E(O){return gR(O)&&(O=Xm(O,e)),R()&&(C(O)?k():(a.notify({previousState:f,newState:O}),f=O)),O}function S(){Km({process:O=>{if(cC(O))return Xm(O,e)},after:O=>{f=O}},o)}function w(O){if(cC(O))return!1;const{trackingType:D,isTracked:L}=r(O[n]);O[n]=D,delete O.isExpired,L&&!O.id&&(O.id=da(),O.created=String(Pl()))}function R(){return f[n]!==void 0}function C(O){return f.id!==O.id||f[n]!==O[n]}function k(){f=Xm(f,e),s.notify()}function M(O){f=O,i.notify()}function N(O){Km({process:D=>({...D,...O}),after:E},o)}return{expandOrRenewSession:p,expandSession:_,getSession:()=>f,renewObservable:i,expireObservable:s,sessionStateUpdateObservable:a,restartSession:S,expire:()=>{m(),l(f),E(Xm(f,e))},stop:()=>{dA(c)},updateSessionState:N}}const vP={GRANTED:"granted",NOT_GRANTED:"not-granted"};function nH(t){const e=new hr;return{tryToInit(n){t||(t=n)},update(n){t=n,e.notify()},isGranted(){return t===vP.GRANTED},observable:e}}function t_(t,e,n){if(typeof t!="object"||t===null)return JSON.stringify(t);const r=ly(Object.prototype),i=ly(Array.prototype),s=ly(Object.getPrototypeOf(t)),a=ly(t);try{return JSON.stringify(t,e,n)}catch{return"<error: unable to serialize object>"}finally{r(),i(),s(),a()}}function ly(t){const e=t,n=e.toJSON;return n?(delete e.toJSON,()=>{e.toJSON=n}):Mr}function AN(t){return IN(t,location.href).href}function Wge(t){try{return!!IN(t)}catch{return!1}}function qge(t){const e=IN(t).pathname;return e[0]==="/"?e:`/${e}`}function IN(t,e){const n=Xge();if(n)try{return e!==void 0?new n(t,e):new n(t)}catch(s){throw new Error(`Failed to construct URL: ${String(s)} ${t_({url:t,base:e})}`)}if(e===void 0&&!/:/.test(t))throw new Error(`Invalid URL: '${t}'`);let r=document;const i=r.createElement("a");if(e!==void 0){r=document.implementation.createHTMLDocument("");const s=r.createElement("base");s.href=e,r.head.appendChild(s),r.body.appendChild(i)}return i.href=t,i}const lF=URL;let nx;function Xge(){if(nx===void 0)try{nx=new lF("http://test/path").href==="http://test/path"}catch{nx=!1}return nx?lF:void 0}const rH="datad0g.com",Kge="dd0g-gov.com",ng="datadoghq.com",Yge="datadoghq.eu",Zge="ddog-gov.com",Jge="pci.browser-intake-datadoghq.com",Qge=["ddsource","ddtags"];function Cb(t,e,n){const r=e_e(t,e);return{build(i,s){const a=t_e(t,e,n,i,s);return r(a)},urlPrefix:r(""),trackType:e}}function e_e(t,e){const n=`/api/v2/${e}`,r=t.proxy;if(typeof r=="string"){const s=AN(r);return a=>`${s}?ddforward=${encodeURIComponent(`${n}?${a}`)}`}if(typeof r=="function")return s=>r({path:n,parameters:s});const i=iH(e,t);return s=>`https://${i}${n}?${s}`}function iH(t,e){const{site:n=ng,internalAnalyticsSubdomain:r}=e;if(t==="logs"&&e.usePciIntake&&n===ng)return Jge;if(r&&n===ng)return`${r}.${ng}`;if(n===Kge)return`http-intake.logs.${n}`;const i=n.split("."),s=i.pop();return`browser-intake-${i.join("-")}.${s}`}function t_e({clientToken:t,internalAnalyticsSubdomain:e},n,r,i,{retry:s,encoding:a}){const o=["sdk_version:6.2.1",`api:${i}`].concat(r);s&&o.push(`retry_count:${s.count}`,`retry_after:${s.lastFailureStatus}`);const l=["ddsource=browser",`ddtags=${encodeURIComponent(o.join(","))}`,`dd-api-key=${t}`,`dd-evp-origin-version=${encodeURIComponent("6.2.1")}`,"dd-evp-origin=browser",`dd-request-id=${da()}`];return a&&l.push(`dd-evp-encoding=${a}`),n==="rum"&&l.push(`batch_time=${Us()}`),e&&l.reverse(),l.join("&")}const n_e=200;function r_e(t){const{env:e,service:n,version:r,datacenter:i}=t,s=[];return e&&s.push(rx("env",e)),n&&s.push(rx("service",n)),r&&s.push(rx("version",r)),i&&s.push(rx("datacenter",i)),s}function rx(t,e){const n=n_e-t.length-1;(e.length>n||i_e(e))&&Jn.warn(`${t} value doesn't meet tag requirements and will be sanitized. ${lA} ${oA}/getting_started/tagging/#defining-tags`);const r=e.replace(/,/g,"_");return`${t}:${r}`}function i_e(t){return s_e()?new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t):!1}function s_e(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch{return!1}}function a_e(t){const e=t.site||ng,n=r_e(t),r=o_e(t,n);return{replica:l_e(t,n),site:e,...r}}function o_e(t,e){return{logsEndpointBuilder:Cb(t,"logs",e),rumEndpointBuilder:Cb(t,"rum",e),sessionReplayEndpointBuilder:Cb(t,"replay",e)}}function l_e(t,e){if(!t.replica)return;const n={...t,site:ng,clientToken:t.replica.clientToken},r={logsEndpointBuilder:Cb(n,"logs",e),rumEndpointBuilder:Cb(n,"rum",e)};return{applicationId:t.replica.applicationId,...r}}function sH(t){return Qge.every(e=>t.includes(e))}const Rb={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"},yP={ALL:"all",SAMPLED:"sampled"};function M2(t,e){return t!=null&&typeof t!="string"?(Jn.error(`${e} must be defined as a string`),!1):!0}function u_e(t){return t&&typeof t=="string"&&!/(datadog|ddog|datad0g|dd0g)/.test(t)?(Jn.error(`Site should be a valid Datadog site. ${lA} ${oA}/getting_started/site/.`),!1):!0}function uy(t,e){return t!==void 0&&!rge(t)?(Jn.error(`${e} Sample Rate should be a number between 0 and 100`),!1):!0}function aH(t){var e,n,r,i,s,a;if(!t||!t.clientToken){Jn.error("Client Token is not configured, we will not send any data.");return}if(!(!u_e(t.site)||!uy(t.sessionSampleRate,"Session")||!uy(t.telemetrySampleRate,"Telemetry")||!uy(t.telemetryConfigurationSampleRate,"Telemetry Configuration")||!uy(t.telemetryUsageSampleRate,"Telemetry Usage")||!M2(t.version,"Version")||!M2(t.env,"Env")||!M2(t.service,"Service"))){if(t.trackingConsent!==void 0&&!dR(vP,t.trackingConsent)){Jn.error('Tracking Consent should be either "granted" or "not-granted"');return}return{beforeSend:t.beforeSend&&Uj(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Gge(t),sessionSampleRate:(e=t.sessionSampleRate)!==null&&e!==void 0?e:100,telemetrySampleRate:(n=t.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(r=t.telemetryConfigurationSampleRate)!==null&&r!==void 0?r:5,telemetryUsageSampleRate:(i=t.telemetryUsageSampleRate)!==null&&i!==void 0?i:5,service:t.service||void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:(s=t.trackingConsent)!==null&&s!==void 0?s:vP.GRANTED,trackAnonymousUser:(a=t.trackAnonymousUser)!==null&&a!==void 0?a:!0,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16*Kd,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*Ua,batchMessagesLimit:50,messageBytesLimit:256*Kd,...a_e(t)}}}function oH(t){return{session_sample_rate:t.sessionSampleRate,telemetry_sample_rate:t.telemetrySampleRate,telemetry_configuration_sample_rate:t.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:t.telemetryUsageSampleRate,use_before_send:!!t.beforeSend,use_partitioned_cross_site_session_cookie:t.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:t.useSecureSessionCookie,use_proxy:!!t.proxy,silent_multiple_init:t.silentMultipleInit,track_session_across_subdomains:t.trackSessionAcrossSubdomains,track_anonymous_user:t.trackAnonymousUser,session_persistence:t.sessionPersistence,allow_fallback_to_local_storage:!!t.allowFallbackToLocalStorage,store_contexts_across_pages:!!t.storeContextsAcrossPages,allow_untrusted_events:!!t.allowUntrustedEvents,tracking_consent:t.trackingConsent}}var tp;(function(t){t.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",t.REMOTE_CONFIGURATION="remote_configuration",t.ACTION_NAME_MASKING="action_name_masking",t.CONSISTENT_TRACE_SAMPLING="consistent_trace_sampling",t.MISSING_URL_CONTEXT_TELEMETRY="missing_url_context_telemetry"})(tp||(tp={}));const kN=new Set;function lH(t){Array.isArray(t)&&c_e(t.filter(e=>dR(tp,e)))}function c_e(t){t.forEach(e=>{kN.add(e)})}function m1(t){return kN.has(t)}function d_e(){return kN}const ow="?";function Lc(t){const e=[];let n=A2(t,"stack");const r=String(t);return n&&n.startsWith(r)&&(n=n.slice(r.length)),n&&n.split(`
`).forEach(i=>{const s=p_e(i)||g_e(i)||v_e(i)||S_e(i);s&&(!s.func&&s.line&&(s.func=ow),e.push(s))}),{message:A2(t,"message"),name:A2(t,"name"),stack:e}}const uH="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",t0="(?::(\\d+))",f_e=new RegExp(`^\\s*at (.*?) ?\\(${uH}${t0}?${t0}?\\)?\\s*$`,"i"),h_e=new RegExp(`\\((\\S*)${t0}${t0}\\)`);function p_e(t){const e=f_e.exec(t);if(!e)return;const n=e[2]&&e[2].indexOf("native")===0,r=e[2]&&e[2].indexOf("eval")===0,i=h_e.exec(e[2]);return r&&i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3]),{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||ow,line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}const m_e=new RegExp(`^\\s*at ?${uH}${t0}?${t0}??\\s*$`,"i");function g_e(t){const e=m_e.exec(t);if(e)return{args:[],column:e[3]?+e[3]:void 0,func:ow,line:e[2]?+e[2]:void 0,url:e[1]}}const __e=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function v_e(t){const e=__e.exec(t);if(e)return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||ow,line:+e[3],url:e[2]}}const y_e=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,E_e=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function S_e(t){const e=y_e.exec(t);if(!e)return;const n=e[3]&&e[3].indexOf(" > eval")>-1,r=E_e.exec(e[3]);return n&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0),{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||ow,line:e[4]?+e[4]:void 0,url:e[3]}}function A2(t,e){if(typeof t!="object"||!t||!(e in t))return;const n=t[e];return typeof n=="string"?n:void 0}function b_e(t,e,n,r){const i=[{url:e,column:r,line:n}],{name:s,message:a}=T_e(t);return{name:s,message:a,stack:i}}const w_e=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function T_e(t){let e,n;return{}.toString.call(t)==="[object String]"&&([,e,n]=w_e.exec(t)),{name:e,message:n}}function n0(){const e=new Error;let n;return Fg(()=>{const r=Lc(e);r.stack=r.stack.slice(2),n=n_(r)}),n}function n_(t){let e=cH(t);return t.stack.forEach(n=>{const r=n.func==="?"?"<anonymous>":n.func,i=n.args&&n.args.length>0?`(${n.args.join(", ")})`:"",s=n.line?`:${n.line}`:"",a=n.line&&n.column?`:${n.column}`:"";e+=`
  at ${r}${i} @ ${n.url}${s}${a}`}),e}function cH(t){return`${t.name||"Error"}: ${t.message}`}function Sc(t,e,n,{computeHandlingStack:r}={}){let i=t[e];if(typeof i!="function")if(e in t&&e.startsWith("on"))i=Mr;else return{stop:Mr};let s=!1;const a=function(){if(s)return i.apply(this,arguments);const o=Array.from(arguments);let l;Fg(n,null,[{target:this,parameters:o,onPostCall:f=>{l=f},handlingStack:r?n0():void 0}]);const c=i.apply(this,o);return l&&Fg(l,null,[c]),c};return t[e]=a,{stop:()=>{s=!0,t[e]===a&&(t[e]=i)}}}function sFe(t,e,n){const r=Object.getOwnPropertyDescriptor(t,e);if(!r||!r.set||!r.configurable)return{stop:Mr};const i=Mr;let s=(o,l)=>{aa(()=>{s!==i&&n(o,l)},0)};const a=function(o){r.set.call(this,o),s(this,o)};return Object.defineProperty(t,e,{set:a}),{stop:()=>{var o;((o=Object.getOwnPropertyDescriptor(t,e))===null||o===void 0?void 0:o.set)===a&&Object.defineProperty(t,e,r),s=i}}}const x_e=220*Kd,C_e="$",R_e=3;function Yr(t,e=x_e){const n=ly(Object.prototype),r=ly(Array.prototype),i=[],s=new WeakMap,a=I2(t,C_e,void 0,i,s),o=JSON.stringify(a);let l=o?o.length:0;if(l>e){k2(e,"discarded",t);return}for(;i.length>0&&l<e;){const c=i.shift();let f=0;if(Array.isArray(c.source))for(let p=0;p<c.source.length;p++){const m=I2(c.source[p],c.path,p,i,s);if(m!==void 0?l+=JSON.stringify(m).length:l+=4,l+=f,f=1,l>e){k2(e,"truncated",t);break}c.target[p]=m}else for(const p in c.source)if(Object.prototype.hasOwnProperty.call(c.source,p)){const m=I2(c.source[p],c.path,p,i,s);if(m!==void 0&&(l+=JSON.stringify(m).length+f+p.length+R_e,f=1),l>e){k2(e,"truncated",t);break}c.target[p]=m}}return n(),r(),a}function I2(t,e,n,r,i){const s=I_e(t);if(!s||typeof s!="object")return M_e(s);const a=EP(s);if(a!=="[Object]"&&a!=="[Array]"&&a!=="[Error]")return a;const o=t;if(i.has(o))return`[Reference seen at ${i.get(o)}]`;const l=n!==void 0?`${e}.${n}`:e,c=Array.isArray(s)?[]:{};return i.set(o,l),r.push({source:s,target:c,path:l}),c}function M_e(t){return typeof t=="bigint"?`[BigInt] ${t.toString()}`:typeof t=="function"?`[Function] ${t.name||"unknown"}`:typeof t=="symbol"?`[Symbol] ${t.description||t.toString()}`:t}function EP(t){try{if(t instanceof Event)return A_e(t);if(t instanceof RegExp)return`[RegExp] ${t.toString()}`;const n=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch{}return"[Unserializable]"}function A_e(t){return{type:t.type,isTrusted:t.isTrusted,currentTarget:t.currentTarget?EP(t.currentTarget):null,target:t.target?EP(t.target):null}}function I_e(t){const e=t;if(e&&typeof e.toJSON=="function")try{return e.toJSON()}catch{}return t}function k2(t,e,n){Jn.warn(`The data provided has been ${e} as it is over the limit of ${t} characters:`,n)}const dH="No stack, consider using an instance of Error";function ON({stackTrace:t,originalError:e,handlingStack:n,componentStack:r,startClocks:i,nonErrorPrefix:s,source:a,handling:o}){const l=af(e),c=k_e(t,l,s,e),f=O_e(l,t)?n_(t):dH,p=l?hH(e,a):void 0,m=t?t.name:void 0,_=fH(e);return{startClocks:i,source:a,handling:o,handlingStack:n,componentStack:r,originalError:e,type:m,message:c,stack:f,causes:p,fingerprint:_}}function k_e(t,e,n,r){return t!=null&&t.message&&(t!=null&&t.name)?t.message:e?"Empty message":`${n} ${t_(Yr(r))}`}function O_e(t,e){return e===void 0?!1:t?!0:e.stack.length>0&&(e.stack.length>1||e.stack[0].url!==void 0)}function fH(t){return af(t)&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function P_e(t){var e;return(e=/@ (.+)/.exec(t))===null||e===void 0?void 0:e[1]}function af(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}function hH(t,e){let n=t;const r=[];for(;af(n==null?void 0:n.cause)&&r.length<10;){const i=Lc(n.cause);r.push({message:n.cause.message,source:e,type:i==null?void 0:i.name,stack:n_(i)}),n=n.cause}return r.length?r:void 0}const go={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function pH(t){const e=(i,s)=>{const a=ON({stackTrace:i,originalError:s,startClocks:ca(),nonErrorPrefix:"Uncaught",source:go.SOURCE,handling:"unhandled"});t.notify(a)},{stop:n}=L_e(e),{stop:r}=N_e(e);return{stop:()=>{n(),r()}}}function L_e(t){return Sc(window,"onerror",({parameters:[e,n,r,i,s]})=>{let a;af(s)?a=Lc(s):a=b_e(e,n,r,i),t(a,s??e)})}function N_e(t){return Sc(window,"onunhandledrejection",({parameters:[e]})=>{const n=e.reason||"Empty reason",r=Lc(n);t(r,n)})}function mH(t){const e={version:"6.2.1",onReady(n){n()},...t};return Object.defineProperty(e,"_setDebug",{get(){return pge},enumerable:!1}),e}function gH(t,e,n){const r=t[e];r&&!r.q&&r.version&&Jn.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),t[e]=n,r&&r.q&&r.q.forEach(i=>Uj(i,"onReady callback threw an error:")())}function fA(t,e){e.silentMultipleInit||Jn.error(`${t} is already initialized.`)}function ri(t,e,n,r,i){return np(t,e,[n],r,i)}function np(t,e,n,r,{once:i,capture:s,passive:a}={}){const o=Pt(m=>{!m.isTrusted&&!m.__ddIsTrusted&&!t.allowUntrustedEvents||(i&&p(),r(m))}),l=a?{capture:s,passive:a}:s,c=window.EventTarget&&e instanceof EventTarget?window.EventTarget.prototype:e,f=ep(c,"addEventListener");n.forEach(m=>f.call(e,m,o,l));function p(){const m=ep(c,"removeEventListener");n.forEach(_=>m.call(e,_,o,l))}return{stop:p}}const r0={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function _H(t,e){const n=[];e.includes(r0.cspViolation)&&n.push(U_e(t));const r=e.filter(i=>i!==r0.cspViolation);return r.length&&n.push(D_e(r)),Gj(...n)}function D_e(t){return new hr(e=>{if(!window.ReportingObserver)return;const n=Pt((i,s)=>i.forEach(a=>e.notify(F_e(a)))),r=new window.ReportingObserver(n,{types:t,buffered:!0});return r.observe(),()=>{r.disconnect()}})}function U_e(t){return new hr(e=>{const{stop:n}=ri(t,document,"securitypolicyviolation",r=>{e.notify(B_e(r))});return n})}function F_e(t){const{type:e,body:n}=t;return vH({type:n.id,message:`${e}: ${n.message}`,originalError:t,stack:yH(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}function B_e(t){const e=`'${t.blockedURI}' blocked by '${t.effectiveDirective}' directive`;return vH({type:t.effectiveDirective,message:`${r0.cspViolation}: ${e}`,originalError:t,csp:{disposition:t.disposition},stack:yH(t.effectiveDirective,t.originalPolicy?`${e} of the policy "${$j(t.originalPolicy,100,"...")}"`:"no policy",t.sourceFile,t.lineNumber,t.columnNumber)})}function vH(t){return{startClocks:ca(),source:go.REPORT,handling:"unhandled",...t}}function yH(t,e,n,r,i){return n?n_({name:t,message:e,stack:[{func:"?",url:n,line:r??void 0,column:i??void 0}]}):void 0}function PN(t,e){const n=window.__ddBrowserSdkExtensionCallback;n&&n({type:t,payload:e})}function _R(t,e,n=z_e()){if(e===void 0)return t;if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const i=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,i)}if(n.hasAlreadyBeenSeen(e))return;if(Array.isArray(e)){const i=Array.isArray(t)?t:[];for(let s=0;s<e.length;++s)i[s]=_R(i[s],e[s],n);return i}const r=vp(t)==="object"?t:{};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=_R(r[i],e[i],n));return r}function hA(t){return _R(void 0,t)}function Vo(...t){let e;for(const n of t)n!=null&&(e=_R(e,n));return e}function z_e(){if(typeof WeakSet<"u"){const e=new WeakSet;return{hasAlreadyBeenSeen(n){const r=e.has(n);return r||e.add(n),r}}}const t=[];return{hasAlreadyBeenSeen(e){const n=t.indexOf(e)>=0;return n||t.push(e),n}}}function EH(){var t;const e=window.navigator;return{status:e.onLine?"connected":"not_connected",interfaces:e.connection&&e.connection.type?[e.connection.type]:void 0,effective_type:(t=e.connection)===null||t===void 0?void 0:t.effectiveType}}function j_e(t){const e=new Set;return t.forEach(n=>e.add(n)),Array.from(e)}function SH(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}const H_e=500;function LN(){const t=[];return{add:i=>{t.push(i)>H_e&&t.splice(0,1)},remove:i=>{SH(t,i)},drain:i=>{t.forEach(s=>s(i)),t.length=0}}}const _g={log:"log",configuration:"configuration",usage:"usage"},V_e=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],G_e=[Zge];let bH=LN(),T0=t=>{bH.add(()=>T0(t))};function wH(t,e){let n;const r=new hr,i=new Set,s=!G_e.includes(e.site)&&Bh(e.telemetrySampleRate),a={[_g.log]:s,[_g.configuration]:s&&Bh(e.telemetryConfigurationSampleRate),[_g.usage]:s&&Bh(e.telemetryUsageSampleRate)},o=$_e();T0=c=>{const f=t_(c);if(a[c.type]&&i.size<e.maxTelemetryEventsPerPage&&!i.has(f)){const p=l(t,c,o);r.notify(p),PN("telemetry",p),i.add(f)}},hge(vR);function l(c,f,p){return Vo({type:"telemetry",date:Us(),service:c,version:"6.2.1",source:"browser",_dd:{format_version:2},telemetry:Vo(f,{runtime_env:p,connectivity:EH(),sdk_setup:"npm"}),experimental_features:Array.from(d_e())},n!==void 0?n():{})}return{setContextProvider:c=>{n=c},observable:r,enabled:s}}function $_e(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function TH(){bH.drain()}function xH(t){return t.site===rH}function r_(t,e){_P(Ai.debug,t,e),T0({type:_g.log,message:t,status:"debug",...e})}function vR(t,e){T0({type:_g.log,status:"error",...W_e(t),...e})}function CH(t){T0({type:_g.configuration,configuration:t})}function Yi(t){T0({type:_g.usage,usage:t})}function W_e(t){if(af(t)){const e=Lc(t);return{error:{kind:e.name,stack:n_(q_e(e))},message:e.message}}return{error:{stack:dH},message:`Uncaught ${t_(t)}`}}function q_e(t){return t.stack=t.stack.filter(e=>!e.url||V_e.some(n=>e.url.startsWith(n))),t}const lS=1/0,X_e=mo;function x0({expireDelay:t,maxEntries:e}){let n=[];const r=[],i=b0(()=>s(),X_e);function s(){const y=Ll()-t;for(;n.length>0&&n[n.length-1].endTime<y;){const E=n.pop();E&&r.push(E.startTime)}}function a(y,E){const S={value:y,startTime:E,endTime:lS,remove:()=>{SH(n,S)},close:w=>{S.endTime=w}};return e&&n.length>=e&&n.pop(),n.unshift(S),S}function o(y=lS,E={returnInactive:!1}){for(const S of n)if(S.startTime<=y){if(E.returnInactive||y<=S.endTime)return S.value;break}}function l(y){const E=n[0];E&&E.endTime===lS&&E.close(y)}function c(y=lS,E=0){const S=S0(y,E);return n.filter(w=>w.startTime<=S&&y<=w.endTime).map(w=>w.value)}function f(){return n.map(({startTime:y,endTime:E,value:S})=>({startTime:y,endTime:E===lS?"Infinity":E,value:S}))}function p(){return r}function m(){n=[]}function _(){dA(i)}return{add:a,find:o,closeActive:l,findAll:c,reset:m,stop:_,getAllEntries:f,getDeletedEntries:p}}const K_e=mo,Y_e=e_;function RH(t,e,n,r){const i=new hr,s=new hr,a=$ge(t.sessionStoreStrategyType,t,e,n),o=x0({expireDelay:Y_e});a.renewObservable.subscribe(()=>{o.add(l(),Ll()),i.notify()}),a.expireObservable.subscribe(()=>{s.notify(),o.closeActive(Ll())}),a.expandOrRenewSession(),o.add(l(),zj().relative),r.observable.subscribe(()=>{r.isGranted()?a.expandOrRenewSession():a.expire()}),Z_e(t,()=>{r.isGranted()&&a.expandOrRenewSession()}),J_e(t,()=>a.expandSession()),Q_e(t,()=>a.restartSession());function l(){return{id:a.getSession().id,trackingType:a.getSession()[e],isReplayForced:!!a.getSession().forcedReplay,anonymousId:a.getSession().anonymousId}}return{findSession:(c,f)=>o.find(c,f),renewObservable:i,expireObservable:s,sessionStateUpdateObservable:a.sessionStateUpdateObservable,expire:a.expire,updateSessionState:a.updateSessionState}}function Z_e(t,e){np(t,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0})}function J_e(t,e){const n=()=>{document.visibilityState==="visible"&&e()};ri(t,document,"visibilitychange",n),b0(n,K_e)}function Q_e(t,e){ri(t,window,"resume",e,{capture:!0})}function MH(t){return t>=500}function AH(t){try{return t.clone()}catch{return}}const eve=80*Kd,tve=32,IH=3*jj,nve=mo,kH=Ua;function OH(t,e,n,r,i){e.transportStatus===0&&e.queuedPayloads.size()===0&&e.bandwidthMonitor.canHandle(t)?LH(t,e,n,{onSuccess:()=>NH(0,e,n,r,i),onFailure:()=>{e.queuedPayloads.enqueue(t),PH(e,n,r,i)}}):e.queuedPayloads.enqueue(t)}function PH(t,e,n,r){t.transportStatus===2&&aa(()=>{const i=t.queuedPayloads.first();LH(i,t,e,{onSuccess:()=>{t.queuedPayloads.dequeue(),t.currentBackoffTime=kH,NH(1,t,e,n,r)},onFailure:()=>{t.currentBackoffTime=Math.min(nve,t.currentBackoffTime*2),PH(t,e,n,r)}})},t.currentBackoffTime)}function LH(t,e,n,{onSuccess:r,onFailure:i}){e.bandwidthMonitor.add(t),n(t,s=>{e.bandwidthMonitor.remove(t),rve(s)?(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:s.status},i()):(e.transportStatus=0,r())})}function NH(t,e,n,r,i){t===0&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(i({message:`Reached max ${r} events size queued for upload: ${IH/jj}MiB`,source:go.AGENT,startClocks:ca()}),e.queueFullReported=!0);const s=e.queuedPayloads;for(e.queuedPayloads=DH();s.size()>0;)OH(s.dequeue(),e,n,r,i)}function rve(t){return t.type!=="opaque"&&(t.status===0&&!navigator.onLine||t.status===408||t.status===429||MH(t.status))}function ive(){return{transportStatus:0,currentBackoffTime:kH,bandwidthMonitor:sve(),queuedPayloads:DH(),queueFullReported:!1}}function DH(){const t=[];return{bytesCount:0,enqueue(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first(){return t[0]},dequeue(){const e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size(){return t.length},isFull(){return this.bytesCount>=IH}}}function sve(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle(t){return this.ongoingRequestCount===0||this.ongoingByteCount+t.bytesCount<=eve&&this.ongoingRequestCount<tve},add(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}}}function ave(t,e,n){const r=ive(),i=(s,a)=>uve(t,e,s,a);return{send:s=>{OH(s,r,i,t.trackType,n)},sendOnExit:s=>{ove(t,e,s)}}}function ove(t,e,n){if(!!navigator.sendBeacon&&n.bytesCount<e)try{const s=t.build("beacon",n);if(navigator.sendBeacon(s,n.data))return}catch(s){lve(s)}const i=t.build("xhr",n);SP(i,n.data)}let uF=!1;function lve(t){uF||(uF=!0,vR(t))}function uve(t,e,n,r){if(cve()&&n.bytesCount<e){const s=t.build("fetch",n);fetch(s,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(Pt(a=>r==null?void 0:r({status:a.status,type:a.type})),Pt(()=>{const a=t.build("xhr",n);SP(a,n.data,r)}))}else{const s=t.build("xhr",n);SP(s,n.data,r)}}function cve(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function SP(t,e,n){const r=new XMLHttpRequest;r.open("POST",t,!0),e instanceof Blob&&r.setRequestHeader("Content-Type",e.type),ri({allowUntrustedEvents:!0},r,"loadend",()=>{n==null||n({status:r.status})},{once:!0}),r.send(e)}function i_(){const t=dve();if(t)return{getCapabilities(){var e;return JSON.parse(((e=t.getCapabilities)===null||e===void 0?void 0:e.call(t))||"[]")},getPrivacyLevel(){var e;return(e=t.getPrivacyLevel)===null||e===void 0?void 0:e.call(t)},getAllowedWebViewHosts(){return JSON.parse(t.getAllowedWebViewHosts())},send(e,n,r){const i=r?{id:r}:void 0;t.send(JSON.stringify({eventType:e,event:n,view:i}))}}}function UH(t){const e=i_();return!!e&&e.getCapabilities().includes(t)}function Mc(t){var e;t===void 0&&(t=(e=sf().location)===null||e===void 0?void 0:e.hostname);const n=i_();return!!n&&n.getAllowedWebViewHosts().some(r=>t===r||t.endsWith(`.${r}`))}function dve(){return sf().DatadogEventBridge}const by={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function FH(t){return new hr(e=>{const{stop:n}=np(t,window,["visibilitychange","freeze"],i=>{i.type==="visibilitychange"&&document.visibilityState==="hidden"?e.notify({reason:by.HIDDEN}):i.type==="freeze"&&e.notify({reason:by.FROZEN})},{capture:!0}),r=ri(t,window,"beforeunload",()=>{e.notify({reason:by.UNLOADING})}).stop;return()=>{n(),r()}})}function fve(t){return pR(by).includes(t)}function hve({encoder:t,request:e,flushController:n,messageBytesLimit:r}){let i={};const s=n.flushObservable.subscribe(p=>f(p));function a(p,m,_){n.notifyBeforeAddMessage(m),_!==void 0?(i[_]=p,n.notifyAfterAddMessage()):t.write(t.isEmpty?p:`
${p}`,y=>{n.notifyAfterAddMessage(y-m)})}function o(p){return p!==void 0&&i[p]!==void 0}function l(p){const m=i[p];delete i[p];const _=t.estimateEncodedBytesCount(m);n.notifyAfterRemoveMessage(_)}function c(p,m){const _=t_(p),y=t.estimateEncodedBytesCount(_);if(y>=r){Jn.warn(`Discarded a message whose size was bigger than the maximum allowed size ${r}KB. ${lA} ${Dj}/#technical-limitations`);return}o(m)&&l(m),a(_,y,m)}function f(p){const m=pR(i).join(`
`);i={};const _=fve(p.reason),y=_?e.sendOnExit:e.send;if(_&&t.isAsync){const E=t.finishSync();E.outputBytesCount&&y(cF(E));const S=[E.pendingData,m].filter(Boolean).join(`
`);S&&y({data:S,bytesCount:TN(S)})}else m&&t.write(t.isEmpty?m:`
${m}`),t.finish(E=>{y(cF(E))})}return{flushController:n,add:c,upsert:c,stop:s.unsubscribe}}function cF(t){let e;return typeof t.output=="string"?e=t.output:e=new Blob([t.output],{type:"text/plain"}),{data:e,bytesCount:t.outputBytesCount,encoding:t.encoding}}function pve({messagesLimit:t,bytesLimit:e,durationLimit:n,pageExitObservable:r,sessionExpireObservable:i}){const s=r.subscribe(y=>f(y.reason)),a=i.subscribe(()=>f("session_expire")),o=new hr(()=>()=>{s.unsubscribe(),a.unsubscribe()});let l=0,c=0;function f(y){if(c===0)return;const E=c,S=l;c=0,l=0,_(),o.notify({reason:y,messagesCount:E,bytesCount:S})}let p;function m(){p===void 0&&(p=aa(()=>{f("duration_limit")},n))}function _(){Tl(p),p=void 0}return{flushObservable:o,get messagesCount(){return c},notifyBeforeAddMessage(y){l+y>=e&&f("bytes_limit"),c+=1,l+=y,m()},notifyAfterAddMessage(y=0){l+=y,c>=t?f("messages_limit"):l>=e&&f("bytes_limit")},notifyAfterRemoveMessage(y){l-=y,c-=1,c===0&&_()}}}function NN(t,e,n,r,i,s,a=hve){const o=c(t,e),l=n&&c(t,n);function c(f,{endpoint:p,encoder:m}){return a({encoder:m,request:ave(p,f.batchBytesLimit,r),flushController:pve({messagesLimit:f.batchMessagesLimit,bytesLimit:f.batchBytesLimit,durationLimit:f.flushTimeout,pageExitObservable:i,sessionExpireObservable:s}),messageBytesLimit:f.messageBytesLimit})}return{flushObservable:o.flushController.flushObservable,add(f,p=!0){o.add(f),l&&p&&l.add(n.transformMessage?n.transformMessage(f):f)},upsert:(f,p)=>{o.upsert(f,p),l&&l.upsert(n.transformMessage?n.transformMessage(f):f,p)},stop:()=>{o.stop(),l&&l.stop()}}}function g1(){let t="",e=0;return{isAsync:!1,get isEmpty(){return!t},write(n,r){const i=TN(n);e+=i,t+=n,r&&r(i)},finish(n){n(this.finishSync())},finishSync(){const n={output:t,outputBytesCount:e,rawBytesCount:e,pendingData:""};return t="",e=0,n},estimateEncodedBytesCount(n){return n.length}}}class BH{constructor(){this.callbacks={}}notify(e,n){const r=this.callbacks[e];r&&r.forEach(i=>i(n))}subscribe(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter(r=>n!==r)}}}}function fC(t,e,n){let r=0,i=!1;return{isLimitReached(){if(r===0&&aa(()=>{r=0},mo),r+=1,r<=e||i)return i=!1,!1;if(r===e+1){i=!0;try{n({message:`Reached max number of ${t}s by minute: ${e}`,source:go.AGENT,startClocks:ca()})}finally{i=!1}}return!0}}}function DN(t,e,n){return document.readyState===e||document.readyState==="complete"?(n(),{stop:Mr}):ri(t,window,e==="complete"?"load":"DOMContentLoaded",n,{once:!0})}function mve(t,e){return new Promise(n=>{DN(t,e,n)})}let O2;const UN=new WeakMap;function zH(t){return O2||(O2=gve(t)),O2}function gve(t){return new hr(e=>{const{stop:n}=Sc(XMLHttpRequest.prototype,"open",_ve),{stop:r}=Sc(XMLHttpRequest.prototype,"send",s=>{vve(s,t,e)},{computeHandlingStack:!0}),{stop:i}=Sc(XMLHttpRequest.prototype,"abort",yve);return()=>{n(),r(),i()}})}function _ve({target:t,parameters:[e,n]}){UN.set(t,{state:"open",method:String(e).toUpperCase(),url:AN(String(n))})}function vve({target:t,handlingStack:e},n,r){const i=UN.get(t);if(!i)return;const s=i;s.state="start",s.startClocks=ca(),s.isAborted=!1,s.xhr=t,s.handlingStack=e;let a=!1;const{stop:o}=Sc(t,"onreadystatechange",()=>{t.readyState===XMLHttpRequest.DONE&&l()}),l=()=>{if(c(),o(),a)return;a=!0;const f=i;f.state="complete",f.duration=Fs(s.startClocks.timeStamp,Us()),f.status=t.status,r.notify(f1(f))},{stop:c}=ri(n,t,"loadend",l);r.notify(s)}function yve({target:t}){const e=UN.get(t);e&&(e.isAborted=!0)}let P2;function pA(){return P2||(P2=Eve()),P2}function Eve(){return new hr(t=>{if(!window.fetch)return;const{stop:e}=Sc(window,"fetch",n=>Sve(n,t),{computeHandlingStack:!0});return e})}function Sve({parameters:t,onPostCall:e,handlingStack:n},r){const[i,s]=t;let a=s&&s.method;a===void 0&&i instanceof Request&&(a=i.method);const o=a!==void 0?String(a).toUpperCase():"GET",l=i instanceof Request?i.url:AN(String(i)),c=ca(),f={state:"start",init:s,input:i,method:o,startClocks:c,url:l,handlingStack:n};r.notify(f),t[0]=f.input,t[1]=f.init,e(p=>bve(r,p,f))}function bve(t,e,n){const r=n;function i(s){r.state="resolve",Object.assign(r,s),t.notify(r)}e.then(Pt(s=>{i({response:s,responseType:s.type,status:s.status,isAborted:!1})}),Pt(s=>{var a,o;i({status:0,isAborted:((o=(a=r.init)===null||a===void 0?void 0:a.signal)===null||o===void 0?void 0:o.aborted)||s instanceof DOMException&&s.code===DOMException.ABORT_ERR,error:s})}))}function wve(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){const n=window.requestIdleCallback(Pt(t),e);return()=>window.cancelIdleCallback(n)}return xve(t)}const Tve=50;function xve(t){const e=Pl(),n=aa(()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,Tve-(Pl()-e))})},0);return()=>Tl(n)}const Cve=Ua,Rve=30;function Mve(){const t=[];function e(r){let i;if(r.didTimeout){const s=performance.now();i=()=>Rve-(performance.now()-s)}else i=r.timeRemaining.bind(r);for(;i()>0&&t.length;)t.shift()();t.length&&n()}function n(){wve(e,{timeout:Cve})}return{push(r){t.push(r)===1&&n()}}}let L2={};function jH(t){const e=t.map(n=>(L2[n]||(L2[n]=Ave(n)),L2[n]));return Gj(...e)}function Ave(t){return new hr(e=>{const n=dc[t];return dc[t]=(...r)=>{n.apply(console,r);const i=n0();Fg(()=>{e.notify(Ive(r,t,i))})},()=>{dc[t]=n}})}function Ive(t,e,n){const r=t.map(s=>kve(s)).join(" ");let i;if(e===Ai.error){const s=t.find(af);i={stack:s?n_(Lc(s)):void 0,fingerprint:fH(s),causes:s?hH(s,"console"):void 0,startClocks:ca(),message:r,source:go.CONSOLE,handling:"handled",handlingStack:n}}return{api:e,message:r,error:i,handlingStack:n}}function kve(t){return typeof t=="string"?Yr(t):af(t)?cH(Lc(t)):t_(Yr(t),void 0,2)}function i0(t){let e={};const n=new hr,r={getContext:()=>hA(e),setContext:i=>{vp(i)==="object"?(e=Yr(i),t==null||t.updateCustomerData(e)):r.clearContext(),n.notify()},setContextProperty:(i,s)=>{e[i]=Yr(s),t==null||t.updateCustomerData(e),n.notify()},removeContextProperty:i=>{delete e[i],t==null||t.updateCustomerData(e),n.notify()},clearContext:()=>{e={},t==null||t.resetCustomerData(),n.notify()},changeObservable:n};return r}const Ove="_dd_c",Pve=[];function yR(t,e,n,r){const i=Lve(n,r);Pve.push(ri(t,window,"storage",({key:l})=>{i===l&&s()})),e.changeObservable.subscribe(a),e.setContext(Vo(o(),e.getContext()));function s(){e.setContext(o())}function a(){localStorage.setItem(i,JSON.stringify(e.getContext()))}function o(){const l=localStorage.getItem(i);return l!==null?JSON.parse(l):{}}}function Lve(t,e){return`${Ove}_${t}_${e}`}const Nve=3*Kd,Dve=16*Kd,Uve=200;function HH(t=2){const e=new Map;let n=!1;function r(i=0){if(n||t===0)return;const s=t===2?Nve:Dve;let a=i;e.forEach(o=>{a+=o.getBytesCount()}),a>s&&(Fve(s),n=!0)}return{createDetachedTracker:()=>{const i=dF(()=>r(i.getBytesCount()));return i},getOrCreateTracker:i=>(e.has(i)||e.set(i,dF(r)),e.get(i)),setCompressionStatus:i=>{t===0&&(t=i,r())},getCompressionStatus:()=>t,stop:()=>{e.forEach(i=>i.stop()),e.clear()}}}function dF(t){let e=0;const{throttled:n,cancel:r}=sw(s=>{e=TN(t_(s)),t()},Uve),i=()=>{r(),e=0};return{updateCustomerData:s=>{Ug(s)?i():n(s)},resetCustomerData:i,getBytesCount:()=>e,stop:()=>{r()}}}function Fve(t){Jn.warn(`Customer data exceeds the recommended ${t/Kd}KiB threshold. ${lA} ${Dj}/#customer-data-exceeds-the-recommended-threshold-warning`)}function VH(t,e,n){const r=t.getReader(),i=[];let s=0;a();function a(){r.read().then(Pt(l=>{if(l.done){o();return}n.collectStreamBody&&i.push(l.value),s+=l.value.length,s>n.bytesLimit?o():a()}),Pt(l=>e(l)))}function o(){r.cancel().catch(Mr);let l,c;if(n.collectStreamBody){let f;if(i.length===1)f=i[0];else{f=new Uint8Array(s);let p=0;i.forEach(m=>{f.set(m,p),p+=m.length})}l=f.slice(0,n.bytesLimit),c=f.length>n.bytesLimit}e(void 0,l,c)}}const Bve="datadog-synthetics-public-id",zve="datadog-synthetics-result-id",jve="datadog-synthetics-injects-rum";function mA(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||Ih(jve))}function GH(){const t=window._DATADOG_SYNTHETICS_PUBLIC_ID||Ih(Bve);return typeof t=="string"?t:void 0}function $H(){const t=window._DATADOG_SYNTHETICS_RESULT_ID||Ih(zve);return typeof t=="string"?t:void 0}function FN(t){const e=vp(t);return e==="string"||e==="function"||t instanceof RegExp}function WH(t,e,n=!1){return t.some(r=>{try{if(typeof r=="function")return r(e);if(r instanceof RegExp)return r.test(e);if(typeof r=="string")return n?e.startsWith(r):r===e}catch(i){Jn.error(i)}return!1})}function Hve(t,e,n){return{context:t.getContext(),user:e.getContext(),hasReplay:n.isRecording()?!0:void 0}}function Vve(){return{vitalsByName:new Map,vitalsByReference:new WeakMap}}function Gve(t,e,n){function r(s){return!e.wasInPageStateDuringPeriod("frozen",s.startClocks.relative,s.duration)}function i(s){r(s)&&t.notify(12,Wve(s))}return{addDurationVital:i,startDurationVital:(s,a={})=>qH(n,s,a),stopDurationVital:(s,a={})=>{XH(i,n,s,a)}}}function qH({vitalsByName:t,vitalsByReference:e},n,r={}){const i={name:n,startClocks:ca(),context:r.context,description:r.description},s={__dd_vital_reference:!0};return t.set(n,i),e.set(s,i),s}function XH(t,{vitalsByName:e,vitalsByReference:n},r,i={}){const s=typeof r=="string"?e.get(r):n.get(r);s&&(t($ve(s,s.startClocks,i,ca())),typeof r=="string"?e.delete(r):n.delete(r))}function $ve(t,e,n,r){var i;return{name:t.name,type:"duration",startClocks:e,duration:Fs(e.timeStamp,r.timeStamp),context:Vo(t.context,n.context),description:(i=n.description)!==null&&i!==void 0?i:t.description}}function Wve(t,e){const n={date:t.startClocks.timeStamp,vital:{id:da(),type:t.type,name:t.name,duration:_n(t.duration),description:t.description},type:"vital"};return n._dd={vital:{computed_value:!0}},{rawRumEvent:n,startTime:t.startClocks.relative,customerContext:t.context,domainContext:{}}}function KH(t,e,n){if(t)for(const r of t){const i=r[e];i&&i(n)}}function YH(){return window.crypto||window.msCrypto}function qve(){return JH(64)}function ZH(){return JH(63)}let N2;function JH(t){return N2||(N2=m1(tp.CONSISTENT_TRACE_SAMPLING)&&Xve()?Kve:Yve),N2(t)}function Xve(){try{return crypto.getRandomValues(new BigUint64Array(1)),!0}catch{return!1}}function Kve(t){let e=crypto.getRandomValues(new BigUint64Array(1))[0];return t===63&&(e>>=BigInt("1")),e}function Yve(t){const e=YH().getRandomValues(new Uint32Array(2));return t===63&&(e[e.length-1]>>>=1),{toString(n=10){let r=e[1],i=e[0],s="";do{const a=r%n*4294967296+i;r=Math.floor(r/n),i=Math.floor(a/n),s=(a%n).toString(n)+s}while(r||i);return s}}}function Uv(t){const e=t.toString(16);return Array(17-e.length).join("0")+e}function Zve(t,e){if(e===100)return!0;if(e===0)return!1;if(typeof t!="bigint")return Bh(e);const n=BigInt("1111111111111111111"),r=BigInt("0x10000000000000000"),i=t*n%r;return Number(i)<=e/100*Number(r)}function Jve(t){const e=t;return vp(e)==="object"&&FN(e.match)&&Array.isArray(e.propagatorTypes)}function Qve(t){t.status===0&&!t.isAborted&&(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}function eye(t,e){return{clearTracingIfNeeded:Qve,traceFetch:n=>fF(t,n,e,r=>{var i;if(n.input instanceof Request&&!(!((i=n.init)===null||i===void 0)&&i.headers))n.input=new Request(n.input),Object.keys(r).forEach(s=>{n.input.headers.append(s,r[s])});else{n.init=f1(n.init);const s=[];n.init.headers instanceof Headers?n.init.headers.forEach((a,o)=>{s.push([o,a])}):Array.isArray(n.init.headers)?n.init.headers.forEach(a=>{s.push(a)}):n.init.headers&&Object.keys(n.init.headers).forEach(a=>{s.push([a,n.init.headers[a]])}),n.init.headers=s.concat(CN(r))}}),traceXhr:(n,r)=>fF(t,n,e,i=>{Object.keys(i).forEach(s=>{r.setRequestHeader(s,i[s])})})}}function fF(t,e,n,r){if(!tye()||!n.findTrackedSession())return;const i=t.allowedTracingUrls.find(o=>WH([o.match],e.url,!0));if(!i)return;const s=qve();e.traceSampled=Zve(s,t.traceSampleRate),(e.traceSampled||t.traceContextInjection===yP.ALL)&&(e.traceId=s,e.spanId=ZH(),r(nye(e.traceId,e.spanId,e.traceSampled,i.propagatorTypes)))}function tye(){return YH()!==void 0}function nye(t,e,n,r){const i={};return r.forEach(s=>{switch(s){case"datadog":{Object.assign(i,{"x-datadog-origin":"rum","x-datadog-parent-id":e.toString(),"x-datadog-sampling-priority":n?"1":"0","x-datadog-trace-id":t.toString()});break}case"tracecontext":{Object.assign(i,{traceparent:`00-0000000000000000${Uv(t)}-${Uv(e)}-0${n?"1":"0"}`,tracestate:`dd=s:${n?"1":"0"};o:rum`});break}case"b3":{Object.assign(i,{b3:`${Uv(t)}-${Uv(e)}-${n?"1":"0"}`});break}case"b3multi":{Object.assign(i,{"X-B3-TraceId":Uv(t),"X-B3-SpanId":Uv(e),"X-B3-Sampled":n?"1":"0"});break}}}),i}const QH=["tracecontext","datadog"];function rye(t){var e,n,r,i,s,a;if(t.trackFeatureFlagsForEvents!==void 0&&!Array.isArray(t.trackFeatureFlagsForEvents)&&Jn.warn("trackFeatureFlagsForEvents should be an array"),!t.applicationId){Jn.error("Application ID is not configured, no RUM data will be collected.");return}if(!uy(t.sessionReplaySampleRate,"Session Replay")||!uy(t.traceSampleRate,"Trace"))return;if(t.excludedActivityUrls!==void 0&&!Array.isArray(t.excludedActivityUrls)){Jn.error("Excluded Activity Urls should be an array");return}const o=iye(t);if(!o)return;const l=aH(t);if(!l)return;const c=(e=t.sessionReplaySampleRate)!==null&&e!==void 0?e:0;return{applicationId:t.applicationId,version:t.version||void 0,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:c,startSessionReplayRecordingManually:t.startSessionReplayRecordingManually!==void 0?!!t.startSessionReplayRecordingManually:c===0,traceSampleRate:(n=t.traceSampleRate)!==null&&n!==void 0?n:100,rulePsr:rw(t.traceSampleRate)?t.traceSampleRate/100:void 0,allowedTracingUrls:o,excludedActivityUrls:(r=t.excludedActivityUrls)!==null&&r!==void 0?r:[],workerUrl:t.workerUrl,compressIntakeRequests:!!t.compressIntakeRequests,trackUserInteractions:!!(!((i=t.trackUserInteractions)!==null&&i!==void 0)||i),trackViewsManually:!!t.trackViewsManually,trackResources:!!(!((s=t.trackResources)!==null&&s!==void 0)||s),trackLongTasks:!!(!((a=t.trackLongTasks)!==null&&a!==void 0)||a),subdomain:t.subdomain,defaultPrivacyLevel:dR(Rb,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:Rb.MASK,enablePrivacyForActionName:!!t.enablePrivacyForActionName,customerDataTelemetrySampleRate:1,traceContextInjection:dR(yP,t.traceContextInjection)?t.traceContextInjection:yP.SAMPLED,plugins:t.plugins||[],trackFeatureFlagsForEvents:t.trackFeatureFlagsForEvents||[],...l}}function iye(t){if(t.allowedTracingUrls===void 0)return[];if(!Array.isArray(t.allowedTracingUrls)){Jn.error("Allowed Tracing URLs should be an array");return}if(t.allowedTracingUrls.length!==0&&t.service===void 0){Jn.error("Service needs to be configured when tracing is enabled");return}const e=[];return t.allowedTracingUrls.forEach(n=>{FN(n)?e.push({match:n,propagatorTypes:QH}):Jve(n)?e.push(n):Jn.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)}),e}function sye(t){const e=new Set;return Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0&&t.allowedTracingUrls.forEach(n=>{FN(n)?QH.forEach(r=>e.add(r)):vp(n)==="object"&&Array.isArray(n.propagatorTypes)&&n.propagatorTypes.forEach(r=>e.add(r))}),Array.from(e)}function aye(t){var e;const n=oH(t);return{session_replay_sample_rate:t.sessionReplaySampleRate,start_session_replay_recording_manually:t.startSessionReplayRecordingManually,trace_sample_rate:t.traceSampleRate,trace_context_injection:t.traceContextInjection,action_name_attribute:t.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0,selected_tracing_propagators:sye(t),default_privacy_level:t.defaultPrivacyLevel,enable_privacy_for_action_name:t.enablePrivacyForActionName,use_excluded_activity_urls:Array.isArray(t.excludedActivityUrls)&&t.excludedActivityUrls.length>0,use_worker_url:!!t.workerUrl,compress_intake_requests:t.compressIntakeRequests,track_views_manually:t.trackViewsManually,track_user_interactions:t.trackUserInteractions,track_resources:t.trackResources,track_long_task:t.trackLongTasks,plugins:(e=t.plugins)===null||e===void 0?void 0:e.map(r=>{var i;return{name:r.name,...(i=r.getConfigurationTelemetry)===null||i===void 0?void 0:i.call(r)}}),track_feature_flags_for_events:t.trackFeatureFlagsForEvents,...n}}const oye="v1";function lye(t,e){cye(t,n=>{e(uye(t,n))})}function uye(t,e){return{...t,...e}}function cye(t,e){const n=new XMLHttpRequest;ri(t,n,"load",function(){if(n.status===200){const r=JSON.parse(n.responseText);e(r.rum)}else hF()}),ri(t,n,"error",function(){hF()}),n.open("GET",dye(t)),n.send()}function dye(t){return`https://sdk-configuration.${iH("rum",t)}/${oye}/${encodeURIComponent(t.remoteConfigurationId)}.json`}function hF(){Jn.error("Error fetching the remote configuration.")}function fye({ignoreInitIfSyntheticsWillInjectRum:t,startDeflateWorker:e},n,r,i,s){const a=LN();let o,l,c,f;const p=r.observable.subscribe(_),m={};function _(){if(!c||!f||!r.isGranted())return;p.unsubscribe();let w;if(f.trackViewsManually){if(!o)return;a.remove(o.callback),w=o.options}const R=s(f,l,w);a.drain(R)}function y(w){const R=Mc();if(R&&(w=hye(w)),c=w,CH(aye(w)),f){fA("DD_RUM",w);return}const C=rye(w);if(C){if(!R&&!C.sessionStoreStrategyType){Jn.warn("No storage available for session. We will not send any data.");return}C.compressIntakeRequests&&!R&&e&&(l=e(C,"Datadog RUM",Mr),!l)||(f=C,pA().subscribe(Mr),r.tryToInit(C.trackingConsent),_())}}const E=w=>{a.add(R=>R.addDurationVital(w))};return{init(w,R){if(!w){Jn.error("Missing configuration");return}lH(w.enableExperimentalFeatures),c=w,!(t&&mA())&&(KH(w.plugins,"onInit",{initConfiguration:w,publicApi:R}),w.remoteConfigurationId&&m1(tp.REMOTE_CONFIGURATION)?lye(w,y):y(w))},get initConfiguration(){return c},getInternalContext:Mr,stopSession:Mr,addTiming(w,R=Us()){a.add(C=>C.addTiming(w,R))},startView(w,R=ca()){const C=k=>{k.startView(w,R)};a.add(C),o||(o={options:w,callback:C},_())},setViewName(w){a.add(R=>R.setViewName(w))},setViewContext(w){a.add(R=>R.setViewContext(w))},setViewContextProperty(w,R){a.add(C=>C.setViewContextProperty(w,R))},getViewContext:()=>m,addAction(w,R=n()){a.add(C=>C.addAction(w,R))},addError(w,R=n()){a.add(C=>C.addError(w,R))},addFeatureFlagEvaluation(w,R){a.add(C=>C.addFeatureFlagEvaluation(w,R))},startDurationVital(w,R){return qH(i,w,R)},stopDurationVital(w,R){XH(E,i,w,R)},addDurationVital:E}}function hye(t){var e,n;return{...t,applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100,defaultPrivacyLevel:(e=t.defaultPrivacyLevel)!==null&&e!==void 0?e:(n=i_())===null||n===void 0?void 0:n.getPrivacyLevel()}}const pF="rum";function pye(t,e,n={}){const r=HH(0),i=i0(r.getOrCreateTracker(2)),s=i0(r.getOrCreateTracker(1)),a=nH(),o=Vve();function l(){return Hve(i,s,e)}let c=fye(n,l,a,o,(m,_,y)=>{m.storeContextsAcrossPages&&(yR(m,i,pF,2),yR(m,s,pF,1)),r.setCompressionStatus(_?1:2);const E=t(m,e,r,l,y,_&&n.createDeflateEncoder?S=>n.createDeflateEncoder(m,_,S):g1,a,o);return e.onRumStart(E.lifeCycle,m,E.session,E.viewHistory,_),c=mye(c,E),KH(m.plugins,"onRumStart",{strategy:c}),E});const f=Pt(m=>{const _=typeof m=="object"?m:{name:m};_.context&&r.getOrCreateTracker(3).updateCustomerData(_.context),c.startView(_),Yi({feature:"start-view"})}),p=mH({init:Pt(m=>{c.init(m,p)}),setTrackingConsent:Pt(m=>{a.update(m),Yi({feature:"set-tracking-consent",tracking_consent:m})}),setViewName:Pt(m=>{c.setViewName(m),Yi({feature:"set-view-name"})}),setViewContext:Pt(m=>{c.setViewContext(m),Yi({feature:"set-view-context"})}),setViewContextProperty:Pt((m,_)=>{c.setViewContextProperty(m,_),Yi({feature:"set-view-context-property"})}),getViewContext:Pt(()=>(Yi({feature:"set-view-context-property"}),c.getViewContext())),setGlobalContext:Pt(m=>{i.setContext(m),Yi({feature:"set-global-context"})}),getGlobalContext:Pt(()=>i.getContext()),setGlobalContextProperty:Pt((m,_)=>{i.setContextProperty(m,_),Yi({feature:"set-global-context"})}),removeGlobalContextProperty:Pt(m=>i.removeContextProperty(m)),clearGlobalContext:Pt(()=>i.clearContext()),getInternalContext:Pt(m=>c.getInternalContext(m)),getInitConfiguration:Pt(()=>hA(c.initConfiguration)),addAction:(m,_)=>{const y=n0();Fg(()=>{c.addAction({name:Yr(m),context:Yr(_),startClocks:ca(),type:"custom",handlingStack:y}),Yi({feature:"add-action"})})},addError:(m,_)=>{const y=n0();Fg(()=>{c.addError({error:m,handlingStack:y,context:Yr(_),startClocks:ca()}),Yi({feature:"add-error"})})},addTiming:Pt((m,_)=>{c.addTiming(Yr(m),_)}),setUser:Pt(m=>{Xj(m)&&s.setContext(mR(m)),Yi({feature:"set-user"})}),getUser:Pt(()=>s.getContext()),setUserProperty:Pt((m,_)=>{const y=mR({[m]:_})[m];s.setContextProperty(m,y),Yi({feature:"set-user"})}),removeUserProperty:Pt(m=>s.removeContextProperty(m)),clearUser:Pt(()=>s.clearContext()),startView:f,stopSession:Pt(()=>{c.stopSession(),Yi({feature:"stop-session"})}),addFeatureFlagEvaluation:Pt((m,_)=>{c.addFeatureFlagEvaluation(Yr(m),Yr(_)),Yi({feature:"add-feature-flag-evaluation"})}),getSessionReplayLink:Pt(()=>e.getSessionReplayLink()),startSessionReplayRecording:Pt(m=>{e.start(m),Yi({feature:"start-session-replay-recording",force:m&&m.force})}),stopSessionReplayRecording:Pt(()=>e.stop()),addDurationVital:Pt((m,_)=>{Yi({feature:"add-duration-vital"}),c.addDurationVital({name:Yr(m),type:"duration",startClocks:sge(_.startTime),duration:_.duration,context:Yr(_&&_.context),description:Yr(_&&_.description)})}),startDurationVital:Pt((m,_)=>(Yi({feature:"start-duration-vital"}),c.startDurationVital(Yr(m),{context:Yr(_&&_.context),description:Yr(_&&_.description)}))),stopDurationVital:Pt((m,_)=>{Yi({feature:"stop-duration-vital"}),c.stopDurationVital(typeof m=="string"?Yr(m):m,{context:Yr(_&&_.context),description:Yr(_&&_.description)})})});return p}function mye(t,e){return{init:n=>{fA("DD_RUM",n)},initConfiguration:t.initConfiguration,...e}}function gye(){const t=_ye();return new hr(e=>{if(!t)return;const n=new t(Pt(()=>e.notify()));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),()=>n.disconnect()})}function _ye(){let t;const e=window;if(e.Zone&&(t=ep(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){const n=new e.MutationObserver(Mr),r=ep(n,"originalInstance");t=r&&r.constructor}return t||(t=e.MutationObserver),t}function vye(){const t=new hr,{stop:e}=Sc(window,"open",()=>t.notify());return{observable:t,stop:e}}function yye(){const t=GH(),e=$H();if(t&&e)return{test_id:t,result_id:e,injected:mA()}}function Eye(t,e,n){const r=hA(t),i=n(r);return CN(e).forEach(([s,a])=>{const o=Sye(r,s),l=vp(o);l===a?mF(t,s,Yr(o)):a==="object"&&(l==="undefined"||l==="null")&&mF(t,s,{})}),i}function Sye(t,e){let n=t;for(const r of e.split(".")){if(!bye(n,r))return;n=n[r]}return n}function mF(t,e,n){let r=t;const i=e.split(".");for(let s=0;s<i.length;s+=1){const a=i[s];if(!eV(r))return;s!==i.length-1?r=r[a]:r[a]=n}}function eV(t){return vp(t)==="object"}function bye(t,e){return eV(t)&&Object.prototype.hasOwnProperty.call(t,e)}const Fv={"view.name":"string","view.url":"string","view.referrer":"string"},Bv={context:"object"},D2={service:"string",version:"string"};let tV;function wye(t,e,n,r,i,s,a,o,l,c,f){tV={view:{...Bv,...Fv},error:{"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string",...Bv,...Fv,...D2},resource:{"resource.url":"string",...m1(tp.WRITABLE_RESOURCE_GRAPHQL)?{"resource.graphql":"object"}:{},...Bv,...Fv,...D2},action:{"action.target.name":"string",...Bv,...Fv,...D2},long_task:{...Bv,...Fv},vital:{...Bv,...Fv}};const p={error:fC("error",t.eventRateLimiterThreshold,f),action:fC("action",t.eventRateLimiterThreshold,f),vital:fC("vital",t.eventRateLimiterThreshold,f)},m=yye();e.subscribe(12,({startTime:_,rawRumEvent:y,domainContext:E,savedCommonContext:S,customerContext:w})=>{const R=r.findView(_),C=i.findUrl(_),k=n.findTrackedSession(_);if(k&&R&&!C&&m1(tp.MISSING_URL_CONTEXT_TELEMETRY)&&r_("Missing URL entry",{debug:{eventType:y.type,startTime:_,urlEntries:i.getAllEntries(),urlDeletedEntries:i.getDeletedEntries(),viewEntries:r.getAllEntries(),viewDeletedEntries:r.getDeletedEntries()}}),k&&R&&C){const M=S||c(),N=s.findActionId(_),O={_dd:{format_version:2,drift:oge(),configuration:{session_sample_rate:cR(t.sessionSampleRate,3),session_replay_sample_rate:cR(t.sessionReplaySampleRate,3)},browser_sdk_version:Mc()?"6.2.1":void 0},application:{id:t.applicationId},date:Us(),service:R.service||t.service,version:R.version||t.version,source:"browser",session:{id:k.id,type:m?"synthetics":o.get()?"ci_test":"user"},view:{id:R.id,name:R.name,url:C.url,referrer:C.referrer},feature_flags:Cye(y,_,t.trackFeatureFlagsForEvents,l),action:xye(y)&&N?{id:N}:void 0,synthetics:m,ci_test:o.get(),display:a.get(),connectivity:EH()},D=Vo(O,y);D.context=Vo(M.context,R.context,w),"has_replay"in D.session||(D.session.has_replay=M.hasReplay),D.type==="view"&&(D.session.sampled_for_replay=k.sessionReplay===1),k.anonymousId&&!M.user.anonymous_id&&t.trackAnonymousUser&&(M.user.anonymous_id=k.anonymousId),Ug(M.user)||(D.usr=M.user),Tye(D,t.beforeSend,E,p)&&(Ug(D.context)&&delete D.context,e.notify(13,D))}})}function Tye(t,e,n,r){var i;if(e){const a=Eye(t,tV[t.type],o=>e(o,n));if(a===!1&&t.type!=="view")return!1;a===!1&&Jn.warn("Can't dismiss view events using beforeSend!")}return!((i=r[t.type])===null||i===void 0?void 0:i.isLimitReached())}function xye(t){return["error","resource","long_task"].indexOf(t.type)!==-1}function Cye(t,e,n,r){const i=t.type==="view"||t.type==="error",s=n.includes(t.type);if(i||s){const a=r.findFeatureFlagEvaluations(e);if(a&&!Ug(a))return a}}function Rye(t,e,n,r,i){return{get:s=>{const a=n.findView(s),o=i.findUrl(s),l=e.findTrackedSession(s);if(l&&a&&o){const c=r.findActionId(s);return{application_id:t,session_id:l.id,user_action:c?{id:c}:void 0,view:{id:a.id,name:a.name,referrer:o.referrer,url:o.url}}}}}}const Mye=BH,Aye=e_;function Iye(t){const e=x0({expireDelay:Aye});t.subscribe(1,r=>{e.add(n(r),r.startClocks.relative)}),t.subscribe(6,({endClocks:r})=>{e.closeActive(r.relative)}),t.subscribe(3,r=>{const i=e.find(r.startClocks.relative);i&&r.name&&(i.name=r.name),i&&r.context&&(i.context=r.context)}),t.subscribe(10,()=>{e.reset()});function n(r){return{service:r.service,version:r.version,context:r.context,id:r.id,name:r.name,startClocks:r.startClocks}}return{findView:r=>e.find(r),getAllEntries:()=>e.getAllEntries(),getDeletedEntries:()=>e.getDeletedEntries(),stop:()=>{e.stop()}}}const nV="initial_document",kye=[["document",t=>nV===t],["xhr",t=>t==="xmlhttprequest"],["fetch",t=>t==="fetch"],["beacon",t=>t==="beacon"],["css",(t,e)=>/\.css$/i.test(e)],["js",(t,e)=>/\.js$/i.test(e)],["image",(t,e)=>["image","img","icon"].includes(t)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)!==null],["font",(t,e)=>/\.(woff|eot|woff2|ttf)$/i.exec(e)!==null],["media",(t,e)=>["audio","video"].includes(t)||/\.(mp3|mp4)$/i.exec(e)!==null]];function Oye(t){const e=t.name;if(!Wge(e))return r_(`Failed to construct URL for "${t.name}"`),"other";const n=qge(e);for(const[r,i]of kye)if(i(t.initiatorType,n))return r;return"other"}function gF(...t){for(let e=1;e<t.length;e+=1)if(t[e-1]>t[e])return!1;return!0}function Pye(t){return t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch"}function Lye(t){const{duration:e,startTime:n,responseEnd:r}=t;return e===0&&n<r?_n(Fs(n,r)):_n(e)}function Nye(t){if(!iV(t))return;const{startTime:e,fetchStart:n,workerStart:r,redirectStart:i,redirectEnd:s,domainLookupStart:a,domainLookupEnd:o,connectStart:l,secureConnectionStart:c,connectEnd:f,requestStart:p,responseStart:m,responseEnd:_}=t,y={download:mm(e,m,_),first_byte:mm(e,p,m)};return 0<r&&r<n&&(y.worker=mm(e,r,n)),n<f&&(y.connect=mm(e,l,f),l<=c&&c<=f&&(y.ssl=mm(e,c,f))),n<o&&(y.dns=mm(e,a,o)),e<s&&(y.redirect=mm(e,i,s)),y}function rV(t){return t.duration>=0}function iV(t){const e=gF(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd),n=Dye(t)?gF(t.startTime,t.redirectStart,t.redirectEnd,t.fetchStart):!0;return e&&n}function Dye(t){return t.redirectEnd>t.startTime}function mm(t,e,n){if(t<=e&&e<=n)return{duration:_n(Fs(e,n)),start:_n(Fs(t,e))}}function sV(t){return t.nextHopProtocol===""?void 0:t.nextHopProtocol}function aV(t){return t.deliveryType===""?"other":t.deliveryType}function Uye(t){if(t.startTime<t.responseStart){const{encodedBodySize:e,decodedBodySize:n,transferSize:r}=t;return{size:n,encoded_body_size:e,decoded_body_size:n,transfer_size:r}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function BN(t){return t&&!sH(t)}const Fye=/data:(.+)?(;base64)?,/g,_F=24e3;function Bye(t){return t.length<=_F?!1:t.substring(0,5)==="data:"?(t=t.substring(0,_F),!0):!1}function zye(t){return`${t.match(Fye)[0]}[...]`}let vF=1;function jye(t,e,n){const r=eye(e,n);Hye(t,e,r),Vye(t,r)}function Hye(t,e,n){const r=zH(e).subscribe(i=>{const s=i;if(BN(s.url))switch(s.state){case"start":n.traceXhr(s,s.xhr),s.requestIndex=oV(),t.notify(7,{requestIndex:s.requestIndex,url:s.url});break;case"complete":n.clearTracingIfNeeded(s),t.notify(8,{duration:s.duration,method:s.method,requestIndex:s.requestIndex,spanId:s.spanId,startClocks:s.startClocks,status:s.status,traceId:s.traceId,traceSampled:s.traceSampled,type:"xhr",url:s.url,xhr:s.xhr,isAborted:s.isAborted,handlingStack:s.handlingStack});break}});return{stop:()=>r.unsubscribe()}}function Vye(t,e){const n=pA().subscribe(r=>{const i=r;if(BN(i.url))switch(i.state){case"start":e.traceFetch(i),i.requestIndex=oV(),t.notify(7,{requestIndex:i.requestIndex,url:i.url});break;case"resolve":Gye(i,s=>{e.clearTracingIfNeeded(i),t.notify(8,{duration:s,method:i.method,requestIndex:i.requestIndex,responseType:i.responseType,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:"fetch",url:i.url,response:i.response,init:i.init,input:i.input,isAborted:i.isAborted,handlingStack:i.handlingStack})});break}});return{stop:()=>n.unsubscribe()}}function oV(){const t=vF;return vF+=1,t}function Gye(t,e){const n=t.response&&AH(t.response);!n||!n.body?e(Fs(t.startClocks.timeStamp,Us())):VH(n.body,()=>{e(Fs(t.startClocks.timeStamp,Us()))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1})}function lV(t){return rw(t)&&t<0?void 0:t}function uV({lifeCycle:t,isChildEvent:e,onChange:n=Mr}){const r={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},i=t.subscribe(13,s=>{var a;if(!(s.type==="view"||s.type==="vital"||!e(s)))switch(s.type){case"error":r.errorCount+=1,n();break;case"action":r.actionCount+=1,s.action.frustration&&(r.frustrationCount+=s.action.frustration.type.length),n();break;case"long_task":r.longTaskCount+=1,n();break;case"resource":!((a=s._dd)===null||a===void 0)&&a.discarded||(r.resourceCount+=1,n());break}});return{stop:()=>{i.unsubscribe()},eventCounts:r}}function $ye(t,e){const n=Pl();let r=!1;const{stop:i}=np(t,window,["click","mousedown","keydown","touchstart","pointerdown"],o=>{if(!o.cancelable)return;const l={entryType:"first-input",processingStart:Ll(),processingEnd:Ll(),startTime:o.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:()=>({})};o.type==="pointerdown"?s(t,l):a(l)},{passive:!0,capture:!0});return{stop:i};function s(o,l){np(o,window,["pointerup","pointercancel"],c=>{c.type==="pointerup"&&a(l)},{once:!0})}function a(o){if(!r){r=!0,i();const l=o.processingStart-o.startTime;l>=0&&l<Pl()-n&&e(o)}}}var Lr;(function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.LONG_ANIMATION_FRAME="long-animation-frame",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource"})(Lr||(Lr={}));function Ac(t,e){return new hr(n=>{if(!window.PerformanceObserver)return;const r=l=>{const c=Xye(l);c.length>0&&n.notify(c)};let i,s=!0;const a=new PerformanceObserver(Pt(l=>{s?i=aa(()=>r(l.getEntries())):r(l.getEntries())}));try{a.observe(e)}catch{if([Lr.RESOURCE,Lr.NAVIGATION,Lr.LONG_TASK,Lr.PAINT].includes(e.type)){e.buffered&&(i=aa(()=>r(performance.getEntriesByType(e.type))));try{a.observe({entryTypes:[e.type]})}catch{return}}}s=!1,Wye(t);let o;return!gA(Lr.FIRST_INPUT)&&e.type===Lr.FIRST_INPUT&&({stop:o}=$ye(t,l=>{r([l])})),()=>{a.disconnect(),o&&o(),Tl(i)}})}let uS;function Wye(t){return!uS&&qye()&&"addEventListener"in performance&&(uS=ri(t,performance,"resourcetimingbufferfull",()=>{performance.clearResourceTimings()})),()=>{uS==null||uS.stop()}}function qye(){return window.performance!==void 0&&"getEntries"in performance}function gA(t){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.includes(t)}function Xye(t){return t.filter(e=>!Kye(e))}function Kye(t){return t.entryType===Lr.RESOURCE&&(!BN(t.name)||!rV(t))}const cV=100,Yye=100;function zN(t,e,n,r,i,s){const a=Jye(t,e,n,r);return Zye(a,i,s)}function Zye(t,e,n){let r,i=!1;const s=aa(Pt(()=>c({hadActivity:!1})),cV),a=n!==void 0?aa(Pt(()=>c({hadActivity:!0,end:Us()})),n):void 0,o=t.subscribe(({isBusy:f})=>{Tl(s),Tl(r);const p=Us();f||(r=aa(Pt(()=>c({hadActivity:!0,end:p})),Yye))}),l=()=>{i=!0,Tl(s),Tl(r),Tl(a),o.unsubscribe()};function c(f){i||(l(),e(f))}return{stop:l}}function Jye(t,e,n,r){return new hr(i=>{const s=[];let a,o=0;return s.push(e.subscribe(l),n.subscribe(l),Ac(r,{type:Lr.RESOURCE}).subscribe(c=>{c.some(f=>!U2(r,f.name))&&l()}),t.subscribe(7,c=>{U2(r,c.url)||(a===void 0&&(a=c.requestIndex),o+=1,l())}),t.subscribe(8,c=>{U2(r,c.url)||a===void 0||c.requestIndex<a||(o-=1,l())})),()=>{s.forEach(c=>c.unsubscribe())};function l(){i.notify({isBusy:o>0})}})}function U2(t,e){return WH(t.excludedActivityUrls,e)}function dV(t){return t.nodeType===Node.TEXT_NODE}function Qye(t){return t.nodeType===Node.COMMENT_NODE}function C0(t){return t.nodeType===Node.ELEMENT_NODE}function fV(t){return C0(t)&&!!t.shadowRoot}function e0e(t){const e=t;return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&C0(e.host)}function aFe(t){return t.childNodes.length>0||fV(t)}function oFe(t,e){let n=t.firstChild;for(;n;)e(n),n=n.nextSibling;fV(t)&&e(t.shadowRoot)}function t0e(t){return e0e(t)?t.host:t.parentNode}const yr={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:Rb.ALLOW,MASK:Rb.MASK,MASK_USER_INPUT:Rb.MASK_USER_INPUT},n0e="data-dd-privacy",lFe="hidden",r0e="dd-privacy-",F2="***",uFe="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",i0e={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0},s0e="x";function hV(t,e,n){if(n&&n.has(t))return n.get(t);const r=t0e(t),i=r?hV(r,e,n):e,s=o0e(t),a=a0e(s,i);return n&&n.set(t,a),a}function a0e(t,e){switch(e){case yr.HIDDEN:case yr.IGNORE:return e}switch(t){case yr.ALLOW:case yr.MASK:case yr.MASK_USER_INPUT:case yr.HIDDEN:case yr.IGNORE:return t;default:return e}}function o0e(t){if(C0(t)){if(t.tagName==="BASE")return yr.ALLOW;if(t.tagName==="INPUT"){const e=t;if(e.type==="password"||e.type==="email"||e.type==="tel"||e.type==="hidden")return yr.MASK;const n=e.getAttribute("autocomplete");if(n&&(n.startsWith("cc-")||n.endsWith("-password")))return yr.MASK}if(t.matches(cy(yr.HIDDEN)))return yr.HIDDEN;if(t.matches(cy(yr.MASK)))return yr.MASK;if(t.matches(cy(yr.MASK_USER_INPUT)))return yr.MASK_USER_INPUT;if(t.matches(cy(yr.ALLOW)))return yr.ALLOW;if(c0e(t))return yr.IGNORE}}function l0e(t,e){switch(e){case yr.MASK:case yr.HIDDEN:case yr.IGNORE:return!0;case yr.MASK_USER_INPUT:return dV(t)?yF(t.parentNode):yF(t);default:return!1}}function yF(t){if(!t||t.nodeType!==t.ELEMENT_NODE)return!1;const e=t;if(e.tagName==="INPUT")switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!i0e[e.tagName]}const u0e=t=>t.replace(/\S/g,s0e);function cFe(t,e,n){var r;const i=(r=t.parentElement)===null||r===void 0?void 0:r.tagName;let s=t.textContent||"";if(e&&!s.trim())return;const a=n;if(i==="SCRIPT")s=F2;else if(a===yr.HIDDEN)s=F2;else if(l0e(t,a))if(i==="DATALIST"||i==="SELECT"||i==="OPTGROUP"){if(!s.trim())return}else i==="OPTION"?s=F2:s=u0e(s);return s}function c0e(t){if(t.nodeName==="SCRIPT")return!0;if(t.nodeName==="LINK"){const n=e("rel");return/preload|prefetch/i.test(n)&&e("as")==="script"||n==="shortcut icon"||n==="icon"}if(t.nodeName==="META"){const n=e("name"),r=e("rel"),i=e("property");return/^msapplication-tile(image|color)$/.test(n)||n==="application-name"||r==="icon"||r==="apple-touch-icon"||r==="shortcut icon"||n==="keywords"||n==="description"||/^(og|twitter|fb):/.test(i)||/^(og|twitter):/.test(n)||n==="pinterest"||n==="robots"||n==="googlebot"||n==="bingbot"||t.hasAttribute("http-equiv")||n==="author"||n==="generator"||n==="framework"||n==="publisher"||n==="progid"||/^article:/.test(i)||/^product:/.test(i)||n==="google-site-verification"||n==="yandex-verification"||n==="csrf-token"||n==="p:domain_verify"||n==="verify-v1"||n==="verification"||n==="shopify-checkout-api-token"}function e(n){return(t.getAttribute(n)||"").toLowerCase()}return!1}function cy(t){return`[${n0e}="${t}"], .${r0e}${t}`}const jN="data-dd-action-name",d0e="Masked Element";function f0e(t,{enablePrivacyForActionName:e,actionNameAttribute:n},r){const i=EF(t,jN)||n&&EF(t,n);return i?{name:i,nameSource:"custom_attribute"}:r===yr.MASK?{name:d0e,nameSource:"mask_placeholder"}:SF(t,n,h0e,e)||SF(t,n,p0e,e)||{name:"",nameSource:"blank"}}function EF(t,e){const n=t.closest(`[${e}]`);if(!n)return;const r=n.getAttribute(e);return mV(pV(r.trim()))}const h0e=[(t,e)=>{if("labels"in t&&t.labels&&t.labels.length>0)return hC(t.labels[0],e)},t=>{if(t.nodeName==="INPUT"){const e=t,n=e.getAttribute("type");if(n==="button"||n==="submit"||n==="reset")return{name:e.value,nameSource:"text_content"}}},(t,e,n)=>{if(t.nodeName==="BUTTON"||t.nodeName==="LABEL"||t.getAttribute("role")==="button")return hC(t,e,n)},t=>cS(t,"aria-label"),(t,e,n)=>{const r=t.getAttribute("aria-labelledby");if(r)return{name:r.split(/\s+/).map(i=>g0e(t,i)).filter(i=>!!i).map(i=>gV(i,e,n)).join(" "),nameSource:"text_content"}},t=>cS(t,"alt"),t=>cS(t,"name"),t=>cS(t,"title"),t=>cS(t,"placeholder"),(t,e)=>{if("options"in t&&t.options.length>0)return hC(t.options[0],e)}],p0e=[(t,e,n)=>hC(t,e,n)],m0e=10;function SF(t,e,n,r){let i=t,s=0;for(;s<=m0e&&i&&i.nodeName!=="BODY"&&i.nodeName!=="HTML"&&i.nodeName!=="HEAD";){for(const a of n){const o=a(i,e,r);if(o){const{name:l,nameSource:c}=o,f=l&&l.trim();if(f)return{name:mV(pV(f)),nameSource:c}}}if(i.nodeName==="FORM")break;i=i.parentElement,s+=1}}function pV(t){return t.replace(/\s+/g," ")}function mV(t){return t.length>100?`${$j(t,100)} [...]`:t}function g0e(t,e){return t.ownerDocument?t.ownerDocument.getElementById(e):null}function cS(t,e){return{name:t.getAttribute(e)||"",nameSource:"standard_attribute"}}function hC(t,e,n){return{name:gV(t,e,n)||"",nameSource:"text_content"}}function gV(t,e,n){if(!t.isContentEditable){if("innerText"in t){let r=t.innerText;const i=s=>{const a=t.querySelectorAll(s);for(let o=0;o<a.length;o+=1){const l=a[o];if("innerText"in l){const c=l.innerText;c&&c.trim().length>0&&(r=r.replace(c,""))}}};return i(`[${jN}]`),e&&i(`[${e}]`),n&&i(`${cy(yr.HIDDEN)}, ${cy(yr.MASK)}`),r}return t.textContent}}const _0e=[jN,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],v0e=[vV,E0e],y0e=[vV,S0e,b0e];function lw(t,e){if(!R0e(t))return;let n,r=t;for(;r&&r.nodeName!=="HTML";){const i=bF(r,v0e,T0e,e,n);if(i)return i;n=bF(r,y0e,x0e,e,n)||_1(w0e(r),n),r=r.parentElement}return n}function _V(t){return/[0-9]/.test(t)}function E0e(t){if(t.id&&!_V(t.id))return`#${CSS.escape(t.id)}`}function S0e(t){if(t.tagName==="BODY")return;const e=t.classList;for(let n=0;n<e.length;n+=1){const r=e[n];if(!_V(r))return`${CSS.escape(t.tagName)}.${CSS.escape(r)}`}}function b0e(t){return CSS.escape(t.tagName)}function vV(t,e){if(e){const r=n(e);if(r)return r}for(const r of _0e){const i=n(r);if(i)return i}function n(r){if(t.hasAttribute(r))return`${CSS.escape(t.tagName)}[${r}="${CSS.escape(t.getAttribute(r))}"]`}}function w0e(t){let e=t.parentElement.firstElementChild,n=1;for(;e&&e!==t;)e.tagName===t.tagName&&(n+=1),e=e.nextElementSibling;return`${CSS.escape(t.tagName)}:nth-of-type(${n})`}function bF(t,e,n,r,i){for(const s of e){const a=s(t,r);if(a&&n(t,a,i))return _1(a,i)}}function T0e(t,e,n){return t.ownerDocument.querySelectorAll(_1(e,n)).length===1}function x0e(t,e,n){let r;if(n===void 0)r=a=>a.matches(e);else{const a=C0e()?_1(`${e}:scope`,n):_1(e,n);r=o=>o.querySelector(a)!==null}let s=t.parentElement.firstElementChild;for(;s;){if(s!==t&&r(s))return!1;s=s.nextElementSibling}return!0}function _1(t,e){return e?`${t}>${e}`:t}let ix;function C0e(){if(ix===void 0)try{document.querySelector(":scope"),ix=!0}catch{ix=!1}return ix}function R0e(t){return"isConnected"in t?t.isConnected:t.ownerDocument.documentElement.contains(t)}const yV=Ua,M0e=100;function A0e(t,e){const n=[];let r=0,i;s(t);function s(l){l.stopObservable.subscribe(a),n.push(l),Tl(i),i=aa(o,yV)}function a(){r===1&&n.every(l=>l.isStopped())&&(r=2,e(n))}function o(){Tl(i),r===0&&(r=1,a())}return{tryAppend:l=>r!==0?!1:n.length>0&&!I0e(n[n.length-1].event,l.event)?(o(),!1):(s(l),!0),stop:()=>{o()}}}function I0e(t,e){return t.target===e.target&&k0e(t,e)<=M0e&&t.timeStamp-e.timeStamp<=yV}function k0e(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))}function O0e(t,{onPointerDown:e,onPointerUp:n}){let r,i={selection:!1,input:!1,scroll:!1},s;const a=[ri(t,window,"pointerdown",o=>{TF(o)&&(r=wF(),i={selection:!1,input:!1,scroll:!1},s=e(o))},{capture:!0}),ri(t,window,"selectionchange",()=>{(!r||!wF())&&(i.selection=!0)},{capture:!0}),ri(t,window,"scroll",()=>{i.scroll=!0},{capture:!0,passive:!0}),ri(t,window,"pointerup",o=>{if(TF(o)&&s){const l=i;n(s,o,()=>l),s=void 0}},{capture:!0}),ri(t,window,"input",()=>{i.input=!0},{capture:!0})];return{stop:()=>{a.forEach(o=>o.stop())}}}function wF(){const t=window.getSelection();return!t||t.isCollapsed}function TF(t){return t.target instanceof Element&&t.isPrimary!==!1}const xF=3;function P0e(t,e){if(L0e(t))return e.addFrustration("rage_click"),t.some(CF)&&e.addFrustration("dead_click"),e.hasError&&e.addFrustration("error_click"),{isRage:!0};const n=t.some(r=>r.getUserActivity().selection);return t.forEach(r=>{r.hasError&&r.addFrustration("error_click"),CF(r)&&!n&&r.addFrustration("dead_click")}),{isRage:!1}}function L0e(t){if(t.some(e=>e.getUserActivity().selection||e.getUserActivity().scroll))return!1;for(let e=0;e<t.length-(xF-1);e+=1)if(t[e+xF-1].event.timeStamp-t[e].event.timeStamp<=Ua)return!0;return!1}const N0e='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function CF(t){return t.hasPageActivity||t.getUserActivity().input||t.getUserActivity().scroll?!1:!t.event.target.matches(N0e)}const EV=10*Ua,Mb=new Map;function D0e(t){const e=Mb.get(t);return Mb.delete(t),e}function SV(t,e){Mb.set(t,e),Mb.forEach((n,r)=>{Fs(r,Ll())>EV&&Mb.delete(r)})}const U0e=5*mo;function F0e(t,e,n,r){const i=x0({expireDelay:U0e}),s=new hr;let a;t.subscribe(10,()=>{i.reset()}),t.subscribe(5,f);const{stop:o}=O0e(r,{onPointerDown:p=>B0e(r,t,e,p,n),onPointerUp:({clickActionBase:p,hadActivityOnPointerDown:m},_,y)=>{z0e(r,t,e,n,i,s,c,p,_,y,m)}});return{stop:()=>{f(),s.notify(),o()},actionContexts:{findActionId:p=>i.findAll(p)}};function c(p){if(!a||!a.tryAppend(p)){const m=p.clone();a=A0e(p,_=>{H0e(_,m)})}}function f(){a&&a.stop()}}function B0e(t,e,n,r,i){const s=t.enablePrivacyForActionName?hV(r.target,t.defaultPrivacyLevel):yr.ALLOW;if(s===yr.HIDDEN)return;const a=j0e(r,s,t);let o=!1;return zN(e,n,i,t,l=>{o=l.hadActivity},cV),{clickActionBase:a,hadActivityOnPointerDown:()=>o}}function z0e(t,e,n,r,i,s,a,o,l,c,f){var p;const m=bV(e,i,c,o,l);a(m);const _=(p=o==null?void 0:o.target)===null||p===void 0?void 0:p.selector;_&&SV(l.timeStamp,_);const{stop:y}=zN(e,n,r,t,w=>{w.hadActivity&&w.end<m.startClocks.timeStamp?m.discard():w.hadActivity?m.stop(w.end):f()?m.stop(m.startClocks.timeStamp):m.stop()},EV),E=e.subscribe(5,({endClocks:w})=>{m.stop(w.timeStamp)}),S=s.subscribe(()=>{m.stop()});m.stopObservable.subscribe(()=>{E.unsubscribe(),y(),S.unsubscribe()})}function j0e(t,e,n){const r=t.target.getBoundingClientRect(),i=lw(t.target,n.actionNameAttribute);i&&SV(t.timeStamp,i);const s=f0e(t.target,n,e);return{type:"click",target:{width:Math.round(r.width),height:Math.round(r.height),selector:i},position:{x:Math.round(t.clientX-r.left),y:Math.round(t.clientY-r.top)},name:s.name,nameSource:s.nameSource}}function bV(t,e,n,r,i){const s=da(),a=ca(),o=e.add(s,a.relative),l=uV({lifeCycle:t,isChildEvent:y=>y.action!==void 0&&(Array.isArray(y.action.id)?y.action.id.includes(s):y.action.id===s)});let c=0,f;const p=[],m=new hr;function _(y){c===0&&(f=y,c=1,f?o.close(cA(f)):o.remove(),l.stop(),m.notify())}return{event:i,stop:_,stopObservable:m,get hasError(){return l.eventCounts.errorCount>0},get hasPageActivity(){return f!==void 0},getUserActivity:n,addFrustration:y=>{p.push(y)},startClocks:a,isStopped:()=>c===1||c===2,clone:()=>bV(t,e,n,r,i),validate:y=>{if(_(),c!==1)return;const{resourceCount:E,errorCount:S,longTaskCount:w}=l.eventCounts,R={duration:f&&Fs(a.timeStamp,f),startClocks:a,id:s,frustrationTypes:p,counts:{resourceCount:E,errorCount:S,longTaskCount:w},events:y??[i],event:i,...r};t.notify(0,R),c=2},discard:()=>{_(),c=2}}}function H0e(t,e){const{isRage:n}=P0e(t,e);n?(t.forEach(r=>r.discard()),e.stop(Us()),e.validate(t.map(r=>r.event))):(e.discard(),t.forEach(r=>r.validate()))}function V0e(t,e,n,r,i){t.subscribe(0,o=>t.notify(12,RF(o,i)));let s={findActionId:Mr},a=Mr;return r.trackUserInteractions&&({actionContexts:s,stop:a}=F0e(t,e,n,r)),{addAction:(o,l)=>{t.notify(12,{savedCommonContext:l,...RF(o,i)})},actionContexts:s,stop:a}}function RF(t,e){const n=sx(t)?{action:{id:t.id,loading_time:lV(_n(t.duration)),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position,name_source:m1(tp.ACTION_NAME_MASKING)?t.nameSource:void 0}}}:void 0,r=sx(t)?void 0:t.context,i=Vo({action:{id:da(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:"action",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},n),s=sx(t)?{events:t.events}:{};return!sx(t)&&t.handlingStack&&(s.handlingStack=t.handlingStack),{customerContext:r,rawRumEvent:i,startTime:t.startClocks.relative,domainContext:s}}function sx(t){return t.type!=="custom"}function G0e(t){const e=jH([Ai.error]).subscribe(n=>t.notify(n.error));return{stop:()=>{e.unsubscribe()}}}function $0e(t,e){const n=_H(t,[r0.cspViolation,r0.intervention]).subscribe(r=>e.notify(r));return{stop:()=>{n.unsubscribe()}}}function W0e(t,e,n){const r=new hr;return G0e(r),pH(r),$0e(e,r),r.subscribe(i=>t.notify(14,{error:i})),q0e(t,n)}function q0e(t,e){return t.subscribe(14,({error:n,customerContext:r,savedCommonContext:i})=>{t.notify(12,{customerContext:r,savedCommonContext:i,...X0e(n,e)})}),{addError:({error:n,handlingStack:r,componentStack:i,startClocks:s,context:a},o)=>{const l=af(n)?Lc(n):void 0,c=ON({stackTrace:l,originalError:n,handlingStack:r,componentStack:i,startClocks:s,nonErrorPrefix:"Provided",source:go.CUSTOM,handling:"handled"});t.notify(14,{customerContext:a,savedCommonContext:o,error:c})}}}function X0e(t,e){const n={date:t.startClocks.timeStamp,error:{id:da(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,component_stack:t.componentStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint,csp:t.csp},type:"error",view:{in_foreground:e.wasInPageStateAt("active",t.startClocks.relative)}},r={error:t.originalError,handlingStack:t.handlingStack};return{rawRumEvent:n,startTime:t.startClocks.relative,domainContext:r}}const MF=new WeakSet;function K0e(t){if(!performance||!("getEntriesByName"in performance))return;const e=performance.getEntriesByName(t.url,"resource");if(!e.length||!("toJSON"in e[0]))return;const n=e.filter(r=>!MF.has(r)).filter(r=>rV(r)&&iV(r)).filter(r=>Y0e(r,t.startClocks.relative,wV({startTime:t.startClocks.relative,duration:t.duration})));if(n.length===1)return MF.add(n[0]),n[0].toJSON()}function wV(t){return S0(t.startTime,t.duration)}function Y0e(t,e,n){return t.startTime>=e-1&&wV(t)<=S0(n,1)}const Z0e=2*mo;function J0e(t){const e=Q0e(t)||eEe(t);if(!(!e||e.traceTime<=Pl()-Z0e))return e.traceId}function Q0e(t){const e=t.querySelector("meta[name=dd-trace-id]"),n=t.querySelector("meta[name=dd-trace-time]");return TV(e&&e.content,n&&n.content)}function eEe(t){const e=tEe(t);if(e)return TV(h1(e,"trace-id"),h1(e,"trace-time"))}function TV(t,e){const n=e&&Number(e);if(!(!t||!n))return{traceId:t,traceTime:n}}function tEe(t){for(let e=0;e<t.childNodes.length;e+=1){const n=AF(t.childNodes[e]);if(n)return n}if(t.body)for(let e=t.body.childNodes.length-1;e>=0;e-=1){const n=t.body.childNodes[e],r=AF(n);if(r)return r;if(!dV(n))break}}function AF(t){if(t&&Qye(t)){const e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function xV(){if(gA(Lr.NAVIGATION)){const n=performance.getEntriesByType(Lr.NAVIGATION)[0];if(n)return n}const t=nEe(),e={entryType:Lr.NAVIGATION,initiatorType:"navigation",name:window.location.href,startTime:0,duration:t.loadEventEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,workerStart:0,toJSON:()=>({...e,toJSON:void 0}),...t};return e}function nEe(){const t={},e=performance.timing;for(const n in e)if(rw(e[n])){const r=n,i=e[r];t[r]=i===0?0:cA(i)}return t}function rEe(t,e,n=xV){DN(t,"interactive",()=>{const r=n(),i=Object.assign(r.toJSON(),{entryType:Lr.RESOURCE,initiatorType:nV,duration:r.responseEnd,traceId:J0e(document),toJSON:()=>({...i,toJSON:void 0})});e(i)})}function iEe(t,e,n,r=Mve(),i=rEe){t.subscribe(8,o=>{a(()=>sEe(o,e,n))});const s=Ac(e,{type:Lr.RESOURCE,buffered:!0}).subscribe(o=>{for(const l of o)Pye(l)||a(()=>IF(l,e))});i(e,o=>{a(()=>IF(o,e))});function a(o){r.push(()=>{const l=o();l&&t.notify(12,l)})}return{stop:()=>{s.unsubscribe()}}}function sEe(t,e,n){const r=K0e(t),i=r?uA(r.startTime):t.startClocks,s=aEe(t,e);if(!e.trackResources&&!s)return;const a=t.type==="xhr"?"xhr":"fetch",o=r?CV(r):void 0,l=lEe(n,i,t.duration),c=Vo({date:i.timeStamp,resource:{id:da(),type:a,duration:l,method:t.method,status_code:t.status,protocol:r&&sV(r),url:Bye(t.url)?zye(t.url):t.url,delivery_type:r&&aV(r)},type:"resource",_dd:{discarded:!e.trackResources}},s,o);return{startTime:i.relative,rawRumEvent:c,domainContext:{performanceEntry:r,xhr:t.xhr,response:t.response,requestInput:t.input,requestInit:t.init,error:t.error,isAborted:t.isAborted,handlingStack:t.handlingStack}}}function IF(t,e){const n=uA(t.startTime),r=oEe(t,e);if(!e.trackResources&&!r)return;const i=Oye(t),s=CV(t),a=Vo({date:n.timeStamp,resource:{id:da(),type:i,url:t.name,status_code:uEe(t.responseStatus),protocol:sV(t),delivery_type:aV(t)},type:"resource",_dd:{discarded:!e.trackResources}},r,s);return{startTime:n.relative,rawRumEvent:a,domainContext:{performanceEntry:t}}}function CV(t){const{renderBlockingStatus:e}=t;return{resource:{duration:Lye(t),render_blocking_status:e,...Uye(t),...Nye(t)}}}function aEe(t,e){if(t.traceSampled&&t.traceId&&t.spanId)return{_dd:{span_id:t.spanId.toString(),trace_id:t.traceId.toString(),rule_psr:e.rulePsr}}}function oEe(t,e){if(t.traceId)return{_dd:{trace_id:t.traceId,span_id:ZH().toString(),rule_psr:e.rulePsr}}}function lEe(t,e,n){return t.wasInPageStateDuringPeriod("frozen",e.relative,n)?void 0:_n(n)}function uEe(t){return t===0?void 0:t}function cEe(t,e,n){const{stop:r,eventCounts:i}=uV({lifeCycle:t,isChildEvent:s=>s.view.id===e,onChange:n});return{stop:r,eventCounts:i}}const dEe=10*mo;function fEe(t,e,n){return{stop:Ac(t,{type:Lr.PAINT,buffered:!0}).subscribe(i=>{const s=i.find(a=>a.name==="first-contentful-paint"&&a.startTime<e.timeStamp&&a.startTime<dEe);s&&n(s.startTime)}).unsubscribe}}function hEe(t,e,n){const r=Ac(t,{type:Lr.FIRST_INPUT,buffered:!0}).subscribe(i=>{const s=i.find(a=>a.startTime<e.timeStamp);if(s){const a=Fs(s.startTime,s.processingStart);let o;s.target&&C0(s.target)&&(o=lw(s.target,t.actionNameAttribute)),n({delay:a>=0?a:0,time:s.startTime,targetSelector:o})}});return{stop:()=>{r.unsubscribe()}}}function pEe(t,e,n=xV){return _Ee(t,()=>{const r=n();gEe(r)||e(mEe(r))})}function mEe(t){return{domComplete:t.domComplete,domContentLoaded:t.domContentLoadedEventEnd,domInteractive:t.domInteractive,loadEvent:t.loadEventEnd,firstByte:t.responseStart>=0&&t.responseStart<=Ll()?t.responseStart:void 0}}function gEe(t){return t.loadEventEnd<=0}function _Ee(t,e){let n;const{stop:r}=DN(t,"complete",()=>{n=aa(()=>e())});return{stop:()=>{r(),Tl(n)}}}const vEe=10*mo;function yEe(t,e,n,r){let i=1/0;const{stop:s}=np(t,n,["pointerdown","keydown"],l=>{i=l.timeStamp},{capture:!0,once:!0});let a=0;const o=Ac(t,{type:Lr.LARGEST_CONTENTFUL_PAINT,buffered:!0}).subscribe(l=>{const c=Sge(l,f=>f.entryType===Lr.LARGEST_CONTENTFUL_PAINT&&f.startTime<i&&f.startTime<e.timeStamp&&f.startTime<vEe&&f.size>a);if(c){let f;c.element&&(f=lw(c.element,t.actionNameAttribute)),r({value:c.startTime,targetSelector:f,resourceUrl:c.url}),a=c.size}});return{stop:()=>{s(),o.unsubscribe()}}}function RV(t,e=window){let n,r;return document.visibilityState==="hidden"?n=0:(n=1/0,{stop:r}=np(t,e,["pagehide","visibilitychange"],i=>{(i.type==="pagehide"||document.visibilityState==="hidden")&&(n=i.timeStamp,r())},{capture:!0})),{get timeStamp(){return n},stop(){r==null||r()}}}function EEe(t,e,n){const r={},{stop:i}=pEe(t,f=>{e(f.loadEvent),r.navigationTimings=f,n()}),s=RV(t),{stop:a}=fEe(t,s,f=>{r.firstContentfulPaint=f,n()}),{stop:o}=yEe(t,s,window,f=>{r.largestContentfulPaint=f,n()}),{stop:l}=hEe(t,s,f=>{r.firstInput=f,n()});function c(){i(),a(),o(),l(),s.stop()}return{stop:c,initialViewMetrics:r}}function SEe(t,e,n){if(!CEe())return{stop:Mr};let r=0,i;n({value:0});const s=xEe(),a=Ac(t,{type:Lr.LAYOUT_SHIFT,buffered:!0}).subscribe(o=>{var l;for(const c of o){if(c.hadRecentInput||c.startTime<e)continue;const{cumulatedValue:f,isMaxValue:p}=s.update(c);if(p){const m=bEe(c.sources);i={target:m!=null&&m.node?new WeakRef(m.node):void 0,time:Fs(e,c.startTime),previousRect:m==null?void 0:m.previousRect,currentRect:m==null?void 0:m.currentRect}}if(f>r){r=f;const m=(l=i==null?void 0:i.target)===null||l===void 0?void 0:l.deref();n({value:cR(r,4),targetSelector:m&&lw(m,t.actionNameAttribute),time:i==null?void 0:i.time,previousRect:i!=null&&i.previousRect?kF(i.previousRect):void 0,currentRect:i!=null&&i.currentRect?kF(i.currentRect):void 0})}}});return{stop:()=>{a.unsubscribe()}}}function bEe(t){return t.find(e=>!!e.node&&C0(e.node))}function kF({x:t,y:e,width:n,height:r}){return{x:t,y:e,width:n,height:r}}const wEe=5*Ua,TEe=Ua;function xEe(){let t=0,e,n,r=0;return{update:i=>{const s=e===void 0||i.startTime-n>=TEe||i.startTime-e>=wEe;let a;return s?(e=n=i.startTime,r=t=i.value,a=!0):(t+=i.value,n=i.startTime,a=i.value>r,a&&(r=i.value)),{cumulatedValue:t,isMaxValue:a}}}}function CEe(){return gA(Lr.LAYOUT_SHIFT)&&"WeakRef"in window}let pC,MV=0,B2=1/0,z2=0;function REe(){"interactionCount"in performance||pC||(pC=new window.PerformanceObserver(Pt(t=>{t.getEntries().forEach(e=>{const n=e;n.interactionId&&(B2=Math.min(B2,n.interactionId),z2=Math.max(z2,n.interactionId),MV=(z2-B2)/7+1)})})),pC.observe({type:"event",buffered:!0,durationThreshold:0}))}const OF=()=>pC?MV:window.performance.interactionCount||0,PF=10,MEe=1*mo;function AEe(t,e,n){if(!OEe())return{getInteractionToNextPaint:()=>{},setViewEnd:Mr,stop:Mr};const{getViewInteractionCount:r,stopViewInteractionCount:i}=kEe(n);let s=1/0;const a=IEe(r);let o=-1,l,c;function f(_){for(const E of _)E.interactionId&&E.startTime>=e&&E.startTime<=s&&a.process(E);const y=a.estimateP98Interaction();y&&y.duration!==o&&(o=y.duration,c=Fs(e,y.startTime),l=D0e(y.startTime),!l&&y.target&&C0(y.target)&&(l=lw(y.target,t.actionNameAttribute)))}const p=Ac(t,{type:Lr.FIRST_INPUT,buffered:!0}).subscribe(f),m=Ac(t,{type:Lr.EVENT,durationThreshold:40,buffered:!0}).subscribe(f);return{getInteractionToNextPaint:()=>{if(o>=0)return{value:Math.min(o,MEe),targetSelector:l,time:c};if(r())return{value:0}},setViewEnd:_=>{s=_,i()},stop:()=>{m.unsubscribe(),p.unsubscribe()}}}function IEe(t){const e=[];function n(){e.sort((r,i)=>i.duration-r.duration).splice(PF)}return{process(r){const i=e.findIndex(a=>r.interactionId===a.interactionId),s=e[e.length-1];i!==-1?r.duration>e[i].duration&&(e[i]=r,n()):(e.length<PF||r.duration>s.duration)&&(e.push(r),n())},estimateP98Interaction(){const r=Math.min(e.length-1,Math.floor(t()/50));return e[r]}}}function kEe(t){REe();const e=t==="initial_load"?0:OF();let n={stopped:!1};function r(){return OF()-e}return{getViewInteractionCount:()=>n.stopped?n.interactionCount:r(),stopViewInteractionCount:()=>{n={stopped:!0,interactionCount:r()}}}}function OEe(){return gA(Lr.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function PEe(t,e,n,r,i,s,a){let o=i==="initial_load",l=!0;const c=[],f=RV(r);function p(){if(!l&&!o&&c.length>0){const _=Math.max(...c);_<f.timeStamp&&a(_)}}const{stop:m}=zN(t,e,n,r,_=>{l&&(l=!1,_.hadActivity&&c.push(Fs(s.timeStamp,_.end)),p())});return{stop:()=>{m(),f.stop()},setLoadEvent:_=>{o&&(o=!1,c.push(_),p())}}}function dFe(){let t;const e=window.visualViewport;return e?t=e.pageLeft-e.offsetLeft:window.scrollX!==void 0?t=window.scrollX:t=window.pageXOffset||0,Math.round(t)}function LEe(){let t;const e=window.visualViewport;return e?t=e.pageTop-e.offsetTop:window.scrollY!==void 0?t=window.scrollY:t=window.pageYOffset||0,Math.round(t)}let j2;function NEe(t){return j2||(j2=DEe(t)),j2}function DEe(t){return new hr(e=>{const{throttled:n}=sw(()=>{e.notify(HN())},200);return ri(t,window,"resize",n,{capture:!0,passive:!0}).stop})}function HN(){const t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}const UEe=Ua;function FEe(t,e,n,r=zEe(t)){let i=0,s=0,a=0;const o=r.subscribe(({scrollDepth:l,scrollTop:c,scrollHeight:f})=>{let p=!1;if(l>i&&(i=l,p=!0),f>s){s=f;const m=Ll();a=Fs(e.relative,m),p=!0}p&&n({maxDepth:Math.min(i,s),maxDepthScrollTop:c,maxScrollHeight:s,maxScrollHeightTime:a})});return{stop:()=>o.unsubscribe()}}function BEe(){const t=LEe(),{height:e}=HN(),n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),r=Math.round(e+t);return{scrollHeight:n,scrollDepth:r,scrollTop:t}}function zEe(t,e=UEe){return new hr(n=>{function r(){n.notify(BEe())}if(window.ResizeObserver){const i=sw(r,e,{leading:!1,trailing:!0}),s=document.scrollingElement||document.documentElement,a=new ResizeObserver(Pt(i.throttled));s&&a.observe(s);const o=ri(t,window,"scroll",i.throttled,{passive:!0});return()=>{i.cancel(),a.disconnect(),o.stop()}}})}function jEe(t,e,n,r,i,s,a){const o={},{stop:l,setLoadEvent:c}=PEe(t,e,n,r,s,a,E=>{o.loadingTime=E,i()}),{stop:f}=FEe(r,a,E=>{o.scroll=E}),{stop:p}=SEe(r,a.relative,E=>{o.cumulativeLayoutShift=E,i()}),{stop:m,getInteractionToNextPaint:_,setViewEnd:y}=AEe(r,a.relative,s);return{stop:()=>{l(),p(),f()},stopINPTracking:m,setLoadEvent:c,setViewEnd:y,getCommonViewMetrics:()=>(o.interactionToNextPaint=_(),o)}}const HEe=3e3,VEe=5*mo,GEe=5*mo;function $Ee(t,e,n,r,i,s,a,o){const l=new Set;let c=p("initial_load",zj(),o);m();let f;a&&(f=_(s));function p(y,E,S){const w=WEe(e,n,r,i,t,y,E,S);return l.add(w),w.stopObservable.subscribe(()=>{l.delete(w)}),w}function m(){e.subscribe(10,()=>{c=p("route_change",void 0,{name:c.name,service:c.service,version:c.version,context:c.contextManager.getContext()})}),e.subscribe(9,()=>{c.end({sessionIsActive:!1})}),e.subscribe(11,y=>{y.reason===by.UNLOADING&&c.end()})}function _(y){return y.subscribe(({oldLocation:E,newLocation:S})=>{XEe(E,S)&&(c.end(),c=p("route_change"))})}return{addTiming:(y,E=Us())=>{c.addTiming(y,E)},startView:(y,E)=>{c.end({endClocks:E}),c=p("route_change",E,y)},setViewContext:y=>{c.contextManager.setContext(y)},setViewContextProperty:(y,E)=>{c.contextManager.setContextProperty(y,E)},setViewName:y=>{c.setViewName(y)},getViewContext:()=>c.contextManager.getContext(),stop:()=>{f&&f.unsubscribe(),c.end(),l.forEach(y=>y.stop())}}}function WEe(t,e,n,r,i,s,a=ca(),o){const l=da(),c=new hr,f={};let p=0,m;const _=f1(i),y=i0();let E=!0,S,w,R,C;o&&(S=o.name,w=o.service||void 0,R=o.version||void 0,o.context&&(C=o.context,y.setContext(C)));const k={id:l,name:S,startClocks:a,service:w,version:R,context:C};t.notify(1,k),t.notify(2,k);const{throttled:M,cancel:N}=sw(ie,HEe,{leading:!1}),{setLoadEvent:O,setViewEnd:D,stop:L,stopINPTracking:B,getCommonViewMetrics:ee}=jEe(t,e,n,r,X,s,a),{stop:te,initialViewMetrics:ne}=s==="initial_load"?EEe(r,O,X):{stop:Mr,initialViewMetrics:{}},{stop:H,eventCounts:V}=cEe(t,l,X),W=b0(ie,VEe);ie(),y.changeObservable.subscribe(X);function J(){t.notify(3,{id:l,name:S,context:y.getContext(),startClocks:a})}function X(){J(),M()}function ie(){N(),J(),p+=1;const pe=m===void 0?Us():m.timeStamp;t.notify(4,{customTimings:f,documentVersion:p,id:l,name:S,service:w,version:R,context:y.getContext(),loadingType:s,location:_,startClocks:a,commonViewMetrics:ee(),initialViewMetrics:ne,duration:Fs(a.timeStamp,pe),isActive:m===void 0,sessionIsActive:E,eventCounts:V})}return{get name(){return S},service:w,version:R,contextManager:y,stopObservable:c,end(pe={}){var Z,le;m||(m=(Z=pe.endClocks)!==null&&Z!==void 0?Z:ca(),E=(le=pe.sessionIsActive)!==null&&le!==void 0?le:!0,t.notify(5,{endClocks:m}),t.notify(6,{endClocks:m}),dA(W),D(m.relative),L(),ie(),aa(()=>{this.stop()},GEe))},stop(){te(),H(),B(),c.notify()},addTiming(pe,Z){if(m)return;const le=uge(Z)?Z:Fs(a.timeStamp,Z);f[qEe(pe)]=le,X()},setViewName(pe){S=pe,ie()}}}function qEe(t){const e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return e!==t&&Jn.warn(`Invalid timing name: ${t}, sanitized to: ${e}`),e}function XEe(t,e){return t.pathname!==e.pathname||!KEe(e.hash)&&LF(e.hash)!==LF(t.hash)}function KEe(t){const e=t.substring(1);return e!==""&&!!document.getElementById(e)}function LF(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function YEe(t,e,n,r,i,s,a,o,l){return t.subscribe(4,c=>t.notify(12,ZEe(c,e,o,a))),$Ee(n,t,r,i,e,s,!e.trackViewsManually,l)}function ZEe(t,e,n,r){var i,s,a,o,l,c,f,p,m,_,y,E,S,w,R,C;const k=n.getReplayStats(t.id),M=r.findAll(t.startClocks.relative,t.duration),N={_dd:{document_version:t.documentVersion,replay_stats:k,page_states:M,configuration:{start_session_replay_recording_manually:e.startSessionReplayRecordingManually}},date:t.startClocks.timeStamp,type:"view",view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:(i=t.commonViewMetrics.cumulativeLayoutShift)===null||i===void 0?void 0:i.value,cumulative_layout_shift_time:_n((s=t.commonViewMetrics.cumulativeLayoutShift)===null||s===void 0?void 0:s.time),cumulative_layout_shift_target_selector:(a=t.commonViewMetrics.cumulativeLayoutShift)===null||a===void 0?void 0:a.targetSelector,first_byte:_n((o=t.initialViewMetrics.navigationTimings)===null||o===void 0?void 0:o.firstByte),dom_complete:_n((l=t.initialViewMetrics.navigationTimings)===null||l===void 0?void 0:l.domComplete),dom_content_loaded:_n((c=t.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.domContentLoaded),dom_interactive:_n((f=t.initialViewMetrics.navigationTimings)===null||f===void 0?void 0:f.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:_n(t.initialViewMetrics.firstContentfulPaint),first_input_delay:_n((p=t.initialViewMetrics.firstInput)===null||p===void 0?void 0:p.delay),first_input_time:_n((m=t.initialViewMetrics.firstInput)===null||m===void 0?void 0:m.time),first_input_target_selector:(_=t.initialViewMetrics.firstInput)===null||_===void 0?void 0:_.targetSelector,interaction_to_next_paint:_n((y=t.commonViewMetrics.interactionToNextPaint)===null||y===void 0?void 0:y.value),interaction_to_next_paint_time:_n((E=t.commonViewMetrics.interactionToNextPaint)===null||E===void 0?void 0:E.time),interaction_to_next_paint_target_selector:(S=t.commonViewMetrics.interactionToNextPaint)===null||S===void 0?void 0:S.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:_n((w=t.initialViewMetrics.largestContentfulPaint)===null||w===void 0?void 0:w.value),largest_contentful_paint_target_selector:(R=t.initialViewMetrics.largestContentfulPaint)===null||R===void 0?void 0:R.targetSelector,load_event:_n((C=t.initialViewMetrics.navigationTimings)===null||C===void 0?void 0:C.loadEvent),loading_time:lV(_n(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},performance:JEe(t.commonViewMetrics,t.initialViewMetrics),resource:{count:t.eventCounts.resourceCount},time_spent:_n(t.duration)},display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:_n(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:k?!0:void 0,is_active:t.sessionIsActive?void 0:!1},privacy:{replay_level:e.defaultPrivacyLevel}};return Ug(t.customTimings)||(N.view.custom_timings=fge(t.customTimings,_n)),{rawRumEvent:N,startTime:t.startClocks.relative,domainContext:{location:t.location}}}function JEe({cumulativeLayoutShift:t,interactionToNextPaint:e},{firstContentfulPaint:n,firstInput:r,largestContentfulPaint:i}){return{cls:t&&{score:t.value,timestamp:_n(t.time),target_selector:t.targetSelector,previous_rect:t.previousRect,current_rect:t.currentRect},fcp:n&&{timestamp:_n(n)},fid:r&&{duration:_n(r.delay),timestamp:_n(r.time),target_selector:r.targetSelector},inp:e&&{duration:_n(e.value),timestamp:_n(e.time),target_selector:e.targetSelector},lcp:i&&{timestamp:_n(i.value),target_selector:i.targetSelector,resource_url:i.resourceUrl}}}const QEe="rum";function eSe(t,e,n){const r=RH(t,QEe,i=>nSe(t,i),n);return r.expireObservable.subscribe(()=>{e.notify(9)}),r.renewObservable.subscribe(()=>{e.notify(10)}),r.sessionStateUpdateObservable.subscribe(({previousState:i,newState:s})=>{if(!i.forcedReplay&&s.forcedReplay){const a=r.findSession();a&&(a.isReplayForced=!0)}}),{findTrackedSession:i=>{const s=r.findSession(i);if(!(!s||!AV(s.trackingType)))return{id:s.id,sessionReplay:s.trackingType==="1"?1:s.isReplayForced?2:0,anonymousId:s.anonymousId}},expire:r.expire,expireObservable:r.expireObservable,setForcedReplay:()=>r.updateSessionState({forcedReplay:"1"})}}function tSe(){const t={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplay:UH("records")?1:0};return{findTrackedSession:()=>t,expire:Mr,expireObservable:new hr,setForcedReplay:Mr}}function nSe(t,e){let n;return rSe(e)?n=e:Bh(t.sessionSampleRate)?Bh(t.sessionReplaySampleRate)?n="1":n="2":n="0",{trackingType:n,isTracked:AV(n)}}function rSe(t){return t==="0"||t==="1"||t==="2"}function AV(t){return t==="2"||t==="1"}function iSe(t,e,n,r,i,s,a){const o=t.replica,l=NN(t,{endpoint:t.rumEndpointBuilder,encoder:a(2)},o&&{endpoint:o.rumEndpointBuilder,transformMessage:c=>Vo(c,{application:{id:o.applicationId}}),encoder:a(3)},r,i,s);return e.subscribe(13,c=>{c.type==="view"?l.upsert(c,c.view.id):l.add(c)}),n.subscribe(c=>l.add(c,xH(t))),l}function sSe(t){const e=i_();t.subscribe(13,n=>{e.send("rum",n)})}const aSe=e_;function oSe(t,e,n){const r=x0({expireDelay:aSe});let i;t.subscribe(1,({startClocks:o})=>{const l=n.href;r.add(a({url:l,referrer:i||document.referrer}),o.relative),i=l}),t.subscribe(6,({endClocks:o})=>{r.closeActive(o.relative)});const s=e.subscribe(({newLocation:o})=>{const l=r.find();if(l){const c=Ll();r.closeActive(c),r.add(a({url:o.href,referrer:l.referrer}),c)}});function a({url:o,referrer:l}){return{url:o,referrer:l}}return{findUrl:o=>r.find(o),getAllEntries:()=>r.getAllEntries(),getDeletedEntries:()=>r.getDeletedEntries(),stop:()=>{s.unsubscribe(),r.stop()}}}function lSe(t,e){let n=f1(e);return new hr(r=>{const{stop:i}=uSe(t,a),{stop:s}=cSe(t,a);function a(){if(n.href===e.href)return;const o=f1(e);r.notify({newLocation:o,oldLocation:n}),n=o}return()=>{i(),s()}})}function uSe(t,e){const{stop:n}=Sc(NF("pushState"),"pushState",({onPostCall:s})=>{s(e)}),{stop:r}=Sc(NF("replaceState"),"replaceState",({onPostCall:s})=>{s(e)}),{stop:i}=ri(t,window,"popstate",e);return{stop:()=>{n(),r(),i()}}}function cSe(t,e){return ri(t,window,"hashchange",e)}function NF(t){return Object.prototype.hasOwnProperty.call(history,t)?history:History.prototype}const dSe=e_;function fSe(t,e){const n=x0({expireDelay:dSe});return t.subscribe(1,({startClocks:r})=>{n.add({},r.relative),e.resetCustomerData()}),t.subscribe(6,({endClocks:r})=>{n.closeActive(r.relative)}),{findFeatureFlagEvaluations:r=>n.find(r),addFeatureFlagEvaluation:(r,i)=>{const s=n.find();s&&(s[r]=i,e.updateCustomerData(s))},stop:()=>e.stop()}}const hSe=10*Ua;let Td,Fm,bP;function pSe(t,e,n,r,i){e.enabled&&Bh(t.customerDataTelemetrySampleRate)&&(IV(),DF(),n.subscribe(13,a=>{bP=!0,dS(Fm.globalContextBytes,r.getOrCreateTracker(2).getBytesCount()),dS(Fm.userContextBytes,r.getOrCreateTracker(1).getBytesCount()),dS(Fm.featureFlagBytes,["view","error"].includes(a.type)?r.getOrCreateTracker(0).getBytesCount():0)}),i.subscribe(({bytesCount:a,messagesCount:o})=>{bP&&(Td.batchCount+=1,dS(Td.batchBytesCount,a),dS(Td.batchMessagesCount,o),H2(Td.globalContextBytes,Fm.globalContextBytes),H2(Td.userContextBytes,Fm.userContextBytes),H2(Td.featureFlagBytes,Fm.featureFlagBytes),DF())}),b0(mSe,hSe))}function mSe(){Td.batchCount!==0&&(r_("Customer data measures",Td),IV())}function ph(){return{min:1/0,max:0,sum:0}}function dS(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function H2(t,e){t.sum+=e.sum,t.min=Math.min(t.min,e.min),t.max=Math.max(t.max,e.max)}function IV(){Td={batchCount:0,batchBytesCount:ph(),batchMessagesCount:ph(),globalContextBytes:ph(),userContextBytes:ph(),featureFlagBytes:ph()}}function DF(){bP=!1,Fm={globalContextBytes:ph(),userContextBytes:ph(),featureFlagBytes:ph()}}const gSe=4e3,_Se=500,vSe=e_;function ySe(t,e=_Se){const n=x0({expireDelay:vSe,maxEntries:gSe});let r;s(kV(),Ll());const{stop:i}=np(t,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],o=>{s(ESe(o),o.timeStamp)},{capture:!0});function s(o,l=Ll()){o!==r&&(r=o,n.closeActive(l),n.add({state:r,startTime:l},l))}const a={findAll:(o,l)=>{const c=n.findAll(o,l);if(c.length===0)return;const f=[],p=Math.max(0,c.length-e);for(let m=c.length-1;m>=p;m--){const _=c[m],y=Fs(o,_.startTime);f.push({state:_.state,start:_n(y)})}return f},wasInPageStateAt:(o,l)=>a.wasInPageStateDuringPeriod(o,l,0),wasInPageStateDuringPeriod:(o,l,c)=>n.findAll(l,c).some(f=>f.state===o),addPageState:s,stop:()=>{i(),n.stop()}};return a}function ESe(t){return t.type==="freeze"?"frozen":t.type==="pagehide"?t.persisted?"frozen":"terminated":kV()}function kV(){return document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}function SSe(t){let e;const n=requestAnimationFrame(Pt(()=>{e=HN()})),r=NEe(t).subscribe(i=>{e=i}).unsubscribe;return{get:()=>e?{viewport:e}:void 0,stop:()=>{r(),n&&cancelAnimationFrame(n)}}}function bSe(t,e){const n=window.cookieStore?wSe(t):xSe;return new hr(r=>n(e,i=>r.notify(i)))}function wSe(t){return(e,n)=>ri(t,window.cookieStore,"change",i=>{const s=i.changed.find(a=>a.name===e)||i.deleted.find(a=>a.name===e);s&&n(s.value)}).stop}const TSe=Ua;function xSe(t,e){const n=h1(document.cookie,t),r=b0(()=>{const i=h1(document.cookie,t);i!==n&&e(i)},TSe);return()=>{dA(r)}}const UF="datadog-ci-visibility-test-execution-id";function CSe(t,e=bSe(t,UF)){var n;let r=Ih(UF)||((n=window.Cypress)===null||n===void 0?void 0:n.env("traceId"));const i=e.subscribe(s=>{r=s});return{get:()=>{if(typeof r=="string")return{test_execution_id:r}},stop:()=>i.unsubscribe()}}function RSe(t,e){const n=Ac(e,{type:Lr.LONG_ANIMATION_FRAME,buffered:!0}).subscribe(r=>{for(const i of r){const s=uA(i.startTime),a={date:s.timeStamp,long_task:{id:da(),entry_type:"long-animation-frame",duration:_n(i.duration),blocking_duration:_n(i.blockingDuration),first_ui_event_timestamp:_n(i.firstUIEventTimestamp),render_start:_n(i.renderStart),style_and_layout_start:_n(i.styleAndLayoutStart),start_time:_n(i.startTime),scripts:i.scripts.map(o=>({duration:_n(o.duration),pause_duration:_n(o.pauseDuration),forced_style_and_layout_duration:_n(o.forcedStyleAndLayoutDuration),start_time:_n(o.startTime),execution_start:_n(o.executionStart),source_url:o.sourceURL,source_function_name:o.sourceFunctionName,source_char_position:o.sourceCharPosition,invoker:o.invoker,invoker_type:o.invokerType,window_attribution:o.windowAttribution}))},type:"long_task",_dd:{discarded:!1}};t.notify(12,{rawRumEvent:a,startTime:s.relative,domainContext:{performanceEntry:i}})}});return{stop:()=>n.unsubscribe()}}function MSe(t,e){const n=Ac(e,{type:Lr.LONG_TASK,buffered:!0}).subscribe(r=>{for(const i of r){if(i.entryType!==Lr.LONG_TASK||!e.trackLongTasks)break;const s=uA(i.startTime),a={date:s.timeStamp,long_task:{id:da(),entry_type:"long-task",duration:_n(i.duration)},type:"long_task",_dd:{discarded:!1}};t.notify(12,{rawRumEvent:a,startTime:s.relative,domainContext:{performanceEntry:i}})}});return{stop(){n.unsubscribe()}}}function ASe(t,e,n,r,i,s,a,o){var l;const c=[],f=new Mye;f.subscribe(13,le=>PN("rum",le));const p=ISe(t);p.setContextProvider(()=>{var le,ae;return{application:{id:t.applicationId},session:{id:(le=S.findTrackedSession())===null||le===void 0?void 0:le.id},view:{id:(ae=N.findView())===null||ae===void 0?void 0:ae.id},action:{id:D.findActionId()}}});const m=le=>{f.notify(14,{error:le}),r_("Error reported to customer",{"error.message":le.message})},_=fSe(f,n.getOrCreateTracker(0)),y=FH(t),E=y.subscribe(le=>{f.notify(11,le)});c.push(()=>E.unsubscribe());const S=Mc()?tSe():eSe(t,f,a);if(Mc())sSe(f);else{const le=iSe(t,f,p.observable,m,y,S.expireObservable,s);c.push(()=>le.stop()),pSe(t,p,f,n,le.flushObservable)}const w=gye(),R=lSe(t,location),C=ySe(t),{observable:k,stop:M}=vye();c.push(M);const{viewHistory:N,urlContexts:O,actionContexts:D,addAction:L,stop:B}=kSe(f,t,location,S,C,R,w,_,k,r,m);c.push(B),TH();const{addTiming:ee,startView:te,setViewName:ne,setViewContext:H,setViewContextProperty:V,getViewContext:W,stop:J}=YEe(f,t,location,w,k,R,C,e,i);c.push(J);const{stop:X}=iEe(f,t,C);if(c.push(X),t.trackLongTasks)if(!((l=PerformanceObserver.supportedEntryTypes)===null||l===void 0)&&l.includes(Lr.LONG_ANIMATION_FRAME)){const{stop:le}=RSe(f,t);c.push(le)}else MSe(f,t);const{addError:ie}=W0e(f,t,C);jye(f,t,S);const pe=Gve(f,C,o),Z=Rye(t.applicationId,S,N,D,O);return{addAction:L,addError:ie,addTiming:ee,addFeatureFlagEvaluation:_.addFeatureFlagEvaluation,startView:te,setViewContext:H,setViewContextProperty:V,getViewContext:W,setViewName:ne,lifeCycle:f,viewHistory:N,session:S,stopSession:()=>S.expire(),getInternalContext:Z.get,startDurationVital:pe.startDurationVital,stopDurationVital:pe.stopDurationVital,addDurationVital:pe.addDurationVital,stop:()=>{c.forEach(le=>le())}}}function ISe(t){const e=wH("browser-rum-sdk",t);if(Mc()){const n=i_();e.observable.subscribe(r=>n.send("internal_telemetry",r))}return e}function kSe(t,e,n,r,i,s,a,o,l,c,f){const p=Iye(t),m=oSe(t,s,n),_=V0e(t,a,l,e,i),y=SSe(e),E=CSe(e);return wye(e,t,r,p,m,_.actionContexts,y,E,o,c,f),{viewHistory:p,pageStateHistory:i,urlContexts:m,addAction:_.addAction,actionContexts:_.actionContexts,stop:()=>{_.stop(),E.stop(),y.stop(),m.stop(),p.stop(),i.stop()}}}function OSe(t,{session:e,viewContext:n,errorType:r}){const i=e?e.id:"no-session-id",s=[];r!==void 0&&s.push(`error-type=${r}`),n&&(s.push(`seed=${n.id}`),s.push(`from=${n.startClocks.timeStamp}`));const a=PSe(t),o=`/rum/replay/sessions/${i}`;return`${a}${o}?${s.join("&")}`}function PSe(t){const e=t.site,n=t.subdomain||LSe(t);return`https://${n?`${n}.`:""}${e}`}function LSe(t){switch(t.site){case ng:case Yge:return"app";case rH:return"dd";default:return}}const NSe=1e3;let El;function fFe(t){return _A(t).segments_count}function hFe(t){_A(t).segments_count+=1}function pFe(t){_A(t).records_count+=1}function mFe(t,e){_A(t).segments_total_raw_size+=e}function DSe(t){return El==null?void 0:El.get(t)}function _A(t){El||(El=new Map);let e;return El.has(t)?e=El.get(t):(e={records_count:0,segments_count:0,segments_total_raw_size:0},El.set(t,e),El.size>NSe&&USe()),e}function USe(){if(!El)return;const t=El.keys().next().value;t&&El.delete(t)}function OV(t,e,n){let r=0,i=[],s,a=0;const o=[],{stop:l}=ri(t,e,"message",({data:p})=>{if(p.type!=="wrote"||p.streamId!==n)return;r+=p.additionalBytesCount,i.push(p.result),s=p.trailer;const m=o.shift();m&&m.id===p.id?m.writeCallback?m.writeCallback(p.result.byteLength):m.finishCallback&&m.finishCallback():(l(),r_("Worker responses received out of order."))});function c(){const p=i.length===0?new Uint8Array(0):dge(i.concat(s)),m={rawBytesCount:r,output:p,outputBytesCount:p.byteLength,encoding:"deflate"};return r=0,i=[],m}function f(){a>0&&(e.postMessage({action:"reset",streamId:n}),a=0)}return{isAsync:!0,get isEmpty(){return a===0},write(p,m){e.postMessage({action:"write",id:a,data:p,streamId:n}),o.push({id:a,writeCallback:m,data:p}),a+=1},finish(p){f(),o.length?(o.forEach(m=>{delete m.writeCallback}),o[o.length-1].finishCallback=()=>p(c())):p(c())},finishSync(){f();const p=o.map(m=>(delete m.writeCallback,delete m.finishCallback,m.data)).join("");return{...c(),pendingData:p}},estimateEncodedBytesCount(p){return p.length/8},stop(){l()}}}const FSe=30*Ua;function PV(t){return new Worker(t.workerUrl||URL.createObjectURL(new Blob(['(()=>{"use strict";function t(t){const e=t.reduce(((t,e)=>t+e.length),0),a=new Uint8Array(e);let n=0;for(const e of t)a.set(e,n),n+=e.length;return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),h=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},U=function(t,e,a){var n,r,s=new Array(16),h=0;for(n=1;n<=i;n++)s[n]=h=h+a[n-1]<<1;for(r=0;r<=e;r++){var l=t[2*r+1];0!==l&&(t[2*r]=A(s[l]++,l))}},I=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},B=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},E=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},S=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&E(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!E(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},C=function(t,e,n){var r,i,l,_,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(l=f[i],x(t,l+a+1,e),0!==(_=s[l])&&(i-=c[l],z(t,i,_)),r--,l=y(r),x(t,l,n),0!==(_=h[l])&&(r-=v[l],z(t,r,_)))}while(o<t.last_lit);x(t,256,e)},D=function(t,e){var a,n,r,s=e.dyn_tree,h=e.stat_desc.static_tree,l=e.stat_desc.has_stree,_=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<_;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,l&&(t.static_len-=h[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)S(t,s,a);r=_;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],S(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,S(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,h,l,_=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(_[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=_[2*_[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),_[2*n+1]=s,n>o||(t.bl_count[s]++,h=0,n>=c&&(h=f[n-c]),l=_[2*n],t.opt_len+=l*(s+h),u&&(t.static_len+=l*(d[2*n+1]+h)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(_[2*r+1]!==s&&(t.opt_len+=(s-_[2*r+1])*_[2*r],_[2*r+1]=s),n--)}}(t,e),U(s,o,t.bl_count)},j=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++h<l&&r===s||(h<_?t.bl_tree[2*r]+=h:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4))},M=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++h<l&&r===s)){if(h<_)do{x(t,r,t.bl_tree)}while(0!=--h);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),h--),x(t,16,t.bl_tree),z(t,h-3,2)):h<=10?(x(t,17,t.bl_tree),z(t,h-3,3)):(x(t,18,t.bl_tree),z(t,h-11,7));h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4)}},L=!1,T=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){B(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},H=function(t,e,n,r){var i,s,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),D(t,t.l_desc),D(t,t.d_desc),h=function(t){var e;for(j(t,t.dyn_ltree,t.l_desc.max_code),j(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*_[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?T(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),C(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*_[r]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),C(t,t.dyn_ltree,t.dyn_dtree)),I(t),r&&B(t)},R={_tr_init:function(t){L||(!function(){var t,e,a,_,m,y=new Array(16);for(a=0,_=0;_<28;_++)for(c[_]=a,t=0;t<1<<s[_];t++)f[a++]=_;for(f[a-1]=_,m=0,_=0;_<16;_++)for(v[_]=m,t=0;t<1<<h[_];t++)u[m++]=_;for(m>>=7;_<r;_++)for(v[_]=m<<7,t=0;t<1<<h[_]-7;t++)u[256+m++]=_;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(U(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,h,0,r,i),w=new b(new Array(0),l,0,19,7)}(),L=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,I(t)},_tr_stored_block:T,_tr_flush_block:H,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},K=function(t,e,a,n){for(var r=65535&t,i=t>>>16&65535,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16},N=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),O=function(t,e,a,n){var r=N,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return~t},q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},F=0,G=2,J=3,P=4,Q=0,V=1,W=-1,X=0,Y=8,Z=R._tr_init,$=R._tr_stored_block,tt=R._tr_flush_block,et=R._tr_tally,at=R._tr_align,nt=F,rt=1,it=J,st=P,ht=5,lt=Q,_t=V,ot=-2,dt=-3,ut=-5,ft=W,ct=1,pt=2,gt=3,wt=4,vt=X,bt=2,mt=Y,yt=258,kt=262,zt=103,xt=113,At=666,Ut=function(t,e){return t.msg=q[e],e},It=function(t){return(t<<1)-(t>4?9:0)},Bt=function(t){for(var e=t.length;--e>=0;)t[e]=0},Et=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},St=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},Ct=function(t,e){tt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,St(t.strm)},Dt=function(t,e){t.pending_buf[t.pending++]=e},jt=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Mt=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-kt?t.strstart-(t.w_size-kt):0,_=t.window,o=t.w_mask,d=t.prev,u=t.strstart+yt,f=_[i+s-1],c=_[i+s];t.prev_length>=t.good_match&&(r>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(a=e)+s]===c&&_[a+s-1]===f&&_[a]===_[i]&&_[++a]===_[i+1]){i+=2,a++;do{}while(_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&i<u);if(n=yt-(u-i),i=u-yt,n>s){if(t.match_start=e,s=n,n>=h)break;f=_[i+s-1],c=_[i+s]}}}while((e=d[e&o])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},Lt=function(t){var e,a,n,r,i,s,h,l,_,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-kt)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,h=t.window,l=t.strstart+t.lookahead,_=r,o=void 0,(o=s.avail_in)>_&&(o=_),a=0===o?0:(s.avail_in-=o,h.set(s.input.subarray(s.next_in,s.next_in+o),l),1===s.state.wrap?s.adler=K(s.adler,h,o,l):2===s.state.wrap&&(s.adler=O(s.adler,h,o,l)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Et(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Et(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<kt&&0!==t.strm.avail_in)},Tt=function(t,e){for(var a,n;;){if(t.lookahead<kt){if(Lt(t),t.lookahead<kt&&e===nt)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-kt&&(t.match_length=Mt(t,a)),t.match_length>=3)if(n=et(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Et(t,t.ins_h,t.window[t.strstart+1]);else n=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2},Ht=function(t,e){for(var a,n,r;;){if(t.lookahead<kt){if(Lt(t),t.lookahead<kt&&e===nt)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-kt&&(t.match_length=Mt(t,a),t.match_length<=5&&(t.strategy===ct||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=et(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=Et(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Ct(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=et(t,0,t.window[t.strstart-1]))&&Ct(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=et(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Kt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Lt(t),0===t.lookahead&&e===nt)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Ct(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-kt&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Ct(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Tt),new Rt(4,5,16,8,Tt),new Rt(4,6,32,32,Tt),new Rt(4,4,16,16,Ht),new Rt(8,16,32,32,Ht),new Rt(8,16,128,128,Ht),new Rt(8,32,128,256,Ht),new Rt(32,128,258,1024,Ht),new Rt(32,258,258,4096,Ht)];function Nt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=mt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Bt(this.dyn_ltree),Bt(this.dyn_dtree),Bt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Bt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Bt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ot=function(t){if(!t||!t.state)return Ut(t,ot);t.total_in=t.total_out=0,t.data_type=bt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:xt,t.adler=2===e.wrap?0:1,e.last_flush=nt,Z(e),lt},qt=function(t){var e,a=Ot(t);return a===lt&&((e=t.state).window_size=2*e.w_size,Bt(e.head),e.max_lazy_match=Kt[e.level].max_lazy,e.good_match=Kt[e.level].good_length,e.nice_match=Kt[e.level].nice_length,e.max_chain_length=Kt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Ft=function(t,e,a,n,r,i){if(!t)return ot;var s=1;if(e===ft&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==mt||n<8||n>15||e<0||e>9||i<0||i>wt)return Ut(t,ot);8===n&&(n=9);var h=new Nt;return t.state=h,h.strm=t,h.wrap=s,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=i,h.method=a,qt(t)},Gt={deflateInit:function(t,e){return Ft(t,e,mt,15,8,vt)},deflateInit2:Ft,deflateReset:qt,deflateResetKeep:Ot,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?ot:(t.state.gzhead=e,lt):ot},deflate:function(t,e){var a,n;if(!t||!t.state||e>ht||e<0)return t?Ut(t,ot):ot;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===At&&e!==st)return Ut(t,0===t.avail_out?ut:ot);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Dt(r,31),Dt(r,139),Dt(r,8),r.gzhead?(Dt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Dt(r,255&r.gzhead.time),Dt(r,r.gzhead.time>>8&255),Dt(r,r.gzhead.time>>16&255),Dt(r,r.gzhead.time>>24&255),Dt(r,9===r.level?2:r.strategy>=pt||r.level<2?4:0),Dt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Dt(r,255&r.gzhead.extra.length),Dt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=O(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,0),Dt(r,9===r.level?2:r.strategy>=pt||r.level<2?4:0),Dt(r,3),r.status=xt);else{var s=mt+(r.w_bits-8<<4)<<8;s|=(r.strategy>=pt||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=xt,jt(r,s),0!==r.strstart&&(jt(r,t.adler>>>16),jt(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),St(t),a=r.pending,r.pending!==r.pending_buf_size));)Dt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),St(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Dt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),St(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Dt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=O(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=zt)}else r.status=zt;if(r.status===zt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&St(t),r.pending+2<=r.pending_buf_size&&(Dt(r,255&t.adler),Dt(r,t.adler>>8&255),t.adler=0,r.status=xt)):r.status=xt),0!==r.pending){if(St(t),0===t.avail_out)return r.last_flush=-1,lt}else if(0===t.avail_in&&It(e)<=It(i)&&e!==st)return Ut(t,ut);if(r.status===At&&0!==t.avail_in)return Ut(t,ut);if(0!==t.avail_in||0!==r.lookahead||e!==nt&&r.status!==At){var h=r.strategy===pt?function(t,e){for(var a;;){if(0===t.lookahead&&(Lt(t),0===t.lookahead)){if(e===nt)return 1;break}if(t.match_length=0,a=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===gt?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=yt){if(Lt(t),t.lookahead<=yt&&e===nt)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+yt;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=yt-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=et(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=et(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Ct(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===st?(Ct(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ct(t,!1),0===t.strm.avail_out)?1:2}(r,e):Kt[r.level].func(r,e);if(3!==h&&4!==h||(r.status=At),1===h||3===h)return 0===t.avail_out&&(r.last_flush=-1),lt;if(2===h&&(e===rt?at(r):e!==ht&&($(r,0,0,!1),e===it&&(Bt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),St(t),0===t.avail_out))return r.last_flush=-1,lt}return e!==st?lt:r.wrap<=0?_t:(2===r.wrap?(Dt(r,255&t.adler),Dt(r,t.adler>>8&255),Dt(r,t.adler>>16&255),Dt(r,t.adler>>24&255),Dt(r,255&t.total_in),Dt(r,t.total_in>>8&255),Dt(r,t.total_in>>16&255),Dt(r,t.total_in>>24&255)):(jt(r,t.adler>>>16),jt(r,65535&t.adler)),St(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?lt:_t)},deflateEnd:function(t){if(!t||!t.state)return ot;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==zt&&e!==xt&&e!==At?Ut(t,ot):(t.state=null,e===xt?Ut(t,dt):lt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return ot;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return ot;if(1===r&&(t.adler=K(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(Bt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,h=t.next_in,l=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Lt(n);n.lookahead>=3;){var _=n.strstart,o=n.lookahead-2;do{n.ins_h=Et(n,n.ins_h,n.window[_+3-1]),n.prev[_&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=_,_++}while(--o);n.strstart=_,n.lookahead=2,Lt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=h,t.input=l,t.avail_in=s,n.wrap=r,lt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Jt=new Uint8Array(256),Pt=0;Pt<256;Pt++)Jt[Pt]=Pt>=252?6:Pt>=248?5:Pt>=240?4:Pt>=224?3:Pt>=192?2:1;Jt[254]=Jt[254]=1;var Qt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Vt=Object.prototype.toString,Wt=F,Xt=G,Yt=J,Zt=P,$t=Q,te=V,ee=W,ae=X,ne=Y;function re(){this.options={level:ee,method:ne,chunkSize:16384,windowBits:15,memLevel:8,strategy:ae};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qt,this.strm.avail_out=0;var e=Gt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==$t)throw new Error(q[e]);if(t.header&&Gt.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Vt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Gt.deflateSetDictionary(this.strm,a))!==$t)throw new Error(q[e]);this._dict_set=!0}}function ie(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function se(t){const e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}re.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Zt:Wt,"[object ArrayBuffer]"===Vt.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Xt||n===Yt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Gt.deflate(r,n))===te)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Gt.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===$t;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},re.prototype.onData=function(t){this.chunks.push(t)},re.prototype.onEnd=function(t){t===$t&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,h=t.length;i<h;i++){var l=t[i];r.set(l,s),s+=l.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e=self){try{const a=new Map;e.addEventListener("message",(n=>{try{const r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"6.2.1"};case"write":{let n=e.get(a.streamId);n||(n=new re,e.set(a.streamId,n));const r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,n,r,i,s=t.length,h=0;for(r=0;r<s;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),h+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(h),i=0,r=0;i<h;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,G),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:se(n),additionalBytesCount:i.length}}case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){ie(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){ie(e,t)}}()})();'])))}let ki={status:0};function LV(t,e,n,r=PV){switch(ki.status===0&&BSe(t,e,r),ki.status){case 1:return ki.initializationFailureCallbacks.push(n),ki.worker;case 3:return ki.worker}}function FF(){return ki.status}function BSe(t,e,n=PV){try{const r=n(t),{stop:i}=ri(t,r,"error",o=>{V2(t,e,o)}),{stop:s}=ri(t,r,"message",({data:o})=>{o.type==="errored"?V2(t,e,o.error,o.streamId):o.type==="initialized"&&jSe(o.version)});r.postMessage({action:"init"}),aa(()=>zSe(e),FSe),ki={status:1,worker:r,stop:()=>{i(),s()},initializationFailureCallbacks:[]}}catch(r){V2(t,e,r)}}function zSe(t){ki.status===1&&(Jn.error(`${t} failed to start: a timeout occurred while initializing the Worker`),ki.initializationFailureCallbacks.forEach(e=>e()),ki={status:2})}function jSe(t){ki.status===1&&(ki={status:3,worker:ki.worker,stop:ki.stop,version:t})}function V2(t,e,n,r){if(ki.status===1||ki.status===0){if(Jn.error(`${e} failed to start: an error occurred while creating the Worker:`,n),n instanceof Event||n instanceof Error&&HSe(n.message)){let i;t.workerUrl?i=`Please make sure the Worker URL ${t.workerUrl} is correct and CSP is correctly configured.`:i="Please make sure CSP is correctly configured.",Jn.error(`${i} See documentation at ${oA}/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay`)}else vR(n);ki.status===1&&ki.initializationFailureCallbacks.forEach(i=>i()),ki={status:2}}else vR(n,{worker_version:ki.status===3&&ki.version,stream_id:r})}function HSe(t){return t.includes("Content Security Policy")||t.includes("requires 'TrustedScriptURL'")}function NV(){return typeof Array.from=="function"&&typeof CSSSupportsRule=="function"&&typeof URL.createObjectURL=="function"&&"forEach"in NodeList.prototype}function VSe(t,e,n,r){const i=e.findTrackedSession(),s=GSe(i,r),a=n.findView();return OSe(t,{viewContext:a,errorType:s,session:i})}function GSe(t,e){if(!NV())return"browser-not-supported";if(!t)return"rum-not-tracked";if(t.sessionReplay===0)return"incorrect-session-plan";if(!e)return"replay-not-started"}function $Se(t,e,n,r,i,s){let a=0,o;e.subscribe(9,()=>{(a===2||a===3)&&(f(),a=1)}),e.subscribe(11,p=>{p.reason===by.UNLOADING&&f()}),e.subscribe(10,()=>{a===1&&c()});const l=async()=>{const[p]=await Promise.all([i(),mve(t,"interactive")]);if(a!==2)return;const m=s();if(!m||!p){a=0;return}({stop:o}=p(e,t,n,r,m)),a=3};function c(p){const m=n.findTrackedSession();if(WSe(m,p)){a=1;return}qSe(a)||(a=2,l().catch(Vj),XSe(m,p)&&n.setForcedReplay())}function f(){a===3&&(o==null||o()),a=0}return{start:c,stop:f,getSessionReplayLink(){return VSe(t,n,r,a!==0)},isRecording:()=>a===3}}function WSe(t,e){return!t||t.sessionReplay===0&&(!e||!e.force)}function qSe(t){return t===2||t===3}function XSe(t,e){return e&&e.force&&t.sessionReplay===0}function KSe(){let t=0;return{strategy:{start(){t=1},stop(){t=2},isRecording:()=>!1,getSessionReplayLink:Mr},shouldStartImmediately(e){return t===1||t===0&&!e.startSessionReplayRecordingManually}}}function YSe(t,e){if(Mc()&&!UH("records")||!NV())return{start:Mr,stop:Mr,getReplayStats:()=>{},onRumStart:Mr,isRecording:()=>!1,getSessionReplayLink:()=>{}};let{strategy:n,shouldStartImmediately:r}=KSe();return{start:s=>n.start(s),stop:()=>n.stop(),getSessionReplayLink:()=>n.getSessionReplayLink(),onRumStart:i,isRecording:()=>FF()===3&&n.isRecording(),getReplayStats:s=>FF()===3?DSe(s):void 0};function i(s,a,o,l,c){let f;function p(){return f||(c??(c=LV(a,"Datadog Session Replay",()=>{n.stop()},e)),c&&(f=OV(a,c,1))),f}n=$Se(a,s,o,l,t,p),r(a)&&n.start()}}const ZSe="modulepreload",JSe=function(t){return"/"+t},BF={},QSe=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=JSe(l),l in BF)return;BF[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":ZSe,c||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),c)return new Promise((m,_)=>{p.addEventListener("load",m),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};async function ebe(){try{return(await QSe(()=>import("./startRecording-Bgga3O6d.js"),[])).startRecording}catch{}}const tbe=YSe(ebe),Bm=pye(ASe,tbe,{startDeflateWorker:LV,createDeflateEncoder:OV});gH(sf(),"DD_RUM",Bm);var G2={},$2={},W2={},zF;function nbe(){return zF||(zF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];if(typeof window<"u"){var o;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(o=window).gtag.apply(o,s)}},n=e;t.default=n}(W2)),W2}var q2={},jF;function rbe(){return jF||(jF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function n(o){return o.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(l,c,f){return c>0&&c+l.length!==f.length&&l.search(e)>-1&&f.charAt(c-2)!==":"&&(f.charAt(c+l.length)!=="-"||f.charAt(c-1)==="-")&&f.charAt(c-1).search(/[^\s-]/)<0?l.toLowerCase():l.substr(1).search(/[A-Z]|\../)>-1?l:l.charAt(0).toUpperCase()+l.substr(1)})}function r(o){return typeof o=="string"&&o.indexOf("@")!==-1}var i="REDACTED (Potential Email Address)";function s(o){return r(o)?(console.warn("This arg looks like an email address, redacting."),i):o}function a(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=o||"";return l&&(f=n(o)),c&&(f=s(f)),f}}(q2)),q2}var HF;function ibe(){return HF||(HF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var e=a(nbe()),n=a(rbe()),r=["eventCategory","eventAction","eventLabel","eventValue","hitType"],i=["title","location"],s=["page","hitType"];function a(H){return H&&H.__esModule?H:{default:H}}function o(H,V){if(H==null)return{};var W=l(H,V),J,X;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(H);for(X=0;X<ie.length;X++)J=ie[X],!(V.indexOf(J)>=0)&&Object.prototype.propertyIsEnumerable.call(H,J)&&(W[J]=H[J])}return W}function l(H,V){if(H==null)return{};var W={},J=Object.keys(H),X,ie;for(ie=0;ie<J.length;ie++)X=J[ie],!(V.indexOf(X)>=0)&&(W[X]=H[X]);return W}function c(H){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},c(H)}function f(H){return _(H)||m(H)||R(H)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(H){if(typeof Symbol<"u"&&H[Symbol.iterator]!=null||H["@@iterator"]!=null)return Array.from(H)}function _(H){if(Array.isArray(H))return C(H)}function y(H,V){var W=Object.keys(H);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(H);V&&(J=J.filter(function(X){return Object.getOwnPropertyDescriptor(H,X).enumerable})),W.push.apply(W,J)}return W}function E(H){for(var V=1;V<arguments.length;V++){var W=arguments[V]!=null?arguments[V]:{};V%2?y(Object(W),!0).forEach(function(J){L(H,J,W[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(W)):y(Object(W)).forEach(function(J){Object.defineProperty(H,J,Object.getOwnPropertyDescriptor(W,J))})}return H}function S(H,V){return M(H)||k(H,V)||R(H,V)||w()}function w(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(H,V){if(H){if(typeof H=="string")return C(H,V);var W=Object.prototype.toString.call(H).slice(8,-1);if(W==="Object"&&H.constructor&&(W=H.constructor.name),W==="Map"||W==="Set")return Array.from(H);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return C(H,V)}}function C(H,V){(V==null||V>H.length)&&(V=H.length);for(var W=0,J=new Array(V);W<V;W++)J[W]=H[W];return J}function k(H,V){var W=H==null?null:typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if(W!=null){var J,X,ie,pe,Z=[],le=!0,ae=!1;try{if(ie=(W=W.call(H)).next,V!==0)for(;!(le=(J=ie.call(W)).done)&&(Z.push(J.value),Z.length!==V);le=!0);}catch(Ee){ae=!0,X=Ee}finally{try{if(!le&&W.return!=null&&(pe=W.return(),Object(pe)!==pe))return}finally{if(ae)throw X}}return Z}}function M(H){if(Array.isArray(H))return H}function N(H,V){if(!(H instanceof V))throw new TypeError("Cannot call a class as a function")}function O(H,V){for(var W=0;W<V.length;W++){var J=V[W];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(H,B(J.key),J)}}function D(H,V,W){return O(H.prototype,V),Object.defineProperty(H,"prototype",{writable:!1}),H}function L(H,V,W){return V=B(V),V in H?Object.defineProperty(H,V,{value:W,enumerable:!0,configurable:!0,writable:!0}):H[V]=W,H}function B(H){var V=ee(H,"string");return c(V)==="symbol"?V:String(V)}function ee(H,V){if(c(H)!=="object"||H===null)return H;var W=H[Symbol.toPrimitive];if(W!==void 0){var J=W.call(H,V||"default");if(c(J)!=="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(H)}var te=function(){function H(){var V=this;N(this,H),L(this,"reset",function(){V.isInitialized=!1,V._testMode=!1,V._currentMeasurementId,V._hasLoadedGA=!1,V._isQueuing=!1,V._queueGtag=[]}),L(this,"_gtag",function(){for(var W=arguments.length,J=new Array(W),X=0;X<W;X++)J[X]=arguments[X];V._testMode||V._isQueuing?V._queueGtag.push(J):e.default.apply(void 0,J)}),L(this,"_loadGA",function(W,J){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!V._hasLoadedGA){var ie=document.createElement("script");ie.async=!0,ie.src="".concat(X,"?id=").concat(W),J&&ie.setAttribute("nonce",J),document.body.appendChild(ie),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},V._hasLoadedGA=!0}}),L(this,"_toGtagOptions",function(W){if(W){var J={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},X=Object.entries(W).reduce(function(ie,pe){var Z=S(pe,2),le=Z[0],ae=Z[1];return J[le]?ie[J[le]]=ae:ie[le]=ae,ie},{});return X}}),L(this,"initialize",function(W){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!W)throw new Error("Require GA_MEASUREMENT_ID");var X=typeof W=="string"?[{trackingId:W}]:W;V._currentMeasurementId=X[0].trackingId;var ie=J.gaOptions,pe=J.gtagOptions,Z=J.nonce,le=J.testMode,ae=le===void 0?!1:le,Ee=J.gtagUrl;if(V._testMode=ae,ae||V._loadGA(V._currentMeasurementId,Z,Ee),V.isInitialized||(V._gtag("js",new Date),X.forEach(function(Le){var We=E(E(E({},V._toGtagOptions(E(E({},ie),Le.gaOptions))),pe),Le.gtagOptions);Object.keys(We).length?V._gtag("config",Le.trackingId,We):V._gtag("config",Le.trackingId)})),V.isInitialized=!0,!ae){var ke=f(V._queueGtag);for(V._queueGtag=[],V._isQueuing=!1;ke.length;){var $e=ke.shift();V._gtag.apply(V,f($e)),$e[0]==="get"&&(V._isQueuing=!0)}}}),L(this,"set",function(W){if(!W){console.warn("`fieldsObject` is required in .set()");return}if(c(W)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(W).length===0&&console.warn("empty `fieldsObject` given to .set()"),V._gaCommand("set",W)}),L(this,"_gaCommandSendEvent",function(W,J,X,ie,pe){V._gtag("event",J,E(E({event_category:W,event_label:X,value:ie},pe&&{non_interaction:pe.nonInteraction}),V._toGtagOptions(pe)))}),L(this,"_gaCommandSendEventParameters",function(){for(var W=arguments.length,J=new Array(W),X=0;X<W;X++)J[X]=arguments[X];if(typeof J[0]=="string")V._gaCommandSendEvent.apply(V,f(J.slice(1)));else{var ie=J[0],pe=ie.eventCategory,Z=ie.eventAction,le=ie.eventLabel,ae=ie.eventValue;ie.hitType;var Ee=o(ie,r);V._gaCommandSendEvent(pe,Z,le,ae,Ee)}}),L(this,"_gaCommandSendTiming",function(W,J,X,ie){V._gtag("event","timing_complete",{name:J,value:X,event_category:W,event_label:ie})}),L(this,"_gaCommandSendPageview",function(W,J){if(J&&Object.keys(J).length){var X=V._toGtagOptions(J),ie=X.title,pe=X.location,Z=o(X,i);V._gtag("event","page_view",E(E(E(E({},W&&{page_path:W}),ie&&{page_title:ie}),pe&&{page_location:pe}),Z))}else W?V._gtag("event","page_view",{page_path:W}):V._gtag("event","page_view")}),L(this,"_gaCommandSendPageviewParameters",function(){for(var W=arguments.length,J=new Array(W),X=0;X<W;X++)J[X]=arguments[X];if(typeof J[0]=="string")V._gaCommandSendPageview.apply(V,f(J.slice(1)));else{var ie=J[0],pe=ie.page;ie.hitType;var Z=o(ie,s);V._gaCommandSendPageview(pe,Z)}}),L(this,"_gaCommandSend",function(){for(var W=arguments.length,J=new Array(W),X=0;X<W;X++)J[X]=arguments[X];var ie=typeof J[0]=="string"?J[0]:J[0].hitType;switch(ie){case"event":V._gaCommandSendEventParameters.apply(V,J);break;case"pageview":V._gaCommandSendPageviewParameters.apply(V,J);break;case"timing":V._gaCommandSendTiming.apply(V,f(J.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(ie));break;default:console.warn("Send command doesn't exist: ".concat(ie))}}),L(this,"_gaCommandSet",function(){for(var W=arguments.length,J=new Array(W),X=0;X<W;X++)J[X]=arguments[X];typeof J[0]=="string"&&(J[0]=L({},J[0],J[1])),V._gtag("set",V._toGtagOptions(J[0]))}),L(this,"_gaCommand",function(W){for(var J=arguments.length,X=new Array(J>1?J-1:0),ie=1;ie<J;ie++)X[ie-1]=arguments[ie];switch(W){case"send":V._gaCommandSend.apply(V,X);break;case"set":V._gaCommandSet.apply(V,X);break;default:console.warn("Command doesn't exist: ".concat(W))}}),L(this,"ga",function(){for(var W=arguments.length,J=new Array(W),X=0;X<W;X++)J[X]=arguments[X];if(typeof J[0]=="string")V._gaCommand.apply(V,J);else{var ie=J[0];V._gtag("get",V._currentMeasurementId,"client_id",function(pe){V._isQueuing=!1;var Z=V._queueGtag;for(ie({get:function(Ee){return Ee==="clientId"?pe:Ee==="trackingId"?V._currentMeasurementId:Ee==="apiVersion"?"1":void 0}});Z.length;){var le=Z.shift();V._gtag.apply(V,f(le))}}),V._isQueuing=!0}return V.ga}),L(this,"event",function(W,J){if(typeof W=="string")V._gtag("event",W,V._toGtagOptions(J));else{var X=W.action,ie=W.category,pe=W.label,Z=W.value,le=W.nonInteraction,ae=W.transport;if(!ie||!X){console.warn("args.category AND args.action are required in event()");return}var Ee={hitType:"event",eventCategory:(0,n.default)(ie),eventAction:(0,n.default)(X)};pe&&(Ee.eventLabel=(0,n.default)(pe)),typeof Z<"u"&&(typeof Z!="number"?console.warn("Expected `args.value` arg to be a Number."):Ee.eventValue=Z),typeof le<"u"&&(typeof le!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Ee.nonInteraction=le),typeof ae<"u"&&(typeof ae!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(ae)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Ee.transport=ae)),V._gaCommand("send",Ee)}}),L(this,"send",function(W){V._gaCommand("send",W)}),this.reset()}return D(H,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),H}();t.GA4=te;var ne=new te;t.default=ne}($2)),$2}var VF;function sbe(){return VF||(VF=1,function(t){function e(o){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactGAImplementation=void 0;var n=i(ibe());function r(o){if(typeof WeakMap!="function")return null;var l=new WeakMap,c=new WeakMap;return(r=function(p){return p?c:l})(o)}function i(o,l){if(o&&o.__esModule)return o;if(o===null||e(o)!=="object"&&typeof o!="function")return{default:o};var c=r(l);if(c&&c.has(o))return c.get(o);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in o)if(m!=="default"&&Object.prototype.hasOwnProperty.call(o,m)){var _=p?Object.getOwnPropertyDescriptor(o,m):null;_&&(_.get||_.set)?Object.defineProperty(f,m,_):f[m]=o[m]}return f.default=o,c&&c.set(o,f),f}var s=n.GA4;t.ReactGAImplementation=s;var a=n.default;t.default=a}(G2)),G2}var abe=sbe();const DV=Xg(abe);class obe{constructor(e,n,r,i){this.isRudderReady=!1,this.useDatadog=!1,this.useGA=!1,this.context={},this.initialized=!1,this.clientName=n,this.env=e,this.useGA=r,this.featureFlagManager=i}async initialize(e){if(!this.initialized){if(e.rudderstackWriteKey===void 0||e.rudderstackWriteKey.length===0){console.warn("No write key provided, analytics will not be sent");return}this.rudderAnalytics=new gP,this.rudderAnalytics.load(e.rudderstackWriteKey,"https://sesameaihzfjvw.dataplane.rudderstack.com",{}),this.rudderAnalytics.ready(()=>{this.isRudderReady=!0}),e.datadogEnabled&&e.datadogRumClientToken!==void 0&&e.datadogRumClientToken.length>0&&e.datadogRumAppId!==void 0&&e.datadogRumAppId.length>0&&(this.useDatadog=!0,Bm.getInternalContext()===void 0&&Bm.init({applicationId:e.datadogRumAppId,clientToken:e.datadogRumClientToken,site:"us5.datadoghq.com",service:this.clientName.toLowerCase().replace(/-/g,"_"),env:this.env,sessionSampleRate:e.datadogSampleRate,sessionReplaySampleRate:0,defaultPrivacyLevel:"mask-user-input"})),this.initialized=!0}}identify(e,n,r,i,s){var a;this.isRudderReady&&((a=this.rudderAnalytics)==null||a.identify(e,{email:n,displayName:r,isStaff:i,isLoggedIn:s})),this.useDatadog&&Bm.setGlobalContextProperty("user",{uid:e,email:n,displayName:r,isStaff:i,isLoggedIn:s})}setContext(e,n){this.context[e]=n,this.useDatadog&&Bm.setGlobalContextProperty(e,n)}unsetContext(e){delete this.context[e],this.useDatadog&&Bm.setGlobalContextProperty(e,void 0)}track(e){var o;const{NAME:n,value:r,sendToDatadog:i,sendToStatsig:s,...a}=e;a.clientName=this.clientName,Object.assign(a,this.context),this.isRudderReady&&((o=this.rudderAnalytics)==null||o.track(n,a)),this.useGA&&DV.event(n,a),this.useDatadog&&(i??!0)&&Bm.addAction(n,a),s&&this.featureFlagManager.logEvent(n,r,a)}}class lbe{constructor(e,n,r,i){this.clientName=e,this.env=n,this.useGA=r,this.featureFlagManager=i}getAnalyticsManager(){return this.env.name==="local"?new nde:new obe(this.env.name,this.clientName,this.useGA,this.featureFlagManager)}}const ube={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},UV={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Mi={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Sa={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},th={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Ge{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=Ge.getVersionPrecision(e),s=Ge.getVersionPrecision(n);let a=Math.max(i,s),o=0;const l=Ge.map([e,n],c=>{const f=a-Ge.getVersionPrecision(c),p=c+new Array(f+1).join(".0");return Ge.map(p.split("."),m=>new Array(20-m.length).join("0")+m).reverse()});for(r&&(o=a-Math.min(i,s)),a-=1;a>=o;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===o)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let i,s;if(Object.assign)return Object.assign(e,...n);for(i=0,s=n.length;i<s;i+=1){const a=n[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(l=>{r[l]=a[l]})}return e}static getBrowserAlias(e){return ube[e]}static getBrowserTypeByAlias(e){return UV[e]||""}}const Fr=/version\/(\d+(\.?_?\d+)+)/i,cbe=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=Ge.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=Ge.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=Ge.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=Ge.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=Ge.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=Ge.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=Ge.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=Ge.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=Ge.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=Ge.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=Ge.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=Ge.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=Ge.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=Ge.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=Ge.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=Ge.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=Ge.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=Ge.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=Ge.getFirstMatch(Fr,t)||Ge.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=Ge.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=Ge.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=Ge.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=Ge.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=Ge.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=Ge.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=Ge.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=Ge.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=Ge.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=Ge.getFirstMatch(Fr,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,i=t.search("\\(")!==-1?n:e;return{name:Ge.getFirstMatch(i,t),version:Ge.getSecondMatch(i,t)}}}],dbe=[{test:[/Roku\/DVP/],describe(t){const e=Ge.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Sa.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=Ge.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Sa.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=Ge.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=Ge.getWindowsVersionName(e);return{name:Sa.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Sa.iOS},n=Ge.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=Ge.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=Ge.getMacOSVersionName(e),r={name:Sa.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=Ge.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Sa.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=Ge.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=Ge.getAndroidVersionName(e),r={name:Sa.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=Ge.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Sa.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=Ge.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||Ge.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||Ge.getFirstMatch(/\bbb(\d+)/i,t);return{name:Sa.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=Ge.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Sa.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=Ge.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Sa.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Sa.Linux}}},{test:[/CrOS/],describe(){return{name:Sa.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=Ge.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Sa.PlayStation4,version:e}}}],fbe=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=Ge.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Mi.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Mi.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Mi.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Mi.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Mi.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Mi.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Mi.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=Ge.getFirstMatch(/(ipod|iphone)/i,t);return{type:Mi.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Mi.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Mi.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:Mi.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:Mi.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:Mi.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:Mi.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:Mi.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:Mi.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:Mi.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:Mi.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:Mi.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:Mi.tv}}}],hbe=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:th.Blink};const n=Ge.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:th.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:th.Trident},n=Ge.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:th.Presto},n=Ge.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:th.Gecko},n=Ge.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:th.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:th.WebKit},n=Ge.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class GF{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Ge.find(cbe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Ge.find(dbe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=Ge.find(fbe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Ge.find(hbe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Ge.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let s=0;if(Object.keys(e).forEach(o=>{const l=e[o];typeof l=="string"?(i[o]=l,s+=1):typeof l=="object"&&(n[o]=l,r+=1)}),r>0){const o=Object.keys(n),l=Ge.find(o,f=>this.isOS(f));if(l){const f=this.satisfies(n[l]);if(f!==void 0)return f}const c=Ge.find(o,f=>this.isPlatform(f));if(c){const f=this.satisfies(n[c]);if(f!==void 0)return f}}if(s>0){const o=Object.keys(i),l=Ge.find(o,c=>this.isBrowser(c,!0));if(l!==void 0)return this.compareVersion(i[l])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const s=Ge.getBrowserTypeByAlias(i);return n&&s&&(i=s.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(Ge.compareVersions(s,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class $F{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new GF(e,n)}static parse(e){return new GF(e).getResult()}static get BROWSER_MAP(){return UV}static get ENGINE_MAP(){return th}static get OS_MAP(){return Sa}static get PLATFORMS_MAP(){return Mi}}class rp{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pbe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Xb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gbe(e))try{this.getOrInitializeService({instanceIdentifier:zm})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zm){return this.instances.has(e)}getOptions(e=zm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mbe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zm){return this.component?this.component.multipleInstances?e:zm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mbe(t){return t===zm?void 0:t}function gbe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _be{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pbe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(jr||(jr={}));const vbe={debug:jr.DEBUG,verbose:jr.VERBOSE,info:jr.INFO,warn:jr.WARN,error:jr.ERROR,silent:jr.SILENT},ybe=jr.INFO,Ebe={[jr.DEBUG]:"log",[jr.VERBOSE]:"log",[jr.INFO]:"info",[jr.WARN]:"warn",[jr.ERROR]:"error"},Sbe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Ebe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let VN=class{constructor(e){this.name=e,this._logLevel=ybe,this._logHandler=Sbe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vbe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jr.DEBUG,...e),this._logHandler(this,jr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jr.VERBOSE,...e),this._logHandler(this,jr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jr.INFO,...e),this._logHandler(this,jr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jr.WARN,...e),this._logHandler(this,jr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jr.ERROR,...e),this._logHandler(this,jr.ERROR,...e)}};const bbe=(t,e)=>e.some(n=>t instanceof n);let WF,qF;function wbe(){return WF||(WF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tbe(){return qF||(qF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FV=new WeakMap,wP=new WeakMap,BV=new WeakMap,X2=new WeakMap,GN=new WeakMap;function xbe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(zh(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&FV.set(n,t)}).catch(()=>{}),GN.set(e,t),e}function Cbe(t){if(wP.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});wP.set(t,e)}let TP={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BV.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Rbe(t){TP=t(TP)}function Mbe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(K2(this),e,...n);return BV.set(r,e.sort?e.sort():[e]),zh(r)}:Tbe().includes(t)?function(...e){return t.apply(K2(this),e),zh(FV.get(this))}:function(...e){return zh(t.apply(K2(this),e))}}function Abe(t){return typeof t=="function"?Mbe(t):(t instanceof IDBTransaction&&Cbe(t),bbe(t,wbe())?new Proxy(t,TP):t)}function zh(t){if(t instanceof IDBRequest)return xbe(t);if(X2.has(t))return X2.get(t);const e=Abe(t);return e!==t&&(X2.set(t,e),GN.set(e,t)),e}const K2=t=>GN.get(t);function Ibe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=zh(a);return r&&a.addEventListener("upgradeneeded",l=>{r(zh(a.result),l.oldVersion,l.newVersion,zh(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const kbe=["get","getKey","getAll","getAllKeys","count"],Obe=["put","add","delete","clear"],Y2=new Map;function XF(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Y2.get(e))return Y2.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Obe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kbe.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&l.done]))[0]};return Y2.set(e,s),s}Rbe(t=>({...t,get:(e,n,r)=>XF(e,n)||t.get(e,n,r),has:(e,n)=>!!XF(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pbe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lbe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Lbe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xP="@firebase/app",KF="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd=new VN("@firebase/app"),Nbe="@firebase/app-compat",Dbe="@firebase/analytics-compat",Ube="@firebase/analytics",Fbe="@firebase/app-check-compat",Bbe="@firebase/app-check",zbe="@firebase/auth",jbe="@firebase/auth-compat",Hbe="@firebase/database",Vbe="@firebase/data-connect",Gbe="@firebase/database-compat",$be="@firebase/functions",Wbe="@firebase/functions-compat",qbe="@firebase/installations",Xbe="@firebase/installations-compat",Kbe="@firebase/messaging",Ybe="@firebase/messaging-compat",Zbe="@firebase/performance",Jbe="@firebase/performance-compat",Qbe="@firebase/remote-config",e1e="@firebase/remote-config-compat",t1e="@firebase/storage",n1e="@firebase/storage-compat",r1e="@firebase/firestore",i1e="@firebase/vertexai",s1e="@firebase/firestore-compat",a1e="firebase",o1e="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="[DEFAULT]",l1e={[xP]:"fire-core",[Nbe]:"fire-core-compat",[Ube]:"fire-analytics",[Dbe]:"fire-analytics-compat",[Bbe]:"fire-app-check",[Fbe]:"fire-app-check-compat",[zbe]:"fire-auth",[jbe]:"fire-auth-compat",[Hbe]:"fire-rtdb",[Vbe]:"fire-data-connect",[Gbe]:"fire-rtdb-compat",[$be]:"fire-fn",[Wbe]:"fire-fn-compat",[qbe]:"fire-iid",[Xbe]:"fire-iid-compat",[Kbe]:"fire-fcm",[Ybe]:"fire-fcm-compat",[Zbe]:"fire-perf",[Jbe]:"fire-perf-compat",[Qbe]:"fire-rc",[e1e]:"fire-rc-compat",[t1e]:"fire-gcs",[n1e]:"fire-gcs-compat",[r1e]:"fire-fst",[s1e]:"fire-fst-compat",[i1e]:"fire-vertex","fire-js":"fire-js",[a1e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new Map,u1e=new Map,RP=new Map;function YF(t,e){try{t.container.addComponent(e)}catch(n){Yd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bg(t){const e=t.name;if(RP.has(e))return Yd.debug(`There were multiple attempts to register component ${e}.`),!1;RP.set(e,t);for(const n of v1.values())YF(n,t);for(const n of u1e.values())YF(n,t);return!0}function vA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hu(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jh=new E0("app","Firebase",c1e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1e{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=o1e;function $N(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:CP,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jh.create("bad-app-name",{appName:String(i)});if(n||(n=O9()),!n)throw jh.create("no-options");const s=v1.get(i);if(s){if(JC(n,s.options)&&JC(r,s.config))return s;throw jh.create("duplicate-app",{appName:i})}const a=new _be(i);for(const l of RP.values())a.addComponent(l);const o=new d1e(n,r,a);return v1.set(i,o),o}function zV(t=CP){const e=v1.get(t);if(!e&&t===CP&&O9())return $N();if(!e)throw jh.create("no-app",{appName:t});return e}function f1e(){return Array.from(v1.values())}function vg(t,e,n){var r;let i=(r=l1e[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yd.warn(o.join(" "));return}Bg(new rp(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1e="firebase-heartbeat-database",p1e=1,y1="firebase-heartbeat-store";let Z2=null;function jV(){return Z2||(Z2=Ibe(h1e,p1e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(y1)}catch(n){console.warn(n)}}}}).catch(t=>{throw jh.create("idb-open",{originalErrorMessage:t.message})})),Z2}async function m1e(t){try{const n=(await jV()).transaction(y1),r=await n.objectStore(y1).get(HV(t));return await n.done,r}catch(e){if(e instanceof _p)Yd.warn(e.message);else{const n=jh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yd.warn(n.message)}}}async function ZF(t,e){try{const r=(await jV()).transaction(y1,"readwrite");await r.objectStore(y1).put(e,HV(t)),await r.done}catch(n){if(n instanceof _p)Yd.warn(n.message);else{const r=jh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yd.warn(r.message)}}}function HV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1e=1024,_1e=30*24*60*60*1e3;class v1e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new E1e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=JF();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=_1e}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=JF(),{heartbeatsToSend:r,unsentEntries:i}=y1e(this._heartbeatsCache.heartbeats),s=A9(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Yd.warn(n),""}}}function JF(){return new Date().toISOString().substring(0,10)}function y1e(t,e=g1e){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),QF(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class E1e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mN()?Xle().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await m1e(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ZF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ZF(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QF(t){return A9(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1e(t){Bg(new rp("platform-logger",e=>new Pbe(e),"PRIVATE")),Bg(new rp("heartbeat",e=>new v1e(e),"PRIVATE")),vg(xP,KF,t),vg(xP,KF,"esm2017"),vg("fire-js","")}S1e("");var b1e="firebase",w1e="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vg(b1e,w1e,"app");function WN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function VV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T1e=VV,GV=new E0("auth","Firebase",VV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new VN("@firebase/auth");function x1e(t,...e){ER.logLevel<=jr.WARN&&ER.warn(`Auth (${uw}): ${t}`,...e)}function mC(t,...e){ER.logLevel<=jr.ERROR&&ER.error(`Auth (${uw}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t,...e){throw XN(t,...e)}function vu(t,...e){return XN(t,...e)}function qN(t,e,n){const r=Object.assign(Object.assign({},T1e()),{[e]:n});return new E0("auth","Firebase",r).create(e,{appName:t.name})}function Fd(t){return qN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ic(t,"argument-error"),qN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function XN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GV.create(t,...e)}function on(t,e,...n){if(!t)throw XN(e,...n)}function Od(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mC(e),new Error(e)}function Zd(t,e){t||Od(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $V(){return e5()==="http:"||e5()==="https:"}function e5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($V()||$le()||"connection"in navigator)?navigator.onLine:!0}function R1e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zd(n>e,"Short delay should be less than long delay!"),this.isMobile=Vle()||Wle()}get(){return C1e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e){Zd(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Od("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Od("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Od("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1e=new cw(3e4,6e4);function dw(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function s_(t,e,n,r,i={}){return qV(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=J1(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return Gle()||(c.referrerPolicy="no-referrer"),WV.fetch()(KV(t,t.config.apiHost,n,o),c)})}async function qV(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},M1e),e);try{const i=new I1e(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ax(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ax(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw ax(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw ax(t,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw qN(t,f,c);Ic(t,f)}}catch(i){if(i instanceof _p)throw i;Ic(t,"network-request-failed",{message:String(i)})}}async function XV(t,e,n,r,i={}){const s=await s_(t,e,n,r,i);return"mfaPendingCredential"in s&&Ic(t,"multi-factor-auth-required",{_serverResponse:s}),s}function KV(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?KN(t.config,i):`${t.config.apiScheme}://${i}`}class I1e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vu(this.auth,"network-request-failed")),A1e.get())})}}function ax(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vu(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1e(t,e){return s_(t,"POST","/v1/accounts:delete",e)}async function YV(t,e){return s_(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function O1e(t,e=!1){const n=qo(t),r=await n.getIdToken(e),i=YN(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ab(J2(i.auth_time)),issuedAtTime:Ab(J2(i.iat)),expirationTime:Ab(J2(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function J2(t){return Number(t)*1e3}function YN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mC("JWT malformed, contained fewer than 3 sections"),null;try{const i=I9(n);return i?JSON.parse(i):(mC("Failed to decode base64 JWT payload"),null)}catch(i){return mC("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function t5(t){const e=YN(t);return on(e,"internal-error"),on(typeof e.exp<"u","internal-error"),on(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _p&&P1e(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function P1e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ab(this.lastLoginAt),this.creationTime=Ab(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(t){var e;const n=t.auth,r=await t.getIdToken(),i=await E1(t,YV(n,{idToken:r}));on(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ZV(s.providerUserInfo):[],o=D1e(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),f=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new MP(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function N1e(t){const e=qo(t);await S1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D1e(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZV(t){return t.map(e=>{var{providerId:n}=e,r=WN(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1e(t,e){const n=await qV(t,{},async()=>{const r=J1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=KV(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",WV.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F1e(t,e){return s_(t,"POST","/v2/accounts:revokeToken",dw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){on(e.idToken,"internal-error"),on(typeof e.idToken<"u","internal-error"),on(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){on(e.length!==0,"internal-error");const n=t5(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(on(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await U1e(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new wy;return r&&(on(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(on(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(on(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wy,this.toJSON())}_performRefresh(){return Od("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e){on(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pd{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=WN(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new L1e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new MP(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await E1(this,this.stsTokenManager.getToken(this.auth,e));return on(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return O1e(this,e)}reload(){return N1e(this)}_assign(e){this!==e&&(on(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await S1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hu(this.auth.app))return Promise.reject(Fd(this.auth));const e=await this.getIdToken();return await E1(this,k1e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,l,c,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(a=n.photoURL)!==null&&a!==void 0?a:void 0,E=(o=n.tenantId)!==null&&o!==void 0?o:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,R=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:k,isAnonymous:M,providerData:N,stsTokenManager:O}=n;on(C&&O,e,"internal-error");const D=wy.fromJSON(this.name,O);on(typeof C=="string",e,"internal-error"),Xf(p,e.name),Xf(m,e.name),on(typeof k=="boolean",e,"internal-error"),on(typeof M=="boolean",e,"internal-error"),Xf(_,e.name),Xf(y,e.name),Xf(E,e.name),Xf(S,e.name),Xf(w,e.name),Xf(R,e.name);const L=new Pd({uid:C,auth:e,email:m,emailVerified:k,displayName:p,isAnonymous:M,photoURL:y,phoneNumber:_,tenantId:E,stsTokenManager:D,createdAt:w,lastLoginAt:R});return N&&Array.isArray(N)&&(L.providerData=N.map(B=>Object.assign({},B))),S&&(L._redirectEventId=S),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new wy;i.updateFromServerResponse(n);const s=new Pd({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await S1(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];on(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ZV(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new wy;o.updateFromIdToken(r);const l=new Pd({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new MP(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=new Map;function Ld(t){Zd(t instanceof Function,"Expected a class definition");let e=n5.get(t);return e?(Zd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,n5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JV.type="NONE";const r5=JV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t,e,n){return`firebase:${t}:${e}:${n}`}class Ty{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=gC(this.userKey,i.apiKey,s),this.fullPersistenceKey=gC("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ty(Ld(r5),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ld(r5);const a=gC(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const f=await c._get(a);if(f){const p=Pd._fromJSON(e,f);c!==s&&(o=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ty(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Ty(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iG(e))return"Blackberry";if(sG(e))return"Webos";if(eG(e))return"Safari";if((e.includes("chrome/")||tG(e))&&!e.includes("edge/"))return"Chrome";if(rG(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QV(t=Oa()){return/firefox\//i.test(t)}function eG(t=Oa()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tG(t=Oa()){return/crios\//i.test(t)}function nG(t=Oa()){return/iemobile/i.test(t)}function rG(t=Oa()){return/android/i.test(t)}function iG(t=Oa()){return/blackberry/i.test(t)}function sG(t=Oa()){return/webos/i.test(t)}function ZN(t=Oa()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function B1e(t=Oa()){var e;return ZN(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function z1e(){return qle()&&document.documentMode===10}function aG(t=Oa()){return ZN(t)||rG(t)||sG(t)||iG(t)||/windows phone/i.test(t)||nG(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oG(t,e=[]){let n;switch(t){case"Browser":n=i5(Oa());break;case"Worker":n=`${i5(Oa())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uw}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1e(t,e={}){return s_(t,"GET","/v2/passwordPolicy",dw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1e=6;class G1e{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:V1e,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s5(this),this.idTokenSubscription=new s5(this),this.beforeStateQueue=new j1e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ld(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ty.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await YV(this,{idToken:e}),r=await Pd._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hu(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await S1(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R1e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hu(this.app))return Promise.reject(Fd(this));const n=e?qo(e):null;return n&&on(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&on(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hu(this.app)?Promise.reject(Fd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hu(this.app)?Promise.reject(Fd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ld(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H1e(this),n=new G1e(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new E0("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await F1e(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ld(e)||this._popupRedirectResolver;on(n,this,"argument-error"),this.redirectPersistenceManager=await Ty.create(this,[Ld(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&x1e(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yp(t){return qo(t)}class s5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qle(n=>this.observer=n)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W1e(t){JN=t}function q1e(t){return JN.loadJS(t)}function X1e(){return JN.gapiScript}function K1e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1e(t,e){const n=vA(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(JC(s,e??{}))return i;Ic(i,"already-initialized")}return n.initialize({options:e})}function Z1e(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ld);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function J1e(t,e,n){const r=yp(t);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=lG(e),{host:a,port:o}=Q1e(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ewe()}function lG(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Q1e(t){const e=lG(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:a5(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:a5(a)}}}function a5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ewe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Od("not implemented")}_getIdTokenResponse(e){return Od("not implemented")}_linkToIdToken(e,n){return Od("not implemented")}_getReauthenticationResolver(e){return Od("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xy(t,e){return XV(t,"POST","/v1/accounts:signInWithIdp",dw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const twe="http://localhost";class Jd extends uG{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ic("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=WN(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Jd(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return xy(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xy(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xy(e,n)}buildRequest(){const e={requestUri:twe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=J1(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends R0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hh extends M0{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return on("providerId"in n&&"signInMethod"in n,"argument-error"),Jd._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return on(e.idToken||e.accessToken,"argument-error"),Jd._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Hh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Hh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!r&&!i&&!n&&!s||!o)return null;try{return new Hh(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends M0{constructor(){super("facebook.com")}static credential(e){return Jd._fromParams({providerId:mh.PROVIDER_ID,signInMethod:mh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mh.credentialFromTaggedObject(e)}static credentialFromError(e){return mh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mh.credential(e.oauthAccessToken)}catch{return null}}}mh.FACEBOOK_SIGN_IN_METHOD="facebook.com";mh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends M0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jd._fromParams({providerId:uu.PROVIDER_ID,signInMethod:uu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return uu.credentialFromTaggedObject(e)}static credentialFromError(e){return uu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return uu.credential(n,r)}catch{return null}}}uu.GOOGLE_SIGN_IN_METHOD="google.com";uu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends M0{constructor(){super("github.com")}static credential(e){return Jd._fromParams({providerId:gh.PROVIDER_ID,signInMethod:gh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gh.credentialFromTaggedObject(e)}static credentialFromError(e){return gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gh.credential(e.oauthAccessToken)}catch{return null}}}gh.GITHUB_SIGN_IN_METHOD="github.com";gh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends M0{constructor(){super("twitter.com")}static credential(e,n){return Jd._fromParams({providerId:_h.PROVIDER_ID,signInMethod:_h.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _h.credentialFromTaggedObject(e)}static credentialFromError(e){return _h.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _h.credential(n,r)}catch{return null}}}_h.TWITTER_SIGN_IN_METHOD="twitter.com";_h.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nwe(t,e){return XV(t,"POST","/v1/accounts:signUp",dw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Pd._fromIdTokenResponse(e,r,i),a=o5(r);return new ip({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=o5(r);return new ip({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function o5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rwe(t){var e;if(hu(t.app))return Promise.reject(Fd(t));const n=yp(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ip({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await nwe(n,{returnSecureToken:!0}),i=await ip._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR extends _p{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bR.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new bR(e,n,r,i)}}function cG(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bR._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iwe(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function dG(t,e,n=!1){const r=await E1(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ip._forOperation(t,"link",r)}async function fG(t,e,n){await S1(e);const r=iwe(e.providerData);on(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function swe(t,e,n=!1){const{auth:r}=t;if(hu(r.app))return Promise.reject(Fd(r));const i="reauthenticate";try{const s=await E1(t,cG(r,i,e,t),n);on(s.idToken,r,"internal-error");const a=YN(s.idToken);on(a,r,"internal-error");const{sub:o}=a;return on(t.uid===o,r,"user-mismatch"),ip._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ic(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hG(t,e,n=!1){if(hu(t.app))return Promise.reject(Fd(t));const r="signIn",i=await cG(t,r,e),s=await ip._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function awe(t,e){return hG(yp(t),e)}async function l5(t,e){const n=qo(t);return await fG(!1,n,e.providerId),dG(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function owe(t,e){return s_(t,"POST","/v1/accounts:createAuthUri",dw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lwe(t,e){const n=$V()?SR():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await owe(qo(t),r);return i||[]}function uwe(t,e,n,r){return qo(t).onIdTokenChanged(e,n,r)}function cwe(t,e,n){return qo(t).beforeAuthStateChanged(e,n)}function dwe(t,e,n,r){return qo(t).onAuthStateChanged(e,n,r)}function fwe(t){return qo(t).signOut()}const wR="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wR,"1"),this.storage.removeItem(wR),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hwe=1e3,pwe=10;class mG extends pG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aG(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);z1e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pwe):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hwe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mG.type="LOCAL";const mwe=mG;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG extends pG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gG.type="SESSION";const _G=gG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gwe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new EA(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await gwe(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}EA.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _we{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=SA("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(){return window}function vwe(t){bc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vG(){return typeof bc().WorkerGlobalScope<"u"&&typeof bc().importScripts=="function"}async function ywe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ewe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Swe(){return vG()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG="firebaseLocalStorageDb",bwe=1,TR="firebaseLocalStorage",EG="fbase_key";class fw{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bA(t,e){return t.transaction([TR],e?"readwrite":"readonly").objectStore(TR)}function wwe(){const t=indexedDB.deleteDatabase(yG);return new fw(t).toPromise()}function AP(){const t=indexedDB.open(yG,bwe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(TR,{keyPath:EG})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(TR)?e(r):(r.close(),await wwe(),e(await AP()))})})}async function u5(t,e,n){const r=bA(t,!0).put({[EG]:e,value:n});return new fw(r).toPromise()}async function Twe(t,e){const n=bA(t,!1).get(e),r=await new fw(n).toPromise();return r===void 0?null:r.value}function c5(t,e){const n=bA(t,!0).delete(e);return new fw(n).toPromise()}const xwe=800,Cwe=3;class SG{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await AP(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Cwe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=EA._getInstance(Swe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ywe(),!this.activeServiceWorker)return;this.sender=new _we(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ewe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await AP();return await u5(e,wR,"1"),await c5(e,wR),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>u5(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Twe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>c5(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=bA(i,!1).getAll();return new fw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xwe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SG.type="LOCAL";const Rwe=SG;new cw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e){return e?Ld(e):(on(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN extends uG{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xy(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Mwe(t){return hG(t.auth,new QN(t),t.bypassAuthState)}function Awe(t){const{auth:e,user:n}=t;return on(n,e,"internal-error"),swe(n,new QN(t),t.bypassAuthState)}async function Iwe(t){const{auth:e,user:n}=t;return on(n,e,"internal-error"),dG(n,new QN(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mwe;case"linkViaPopup":case"linkViaRedirect":return Iwe;case"reauthViaPopup":case"reauthViaRedirect":return Awe;default:Ic(this.auth,"internal-error")}}resolve(e){Zd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kwe=new cw(2e3,1e4);async function IP(t,e,n){if(hu(t.app))return Promise.reject(vu(t,"operation-not-supported-in-this-environment"));const r=yp(t);yA(t,e,R0);const i=hw(r,n);return new kh(r,"signInViaPopup",e,i).executeNotNull()}async function Owe(t,e,n){const r=qo(t);yA(r.auth,e,R0);const i=hw(r.auth,n);return new kh(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class kh extends bG{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,kh.currentPopupAction&&kh.currentPopupAction.cancel(),kh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return on(e,this.auth,"internal-error"),e}async onExecution(){Zd(this.filter.length===1,"Popup operations only handle one event");const e=SA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kwe.get())};e()}}kh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pwe="pendingRedirect",_C=new Map;class Lwe extends bG{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_C.get(this.auth._key());if(!e){try{const r=await Nwe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_C.set(this.auth._key(),e)}return this.bypassAuthState||_C.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nwe(t,e){const n=xG(e),r=TG(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function wG(t,e){return TG(t)._set(xG(e),"true")}function Dwe(t,e){_C.set(t._key(),e)}function TG(t){return Ld(t._redirectPersistence)}function xG(t){return gC(Pwe,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uwe(t,e,n){return Fwe(t,e,n)}async function Fwe(t,e,n){if(hu(t.app))return Promise.reject(Fd(t));const r=yp(t);yA(t,e,R0),await r._initializationPromise;const i=hw(r,n);return await wG(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Bwe(t,e,n){return zwe(t,e,n)}async function zwe(t,e,n){const r=qo(t);yA(r.auth,e,R0),await r.auth._initializationPromise;const i=hw(r.auth,n);await fG(!1,r,e.providerId),await wG(i,r.auth);const s=await Hwe(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function jwe(t,e){return await yp(t)._initializationPromise,CG(t,e,!1)}async function CG(t,e,n=!1){if(hu(t.app))return Promise.reject(Fd(t));const r=yp(t),i=hw(r,e),a=await new Lwe(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function Hwe(t){const e=SA(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vwe=10*60*1e3;class Gwe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$we(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RG(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vu(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vwe&&this.cachedEventUids.clear(),this.cachedEventUids.has(d5(e))}saveEventToCache(e){this.cachedEventUids.add(d5(e)),this.lastProcessedEventTime=Date.now()}}function d5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RG({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $we(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RG(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wwe(t,e={}){return s_(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qwe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xwe=/^https?/;async function Kwe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Wwe(t);for(const n of e)try{if(Ywe(n))return}catch{}Ic(t,"unauthorized-domain")}function Ywe(t){const e=SR(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!Xwe.test(n))return!1;if(qwe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zwe=new cw(3e4,6e4);function f5(){const t=bc().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Jwe(t){return new Promise((e,n)=>{var r,i,s;function a(){f5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f5(),n(vu(t,"network-request-failed"))},timeout:Zwe.get()})}if(!((i=(r=bc().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=bc().gapi)===null||s===void 0)&&s.load)a();else{const o=K1e("iframefcb");return bc()[o]=()=>{gapi.load?a():n(vu(t,"network-request-failed"))},q1e(`${X1e()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw vC=null,e})}let vC=null;function Qwe(t){return vC=vC||Jwe(t),vC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eTe=new cw(5e3,15e3),tTe="__/auth/iframe",nTe="emulator/auth/iframe",rTe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iTe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sTe(t){const e=t.config;on(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?KN(e,nTe):`https://${t.config.authDomain}/${tTe}`,r={apiKey:e.apiKey,appName:t.name,v:uw},i=iTe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${J1(r).slice(1)}`}async function aTe(t){const e=await Qwe(t),n=bc().gapi;return on(n,t,"internal-error"),e.open({where:document.body,url:sTe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rTe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=vu(t,"network-request-failed"),o=bc().setTimeout(()=>{s(a)},eTe.get());function l(){bc().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oTe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lTe=500,uTe=600,cTe="_blank",dTe="http://localhost";class h5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fTe(t,e,n,r=lTe,i=uTe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},oTe),{width:r.toString(),height:i.toString(),top:s,left:a}),c=Oa().toLowerCase();n&&(o=tG(c)?cTe:n),QV(c)&&(e=e||dTe,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[_,y])=>`${m}${_}=${y},`,"");if(B1e(c)&&o!=="_self")return hTe(e||"",o),new h5(null);const p=window.open(e||"",o,f);on(p,t,"popup-blocked");try{p.focus()}catch{}return new h5(p)}function hTe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pTe="__/auth/handler",mTe="emulator/auth/handler",gTe=encodeURIComponent("fac");async function p5(t,e,n,r,i,s){on(t.config.authDomain,t,"auth-domain-config-required"),on(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uw,eventId:i};if(e instanceof R0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Jle(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof M0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await t._getAppCheckToken(),c=l?`#${gTe}=${encodeURIComponent(l)}`:"";return`${_Te(t)}?${J1(o).slice(1)}${c}`}function _Te({config:t}){return t.emulator?KN(t,mTe):`https://${t.authDomain}/${pTe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="webStorageSupport";class vTe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_G,this._completeRedirectFn=CG,this._overrideRedirectResult=Dwe}async _openPopup(e,n,r,i){var s;Zd((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await p5(e,n,r,SR(),i);return fTe(e,a,SA())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await p5(e,n,r,SR(),i);return vwe(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zd(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await aTe(e),r=new Gwe(e);return n.register("authEvent",i=>(on(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Q2,{type:Q2},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Q2];a!==void 0&&n(!!a),Ic(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Kwe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aG()||eG()||ZN()}}const yTe=vTe;var m5="@firebase/auth",g5="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ETe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function STe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bTe(t){Bg(new rp("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;on(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oG(t)},c=new $1e(r,i,s,l);return Z1e(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bg(new rp("auth-internal",e=>{const n=yp(e.getProvider("auth").getImmediate());return(r=>new ETe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vg(m5,g5,STe(t)),vg(m5,g5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wTe=5*60,TTe=P9("authIdTokenMaxAge")||wTe;let _5=null;const xTe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TTe)return;const i=n==null?void 0:n.token;_5!==i&&(_5=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kP(t=zV()){const e=vA(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Y1e(t,{popupRedirectResolver:yTe,persistence:[Rwe,mwe,_G]}),r=P9("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=xTe(s.toString());cwe(n,a,()=>a(n.currentUser)),uwe(n,o=>a(o))}}const i=Hle("auth");return i&&J1e(n,`http://${i}`),n}function CTe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}W1e({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=vu("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",CTe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bTe("Browser");function RTe(t){const e=new URL(t),n=e.protocol,r=e.hostname,i=e.port,s=n==="https:"?"wss:":"ws:",a=i?`:${i}`:"";return`${s}//${r}${a}/agent-service-0/v1/connect`}class MTe{constructor(e){this.audioContext=null,this.audioContext=null,this.logManager=e,this.cache={}}getActiveAudioContext(){let e=this.audioContext;return e||(e=new AudioContext,this.audioContext=e),e}async unlock(){const e=this.getActiveAudioContext();e.state==="suspended"&&await e.resume()}async precacheAudio(e){if(this.cache[e])return this.cache[e];const r=await(await fetch(e)).arrayBuffer();return this.cache[e]=r,this.cache[e]}async playAudio(e,n){const r=this.getActiveAudioContext(),i=await this.precacheAudio(e),s=await r.decodeAudioData(i.slice(0)),a=r.createBufferSource(),o=r.createGain();o.gain.value=1,a.connect(o),o.connect(r.destination);const l=new Promise(c=>{a.onended=()=>c()});return a.buffer=s,a.start(0),n&&setTimeout(()=>{a.stop()},n),l}}class ATe{constructor(e,n,r,i,s={},a=()=>{}){this.audio=null,this.callState=Hr.DISCONNECTED,this.sessionId=null,this.callId=null,this.callStateChangeCallback=null,this.errorCallback=null,this.callRecordingCallback=null,this.callStartTime=null,this.isPinging=!1,this.pingIntervalHandle=null,this.transport=e,this.analyticsManager=n,this.logManager=r,this.clientName=i,this.clientMetadata=s,this.errorCallback=a,this.transport.onAudioReceived(this.handleIncomingAudio.bind(this)),this.transport.onAgentMessageReceived(this.handleIncomingAgentMessage.bind(this)),this.transport.onWebRtcConfigMessageReceived(this.handleIncomingWebRtcConfigMessage.bind(this)),this.transport.onClose(this.handleClose.bind(this)),this.transport.onError(this.handleError.bind(this))}getAnalyticsManager(){return this.analyticsManager}getSessionId(){return this.sessionId}ping(){this.isPinging||(this.isPinging=!0,this._ping().then(()=>{this.isPinging=!1}).catch(e=>{this.logManager.error("ping failed "+e),this.isPinging=!1}))}async _ping(){var e;if(this.sessionId!==null){const n=Date.now(),r=this.constructMessage({type:Un.Ping,content:"ping"});await this.transport.sendPing(r);const i=Date.now();(e=this.audio)==null||e.setNetworkLatency(i-n)}}async connect(){return this.sessionId=await this.transport.connect(),this.sessionId==null&&this.logManager.error("Failed to establish session ID"),this.pingIntervalHandle=setInterval(()=>{this.ping()},1e3),this.sessionId}async disconnect(){this.logManager.info("Disconnecting session handler"),this.pingIntervalHandle&&(clearInterval(this.pingIntervalHandle),this.pingIntervalHandle=null),this.sessionId=null,await this.transport.disconnect()}async sendImage(e,n,r,i){const s=this.constructMessage({type:Un.Image,content:{image_uri:e,x:n,y:r,save_image:!1,image_metadata:i}});await this.transport.sendImage(s)}async sendDirectiveEvent(e,n){const r=this.constructMessage({type:Un.DirectiveSessionEvent,content:{content:e,is_quiet:n}});await this.transport.sendDirectiveSessionEvent(r)}onCallStateChange(e){this.callStateChangeCallback=e,this.callStateChangeCallback(this.callState)}onError(e){this.errorCallback=e}onCallRecording(e){this.callRecordingCallback=e}isConnected(){return this.transport.isConnected()}getCallState(){return this.callState}getCallId(){return this.callId}getCallStartTime(){return this.callStartTime}getCallDurationMs(){var e;return(e=this.audio)==null?void 0:e.getCallDurationMs()}isCallActive(){return this.callState!==Hr.DISCONNECTED}getFrequencies(){var e;return((e=this.audio)==null?void 0:e.getFrequencies())??{input:new Uint8Array(Og/2),output:new Uint8Array(Og/2)}}async startCall(e,n,r,i,s,a,o,l){if(this.isCallActive())throw this.logManager.error("Call is already active."),new Ple("Call is already active.");try{if(a){const m=this.constructMessage({type:Un.ClientLocationState,content:{...a,date:o==null?void 0:o.toISOString()}});this.transport.sendClientLocationState(m)}}catch(m){console.error("Failed to send client location state",m)}this.setCallState(Hr.CONNECTING);const c=Date.now();this.audio=n,this.webRtcConfig!=null&&this.audio.processWebRtcConfig(this.webRtcConfig);let f,p;try{const m=this.constructMessage({type:Un.CallConnect,content:{audio_codec:"none",sample_rate:n.input.getSampleRate(),is_private:l??!1,reconnect:!1,settings:e,client_name:this.clientName,client_metadata:this.clientMetadata,webrtc_offer_sdp:await this.audio.createWebRtcOfferSdp()}}),_=await this.transport.callConnect(m);if(f=Date.now(),this.logManager.info("Call created with id "+_.call_id),_.type===Un.Error){const y=_;throw this.logManager.warn("Error starting call: "+y.content.message),this.analyticsManager.track(new Id(y.content.code.toString(),y.content.message??"Unknown error")),y.content.close_connection&&(await this.stopCall(!0),await this.disconnect()),new p2(y.content.message??"Unknown error",{code:y.content.code})}else if(_.type!==Un.CallConnectResponse)throw this.logManager.error("Unexpected response type "+_.type),new ZC("Unexpected response type");p=_,this.callId=p.call_id,this.audio.processWebRtcAnswerSdp(p.content.webrtc_answer_sdp??void 0)}catch(m){throw await this.stopCall(!0),m instanceof p2?m:new p2((m==null?void 0:m.toString())??"Unknown error")}await(i==null?void 0:i());try{await n.start(this.sendAudioData.bind(this),p.content.sample_rate,r,c,f,s)}catch(m){throw this.logManager.error("Failed to start audio: "+m),new Lle((m==null?void 0:m.toString())??"Unknown error")}return this.callStartTime=new Date,this.setCallState(Hr.CONNECTED),this.logManager.info("Call started successfully."),this.callId}async stopCall(e=!1,n){if(this.getCallState()===Hr.DISCONNECTED)throw this.logManager.error("No active call to stop."),new Error("No active call to stop.");this.logManager.info("stopCall",e);try{if(this.setCallState(Hr.DISCONNECTING),this.callStartTime=null,await this.stopAudio(this.callId,n),!e&&this.callId!=null){const r=this.constructMessage({type:Un.CallDisconnect,content:{reason:"user_request"}});try{await this.transport.callDisconnect(r)}catch(i){this.logManager.error("Failed to send call disconnect message",i)}}this.callId=null,this.setCallState(Hr.DISCONNECTED),this.logManager.info("Call stopped successfully.")}catch(r){this.handleError(r)}}setMuteInput(e){var n;(n=this.audio)==null||n.setMuteInput(e),this.logManager.info(`User updated input mute status: ${e}.`)}getMuteInput(){var e;return((e=this.audio)==null?void 0:e.getMuteInput())??!1}setMuteOutput(e){var n;(n=this.audio)==null||n.setMuteOutput(e),this.logManager.info(`User updated output mute status: ${e}.`)}getMuteOutput(){var e;return((e=this.audio)==null?void 0:e.getMuteOutput())??!1}sendAudioData(e){const n=this.constructMessage({type:Un.Audio,content:{audio_data:this.arrayBufferToBase64(e)}});this.transport.sendAudio(n)}handleIncomingAudio(e,n){var r;this.isCallActive()&&((r=this.audio)==null||r.processAudioData(e,n))}handleIncomingAgentMessage(e){var n;e.content.type==="TimespanSessionEvent"&&((n=this.audio)==null||n.processTimespanEvent(JSON.parse(e.content.content)))}handleIncomingWebRtcConfigMessage(e){var n;this.webRtcConfig=e.content,(n=this.audio)==null||n.processWebRtcConfig(this.webRtcConfig)}setCallState(e){var n;this.callState=e,(n=this.callStateChangeCallback)==null||n.call(this,e)}handleError(e){var n;if(this.logManager.error("SessionHandler encountered an error: "+e),e instanceof fi)this.analyticsManager.track(new Id(e.code,e.message,e.details));else{const r=new ZC((e==null?void 0:e.message)??"Unknown error",{location:"SessionHandler"});this.analyticsManager.track(new Id(r.code,r.message))}(e instanceof C9&&e.closeConnection||e instanceof yy||e instanceof rA)&&(this.logManager.info("Stopping call and disconnecting due to error: "+e),this.stopCall(!0).then(()=>{this.disconnect()})),(n=this.errorCallback)==null||n.call(this,e)}handleClose(e){this.logManager.info("SessionHandler transport closed with code: "+e),this.callState==Hr.CONNECTED||this.callState==Hr.CONNECTING?this.stopAudio(this.callId).finally(()=>{var n;this.setCallState(Hr.DISCONNECTED),this.analyticsManager.track(new dle(e)),(n=this.errorCallback)==null||n.call(this,new R9("Transport closed unexpectedly",{closeCode:e})),this.callId=null,this.sessionId=null}):(this.callId=null,this.sessionId=null)}async stopAudio(e,n){var r,i;this.logManager.info("Stopping audio");try{const s=await((r=this.audio)==null?void 0:r.stop());await(n==null?void 0:n()),e!=null&&s&&(this.logManager.info(`Call Recording created successfully: ${s.length} bytes`),(i=this.callRecordingCallback)==null||i.call(this,e,s))}catch(s){this.logManager.error("Call Recording failed:",s)}}constructMessage(e){const{type:n,content:r}=e;if(this.sessionId==null)throw this.logManager.error("Session ID is not set. Did you call connect() first?"),new Error("Session ID is not set. Did you call connect() first?");return{type:n,session_id:this.sessionId,call_id:this.callId,content:r}}arrayBufferToBase64(e){return btoa(String.fromCharCode(...new Uint8Array(e)))}}const ITe={enableRecording:!1,ringtone:null,ringtoneMaxDurationMs:null,connectedChime:null,disconnectedChime:null,inputReadyChime:null,inputWarmupMs:0,prepareAudioNotification:!1};function kTe(t){return{...ITe,...t}}function MG(t){const e=t.createAnalyser();return e.fftSize=8192,e.minDecibels=-100,e.maxDecibels=-30,e.fftSize=Og,e.smoothingTimeConstant=.8,e}class OTe{constructor(e,n,r){this.inputWarmupMs=0,this.isMuted=!1,this.audioContext=e,this.logManager=n,this.inputWarmupMs=r}destroy(){clearTimeout(this.warmupTimer)}async init(){this.micStream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.setMuteInternal(!0),this.micNode=this.audioContext.createMediaStreamSource(this.micStream),this.analyser=MG(this.audioContext),this.micNode.connect(this.analyser),this.logManager.info(`WebRTC audio input at ${this.audioContext.sampleRate}Hz`)}connectRecorder(e){if(this.micNode==null)throw new ea("WebRTC mic input not initialized when connectRecorder called");e.connectUserAudio(this.micNode)}async start(e){this.warmupTimer=setTimeout(this.unmuteAfterWarmup.bind(this),this.inputWarmupMs)}async unmuteAfterWarmup(){this.isMuted?this.logManager.info("WebRTC audio input warmup complete, not unmuting since muted by user."):(this.logManager.info("WebRTC audio input warmup complete, unmuting."),this.setMute(!1)),this.warmupTimer=void 0}getFrequencies(){if(this.analyser==null)return new Uint8Array(Og/2);const e=new Uint8Array(this.analyser.frequencyBinCount??Og/2);return this.analyser.getByteFrequencyData(e),e}getSampleRate(){return this.audioContext.sampleRate}async stop(){var e,n;return(e=this.micNode)==null||e.disconnect(),(n=this.micStream)==null||n.getAudioTracks().forEach(r=>r.stop()),clearTimeout(this.warmupTimer),new Int16Array}setMuteInternal(e){var n;(n=this.micStream)==null||n.getAudioTracks().forEach(r=>r.enabled=!e)}setMute(e){this.isMuted=e,this.setMuteInternal(e)}get stream(){return this.micStream}}class PTe{constructor(e,n){this.audioElement=new Audio,this.audioContext=e,this.logManager=n}async init(e){}async connect(e){}async disconnect(){var e,n;return this.logManager.info("WebRTC audio output shutting down"),this.audioElement.pause(),this.audioElement.srcObject=null,(e=this.remoteTrack)==null||e.stop(),(n=this.remoteSource)==null||n.disconnect(),new Int16Array}configure(e){}play(e){}start(e,n){this.analyser=MG(this.audioContext),this.remoteSource=this.audioContext.createMediaStreamSource(e),this.remoteSource.connect(this.analyser),n.connectAgentAudio(this.remoteSource),this.audioElement.srcObject=e;try{this.audioElement.play()}catch(r){throw new ea("Failed to start audio playback: "+r)}this.logManager.info(`WebRTC audio output at ${this.audioContext.sampleRate}Hz`)}getFrequencies(){if(this.analyser==null)return new Uint8Array(Og/2);const e=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteFrequencyData(e),e}getPlaybackTime(e){return 0}getSampleRate(){return this.audioContext.sampleRate}setMute(e){e?this.audioElement.pause():this.audioElement.play()}}const dy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function LTe(t){let e="";for(let n=0;n<t.length;n+=3)e+=dy[t[n]>>2],e+=dy[(t[n]&3)<<4|t[n+1]>>4],e+=dy[(t[n+1]&15)<<2|t[n+2]>>6],e+=dy[t[n+2]&63];return t.length%3===2?e=e.substring(0,e.length-1)+"=":t.length%3===1&&(e=e.substring(0,e.length-2)+"=="),e}function NTe(t){let e=new Uint8Array(256);for(let i=0;i<dy.length;i++)e[dy.charCodeAt(i)]=i;let n=t.length*.75;t[t.length-1]==="="&&(n--,t[t.length-2]==="="&&n--);let r=new Uint8Array(n);for(let i=0,s=0;i<t.length;i+=4){let a=e[t.charCodeAt(i)],o=e[t.charCodeAt(i+1)],l=e[t.charCodeAt(i+2)],c=e[t.charCodeAt(i+3)];r[s++]=a<<2|o>>4,r[s++]=(o&15)<<4|l>>2,r[s++]=(l&3)<<6|c&63}return r}function DTe(t,e,n,r){if(["32f","64"].indexOf(e)>-1&&["32f","64"].indexOf(r)>-1){n.set(t);return}v5(e),v5(r);let i=zTe(e,r),s={oldMin:Math.pow(2,parseInt(e,10))/2,newMin:Math.pow(2,parseInt(r,10))/2,oldMax:Math.pow(2,parseInt(e,10))/2-1,newMax:Math.pow(2,parseInt(r,10))/2-1};y5(e,t,!0);for(let a=0,o=t.length;a<o;a++)n[a]=i(t[a],s);y5(r,n,!1)}function UTe(t,e){return t>0?t=parseInt(t/e.oldMax*e.newMax,10):t=parseInt(t/e.oldMin*e.newMin,10),t}function FTe(t,e){return parseInt(t>0?t*e.newMax:t*e.newMin,10)}function BTe(t,e){return t>0?t/e.oldMax:t/e.oldMin}function zTe(t,e){let n=function(r){return r};return t!=e&&(["32f","64"].includes(t)?n=FTe:["32f","64"].includes(e)?n=BTe:n=UTe),n}function v5(t){if(t!="32f"&&t!="64"&&(parseInt(t,10)<"8"||parseInt(t,10)>"53"))throw new Error("Invalid bit depth.")}function y5(t,e,n){if(t=="8"){let r=n?-128:128;for(let i=0,s=e.length;i<s;i++)e[i]=e[i]+=r}}const AG=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],eD=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function jTe(t){let e={index:0,predicted:0,step:7},n=new Uint8Array(t.length),r=[],i=0,s=0;for(let o=0,l=t.length;o<l;o++)o%505==0&&o!=0&&(n.set(VTe(r,e),i),i+=256,r=[],s++),r.push(t[o]);let a=t.length/2;return a%2&&a++,n.slice(0,a+512+s*4)}function HTe(t,e=256){let n={index:0,predicted:0,step:7},r=new Int16Array(t.length*2),i=[],s=0;for(let a=0,o=t.length;a<o;a++){if(a%e==0&&a!=0){let l=GTe(i,n);r.set(l,s),s+=l.length,i=[]}i.push(t[a])}return r}function VTe(t,e){let n=XTe(t[0],e);for(let r=3,i=t.length;r<i;r+=2){let s=OP(t[r],e),a=OP(t[r+1],e);n.push(a<<4|s)}return n}function GTe(t,e){e.predicted=$Te(t[1]<<8|t[0]),e.index=t[2],e.step=eD[e.index];let n=[e.predicted,e.predicted];for(let r=4,i=t.length;r<i;r++){let s=t[r],a=s>>4,o=a<<4^s;n.push(E5(o,e)),n.push(E5(a,e))}return n}function $Te(t){return t>32768?t-65536:t}function OP(t,e){let n=t-e.predicted,r=0;n>=0?r=0:(r=8,n=-n);let i=eD[e.index],s=i>>3;return n>i&&(r|=4,n-=i,s+=i),i>>=1,n>i&&(r|=2,n-=i,s+=i),i>>=1,n>i&&(r|=1,s+=i),WTe(r,s,e),r}function WTe(t,e,n){t&8?n.predicted-=e:n.predicted+=e,n.predicted<-32768?n.predicted=-32768:n.predicted>32767&&(n.predicted=32767),n.index+=AG[t&7],n.index<0?n.index=0:n.index>88&&(n.index=88)}function E5(t,e){let n=0;return t&4&&(n+=e.step),t&2&&(n+=e.step>>1),t&1&&(n+=e.step>>2),n+=e.step>>3,t&8&&(n=-n),e.predicted+=n,e.predicted>32767?e.predicted=32767:e.predicted<-32767&&(e.predicted=-32767),qTe(t,e),e.predicted}function qTe(t,e){e.index+=AG[t],e.index<0?e.index=0:e.index>88&&(e.index=88),e.step=eD[e.index]}function XTe(t,e){OP(t,e);let n=[];return n.push(t&255),n.push(t>>8&255),n.push(e.index),n.push(0),n}const KTe=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function YTe(t){let e;t=t==-32768?-32767:t;let n=~t>>8&128;if(n||(t=t*-1),t>32635&&(t=32635),t>=256){let r=KTe[t>>8&127],i=t>>r+3&15;e=r<<4|i}else e=t>>4;return e^(n^85)}function ZTe(t){let e=0;t^=85,(t&128)!==0&&(t&=-129,e=-1);let n=((t&240)>>4)+4,r=0;return n!=4?r=1<<n|(t&15)<<n-4|1<<n-5:r=t<<1|1,r=e===0?r:-r,r*8*-1}function JTe(t){let e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=YTe(t[n]);return e}function QTe(t){let e=new Int16Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=ZTe(t[n]);return e}const exe=132,S5=32635,txe=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],nxe=[0,132,396,924,1980,4092,8316,16764];function rxe(t){let e,n,r,i;return e=t>>8&128,e!=0&&(t=-t),t=t+exe,t>S5&&(t=S5),n=txe[t>>7&255],r=t>>n+3&15,i=~(e|n<<4|r),i}function ixe(t){let e,n,r,i;return t=~t,e=t&128,n=t>>4&7,r=t&15,i=nxe[n]+(r<<n+3),e!=0&&(i=-i),i}function sxe(t){let e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=rxe(t[n]);return e}function axe(t){let e=new Int16Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=ixe(t[n]);return e}function IG(t,e,n=0,r=t.length){for(let i=n;i<r;i+=e)oxe(t,e,i)}function oxe(t,e,n){e--;for(let r=0;r<e;r++){let i=t[n+r];t[n+r]=t[n+e],t[n+e]=i,e--}}function lxe(t,e=0,n=t.length){let r="";for(let i=e;i<n;){let s=128,a=191,o=!1,l=t[i++];if(l>=0&&l<=127)r+=String.fromCharCode(l);else{let c=0;l>=194&&l<=223?c=1:l>=224&&l<=239?(c=2,t[i]===224&&(s=160),t[i]===237&&(a=159)):l>=240&&l<=244?(c=3,t[i]===240&&(s=144),t[i]===244&&(a=143)):o=!0,l=l&(1<<8-c-1)-1;for(let f=0;f<c;f++)(t[i]<s||t[i]>a)&&(o=!0),l=l<<6|t[i]&63,i++;o?r+=" ":l<=65535?r+=String.fromCharCode(l):(l-=65536,r+=String.fromCharCode((l>>10&1023)+55296,(l&1023)+56320))}}return r}function kG(t,e,n=0){let r=0,i=t.length;for(;r<i;){let s=t.codePointAt(r);if(s<128)e[n]=s,n++;else{let a=0,o=0;for(s<=2047?(a=1,o=192):s<=65535?(a=2,o=224):s<=1114111&&(a=3,o=240,r++),e[n]=(s>>6*a)+o,n++;a>0;)e[n]=128|s>>6*(a-1)&63,n++,a--}r++}return n}class uxe{constructor(e,n=!1){this.bits=e,this.offset=Math.ceil(e/8),this.max=Math.pow(2,e)-1,this.min=0,this.unpack=this.unpack_,n&&(this.max=Math.pow(2,e)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}pack(e,n,r=0){n=this.clamp_(Math.round(n));for(let i=0,s=this.offset;i<s;i++)e[r]=Math.floor(n/Math.pow(2,i*8))&255,r++;return r}unpack_(e,n=0){let r=0;for(let i=0;i<this.offset;i++)r+=e[n+i]*Math.pow(256,i);return r}unpackSigned_(e,n=0){return this.sign_(this.unpack_(e,n))}clamp_(e){return e>this.max?this.max:e<this.min?this.min:e}sign_(e){return e>this.max&&(e-=this.max*2+2),e}}class b5{constructor(e,n){this.offset=Math.ceil((e+n)/8),this.ebits=e,this.fbits=n,this.bias=(1<<e-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=e+n,this.fbias=Math.pow(2,-(8*this.offset-1-e))}pack(e,n,r){Math.abs(n)>this.biasP2-this.ebitsFbits*2&&(n=n<0?-1/0:1/0);let i=((n=+n)||1/n)<0||n<0?1:0;n=Math.abs(n);let s=Math.min(Math.floor(Math.log(n)/Math.LN2),1023),a=ek(n/Math.pow(2,s)*Math.pow(2,this.fbits));return n!==n?(a=Math.pow(2,this.fbits-1),s=(1<<this.ebits)-1):n!==0&&(n>=Math.pow(2,1-this.bias)?(a/Math.pow(2,this.fbits)>=2&&(s=s+1,a=1),s>this.bias?(s=(1<<this.ebits)-1,a=0):(s=s+this.bias,a=ek(a)-Math.pow(2,this.fbits))):(a=ek(n/Math.pow(2,1-this.bias-this.fbits)),s=0)),this.packFloatBits_(e,r,i,s,a)}unpack(e,n){let r=(1<<this.ebits)-1,i,s="";for(let l=this.offset-1;l>=0;l--){let c=e[l+n].toString(2);s+="00000000".substring(c.length)+c}let a=s.charAt(0)=="1"?-1:1;s=s.substring(1);let o=parseInt(s.substring(0,this.ebits),2);return s=s.substring(this.ebits),o==r?parseInt(s,2)!==0?NaN:a*(1/0):(o===0?(o+=1,i=parseInt(s,2)):i=parseInt("1"+s,2),a*i*this.fbias*Math.pow(2,o-this.bias))}packFloatBits_(e,n,r,i,s){let a=[];a.push(r);for(let p=this.ebits;p>0;p-=1)a[p]=i%2?1:0,i=Math.floor(i/2);let o=a.length;for(let p=this.fbits;p>0;p-=1)a[o+p]=s%2?1:0,s=Math.floor(s/2);let l=a.join(""),c=this.offset+n-1,f=n;for(;c>=n;)e[c]=parseInt(l.substring(0,8),2),l=l.substring(8),c--,f++;return f}}function ek(t){let e=Math.floor(t),n=t-e;return n<.5?e:n>.5||e%2?e+1:e}function Cy(t,e=0,n=t.length){return lxe(t,e,n)}function Zi(t){let e=[];return kG(t,e),e}function w5(t,e,n=0){return kG(t,e,n)}function OG(t,e,n,r=0){e=e||{};let i=PG(e.bits,e.fp,e.signed),s=Math.ceil(e.bits/8),a=0,o=r;for(let l=t.length;a<l;a++)r=i.pack(n,t[a],r);return e.be&&IG(n,s,o,r),r}function Ym(t,e,n,r=0,i=t.length){e=e||{};let s=PG(e.bits,e.fp,e.signed);if(i=dxe(t,r,i,s.offset),e.be){let a=cxe(t);e.be&&IG(a,s.offset,r,i),T5(a,n,r,i,s)}else T5(t,n,r,i,s)}function tD(t,e,n,r=0){return OG([t],e,n,r)}function xt(t,e){let n=[];return tD(t,e,n,0),n}function xR(t,e,n=0){let r=[];return Ym(t,e,r,n,n+Math.ceil(e.bits/8)),r[0]}function T5(t,e,n,r,i){let s=i.offset;for(let a=0,o=n;o<r;o+=s,a++)e[a]=i.unpack(t,o)}function cxe(t){return new Uint8Array(t)}function dxe(t,e,n,r){let i=(n-e)%r;return n-i}function PG(t,e,n){return e&&t==32?new b5(8,23):e&&t==64?new b5(11,52):new uxe(t,n)}class fxe{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(e){if(this.head=0,this.container=this.readString(e,4),this.supported_containers.indexOf(this.container)===-1)throw Error("Not a supported format.");this.uInt32.be=this.container==="RIFX",this.chunkSize=this.readUInt32(e),this.format=this.readString(e,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(e)}}findChunk(e,n=!1){let r=this.signature.subChunks,i=[];for(let s=0;s<r.length;s++)if(r[s].chunkId==e)if(n)i.push(r[s]);else return r[s];return e=="LIST"&&i.length?i:null}readString(e,n){let r="";return r=Cy(e,this.head,this.head+n),this.head+=n,r}readUInt32(e){let n=xR(e,this.uInt32,this.head);return this.head+=4,n}getSubChunksIndex_(e){let n=[],r=this.head;for(;r<=e.length-8;)n.push(this.getSubChunkIndex_(e,r)),r+=8+n[n.length-1].chunkSize,r=r%2?r+1:r;return n}getSubChunkIndex_(e,n){let r={chunkId:this.getChunkId_(e,n),chunkSize:this.getChunkSize_(e,n)};if(r.chunkId=="LIST")r.format=Cy(e,n+8,n+12),this.head+=4,r.subChunks=this.getSubChunksIndex_(e);else{let i=r.chunkSize%2?r.chunkSize+1:r.chunkSize;this.head=n+8+i,r.chunkData={start:n+8,end:this.head}}return r}getChunkId_(e,n){return this.head+=4,Cy(e,n,n+4)}getChunkSize_(e,n){return this.head+=4,xR(e,this.uInt32,n+4)}}class nD extends fxe{constructor(){super(),this.supported_containers.push("RF64"),this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},this.fact={chunkId:"",chunkSize:0,dwSampleLength:0},this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},this.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},this.iXML={chunkId:"",chunkSize:0,value:""},this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},this.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},this.LIST=[],this.junk={chunkId:"",chunkSize:0,chunkData:[]},this._PMX={chunkId:"",chunkSize:0,value:""},this.uInt16={bits:16,be:!1,signed:!1,fp:!1}}fromBuffer(e,n=!0){if(this.clearHeaders(),this.setSignature(e),this.uInt16.be=this.uInt32.be,this.format!="WAVE")throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(e),this.readFmtChunk_(e),this.readFactChunk_(e),this.readBextChunk_(e),this.readiXMLChunk_(e),this.readCueChunk_(e),this.readSmplChunk_(e),this.readDataChunk_(e,n),this.readJunkChunk_(e),this.readLISTChunk_(e),this.read_PMXChunk_(e)}clearHeaders(){let e=new nD;Object.assign(this.fmt,e.fmt),Object.assign(this.fact,e.fact),Object.assign(this.cue,e.cue),Object.assign(this.smpl,e.smpl),Object.assign(this.bext,e.bext),Object.assign(this.iXML,e.iXML),Object.assign(this.ds64,e.ds64),Object.assign(this.data,e.data),this.LIST=[],Object.assign(this.junk,e.junk),Object.assign(this._PMX,e._PMX)}readFmtChunk_(e){let n=this.findChunk("fmt ");if(n)this.head=n.chunkData.start,this.fmt.chunkId=n.chunkId,this.fmt.chunkSize=n.chunkSize,this.fmt.audioFormat=this.readUInt16_(e),this.fmt.numChannels=this.readUInt16_(e),this.fmt.sampleRate=this.readUInt32(e),this.fmt.byteRate=this.readUInt32(e),this.fmt.blockAlign=this.readUInt16_(e),this.fmt.bitsPerSample=this.readUInt16_(e),this.readFmtExtension_(e);else throw Error('Could not find the "fmt " chunk')}readFmtExtension_(e){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(e),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(e),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(e),this.fmt.subformat=[this.readUInt32(e),this.readUInt32(e),this.readUInt32(e),this.readUInt32(e)])))}readFactChunk_(e){let n=this.findChunk("fact");n&&(this.head=n.chunkData.start,this.fact.chunkId=n.chunkId,this.fact.chunkSize=n.chunkSize,this.fact.dwSampleLength=this.readUInt32(e))}readCueChunk_(e){let n=this.findChunk("cue ");if(n){this.head=n.chunkData.start,this.cue.chunkId=n.chunkId,this.cue.chunkSize=n.chunkSize,this.cue.dwCuePoints=this.readUInt32(e);for(let r=0;r<this.cue.dwCuePoints;r++)this.cue.points.push({dwName:this.readUInt32(e),dwPosition:this.readUInt32(e),fccChunk:this.readString(e,4),dwChunkStart:this.readUInt32(e),dwBlockStart:this.readUInt32(e),dwSampleOffset:this.readUInt32(e)})}}readSmplChunk_(e){let n=this.findChunk("smpl");if(n){this.head=n.chunkData.start,this.smpl.chunkId=n.chunkId,this.smpl.chunkSize=n.chunkSize,this.smpl.dwManufacturer=this.readUInt32(e),this.smpl.dwProduct=this.readUInt32(e),this.smpl.dwSamplePeriod=this.readUInt32(e),this.smpl.dwMIDIUnityNote=this.readUInt32(e),this.smpl.dwMIDIPitchFraction=this.readUInt32(e),this.smpl.dwSMPTEFormat=this.readUInt32(e),this.smpl.dwSMPTEOffset=this.readUInt32(e),this.smpl.dwNumSampleLoops=this.readUInt32(e),this.smpl.dwSamplerData=this.readUInt32(e);for(let r=0;r<this.smpl.dwNumSampleLoops;r++)this.smpl.loops.push({dwName:this.readUInt32(e),dwType:this.readUInt32(e),dwStart:this.readUInt32(e),dwEnd:this.readUInt32(e),dwFraction:this.readUInt32(e),dwPlayCount:this.readUInt32(e)})}}readDataChunk_(e,n){let r=this.findChunk("data");if(r)this.data.chunkId="data",this.data.chunkSize=r.chunkSize,n&&(this.data.samples=e.slice(r.chunkData.start,r.chunkData.end));else throw Error('Could not find the "data" chunk')}readBextChunk_(e){let n=this.findChunk("bext");n&&(this.head=n.chunkData.start,this.bext.chunkId=n.chunkId,this.bext.chunkSize=n.chunkSize,this.bext.description=this.readString(e,256),this.bext.originator=this.readString(e,32),this.bext.originatorReference=this.readString(e,32),this.bext.originationDate=this.readString(e,10),this.bext.originationTime=this.readString(e,8),this.bext.timeReference=[this.readUInt32(e),this.readUInt32(e)],this.bext.version=this.readUInt16_(e),this.bext.UMID=this.readString(e,64),this.bext.loudnessValue=this.readUInt16_(e),this.bext.loudnessRange=this.readUInt16_(e),this.bext.maxTruePeakLevel=this.readUInt16_(e),this.bext.maxMomentaryLoudness=this.readUInt16_(e),this.bext.maxShortTermLoudness=this.readUInt16_(e),this.bext.reserved=this.readString(e,180),this.bext.codingHistory=this.readString(e,this.bext.chunkSize-602))}readiXMLChunk_(e){let n=this.findChunk("iXML");n&&(this.head=n.chunkData.start,this.iXML.chunkId=n.chunkId,this.iXML.chunkSize=n.chunkSize,this.iXML.value=Cy(e,this.head,this.head+this.iXML.chunkSize))}readDs64Chunk_(e){let n=this.findChunk("ds64");if(n)this.head=n.chunkData.start,this.ds64.chunkId=n.chunkId,this.ds64.chunkSize=n.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(e),this.ds64.riffSizeLow=this.readUInt32(e),this.ds64.dataSizeHigh=this.readUInt32(e),this.ds64.dataSizeLow=this.readUInt32(e),this.ds64.originationTime=this.readUInt32(e),this.ds64.sampleCountHigh=this.readUInt32(e),this.ds64.sampleCountLow=this.readUInt32(e);else if(this.container=="RF64")throw Error('Could not find the "ds64" chunk')}readLISTChunk_(e){let n=this.findChunk("LIST",!0);if(n!==null)for(let r=0;r<n.length;r++){let i=n[r];this.LIST.push({chunkId:i.chunkId,chunkSize:i.chunkSize,format:i.format,subChunks:[]});for(let s=0;s<i.subChunks.length;s++)this.readLISTSubChunks_(i.subChunks[s],i.format,e)}}readLISTSubChunks_(e,n,r){n=="adtl"?["labl","note","ltxt"].indexOf(e.chunkId)>-1&&this.readLISTadtlSubChunks_(r,e):n=="INFO"&&this.readLISTINFOSubChunks_(r,e)}readLISTadtlSubChunks_(e,n){this.head=n.chunkData.start;let r={chunkId:n.chunkId,chunkSize:n.chunkSize,dwName:this.readUInt32(e)};n.chunkId=="ltxt"?(r.dwSampleLength=this.readUInt32(e),r.dwPurposeID=this.readUInt32(e),r.dwCountry=this.readUInt16_(e),r.dwLanguage=this.readUInt16_(e),r.dwDialect=this.readUInt16_(e),r.dwCodePage=this.readUInt16_(e),r.value=""):r.value=this.readZSTR_(e,this.head),this.LIST[this.LIST.length-1].subChunks.push(r)}readLISTINFOSubChunks_(e,n){this.head=n.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:n.chunkId,chunkSize:n.chunkSize,value:this.readZSTR_(e,this.head)})}readJunkChunk_(e){let n=this.findChunk("junk");n&&(this.junk={chunkId:n.chunkId,chunkSize:n.chunkSize,chunkData:[].slice.call(e.slice(n.chunkData.start,n.chunkData.end))})}read_PMXChunk_(e){let n=this.findChunk("_PMX");n&&(this.head=n.chunkData.start,this._PMX.chunkId=n.chunkId,this._PMX.chunkSize=n.chunkSize,this._PMX.value=Cy(e,this.head,this.head+this._PMX.chunkSize))}readZSTR_(e,n=0){for(let r=n;r<e.length&&(this.head++,e[r]!==0);r++);return Cy(e,n,this.head-1)}readUInt16_(e){let n=xR(e,this.uInt16,this.head);return this.head+=2,n}}function nu(t,e){let n=Zi(t);for(let r=n.length;r<e;r++)n.push(0);return n}class hxe extends nD{toBuffer(){this.uInt16.be=this.container==="RIFX",this.uInt32.be=this.uInt16.be;let e=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),Zi(this.data.chunkId),xt(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],n=0;for(let s=0;s<e.length;s++)n+=e[s].length;let r=new Uint8Array(n+12),i=0;i=w5(this.container,r,i),i=tD(n+4,this.uInt32,r,i),i=w5(this.format,r,i);for(let s=0;s<e.length;s++)r.set(e[s],i),i+=e[s].length;return r}getBextBytes_(){let e=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,e=e.concat(Zi(this.bext.chunkId),xt(602+this.bext.codingHistory.length,this.uInt32),nu(this.bext.description,256),nu(this.bext.originator,32),nu(this.bext.originatorReference,32),nu(this.bext.originationDate,10),nu(this.bext.originationTime,8),xt(this.bext.timeReference[0],this.uInt32),xt(this.bext.timeReference[1],this.uInt32),xt(this.bext.version,this.uInt16),nu(this.bext.UMID,64),xt(this.bext.loudnessValue,this.uInt16),xt(this.bext.loudnessRange,this.uInt16),xt(this.bext.maxTruePeakLevel,this.uInt16),xt(this.bext.maxMomentaryLoudness,this.uInt16),xt(this.bext.maxShortTermLoudness,this.uInt16),nu(this.bext.reserved,180),nu(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(e),e}enforceBext_(){for(let e in this.bext)if(this.bext.hasOwnProperty(e)&&this.bext[e]&&e!="timeReference"){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}getiXMLBytes_(){let e=[];if(this.iXML.chunkId){let n=Zi(this.iXML.value);this.iXML.chunkSize=n.length,e=e.concat(Zi(this.iXML.chunkId),xt(this.iXML.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getDs64Bytes_(){let e=[];return this.ds64.chunkId&&(e=e.concat(Zi(this.ds64.chunkId),xt(this.ds64.chunkSize,this.uInt32),xt(this.ds64.riffSizeHigh,this.uInt32),xt(this.ds64.riffSizeLow,this.uInt32),xt(this.ds64.dataSizeHigh,this.uInt32),xt(this.ds64.dataSizeLow,this.uInt32),xt(this.ds64.originationTime,this.uInt32),xt(this.ds64.sampleCountHigh,this.uInt32),xt(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(e),e}getCueBytes_(){let e=[];if(this.cue.chunkId){let n=this.getCuePointsBytes_();e=e.concat(Zi(this.cue.chunkId),xt(n.length+4,this.uInt32),xt(this.cue.dwCuePoints,this.uInt32),n)}return this.enforceByteLen_(e),e}getCuePointsBytes_(){let e=[];for(let n=0;n<this.cue.dwCuePoints;n++)e=e.concat(xt(this.cue.points[n].dwName,this.uInt32),xt(this.cue.points[n].dwPosition,this.uInt32),Zi(this.cue.points[n].fccChunk),xt(this.cue.points[n].dwChunkStart,this.uInt32),xt(this.cue.points[n].dwBlockStart,this.uInt32),xt(this.cue.points[n].dwSampleOffset,this.uInt32));return e}getSmplBytes_(){let e=[];if(this.smpl.chunkId){let n=this.getSmplLoopsBytes_();e=e.concat(Zi(this.smpl.chunkId),xt(n.length+36,this.uInt32),xt(this.smpl.dwManufacturer,this.uInt32),xt(this.smpl.dwProduct,this.uInt32),xt(this.smpl.dwSamplePeriod,this.uInt32),xt(this.smpl.dwMIDIUnityNote,this.uInt32),xt(this.smpl.dwMIDIPitchFraction,this.uInt32),xt(this.smpl.dwSMPTEFormat,this.uInt32),xt(this.smpl.dwSMPTEOffset,this.uInt32),xt(this.smpl.dwNumSampleLoops,this.uInt32),xt(this.smpl.dwSamplerData,this.uInt32),n)}return this.enforceByteLen_(e),e}getSmplLoopsBytes_(){let e=[];for(let n=0;n<this.smpl.dwNumSampleLoops;n++)e=e.concat(xt(this.smpl.loops[n].dwName,this.uInt32),xt(this.smpl.loops[n].dwType,this.uInt32),xt(this.smpl.loops[n].dwStart,this.uInt32),xt(this.smpl.loops[n].dwEnd,this.uInt32),xt(this.smpl.loops[n].dwFraction,this.uInt32),xt(this.smpl.loops[n].dwPlayCount,this.uInt32));return e}getFactBytes_(){let e=[];return this.fact.chunkId&&(e=e.concat(Zi(this.fact.chunkId),xt(this.fact.chunkSize,this.uInt32),xt(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(e),e}getFmtBytes_(){let e=[];if(this.fmt.chunkId){let n=e.concat(Zi(this.fmt.chunkId),xt(this.fmt.chunkSize,this.uInt32),xt(this.fmt.audioFormat,this.uInt16),xt(this.fmt.numChannels,this.uInt16),xt(this.fmt.sampleRate,this.uInt32),xt(this.fmt.byteRate,this.uInt32),xt(this.fmt.blockAlign,this.uInt16),xt(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(n),n}throw Error('Could not find the "fmt " chunk')}getFmtExtensionBytes_(){let e=[];return this.fmt.chunkSize>16&&(e=e.concat(xt(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(e=e.concat(xt(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(e=e.concat(xt(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(e=e.concat(xt(this.fmt.subformat[0],this.uInt32),xt(this.fmt.subformat[1],this.uInt32),xt(this.fmt.subformat[2],this.uInt32),xt(this.fmt.subformat[3],this.uInt32))),e}getLISTBytes_(){let e=[];for(let n=0;n<this.LIST.length;n++){let r=this.getLISTSubChunksBytes_(this.LIST[n].subChunks,this.LIST[n].format);e=e.concat(Zi(this.LIST[n].chunkId),xt(r.length+4,this.uInt32),Zi(this.LIST[n].format),r)}return this.enforceByteLen_(e),e}getLISTSubChunksBytes_(e,n){let r=[];for(let i=0,s=e.length;i<s;i++)n=="INFO"?r=r.concat(this.getLISTINFOSubChunksBytes_(e[i])):n=="adtl"&&(r=r.concat(this.getLISTadtlSubChunksBytes_(e[i]))),this.enforceByteLen_(r);return r}getLISTINFOSubChunksBytes_(e){let n=[],r=nu(e.value,e.value.length);return n=n.concat(Zi(e.chunkId),xt(r.length+1,this.uInt32),r),n.push(0),n}getLISTadtlSubChunksBytes_(e){let n=[];if(["labl","note"].indexOf(e.chunkId)>-1){let r=nu(e.value,e.value.length);n=n.concat(Zi(e.chunkId),xt(r.length+4+1,this.uInt32),xt(e.dwName,this.uInt32),r),n.push(0)}else e.chunkId=="ltxt"&&(n=n.concat(this.getLtxtChunkBytes_(e)));return n}getLtxtChunkBytes_(e){return[].concat(Zi(e.chunkId),xt(e.value.length+20,this.uInt32),xt(e.dwName,this.uInt32),xt(e.dwSampleLength,this.uInt32),xt(e.dwPurposeID,this.uInt32),xt(e.dwCountry,this.uInt16),xt(e.dwLanguage,this.uInt16),xt(e.dwDialect,this.uInt16),xt(e.dwCodePage,this.uInt16),nu(e.value,e.value.length))}get_PMXBytes_(){let e=[];if(this._PMX.chunkId){let n=Zi(this._PMX.value);this._PMX.chunkSize=n.length,e=e.concat(Zi(this._PMX.chunkId),xt(this._PMX.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getJunkBytes_(){let e=[];return this.junk.chunkId?e.concat(Zi(this.junk.chunkId),xt(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(e),e)}enforceByteLen_(e){e.length%2&&e.push(0)}}function pxe(t){let e=[];if(t.length>0)if(t[0].constructor!==Number){e=new Float64Array(t[0].length*t.length);for(let n=0,r=t[0].length,i=0;n<r;n++)for(let s=0,a=t.length;s<a;s++,i++)e[i]=t[s][n]}else e=t;return e}function mxe(t,e,n=Float64Array){let r=[];for(let i=0;i<e;i++)r[i]=new n(t.length/e);for(let i=0;i<e;i++)for(let s=i,a=0;s<t.length;s+=e,a++)r[i][a]=t[s];return r}function gxe(t,e){let n=t*e/8;return!(t<1||n>65535)}function LG(t,e,n){let r=t*(e/8)*n;return!(n<1||r>4294967295)}class _xe extends hxe{constructor(){super(),this.bitDepth="0",this.dataType={bits:0,be:!1},this.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3}}fromScratch(e,n,r,i,s){s=s||{},this.clearHeaders(),this.newWavFile_(e,n,r,i,s)}fromBuffer(e,n=!0){super.fromBuffer(e,n),this.bitDepthFromFmt_(),this.updateDataType_()}toBuffer(){return this.validateWavHeader_(),super.toBuffer()}getSamples(e=!1,n=Float64Array){let r=new n(this.data.samples.length/(this.dataType.bits/8));return Ym(this.data.samples,this.dataType,r,0,this.data.samples.length),!e&&this.fmt.numChannels>1?mxe(r,this.fmt.numChannels,n):r}getSample(e){if(e=e*(this.dataType.bits/8),e+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return xR(this.data.samples.slice(e,e+this.dataType.bits/8),this.dataType)}setSample(e,n){if(e=e*(this.dataType.bits/8),e+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");tD(n,this.dataType,this.data.samples,e)}getiXML(){return this.iXML.value}setiXML(e){if(typeof e!="string")throw new TypeError("iXML value must be a string.");this.iXML.value=e,this.iXML.chunkId="iXML"}get_PMX(){return this._PMX.value}set_PMX(e){if(typeof e!="string")throw new TypeError("_PMX value must be a string.");this._PMX.value=e,this._PMX.chunkId="_PMX"}newWavFile_(e,n,r,i,s){s.container||(s.container="RIFF"),this.container=s.container,this.bitDepth=r,i=pxe(i),this.updateDataType_();let a=this.dataType.bits/8;this.data.samples=new Uint8Array(i.length*a),OG(i,this.dataType,this.data.samples,0),this.makeWavHeader_(r,e,n,a,this.data.samples.length,s),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}makeWavHeader_(e,n,r,i,s,a){e=="4"?this.createADPCMHeader_(e,n,r,i,s,a):e=="8a"||e=="8m"?this.createALawMulawHeader_(e,n,r,i,s,a):Object.keys(this.WAV_AUDIO_FORMATS).indexOf(e)==-1||n>2?this.createExtensibleHeader_(e,n,r,i,s,a):this.createPCMHeader_(e,n,r,i,s,a)}createPCMHeader_(e,n,r,i,s,a){this.container=a.container,this.chunkSize=36+s,this.format="WAVE",this.bitDepth=e,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[e]||65534,numChannels:n,sampleRate:r,byteRate:n*i*r,blockAlign:n*i,bitsPerSample:parseInt(e,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}createADPCMHeader_(e,n,r,i,s,a){this.createPCMHeader_(e,n,r,i,s,a),this.chunkSize=40+s,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:s*2}}createExtensibleHeader_(e,n,r,i,s,a){this.createPCMHeader_(e,n,r,i,s,a),this.chunkSize=60+s,this.fmt.chunkSize=40,this.fmt.bitsPerSample=(parseInt(e,10)-1|7)+1,this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(e,10),this.fmt.dwChannelMask=vxe(n),this.fmt.subformat=[1,1048576,2852126848,1905997824]}createALawMulawHeader_(e,n,r,i,s,a){this.createPCMHeader_(e,n,r,i,s,a),this.chunkSize=40+s,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:s}}bitDepthFromFmt_(){this.fmt.audioFormat===3&&this.fmt.bitsPerSample===32?this.bitDepth="32f":this.fmt.audioFormat===6?this.bitDepth="8a":this.fmt.audioFormat===7?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}validateBitDepth_(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}updateDataType_(){this.dataType={bits:(parseInt(this.bitDepth,10)-1|7)+1,fp:this.bitDepth=="32f"||this.bitDepth=="64",signed:this.bitDepth!="8",be:this.container=="RIFX"},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}validateWavHeader_(){if(this.validateBitDepth_(),!gxe(this.fmt.numChannels,this.fmt.bitsPerSample))throw new Error("Invalid number of channels.");if(!LG(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}function vxe(t){let e=0;return t===1?e=4:t===2?e=3:t===4?e=51:t===6?e=63:t===8&&(e=1599),e}class yxe extends _xe{getTag(e){let n=this.getTagIndex_(e);return n.TAG!==null?this.LIST[n.LIST].subChunks[n.TAG].value:null}setTag(e,n){e=Exe(e);let r=this.getTagIndex_(e);r.TAG!==null?(this.LIST[r.LIST].subChunks[r.TAG].chunkSize=n.length+1,this.LIST[r.LIST].subChunks[r.TAG].value=n):r.LIST!==null?this.LIST[r.LIST].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}):(this.LIST.push({chunkId:"LIST",chunkSize:8+n.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}))}deleteTag(e){let n=this.getTagIndex_(e);return n.TAG!==null?(this.LIST[n.LIST].subChunks.splice(n.TAG,1),!0):!1}listTags(){let e=this.getLISTIndex("INFO"),n={};if(e!==null)for(let r=0,i=this.LIST[e].subChunks.length;r<i;r++)n[this.LIST[e].subChunks[r].chunkId]=this.LIST[e].subChunks[r].value;return n}getLISTIndex(e){for(let n=0,r=this.LIST.length;n<r;n++)if(this.LIST[n].format==e)return n;return null}getTagIndex_(e){let n={LIST:null,TAG:null};for(let r=0,i=this.LIST.length;r<i;r++)if(this.LIST[r].format=="INFO"){n.LIST=r;for(let s=0,a=this.LIST[r].subChunks.length;s<a;s++)if(this.LIST[r].subChunks[s].chunkId==e){n.TAG=s;break}break}return n}}function Exe(t){if(t.constructor!==String)throw new Error("Invalid tag name.");if(t.length<4)for(let e=0,n=4-t.length;e<n;e++)t+=" ";return t}class x5 extends yxe{listCuePoints(){let e=this.getCuePoints_();for(let n=0,r=e.length;n<r;n++)e[n].position=e[n].dwSampleOffset/this.fmt.sampleRate*1e3,e[n].dwSampleLength?(e[n].end=e[n].dwSampleLength/this.fmt.sampleRate*1e3,e[n].end+=e[n].position):e[n].end=null,delete e[n].value;return e}setCuePoint(e){this.cue.chunkId="cue ",e.label||(e.label="");let n=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],e.dwSampleOffset=e.position*this.fmt.sampleRate/1e3,e.dwSampleLength=0,e.end&&(e.dwSampleLength=e.end*this.fmt.sampleRate/1e3-e.dwSampleOffset),n.length===0?this.setCuePoint_(e,1):this.setCuePointInOrder_(n,e),this.cue.dwCuePoints=this.cue.points.length}deleteCuePoint(e){this.cue.chunkId="cue ";let n=this.getCuePoints_();this.clearLISTadtl_();let r=this.cue.points.length;this.cue.points=[];for(let i=0;i<r;i++)i+1!==e&&this.setCuePoint_(n[i],i+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}updateLabel(e,n){let r=this.getLISTIndex("adtl");if(r!==null)for(let i=0,s=this.LIST[r].subChunks.length;i<s;i++)this.LIST[r].subChunks[i].dwName==e&&(this.LIST[r].subChunks[i].value=n)}getCuePoints_(){let e=[];for(let n=0;n<this.cue.points.length;n++){let r=this.cue.points[n],i=this.getDataForCuePoint_(r.dwName);i.label=i.value?i.value:"",i.dwPosition=r.dwPosition,i.fccChunk=r.fccChunk,i.dwChunkStart=r.dwChunkStart,i.dwBlockStart=r.dwBlockStart,i.dwSampleOffset=r.dwSampleOffset,e.push(i)}return e}getDataForCuePoint_(e){let n=this.getLISTIndex("adtl"),r={};return n!==null&&this.getCueDataFromLIST_(r,n,e),r}getCueDataFromLIST_(e,n,r){for(let i=0,s=this.LIST[n].subChunks.length;i<s;i++)if(this.LIST[n].subChunks[i].dwName==r){let a=this.LIST[n].subChunks[i];e.value=a.value||e.value,e.dwName=a.dwName||0,e.dwSampleLength=a.dwSampleLength||0,e.dwPurposeID=a.dwPurposeID||0,e.dwCountry=a.dwCountry||0,e.dwLanguage=a.dwLanguage||0,e.dwDialect=a.dwDialect||0,e.dwCodePage=a.dwCodePage||0}}setCuePoint_(e,n){this.cue.points.push({dwName:n,dwPosition:e.dwPosition?e.dwPosition:0,fccChunk:e.fccChunk?e.fccChunk:"data",dwChunkStart:e.dwChunkStart?e.dwChunkStart:0,dwBlockStart:e.dwBlockStart?e.dwBlockStart:0,dwSampleOffset:e.dwSampleOffset}),this.setLabl_(e,n)}setCuePointInOrder_(e,n){let r=!1;for(let i=0;i<e.length;i++)e[i].dwSampleOffset>n.dwSampleOffset&&!r?(this.setCuePoint_(n,i+1),this.setCuePoint_(e[i],i+2),r=!0):this.setCuePoint_(e[i],r?i+2:i+1);r||this.setCuePoint_(n,this.cue.points.length+1)}clearLISTadtl_(){for(let e=0,n=this.LIST.length;e<n;e++)this.LIST[e].format=="adtl"&&this.LIST.splice(e)}setLabl_(e,n){let r=this.getLISTIndex("adtl");r===null&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),r=this.LIST.length-1),this.setLabelText_(r,e,n),e.dwSampleLength&&this.setLtxtChunk_(r,e,n)}setLabelText_(e,n,r){this.LIST[e].subChunks.push({chunkId:"labl",chunkSize:4,dwName:r,value:n.label}),this.LIST[e].chunkSize+=12}setLtxtChunk_(e,n,r){this.LIST[e].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:r,dwSampleLength:n.dwSampleLength,dwPurposeID:n.dwPurposeID||0,dwCountry:n.dwCountry||0,dwLanguage:n.dwLanguage||0,dwDialect:n.dwDialect||0,dwCodePage:n.dwCodePage||0,value:n.label}),this.LIST[e].chunkSize+=28}}class Sxe{constructor(e,n,r){this.length_=e,this.scaleFactor_=(e-1)/n,this.interpolate=this.sinc,r.method==="point"?this.interpolate=this.point:r.method==="linear"?this.interpolate=this.linear:r.method==="cubic"&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,r.tension||0)),this.sincFilterSize_=r.sincFilterSize||1,this.kernel_=wxe(r.sincWindow||bxe)}point(e,n){return this.getClippedInput_(Math.round(this.scaleFactor_*e),n)}linear(e,n){e=this.scaleFactor_*e;let r=Math.floor(e);return e-=r,(1-e)*this.getClippedInput_(r,n)+e*this.getClippedInput_(r+1,n)}cubic(e,n){e=this.scaleFactor_*e;let r=Math.floor(e),i=[this.getTangent_(r,n),this.getTangent_(r+1,n)],s=[this.getClippedInput_(r,n),this.getClippedInput_(r+1,n)];e-=r;let a=e*e,o=e*a;return(2*o-3*a+1)*s[0]+(o-2*a+e)*i[0]+(-2*o+3*a)*s[1]+(o-a)*i[1]}sinc(e,n){e=this.scaleFactor_*e;let r=Math.floor(e),i=r-this.sincFilterSize_+1,s=r+this.sincFilterSize_,a=0;for(let o=i;o<=s;o++)a+=this.kernel_(e-o)*this.getClippedInput_(o,n);return a}getTangent_(e,n){return this.tangentFactor_*(this.getClippedInput_(e+1,n)-this.getClippedInput_(e-1,n))/2}getClippedInput_(e,n){return 0<=e&&e<this.length_?n[e]:0}}function bxe(t){return Math.exp(-t/2*t/2)}function wxe(t){return function(e){return Txe(e)*t(e)}}function Txe(t){return t===0?1:Math.sin(Math.PI*t)/(Math.PI*t)}class xxe{constructor(e,n,r){let i=2*Math.PI*r/n,s=0;this.filters=[];for(let a=0;a<=e;a++)a-e/2===0?this.filters[a]=i:(this.filters[a]=Math.sin(i*(a-e/2))/(a-e/2),this.filters[a]*=.54-.46*Math.cos(2*Math.PI*a/e)),s=s+this.filters[a];for(let a=0;a<=e;a++)this.filters[a]/=s;this.z=this.initZ_()}filter(e){this.z.buf[this.z.pointer]=e;let n=0;for(let r=0,i=this.z.buf.length;r<i;r++)n+=this.filters[r]*this.z.buf[(this.z.pointer+r)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,n}reset(){this.z=this.initZ_()}initZ_(){let e=[];for(let n=0;n<this.filters.length-1;n++)e.push(0);return{buf:e,pointer:0}}}class Cxe{constructor(e,n,r){let i=[];for(let s=0;s<e;s++)i.push(this.getCoeffs_({Fs:n,Fc:r,Q:.5/Math.sin(Math.PI/(e*2)*(s+.5))}));this.stages=[];for(let s=0;s<i.length;s++)this.stages[s]={b0:i[s].b[0],b1:i[s].b[1],b2:i[s].b[2],a1:i[s].a[0],a2:i[s].a[1],k:i[s].k,z:[0,0]}}filter(e){let n=e;for(let r=0,i=this.stages.length;r<i;r++)n=this.runStage_(r,n);return n}getCoeffs_(e){let n={};n.a=[],n.b=[];let r=this.preCalc_(e,n);return n.k=1,n.b.push((1-r.cw)/(2*r.a0)),n.b.push(2*n.b[0]),n.b.push(n.b[0]),n}preCalc_(e,n){let r={},i=2*Math.PI*e.Fc/e.Fs;return r.alpha=Math.sin(i)/(2*e.Q),r.cw=Math.cos(i),r.a0=1+r.alpha,n.a0=r.a0,n.a.push(-2*r.cw/r.a0),n.k=1,n.a.push((1-r.alpha)/r.a0),r}runStage_(e,n){let r=n*this.stages[e].k-this.stages[e].a1*this.stages[e].z[0]-this.stages[e].a2*this.stages[e].z[1],i=this.stages[e].b0*r+this.stages[e].b1*this.stages[e].z[0]+this.stages[e].b2*this.stages[e].z[1];return this.stages[e].z[1]=this.stages[e].z[0],this.stages[e].z[0]=r,i}reset(){for(let e=0;e<this.stages.length;e++)this.stages[e].z=[0,0]}}const Rxe={point:!1,linear:!1,cubic:!0,sinc:!0},C5={IIR:16,FIR:71},Mxe={IIR:Cxe,FIR:xxe};function R5(t,e,n,r=null){r=r||{};let i=(n-e)/e+1,s=new Float64Array(t.length*i);r.method=r.method||"cubic";let a=new Sxe(t.length,s.length,{method:r.method,tension:r.tension||0,sincFilterSize:r.sincFilterSize||6,sincWindow:r.sincWindow||void 0,clip:r.clip||"mirror"});if(r.LPF===void 0&&(r.LPF=Rxe[r.method]),r.LPF){r.LPFType=r.LPFType||"IIR";const o=Mxe[r.LPFType];if(n>e){let l=new o(r.LPForder||C5[r.LPFType],n,e/2);Axe(t,s,a,l)}else{let l=new o(r.LPForder||C5[r.LPFType],e,n/2);Ixe(t,s,a,l)}}else NG(t,s,a);return s}function NG(t,e,n){for(let r=0,i=e.length;r<i;r++)e[r]=n.interpolate(r,t)}function Axe(t,e,n,r){for(let i=0,s=e.length;i<s;i++)e[i]=r.filter(n.interpolate(i,t));r.reset();for(let i=e.length-1;i>=0;i--)e[i]=r.filter(e[i])}function Ixe(t,e,n,r){for(let i=0,s=t.length;i<s;i++)t[i]=r.filter(t[i]);r.reset();for(let i=t.length-1;i>=0;i--)t[i]=r.filter(t[i]);NG(t,e,n)}class kxe extends x5{toRIFF(){let e=new Float64Array(fS(this.data.samples.length,this.dataType.bits/8));Ym(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFF"})}toRIFX(){let e=new Float64Array(fS(this.data.samples.length,this.dataType.bits/8));Ym(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFX"})}toIMAADPCM(){if(this.fmt.sampleRate!==8e3)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(this.fmt.numChannels!==1)throw new Error("Only mono files can be compressed as IMA-ADPCM.");{this.assure16Bit_();let e=new Int16Array(fS(this.data.samples.length,2));Ym(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",jTe(e),{container:this.correctContainer_()})}}fromIMAADPCM(e="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",HTe(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),e!="16"&&this.toBitDepth(e)}toALaw(){this.assure16Bit_();let e=new Int16Array(fS(this.data.samples.length,2));Ym(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",JTe(e),{container:this.correctContainer_()})}fromALaw(e="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",QTe(this.data.samples),{container:this.correctContainer_()}),e!="16"&&this.toBitDepth(e)}toMuLaw(){this.assure16Bit_();let e=new Int16Array(fS(this.data.samples.length,2));Ym(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",sxe(e),{container:this.correctContainer_()})}fromMuLaw(e="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",axe(this.data.samples),{container:this.correctContainer_()}),e!="16"&&this.toBitDepth(e)}toBitDepth(e,n=!0){let r=e,i=this.bitDepth;n||(e!="32f"&&(r=this.dataType.bits.toString()),i=""+this.dataType.bits),this.assureUncompressed_();let s=this.getSamples(!0),a=new Float64Array(s.length);DTe(s,i,a,r),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,e,a,{container:this.correctContainer_()})}toSampleRate(e,n){this.validateResample_(e);let r=this.getSamples(),i=[];if(r.constructor===Float64Array)i=R5(r,this.fmt.sampleRate,e,n);else for(let s=0;s<r.length;s++)i.push(R5(r[s],this.fmt.sampleRate,e,n));this.fromExisting_(this.fmt.numChannels,e,this.bitDepth,i,{container:this.correctContainer_()})}validateResample_(e){if(LG(this.fmt.numChannels,this.fmt.bitsPerSample,e)){if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}else throw new Error("Invalid sample rate.")}assure16Bit_(){this.assureUncompressed_(),this.bitDepth!="16"&&this.toBitDepth("16")}assureUncompressed_(){this.bitDepth=="8a"?this.fromALaw():this.bitDepth=="8m"?this.fromMuLaw():this.bitDepth=="4"&&this.fromIMAADPCM()}correctContainer_(){return this.container=="RF64"?"RIFF":this.container}fromExisting_(e,n,r,i,s){let a=new x5;Object.assign(this.fmt,a.fmt),Object.assign(this.fact,a.fact),Object.assign(this.ds64,a.ds64),Object.assign(this.data,a.data),this.newWavFile_(e,n,r,i,s)}}function fS(t,e){let n=t/e;return n%2&&n++,n}class Oxe extends kxe{constructor(e){super(),e&&this.fromBuffer(e)}fromBase64(e){this.fromBuffer(NTe(e))}toBase64(){return LTe(this.toBuffer())}toDataURI(){return"data:audio/wav;base64,"+this.toBase64()}fromDataURI(e){this.fromBase64(e.replace("data:audio/wav;base64,",""))}}const Pxe=1e3,Lxe=1e4;class Nxe{constructor(e,n,r){this.recordingPromise=Promise.resolve(),this.stopPromise=Promise.resolve(),this.analyticsManager=e,this.logManager=n,this.audioContext=r,this.mixer=this.audioContext.createChannelMerger(2)}connectUserAudio(e){e.connect(this.mixer,0,0)}connectAgentAudio(e){e.connect(this.mixer,0,1)}start(){this.mixedStream=this.audioContext.createMediaStreamDestination(),this.mixer.connect(this.mixedStream),this.recorder=new MediaRecorder(this.mixedStream.stream),this.recorder.ondataavailable=this.handleRecordedData.bind(this),this.stopPromise=new Promise(e=>{this.stopResolve=e}),this.recorder.onstop=e=>{var n;return(n=this.stopResolve)==null?void 0:n.call(this)},this.recorder.start(Pxe),this.logManager.info("WebRTC audio recorder started.")}handleRecordedData(e){const n=this.handleRecordedDataAsync(e);this.recordingPromise=this.recordingPromise.then(()=>n)}async handleRecordedDataAsync(e){if(e.data.size==0)return;const r=await e.data.arrayBuffer();if(this.recordedAudio==null){this.recordedAudio=new Uint8Array(r);return}const i=new Uint8Array(this.recordedAudio.byteLength+r.byteLength);i.set(this.recordedAudio,0),i.set(new Uint8Array(r),this.recordedAudio.length),this.recordedAudio=i}async stop(){var e;this.mixer.disconnect(),(e=this.recorder)==null||e.stop();try{const n=Date.now(),r=await Dxe(this.generateStereoWav(),Lxe,new ea("Timeout preparing WebRTC audio recording")),i=Date.now()-n;return this.analyticsManager.track(new Rle(i,(r==null?void 0:r.byteLength)??0)),r}catch(n){return this.logManager.error("Error preparing WebRTC audio recording",n),this.analyticsManager.track(new Mle(String(n))),null}}async generateStereoWav(){if(await this.stopPromise,await this.recordingPromise,this.recordedAudio==null)return null;const e=this.recordedAudio.buffer;if(!(e instanceof ArrayBuffer))throw new ea("Recorded audio buffer is not an ArrayBuffer");const n=await this.audioContext.decodeAudioData(e),r=n.getChannelData(0),i=n.getChannelData(1),s=Math.min(r.length,i.length);let a=new Int16Array(s*2);for(let c=0;c<s;c++)a[c*2]=Math.max(-1,Math.min(1,r[c]))*32767,a[c*2+1]=Math.max(-1,Math.min(1,i[c]))*32767;const o=new Oxe;return o.fromScratch(2,n.sampleRate,"16",a),o.toBuffer()}}function Dxe(t,e,n){return Promise.race([t,new Promise((r,i)=>setTimeout(()=>i(n),e))])}const Uxe=100,Fxe=50,Bxe=10,zxe=600,jxe=2400,Hxe=20;class Vxe{constructor(){this.state="user_paused",this.agentLatenciesMs=[],this.userSampleRate=0,this.agentSampleRate=0,this.firstWordLatencyReported=!1,this.adaptiveUserRange={min:255,max:0},this.adaptiveAgentRange={min:255,max:0}}start(e,n,r,i,s,a,o,l){this.userSampleRate=e,this.getUserFrequencies=n,this.agentSampleRate=r,this.getAgentFrequencies=i,this.callButtonPressedTimeMs=s,this.sessionStartedTimeMs=a,this.callConnectedTimeMs=o,this.analyticsManager=l,this.snapshotInterval=setInterval(this.grabSnapshot.bind(this),Hxe)}stop(){clearInterval(this.snapshotInterval)}grabSnapshot(){this.getUserFrequencies!=null&&this.handleUserFrequencies(this.getUserFrequencies()),this.getAgentFrequencies!=null&&this.handleAgentFrequencies(this.getAgentFrequencies())}handleUserFrequencies(e){switch(this.vadFromFrequencies(e,this.userSampleRate,this.adaptiveUserRange,Fxe)){case"voice":this.state="user_talking",this.lastUserSpeechTimestamp=Date.now();break;case"silence":this.state=="user_talking"&&(this.state="user_paused");break}}trackTimeToFirstWordEvent(e){this.analyticsManager!=null&&this.sessionStartedTimeMs!=null&&this.callButtonPressedTimeMs!=null&&this.callConnectedTimeMs!=null&&this.analyticsManager.track(new fle(this.sessionStartedTimeMs-this.callButtonPressedTimeMs,this.callConnectedTimeMs-this.callButtonPressedTimeMs,e-this.callButtonPressedTimeMs))}handleAgentFrequencies(e){switch(this.vadFromFrequencies(e,this.agentSampleRate,this.adaptiveAgentRange,Bxe)){case"voice":if(this.firstWordLatencyMs==null&&this.callButtonPressedTimeMs!=null){const n=Date.now();this.firstWordLatencyMs=n-this.callButtonPressedTimeMs,this.trackTimeToFirstWordEvent(n)}switch(this.state){case"user_paused":if(this.lastUserSpeechTimestamp!=null){const n=Date.now()-this.lastUserSpeechTimestamp;n>Uxe&&this.agentLatenciesMs.push(n)}this.state="agent_talking";break;case"agent_paused":this.state="agent_talking";break}break;case"silence":this.state==="agent_talking"&&(this.state="agent_paused");break}}async computeReport(e,n){const r=[];if(this.agentLatenciesMs.length>0){const s=this.agentLatenciesMs.reduce((a,o)=>a+o,0)/this.agentLatenciesMs.length;r.push(new ZO(YC.AgentResponseLatency,s,this.agentLatenciesMs.length,this.getAgentResponseLatencyRating(s),e,!1))}return!this.firstWordLatencyReported&&this.firstWordLatencyMs!=null&&(r.push(new ZO(YC.FirstWordLatency,this.firstWordLatencyMs,1,this.getFirstWordLatencyRating(this.firstWordLatencyMs),e,!1)),this.firstWordLatencyReported=!0),r}resetTimeSpan(){this.agentLatenciesMs=[]}getAgentResponseLatencyRating(e){return e<300?5:e<500?4:e<1e3?3:e<3e3?2:1}getFirstWordLatencyRating(e){return e<2e3?5:e<3e3?4:e<4e3?3:e<6e3?2:1}vadFromFrequencies(e,n,r,i){const s=n/Og,a=Math.floor(zxe/s),o=Math.floor(jxe/s),l=e.slice(a,o);let c=0;for(let m=0;m<l.length;m++)c+=l[m],l[m]<r.min&&(r.min=l[m]),l[m]>r.max&&(r.max=l[m]);const f=Math.max(.01,r.max-r.min);return(c/l.length-r.min)/f*100<i?"silence":"voice"}}const M5=6e4;class Gxe{constructor(){this.underrunCount=0,this.underrunTotalTimeMs=0}stop(){}getUnderrunTotalTimeMs(){return this.underrunTotalTimeMs}reportUnderrun(e){this.currentUnderrunStartTimeMs==null&&(this.underrunCount++,this.currentUnderrunStartTimeMs=e)}reportAudio(e){this.currentUnderrunStartTimeMs!=null&&(this.underrunTotalTimeMs+=e-this.currentUnderrunStartTimeMs,this.currentUnderrunStartTimeMs=void 0)}async computeReport(e,n){return[new ZO(YC.BufferUnderruns,this.underrunCount,this.underrunCount,this.getRating(this.underrunCount,n),e,n<M5)]}resetTimeSpan(){this.underrunCount=0}getRating(e,n){const r=n/M5;return e==0?5:e<2*r?4:e<6*r?3:e<11*r?2:1}}const $xe=6e4,Wxe=1e4;class qxe{constructor(){this.timeSpanStats=new A5,this.lastReportedBytesSent=0,this.lastReportedBytesReceived=0}init(e){this.pc=e,this.pc!=null&&(this.snapshotInterval=setInterval(this.grabSnapshot.bind(this),Wxe))}stop(){clearInterval(this.snapshotInterval)}resetTimeSpan(){this.timeSpanStats=new A5}async grabSnapshot(){var n;if(((n=this.pc)==null?void 0:n.connectionState)!="connected"){this.stop();return}(await this.pc.getStats()).forEach(r=>{if(r.kind=="audio")switch(r.type){case"inbound-rtp":r.jitter!=null&&this.timeSpanStats.inboundJitters.push(r.jitter);break;case"remote-inbound-rtp":r.jitter!=null&&this.timeSpanStats.remoteInboundJitters.push(r.jitter),r.roundTripTime!=null&&this.timeSpanStats.remoteRoundTripTimes.push(r.roundTripTime),r.fractionLost!=null&&this.timeSpanStats.remoteFractionLosts.push(r.fractionLost);break}})}async computeReport(e,n){var s;if(((s=this.pc)==null?void 0:s.connectionState)!="connected")return[];const r=await this.pc.getStats(),i=new ble(e,n<$xe);return i.inbound_jitter=ox(this.timeSpanStats.inboundJitters),i.remote_inbound_jitter=ox(this.timeSpanStats.remoteInboundJitters),i.remote_inbound_round_trip_time_seconds=ox(this.timeSpanStats.remoteRoundTripTimes),i.remote_inbound_fraction_lost=ox(this.timeSpanStats.remoteFractionLosts),r.forEach(a=>{var o,l,c,f,p;if(a.kind=="audio")switch(a.type){case"inbound-rtp":a.packetsLost!=null&&(i.inbound_packets_lost=a.packetsLost-(((o=this.lastReportedEvent)==null?void 0:o.inbound_packets_lost)??0)),a.concealedSamples!=null&&(i.inbound_concealed_samples=a.concealedSamples-(((l=this.lastReportedEvent)==null?void 0:l.inbound_concealed_samples)??0)),a.insertedSamplesForDeceleration!=null&&(i.inbound_inserted_samples_for_deceleration=a.insertedSamplesForDeceleration-(((c=this.lastReportedEvent)==null?void 0:c.inbound_inserted_samples_for_deceleration)??0)),a.removedSamplesForAcceleration!=null&&(i.inbound_removed_samples_for_acceleration=a.removedSamplesForAcceleration-(((f=this.lastReportedEvent)==null?void 0:f.inbound_removed_samples_for_acceleration)??0)),a.bytesReceived!=null&&(i.inbound_bytes_received_per_second=(a.bytesReceived-this.lastReportedBytesReceived)/(n/1e3),this.lastReportedBytesReceived=a.bytesReceived);break;case"remote-inbound-rtp":a.packetsLost!=null&&(i.remote_inbound_packets_lost=a.packetsLost-(((p=this.lastReportedEvent)==null?void 0:p.remote_inbound_packets_lost)??0));break;case"outbound-rtp":a.bytesSent!=null&&(i.outbound_bytes_sent_per_second=(a.bytesSent-this.lastReportedBytesSent)/(n/1e3),this.lastReportedBytesSent=a.bytesSent);break}}),this.lastReportedEvent=i,[i]}}class A5{constructor(){this.inboundJitters=[],this.remoteInboundJitters=[],this.remoteRoundTripTimes=[],this.remoteFractionLosts=[]}}function ox(t){if(t.length!==0)return t.reduce((e,n)=>e+n,0)/t.length}const I5=6e4;class Xxe{constructor(e){this.intervalId=null,this.lastReportTimestamp=Date.now(),this.startTimestamp=Date.now(),this.agentResponseLatencyMonitor=new Vxe,this.bufferUnderrunsMonitor=new Gxe,this.webRtcStatsMonitor=new qxe,this.allMonitors=[this.agentResponseLatencyMonitor,this.bufferUnderrunsMonitor,this.webRtcStatsMonitor],this.analyticsManager=e,this.intervalId=setInterval(()=>{this.runMonitorsForTimeSpan(I5)},I5)}async stop(){this.intervalId!=null&&(clearInterval(this.intervalId),this.intervalId=null);for(const e of this.allMonitors)e.stop();await this.runMonitorsForTimeSpan(Date.now()-this.lastReportTimestamp)}async runMonitorsForTimeSpan(e){for(const n of this.allMonitors){const r=await n.computeReport(Date.now()-this.startTimestamp,e);for(const i of r)this.analyticsManager.track(i);n.resetTimeSpan()}this.lastReportTimestamp=Date.now()}getBufferUnderrunsMonitor(){return this.bufferUnderrunsMonitor}getAgentResponseLatencyMonitor(){return this.agentResponseLatencyMonitor}getWebRtcStatsMonitor(){return this.webRtcStatsMonitor}}const k5=new Uint8Array(128).fill(0),tk=10;class O5{constructor(e,n,r={},i,s,a){this.audioContext=new AudioContext,this.muteInput=!1,this.muteOutput=!1,this.analyticsManager=e,this.logManager=n,this.audioOptions=kTe(r),this.onError=i,this.iceServersConfigPromise=new Promise(o=>{this.iceServersConfigResolve=o}),this.recorder=new Nxe(e,n,this.audioContext),this._input=new OTe(this.audioContext,n,this.audioOptions.inputWarmupMs),this._output=new PTe(this.audioContext,n),this.qualityMonitorManager=new Xxe(this.analyticsManager),this.latencyMonitor=this.qualityMonitorManager.getAgentResponseLatencyMonitor()}get input(){return this._input}get output(){return this._output}getCallDurationMs(){if(this.startTimeMs!=null)return Date.now()-this.startTimeMs}setCallButtonPressedTimeMs(e){this.callButtonPressedTimeMs=e}processAudioData(e,n){}processTimespanEvent(e){}setNetworkLatency(e){}async init(){await this._input.init(),this._input.connectRecorder(this.recorder),await this._output.init((e,n,r)=>{}),await this._output.connect(this._output.getSampleRate()),this._output.configure({playbackRecord:!0})}async start(e,n,r,i,s,a){var o;this.logManager.info(`Starting WebRTC audio session with session ID: ${this.sessionId}`),this.startTimeMs=Date.now(),(o=this.latencyMonitor)==null||o.start(this._input.getSampleRate(),this._input.getFrequencies.bind(this._input),this._output.getSampleRate(),this._output.getFrequencies.bind(this._output),r,i,s,this.analyticsManager)}async stop(){var n;this.qualityMonitorManager.stop(),await this._input.stop(),await this._output.disconnect();const e=await this.recorder.stop();if((n=this.pc)==null||n.close(),clearTimeout(this.connectionHealthCheckTimer),this.startTimeMs==null)throw new ea("Unexpected state: startTimeMs is not set in stop()");return this.analyticsManager.track(new ule(Date.now()-this.startTimeMs,0)),this.audioOptions.enableRecording?e:null}async processSessionStarted(e,n){this.sessionId=e,this.transport=n}setMuteInput(e){this.muteInput=e,this._input.setMute(e)}getMuteInput(){return this.muteInput}setMuteOutput(e){this.muteOutput=e,this._output.setMute(e)}getMuteOutput(){return this.muteOutput}getFrequencies(){return{input:this.muteInput?k5:this._input.getFrequencies(),output:this.muteOutput?k5:this._output.getFrequencies()}}async processWebRtcConfig(e){var n;this.logManager.info(`Received WebRTC config ${JSON.stringify(e)}`),(n=this.iceServersConfigResolve)==null||n.call(this,e.ice_servers.map(r=>({urls:r.urls||[],username:r.username,credential:r.credential})))}async processOnTrackEvent(e){var n,r,i;if(this.logManager.info(`Received remote track: ${e.track.kind}`),e.streams.length===0){(n=this.onError)==null||n.call(this,new ea("Received RTCTrackEvent with no streams in it."));return}try{this._output.start(e.streams[0],this.recorder),await this._input.start((s,a)=>{}),this.recorder.start()}catch(s){s instanceof ea?(r=this.onError)==null||r.call(this,s):(i=this.onError)==null||i.call(this,new ea(`Failed to process remote track: ${s}`))}}async createWebRtcOfferSdp(){this.logManager.info("Waiting for WebRTC config...");let e=await this.iceServersConfigPromise;this.logManager.info("Creating WebRTC offer SDP."),this.pc=new RTCPeerConnection({iceServers:e,iceTransportPolicy:"relay"}),this.pc.onicecandidate=this.processLocalIceCandidate.bind(this),this.pc.onconnectionstatechange=this.processConnectionStateChange.bind(this);const n=this._input.stream;if(n==null)throw new ea("Couldn't acquire an input audio stream.");this.pc.addTrack(n.getAudioTracks()[0],n),this.pc.ontrack=this.processOnTrackEvent.bind(this);const r=await this.pc.createOffer();return await this.pc.setLocalDescription(r),this.logManager.info(`Outgoing WebRTC offer SDP: ${r.sdp}`),this.scheduleConnectionHealthCheck(),r.sdp}scheduleConnectionHealthCheck(){this.connectionHealthCheckTimer==null&&(this.connectionHealthCheckTimer=setTimeout(()=>{var n,r;const e=(n=this.pc)==null?void 0:n.connectionState;e!="connected"&&((r=this.onError)==null||r.call(this,new ea(`WebRTC connection is not established after ${tk}s (ICE connection state was ${e}).`))),this.logManager.info(`WebRTC is connected when running a ${tk}s check.`)},tk*1e3))}async processWebRtcAnswerSdp(e){if(e==null)throw new ea("Received empty WebRTC answer SDP");if(this.pc==null)throw new ea("Unexpected state: received answer SDP before RTCConnection is created ");this.logManager.info(`Received WebRTC answer SDP: ${e}`);const n=new RTCSessionDescription({type:"answer",sdp:e});await this.pc.setRemoteDescription(n)}processConnectionStateChange(){var e,n,r;switch(this.logManager.info(`WebRTC connection state changed to ${(e=this.pc)==null?void 0:e.connectionState}`),(n=this.pc)==null?void 0:n.connectionState){case"connected":this.qualityMonitorManager.getWebRtcStatsMonitor().init(this.pc),this.analyticsManager.track(new Cle(this.callButtonPressedTimeMs&&Date.now()-this.callButtonPressedTimeMs));break;case"failed":(r=this.onError)==null||r.call(this,new ea("WebRTC connection failed"));break}}processLocalIceCandidate(e){var r,i,s;this.logManager.info(`Received local ICE candidate: ${(r=e.candidate)==null?void 0:r.candidate}`);const n=this.sessionId;if(!n){(i=this.onError)==null||i.call(this,new ea("Unexpected state: session ID not set when handling outgoing ICE candidate"));return}if(this.transport==null){(s=this.onError)==null||s.call(this,new ea("Unexpected state: transport not set when handling outgoing ICE candidate"));return}if(e.candidate==null){this.logManager.info("All local ICE candidates are collected.");return}this.transport.sendWebRtcIceCandidates({type:Un.WebRtcIceCandidate,session_id:n,call_id:null,content:{sdp:e.candidate.candidate,sdp_mid:e.candidate.sdpMid||"",sdp_m_line_index:e.candidate.sdpMLineIndex||0}})}}var zv={},hS={},P5;function Kxe(){if(P5)return hS;P5=1;var t=hS.__assign||function(){return t=Object.assign||function(r){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},t.apply(this,arguments)};Object.defineProperty(hS,"__esModule",{value:!0});var e={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(r){var i=t(t({},e),r);return i.numOfAttempts<1&&(i.numOfAttempts=1),i}return hS.getSanitizedOptions=n,hS}var lx={},gm={},ux={},cx={},dx={},L5;function Yxe(){if(L5)return dx;L5=1,Object.defineProperty(dx,"__esModule",{value:!0});function t(e){var n=Math.random()*e;return Math.round(n)}return dx.fullJitter=t,dx}var fx={},N5;function Zxe(){if(N5)return fx;N5=1,Object.defineProperty(fx,"__esModule",{value:!0});function t(e){return e}return fx.noJitter=t,fx}var D5;function Jxe(){if(D5)return cx;D5=1,Object.defineProperty(cx,"__esModule",{value:!0});var t=Yxe(),e=Zxe();function n(r){switch(r.jitter){case"full":return t.fullJitter;case"none":default:return e.noJitter}}return cx.JitterFactory=n,cx}var U5;function DG(){if(U5)return ux;U5=1,Object.defineProperty(ux,"__esModule",{value:!0});var t=Jxe(),e=function(){function n(r){this.options=r,this.attempt=0}return n.prototype.apply=function(){var r=this;return new Promise(function(i){return setTimeout(i,r.jitteredDelay)})},n.prototype.setAttemptNumber=function(r){this.attempt=r},Object.defineProperty(n.prototype,"jitteredDelay",{get:function(){var r=t.JitterFactory(this.options);return r(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delay",{get:function(){var r=this.options.startingDelay,i=this.options.timeMultiple,s=this.numOfDelayedAttempts,a=r*Math.pow(i,s);return Math.min(a,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),n}();return ux.Delay=e,ux}var F5;function Qxe(){if(F5)return gm;F5=1;var t=gm.__extends||function(){var s=function(a,o){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])},s(a,o)};return function(a,o){s(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}}(),e=gm.__awaiter||function(s,a,o,l){function c(f){return f instanceof o?f:new o(function(p){p(f)})}return new(o||(o=Promise))(function(f,p){function m(E){try{y(l.next(E))}catch(S){p(S)}}function _(E){try{y(l.throw(E))}catch(S){p(S)}}function y(E){E.done?f(E.value):c(E.value).then(m,_)}y((l=l.apply(s,a||[])).next())})},n=gm.__generator||function(s,a){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,c,f,p;return p={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function m(y){return function(E){return _([y,E])}}function _(y){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,c&&(f=y[0]&2?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[y[0]&2,f.value]),y[0]){case 0:case 1:f=y;break;case 4:return o.label++,{value:y[1],done:!1};case 5:o.label++,c=y[1],y=[0];continue;case 7:y=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(y[0]===6||y[0]===2)){o=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){o.label=y[1];break}if(y[0]===6&&o.label<f[1]){o.label=f[1],f=y;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(y);break}f[2]&&o.ops.pop(),o.trys.pop();continue}y=a.call(s,o)}catch(E){y=[6,E],c=0}finally{l=f=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(gm,"__esModule",{value:!0});var r=DG(),i=function(s){t(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.prototype.apply=function(){return e(this,void 0,void 0,function(){return n(this,function(o){return[2,this.isFirstAttempt?!0:s.prototype.apply.call(this)]})})},Object.defineProperty(a.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),a}(r.Delay);return gm.SkipFirstDelay=i,gm}var pS={},B5;function eCe(){if(B5)return pS;B5=1;var t=pS.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l])},r(i,s)};return function(i,s){r(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(pS,"__esModule",{value:!0});var e=DG(),n=function(r){t(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i}(e.Delay);return pS.AlwaysDelay=n,pS}var z5;function tCe(){if(z5)return lx;z5=1,Object.defineProperty(lx,"__esModule",{value:!0});var t=Qxe(),e=eCe();function n(i,s){var a=r(i);return a.setAttemptNumber(s),a}lx.DelayFactory=n;function r(i){return i.delayFirstAttempt?new e.AlwaysDelay(i):new t.SkipFirstDelay(i)}return lx}var j5;function nCe(){if(j5)return zv;j5=1;var t=zv.__awaiter||function(a,o,l,c){function f(p){return p instanceof l?p:new l(function(m){m(p)})}return new(l||(l=Promise))(function(p,m){function _(S){try{E(c.next(S))}catch(w){m(w)}}function y(S){try{E(c.throw(S))}catch(w){m(w)}}function E(S){S.done?p(S.value):f(S.value).then(_,y)}E((c=c.apply(a,o||[])).next())})},e=zv.__generator||function(a,o){var l={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},c,f,p,m;return m={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function _(E){return function(S){return y([E,S])}}function y(E){if(c)throw new TypeError("Generator is already executing.");for(;l;)try{if(c=1,f&&(p=E[0]&2?f.return:E[0]?f.throw||((p=f.return)&&p.call(f),0):f.next)&&!(p=p.call(f,E[1])).done)return p;switch(f=0,p&&(E=[E[0]&2,p.value]),E[0]){case 0:case 1:p=E;break;case 4:return l.label++,{value:E[1],done:!1};case 5:l.label++,f=E[1],E=[0];continue;case 7:E=l.ops.pop(),l.trys.pop();continue;default:if(p=l.trys,!(p=p.length>0&&p[p.length-1])&&(E[0]===6||E[0]===2)){l=0;continue}if(E[0]===3&&(!p||E[1]>p[0]&&E[1]<p[3])){l.label=E[1];break}if(E[0]===6&&l.label<p[1]){l.label=p[1],p=E;break}if(p&&l.label<p[2]){l.label=p[2],l.ops.push(E);break}p[2]&&l.ops.pop(),l.trys.pop();continue}E=o.call(a,l)}catch(S){E=[6,S],f=0}finally{c=p=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(zv,"__esModule",{value:!0});var n=Kxe(),r=tCe();function i(a,o){return o===void 0&&(o={}),t(this,void 0,void 0,function(){var l,c;return e(this,function(f){switch(f.label){case 0:return l=n.getSanitizedOptions(o),c=new s(a,l),[4,c.execute()];case 1:return[2,f.sent()]}})})}zv.backOff=i;var s=function(){function a(o,l){this.request=o,this.options=l,this.attemptNumber=0}return a.prototype.execute=function(){return t(this,void 0,void 0,function(){var o,l;return e(this,function(c){switch(c.label){case 0:if(this.attemptLimitReached)return[3,7];c.label=1;case 1:return c.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return c.sent(),[4,this.request()];case 3:return[2,c.sent()];case 4:return o=c.sent(),this.attemptNumber++,[4,this.options.retry(o,this.attemptNumber)];case 5:if(l=c.sent(),!l||this.attemptLimitReached)throw o;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(a.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),a.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){var o;return e(this,function(l){switch(l.label){case 0:return o=r.DelayFactory(this.options,this.attemptNumber),[4,o.apply()];case 1:return l.sent(),[2]}})})},a}();return zv}var rCe=nCe();class iCe{constructor(e,n,r,i){this.url=e,this.socket=null,this.messageCallback=null,this.closeCallback=null,this.isDisconnecting=!1,this.hasReceivedFirstMessage=!1,this.connectionStartTime=0,this.connectionAttempts=0,this.firstMessageTimeoutId=null,this.logManager=n,this.analyticsManager=r,this.backoffOptions={delayFirstAttempt:i.delay_first_attempt,numOfAttempts:i.num_of_attempts,startingDelay:i.starting_delay,maxDelay:i.max_delay,timeMultiple:i.time_multiple},this.firstMessageTimeout=i.first_message_timeout_ms??500,this.logManager.info("WebsocketTransport constructor",{backoffConfig:i,firstMessageTimeout:this.firstMessageTimeout})}createWebSocket(){return new Promise((e,n)=>{this.logManager.info("Creating WebSocket connection"),this.connectionAttempts++,this.socket=new WebSocket(this.url),this.socket.onmessage=r=>{var i;if(this.hasReceivedFirstMessage)(i=this.messageCallback)==null||i.call(this,r.data,Date.now());else{this.clearTimeouts(),this.hasReceivedFirstMessage=!0,this.logManager.info("WebSocket: received first message! Connected");const s=Date.now()-this.connectionStartTime;this.analyticsManager.track(new ple(this.connectionAttempts,s)),e(r.data)}},this.socket.onclose=r=>{var i;this.clearTimeouts(),this.logManager.info("WebSocket disconnected with code:",r.code),this.analyticsManager.track(new hle(r.code,this.hasReceivedFirstMessage)),this.isDisconnecting||(r.code===sC.TryAgainLater||r.code===sC.Overloaded?n(new yy("Server is temporarily unavailable")):(n(new kle("WebSocket connection closed",{close_code:r.code})),(i=this.closeCallback)==null||i.call(this,r.code)))},this.socket.onopen=()=>{this.logManager.info("WebSocket connected"),this.firstMessageTimeoutId=setTimeout(()=>{var r;(r=this.socket)==null||r.close(sC.FirstMessageNotReceived),n(new T9("First message upon connecting not received",{connection_attempts:this.connectionAttempts}))},this.firstMessageTimeout)},this.socket.onerror=r=>{this.clearTimeouts(),this.logManager.error("WebSocket error:",r);let i="WebSocket connection error";"message"in r&&(i=r.message);const s=new Ile(i,{connection_attempts:this.connectionAttempts});n(s)}})}async connect(){this.isDisconnecting=!1,this.connectionStartTime=Date.now(),this.connectionAttempts=0;try{return await rCe.backOff(async()=>await this.createWebSocket(),{...this.backoffOptions,retry:()=>!0})}catch(e){throw e instanceof yy?new yy("Failed to connect after multiple attempts",{attempts:this.backoffOptions.numOfAttempts,lastError:e}):e}}async disconnect(){this.isDisconnecting=!0,this.clearTimeouts(),this.socket&&(this.socket.readyState!==WebSocket.CLOSED&&(this.socket.onerror=null,this.socket.close()),this.socket=null)}clearTimeouts(){this.firstMessageTimeoutId&&(this.logManager.info("Clearing first message timeout"),clearTimeout(this.firstMessageTimeoutId)),this.firstMessageTimeoutId=null}isConnected(){return this.socket!=null&&this.socket.readyState===WebSocket.OPEN&&this.hasReceivedFirstMessage}send(e){var n;this.socket&&this.socket.readyState===WebSocket.OPEN?this.socket.send(e):this.logManager.error("WebSocket is not open. Ready state:",(n=this.socket)==null?void 0:n.readyState)}onMessage(e){this.messageCallback=e}onClose(e){this.closeCallback=e}onError(e){}}class sCe{constructor(e,n,r,i,s,a){this.user=null,this.session=null,this.wakeLock=null,this.audioOptions=null,this.webAudioConfig=null,this.envConfig=e,this.clientName=n,this.featureFlagManager=r,this.analyticsManager=i,this.logManager=s,this.validationManager=a,this.notification=new MTe(this.logManager)}async init(){if(f1e().length===0){if(!this.envConfig.firebaseConfig)throw new Error("Firebase config not set");$N(this.envConfig.firebaseConfig)}const e=kP();if(await e.authStateReady(),e.currentUser!=null)this.logManager.info("Using existing user"),this.user=e.currentUser;else{this.logManager.info("No user, signing in anonymously");let i;i=await rwe(e),this.user=i.user}await this.featureFlagManager.initializeWithUser(this.user.uid,this.user.email,this.envConfig.name,this.envConfig.statSigKey);const n=this.featureFlagManager.getConfig(eg.DATADOG_CONFIG);await this.analyticsManager.initialize({rudderstackWriteKey:this.envConfig.rudderstackWriteKey,datadogRumClientToken:this.envConfig.datadogRumKey,datadogRumAppId:this.envConfig.datadogRumAppId,datadogEnabled:n.rum_enabled,datadogSampleRate:n.rum_session_sample_rate}),await this.logManager.initialize({datadogClientToken:this.envConfig.datadogRumKey,baseUrl:this.envConfig.baseUrl,enableDatadog:n.logs_enabled,sessionSampleRate:n.log_session_sample_rate,enableErrorTracking:n.enable_error_tracking});const r=this.user!=null&&!this.user.isAnonymous;this.analyticsManager.identify(this.user.uid,this.user.displayName??"",this.user.email??"",!1,r),this.logManager.identify(this.user.uid,this.user.displayName??"",this.user.email??"",!1)}getSession(){return this.session}async getIdToken(){var e;return await((e=this.user)==null?void 0:e.getIdToken())??null}getPoorRttThresholdMs(){var e;return((e=this.webAudioConfig)==null?void 0:e.poor_rtt_threshold_ms)??500}async startCall(e={}){const{character:n,preset:r,settings:i,onError:s,onConnectionQualityChange:a,onCallStateChange:o,onRawRecordingComplete:l,agentId:c,audioOptions:f,chimeTask:p,location:m,date:_}={audioOptions:{},...e,location:e.location??{latitude:0,longitude:0,address:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone??""},date:e.date};if(this.audioOptions={enableRecording:!1,ringtone:null,ringtoneMaxDurationMs:null,connectedChime:null,disconnectedChime:null,inputReadyChime:null,inputWarmupMs:0,prepareAudioNotification:!1,...f},this.analyticsManager.setContext("character",n??Ale),this.analyticsManager.setContext("use_webrtc",!0),this.analyticsManager.setContext("use_stunner",this.featureFlagManager.isEnabled(wb.USE_STUNNER)),this.analyticsManager.track(new lle),this.featureFlagManager.isEnabled(wb.DISABLE_CALLING))throw new yy("Service is not currently available");this.webAudioConfig=this.featureFlagManager.getConfig(eg.WEB_AUDIO_CONFIG),f.enableRecording=this.user!=null;const y=new O5(this.analyticsManager,this.logManager,f,s,a,l);if(f.prepareAudioNotification){try{await Promise.race([this.notification.unlock(),new Promise((O,D)=>setTimeout(()=>D(new Error("Audio context unlock timed out")),200))]),this.analyticsManager.track(new vle)}catch(O){this.logManager.warn("Failed to unlock audio context:",O)}if(f.connectedChime)try{this.notification.precacheAudio(f.connectedChime)}catch(O){this.logManager.warn("Failed to precache connected chime on call connect:",O)}if(f.disconnectedChime)try{this.notification.precacheAudio(f.disconnectedChime)}catch(O){this.logManager.warn("Failed to precache disconnected chime on call connect:",O)}}let E=0;try{this.analyticsManager.track(new yle),await y.init(),this.analyticsManager.track(new Ele),E=Date.now(),y instanceof O5&&y.setCallButtonPressedTimeMs(E),this.session=await this.getOrCreateSession(n,c,s,y)}catch(O){this.logManager.error("Failed to create session:",O);try{await y.stop()}catch{}if(O instanceof fi)this.analyticsManager.track(new Id(O.code,O.message,O.details));else{const D=new ZC((O==null?void 0:O.message)??"Unknown error");this.analyticsManager.track(new Id(D.code,D.message))}throw O}if(this.session.isCallActive())return this.logManager.warn("Call is already active!"),this.session;this.featureFlagManager.isEnabled(wb.UPLOAD_CLIENT_RECORDING)&&this.session.onCallRecording(this.uploadCallRecording.bind(this));let S=!1,w=!1;const R=async()=>{S&&!w&&(await this.aquireWakeLock(),o==null||o(Hr.CONNECTED))};this.session.onCallStateChange(async O=>{switch(O){case Hr.CONNECTED:S=!0,R();break;case Hr.DISCONNECTED:this.releaseWakeLock(),o==null||o(O);break;default:o==null||o(O);break}});const C=()=>{f.inputReadyChime&&this.notification.playAudio(f.inputReadyChime)},k=async()=>{const O=p?p():Promise.resolve(),D=f.connectedChime?this.notification.playAudio(f.connectedChime):Promise.resolve();await Promise.race([Promise.allSettled([D,O]),new Promise(L=>setTimeout(()=>{this.logManager.warn("Timeout running chime tasks"),L(void 0)},p4))])};f.ringtone&&(w=!0,y.setMuteInput(!0),this.notification.playAudio(f.ringtone,f.ringtoneMaxDurationMs??void 0).then(()=>{w=!1,y.setMuteInput(!1),R()}));try{const O=i??(r!=null&&r!==""?{preset:r}:{character:n}),D=await this.session.startCall(O,y,E,k,C,m,_);this.logManager.setContext("call_id",D),this.logManager.startContextTimer("call_time_s"),this.analyticsManager.setContext("call_id",D)}catch(O){if(this.logManager.error("Failed to start call:",O),await this.session.disconnect(),O instanceof fi)this.analyticsManager.track(new Id(O.code,O.message));else{const D=new ZC((O==null?void 0:O.message)??"Unknown error");this.analyticsManager.track(new Id(D.code,D.message))}throw O}const M=$F.getParser(window.navigator.userAgent),N=M.getBrowserName(!0).toLowerCase()==="safari";return this.isIOS()?M.getOSVersion().match(/^17\.5\.*/)!==null&&(s==null||s(new QO("Unsupported browser version"))):N&&M.getBrowserVersion().match(/^17\.5\.*/)!==null&&(s==null||s(new QO("Unsupported browser version"))),this.session}async stopCall({chimeTask:e}={}){var n;if(this.logManager.info("Attempting to stop call"),this.session!=null&&this.session.isCallActive()){this.logManager.info("Stopping call");const r=this.session.getCallId();await this.session.stopCall(!1,async()=>{var s;await Promise.race([Promise.allSettled([(s=this.audioOptions)!=null&&s.disconnectedChime?this.notification.playAudio(this.audioOptions.disconnectedChime):Promise.resolve(),e?e():Promise.resolve()]),new Promise(a=>setTimeout(a,p4))])}),await this.session.disconnect();const i=await((n=this.user)==null?void 0:n.getIdToken());i&&r&&await this.logManager.uploadLogs(r,i)}this.audioOptions=null}endCallLoggingContext(){this.logManager.unsetContext("call_id"),this.analyticsManager.unsetContext("call_id"),this.analyticsManager.unsetContext("character")}async getOrCreateSession(e,n,r,i){if(this.session!=null&&this.session.isConnected())return this.session;if(!this.user)throw new Ole("User not authenticated. Call init() first");const s=this.envConfig.baseUrl??window.location.origin,a=new URL(RTe(s)),o=await this.user.getIdToken();a.searchParams.append("id_token",o),a.searchParams.append("client_name",this.clientName),a.searchParams.append("usercontext",JSON.stringify({timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})),n&&a.searchParams.append("agent_uuid",n),e&&a.searchParams.append("character",e);const l=this.featureFlagManager.getConfig(eg.BACKOFF_CONFIG),c=new iCe(a,this.logManager,this.analyticsManager,l),f=this.featureFlagManager.getConfig(eg.WEBSOCKET_CONFIG),p=new tde(c,this.logManager,f),m=await navigator.mediaDevices.enumerateDevices(),_=await this.validationManager.getAppCheckToken(!1),y={user_agent:navigator.userAgent,mobile_browser:this.isMobileBrowser(),language:navigator.language,media_devices:m,app_token:_},E=new ATe(p,this.analyticsManager,this.logManager,this.clientName,y,r);this.analyticsManager.track(new Sle);const S=await E.connect();return S!=null&&i.processSessionStarted(S,p),this.logManager.setContext("session_id",S),this.logManager.startContextTimer("session_time_s"),E}async uploadCallRecording(e,n){if(this.user!=null){const r=new Blob([n],{type:"audio/wav"}),i=new Blob([JSON.stringify({call_id:e})],{type:"application/json"}),s=new FormData;s.append("metadata",i,"metadata.json"),s.append("recording",r,"recording.wav");const a=await this.user.getIdToken(),o={method:"POST",body:s,headers:{"Client-Name":this.clientName,Authorization:`Bearer ${a}`}};try{const l=await fetch(`${this.envConfig.baseUrl??""}/api/call-recording`,o);if(l.ok)this.logManager.info("Call recording upload successful!");else throw new Error(`Status=${l.statusText}`)}catch(l){this.logManager.error("Error during recording upload: ",l)}}}async aquireWakeLock(){try{this.wakeLock=await navigator.wakeLock.request("screen"),this.logManager.info("Screen wake lock acquired"),this.wakeLock.addEventListener("release",()=>{this.logManager.info("Screen wake lock was released")})}catch(e){e instanceof DOMException?this.logManager.warn("Failed to acquire wake lock:",e.message):this.logManager.error("Unexpected error aquiring wake lock:",e)}}async releaseWakeLock(){this.wakeLock&&(this.logManager.info("Releasing screen wake lock"),this.wakeLock.release(),this.wakeLock=null)}isMobileBrowser(){return/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent)}isIOS(){return $F.getParser(window.navigator.userAgent).getOSName(!0).toLowerCase()==="ios"}}var mS={},gS={},_S={},nk={},rk={},H5;function La(){return H5||(H5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevel=void 0;const e=" DEBUG ",n="  INFO ",r="  WARN ",i=" ERROR ";function s(o){return o.unshift("[Statsig]"),o}t.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class a{static info(...l){a.level>=t.LogLevel.Info&&console.info(n,...s(l))}static debug(...l){a.level>=t.LogLevel.Debug&&console.debug(e,...s(l))}static warn(...l){a.level>=t.LogLevel.Warn&&console.warn(r,...s(l))}static error(...l){a.level>=t.LogLevel.Error&&console.error(i,...s(l))}}t.Log=a,a.level=t.LogLevel.Warn}(rk)),rk}var V5;function s0(){return V5||(V5=1,function(t){var e,n,r;Object.defineProperty(t,"__esModule",{value:!0}),t._getInstance=t._getStatsigGlobalFlag=t._getStatsigGlobal=void 0;const i=La(),s=()=>__STATSIG__||m;t._getStatsigGlobal=s;const a=_=>(0,t._getStatsigGlobal)()[_];t._getStatsigGlobalFlag=a;const o=_=>{const y=(0,t._getStatsigGlobal)();return _?y.instances&&y.instances[_]:(y.instances&&Object.keys(y.instances).length>1&&i.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),y.firstInstance)};t._getInstance=o;const l="__STATSIG__",c=typeof window<"u"?window:{},f=typeof sy<"u"?sy:{},p=typeof globalThis<"u"?globalThis:{},m=(r=(n=(e=c[l])!==null&&e!==void 0?e:f[l])!==null&&n!==void 0?n:p[l])!==null&&r!==void 0?r:{instance:t._getInstance};c[l]=m,f[l]=m,p[l]=m}(nk)),nk}var ik={},G5;function PP(){return G5||(G5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const e=new Map,n="start",r="end",i="statsig::diagnostics";t.Diagnostics={_getMarkers:c=>e.get(c),_markInitOverallStart:c=>{o(c,s({},n,"overall"))},_markInitOverallEnd:(c,f,p)=>{o(c,s({success:f,error:f?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:p},r,"overall"))},_markInitNetworkReqStart:(c,f)=>{o(c,s(f,n,"initialize","network_request"))},_markInitNetworkReqEnd:(c,f)=>{o(c,s(f,r,"initialize","network_request"))},_markInitProcessStart:c=>{o(c,s({},n,"initialize","process"))},_markInitProcessEnd:(c,f)=>{o(c,s(f,r,"initialize","process"))},_clearMarkers:c=>{e.delete(c)},_formatError(c){if(c&&typeof c=="object")return{code:l(c,"code"),name:l(c,"name"),message:l(c,"message")}},_getDiagnosticsData(c,f,p,m){var _;return{success:(c==null?void 0:c.ok)===!0,statusCode:c==null?void 0:c.status,sdkRegion:(_=c==null?void 0:c.headers)===null||_===void 0?void 0:_.get("x-statsig-region"),isDelta:p.includes('"is_delta":true')===!0?!0:void 0,attempt:f,error:t.Diagnostics._formatError(m)}},_enqueueDiagnosticsEvent(c,f,p,m){const _=t.Diagnostics._getMarkers(p);if(_==null||_.length<=0)return-1;const y=_[_.length-1].timestamp-_[0].timestamp;t.Diagnostics._clearMarkers(p);const E=a(c,{context:"initialize",markers:_.slice(),statsigOptions:m});return f.enqueue(E),y}};function s(c,f,p,m){return Object.assign({key:p,action:f,step:m,timestamp:Date.now()},c)}function a(c,f){return{eventName:i,user:c,value:null,metadata:f,time:Date.now()}}function o(c,f){var p;const m=(p=e.get(c))!==null&&p!==void 0?p:[];m.push(f),e.set(c,m)}function l(c,f){if(f in c)return c[f]}}(ik)),ik}var jv={},_m={},sk={},vm={},$5;function rD(){if($5)return vm;$5=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm._isTypeMatch=vm._typeOf=void 0;function t(n){return Array.isArray(n)?"array":typeof n}vm._typeOf=t;function e(n,r){const i=s=>Array.isArray(s)?"array":typeof s;return i(n)===i(r)}return vm._isTypeMatch=e,vm}var W5;function pw(){return W5||(W5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._getSortedObject=t._DJB2Object=t._DJB2=void 0;const e=rD(),n=s=>{let a=0;for(let o=0;o<s.length;o++){const l=s.charCodeAt(o);a=(a<<5)-a+l,a=a&a}return String(a>>>0)};t._DJB2=n;const r=(s,a)=>(0,t._DJB2)(JSON.stringify((0,t._getSortedObject)(s,a)));t._DJB2Object=r;const i=(s,a)=>{if(s==null)return null;const o=Object.keys(s).sort(),l={};return o.forEach(c=>{const f=s[c];if(a===0||(0,e._typeOf)(f)!=="object"){l[c]=f;return}l[c]=(0,t._getSortedObject)(f,a!=null?a-1:a)}),l};t._getSortedObject=i}(sk)),sk}var q5;function wA(){if(q5)return _m;q5=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m._getStorageKey=_m._getUserStorageKey=void 0;const t=pw();function e(r,i,s){var a;if(s)return s(r,i);const o=i&&i.customIDs?i.customIDs:{},l=[`uid:${(a=i==null?void 0:i.userID)!==null&&a!==void 0?a:""}`,`cids:${Object.keys(o).sort((c,f)=>c.localeCompare(f)).map(c=>`${c}-${o[c]}`).join(",")}`,`k:${r}`];return(0,t._DJB2)(l.join("|"))}_m._getUserStorageKey=e;function n(r,i,s){return i?e(r,i,s):(0,t._DJB2)(`k:${r}`)}return _m._getStorageKey=n,_m}var ak={},X5;function TA(){return X5||(X5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkParam=t.NetworkDefault=t.Endpoint=void 0,t.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},t.NetworkDefault={[t.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[t.Endpoint._initialize]:"https://featureassets.org/v1",[t.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},t.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}}(ak)),ak}var ok={},K5;function A0(){return K5||(K5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._getCurrentPageUrlSafe=t._addDocumentEventListenerSafe=t._addWindowEventListenerSafe=t._isServerEnv=t._getDocumentSafe=t._getWindowSafe=void 0;const e=()=>typeof window<"u"?window:null;t._getWindowSafe=e;const n=()=>{var o;const l=(0,t._getWindowSafe)();return(o=l==null?void 0:l.document)!==null&&o!==void 0?o:null};t._getDocumentSafe=n;const r=()=>{if((0,t._getDocumentSafe)()!==null)return!1;const o=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;return typeof EdgeRuntime=="string"||o};t._isServerEnv=r;const i=(o,l)=>{const c=(0,t._getWindowSafe)();typeof(c==null?void 0:c.addEventListener)=="function"&&c.addEventListener(o,l)};t._addWindowEventListenerSafe=i;const s=(o,l)=>{const c=(0,t._getDocumentSafe)();typeof(c==null?void 0:c.addEventListener)=="function"&&c.addEventListener(o,l)};t._addDocumentEventListenerSafe=s;const a=()=>{var o;try{return(o=(0,t._getWindowSafe)())===null||o===void 0?void 0:o.location.href.split(/[?#]/)[0]}catch{return}};t._getCurrentPageUrlSafe=a}(ok)),ok}var Oo={},Y5;function UG(){if(Y5)return Oo;Y5=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo._createLayerParameterExposure=Oo._createConfigExposure=Oo._mapExposures=Oo._createGateExposure=Oo._isExposureEvent=void 0;const t="statsig::config_exposure",e="statsig::gate_exposure",n="statsig::layer_exposure",r=(f,p,m,_,y)=>(m.bootstrapMetadata&&(_.bootstrapMetadata=m.bootstrapMetadata),{eventName:f,user:p,value:null,metadata:c(m,_),secondaryExposures:y,time:Date.now()}),i=({eventName:f})=>f===e||f===t||f===n;Oo._isExposureEvent=i;const s=(f,p,m)=>{var _,y,E;const S={gate:p.name,gateValue:String(p.value),ruleID:p.ruleID};return((_=p.__evaluation)===null||_===void 0?void 0:_.version)!=null&&(S.configVersion=p.__evaluation.version),r(e,f,p.details,S,a((E=(y=p.__evaluation)===null||y===void 0?void 0:y.secondary_exposures)!==null&&E!==void 0?E:[],m))};Oo._createGateExposure=s;function a(f,p){return f.map(m=>typeof m=="string"?(p??{})[m]:m).filter(m=>m!=null)}Oo._mapExposures=a;const o=(f,p,m)=>{var _,y,E,S;const w={config:p.name,ruleID:p.ruleID};return((_=p.__evaluation)===null||_===void 0?void 0:_.version)!=null&&(w.configVersion=p.__evaluation.version),((y=p.__evaluation)===null||y===void 0?void 0:y.passed)!=null&&(w.rulePassed=String(p.__evaluation.passed)),r(t,f,p.details,w,a((S=(E=p.__evaluation)===null||E===void 0?void 0:E.secondary_exposures)!==null&&S!==void 0?S:[],m))};Oo._createConfigExposure=o;const l=(f,p,m,_)=>{var y,E,S,w;const R=p.__evaluation,C=((y=R==null?void 0:R.explicit_parameters)===null||y===void 0?void 0:y.includes(m))===!0;let k="",M=(E=R==null?void 0:R.undelegated_secondary_exposures)!==null&&E!==void 0?E:[];C&&(k=(S=R.allocated_experiment_name)!==null&&S!==void 0?S:"",M=R.secondary_exposures);const N={config:p.name,parameterName:m,ruleID:p.ruleID,allocatedExperiment:k,isExplicitParameter:String(C)};return((w=p.__evaluation)===null||w===void 0?void 0:w.version)!=null&&(N.configVersion=p.__evaluation.version),r(n,f,p.details,N,a(M,_))};Oo._createLayerParameterExposure=l;const c=(f,p)=>(p.reason=f.reason,f.lcut&&(p.lcut=String(f.lcut)),f.receivedAt&&(p.receivedAt=String(f.receivedAt)),p);return Oo}var lk={},Z5;function sp(){return Z5||(Z5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._setObjectInStorage=t._getObjectFromStorage=t.Storage=void 0;const e=La(),n=A0(),r={},i={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:p=>r[p]?r[p]:null,setItem:(p,m)=>{r[p]=m},removeItem:p=>{delete r[p]},getAllKeys:()=>Object.keys(r)};let s=null;try{const p=(0,n._getWindowSafe)();p&&p.localStorage&&typeof p.localStorage.getItem=="function"&&(s={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:m=>p.localStorage.getItem(m),setItem:(m,_)=>p.localStorage.setItem(m,_),removeItem:m=>p.localStorage.removeItem(m),getAllKeys:()=>Object.keys(p.localStorage)})}catch{e.Log.warn("Failed to setup localStorageProvider.")}let a=s??i,o=a;function l(p){try{return p()}catch(m){if(m instanceof Error&&m.name==="SecurityError")return t.Storage._setProvider(i),null;throw m}}t.Storage={isReady:()=>o.isReady(),isReadyResolver:()=>o.isReadyResolver(),getProviderName:()=>o.getProviderName(),getItem:p=>l(()=>o.getItem(p)),setItem:(p,m)=>o.setItem(p,m),removeItem:p=>o.removeItem(p),getAllKeys:()=>o.getAllKeys(),_setProvider:p=>{a=p,o=p},_setDisabled:p=>{p?o=i:o=a}};function c(p){const m=t.Storage.getItem(p);return JSON.parse(m??"null")}t._getObjectFromStorage=c;function f(p,m){t.Storage.setItem(p,JSON.stringify(m))}t._setObjectInStorage=f}(lk)),lk}var vS={},J5;function FG(){if(J5)return vS;J5=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.UrlConfiguration=void 0;const t=TA(),e={[t.Endpoint._initialize]:"i",[t.Endpoint._rgstr]:"e",[t.Endpoint._download_config_specs]:"d"};let n=class{constructor(i,s,a,o){this.customUrl=null,this.fallbackUrls=null,this.endpoint=i,this.endpointDnsKey=e[i],s&&(this.customUrl=s),!s&&a&&(this.customUrl=a.endsWith("/")?`${a}${i}`:`${a}/${i}`),o&&(this.fallbackUrls=o);const l=t.NetworkDefault[i];this.defaultUrl=`${l}/${i}`}getUrl(){var i;return(i=this.customUrl)!==null&&i!==void 0?i:this.defaultUrl}};return vS.UrlConfiguration=n,vS}var uk={},Q5;function iD(){return Q5||(Q5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._notifyVisibilityChanged=t._subscribeToVisiblityChanged=t._isUnloading=t._isCurrentlyVisible=void 0;const e=A0(),n="foreground",r="background",i=[];let s=n,a=!1;const o=()=>s===n;t._isCurrentlyVisible=o;const l=()=>a;t._isUnloading=l;const c=p=>{i.unshift(p)};t._subscribeToVisiblityChanged=c;const f=p=>{p!==s&&(s=p,i.forEach(m=>m(p)))};t._notifyVisibilityChanged=f,(0,e._addWindowEventListenerSafe)("focus",()=>{a=!1,(0,t._notifyVisibilityChanged)(n)}),(0,e._addWindowEventListenerSafe)("blur",()=>(0,t._notifyVisibilityChanged)(r)),(0,e._addWindowEventListenerSafe)("beforeunload",()=>{a=!0,(0,t._notifyVisibilityChanged)(r)}),(0,e._addDocumentEventListenerSafe)("visibilitychange",()=>{(0,t._notifyVisibilityChanged)(document.visibilityState==="visible"?n:r)})}(uk)),uk}var e6;function BG(){if(e6)return jv;e6=1;var t=jv.__awaiter||function(C,k,M,N){function O(D){return D instanceof M?D:new M(function(L){L(D)})}return new(M||(M=Promise))(function(D,L){function B(ne){try{te(N.next(ne))}catch(H){L(H)}}function ee(ne){try{te(N.throw(ne))}catch(H){L(H)}}function te(ne){ne.done?D(ne.value):O(ne.value).then(B,ee)}te((N=N.apply(C,k||[])).next())})};Object.defineProperty(jv,"__esModule",{value:!0}),jv.EventLogger=void 0;const e=wA(),n=pw(),r=La(),i=TA(),s=A0(),a=UG(),o=sp(),l=FG(),c=iD(),f=100,p=1e4,m=1e3,_=6e5,y=500,E=200,S={},w={Startup:"startup",GainedFocus:"gained_focus"};let R=class ty{static _safeFlushAndForget(k){var M;(M=S[k])===null||M===void 0||M.flush().catch(()=>{})}static _safeRetryFailedLogs(k){var M;(M=S[k])===null||M===void 0||M._retryFailedLogs(w.GainedFocus)}constructor(k,M,N,O){var D;this._sdkKey=k,this._emitter=M,this._network=N,this._options=O,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._isLoggingDisabled=(O==null?void 0:O.disableLogging)===!0,this._maxQueueSize=(D=O==null?void 0:O.loggingBufferMaxSize)!==null&&D!==void 0?D:f;const L=O==null?void 0:O.networkConfig;this._logEventUrlConfig=new l.UrlConfiguration(i.Endpoint._rgstr,L==null?void 0:L.logEventUrl,L==null?void 0:L.api,L==null?void 0:L.logEventFallbackUrls)}setLoggingDisabled(k){this._isLoggingDisabled=k}enqueue(k){this._shouldLogEvent(k)&&(this._normalizeAndAppendEvent(k),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&ty._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(k){var M;const N=(M=this._nonExposedChecks[k])!==null&&M!==void 0?M:0;this._nonExposedChecks[k]=N+1}reset(){this._lastExposureTimeMap={}}start(){(0,s._isServerEnv)()||(S[this._sdkKey]=this,(0,c._subscribeToVisiblityChanged)(k=>{k==="background"?ty._safeFlushAndForget(this._sdkKey):k==="foreground"&&ty._safeRetryFailedLogs(this._sdkKey)}),this._retryFailedLogs(w.Startup),this._startBackgroundFlushInterval())}stop(){return t(this,void 0,void 0,function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete S[this._sdkKey],yield this.flush()})}flush(){return t(this,void 0,void 0,function*(){if(this._appendAndResetNonExposedChecks(),this._queue.length===0)return;const k=this._queue;this._queue=[],yield this._sendEvents(k)})}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,!(Date.now()-this._creationTime>E)&&setTimeout(()=>ty._safeFlushAndForget(this._sdkKey),E))}_shouldLogEvent(k){if((0,s._isServerEnv)())return!1;if(!(0,a._isExposureEvent)(k))return!0;const M=k.user?k.user:{statsigEnvironment:void 0},N=(0,e._getUserStorageKey)(this._sdkKey,M),O=k.metadata?k.metadata:{},D=[k.eventName,N,O.gate,O.config,O.ruleID,O.allocatedExperiment,O.parameterName,String(O.isExplicitParameter),O.reason].join("|"),L=this._lastExposureTimeMap[D],B=Date.now();return L&&B-L<_?!1:(Object.keys(this._lastExposureTimeMap).length>m&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[D]=B,!0)}_sendEvents(k){var M,N;return t(this,void 0,void 0,function*(){if(this._isLoggingDisabled)return this._saveFailedLogsToStorage(k),!1;try{const D=(0,c._isUnloading)()&&this._network.isBeaconSupported()&&((N=(M=this._options)===null||M===void 0?void 0:M.networkConfig)===null||N===void 0?void 0:N.networkOverrideFunc)==null;return this._emitter({name:"pre_logs_flushed",events:k}),(D?yield this._sendEventsViaBeacon(k):yield this._sendEventsViaPost(k)).success?(this._emitter({name:"logs_flushed",events:k}),!0):(r.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(k),!1)}catch{return r.Log.warn("Failed to flush events."),!1}})}_sendEventsViaPost(k){var M;return t(this,void 0,void 0,function*(){const N=yield this._network.post(this._getRequestData(k)),O=(M=N==null?void 0:N.code)!==null&&M!==void 0?M:-1;return{success:O>=200&&O<300}})}_sendEventsViaBeacon(k){return t(this,void 0,void 0,function*(){return{success:yield this._network.beacon(this._getRequestData(k))}})}_getRequestData(k){return{sdkKey:this._sdkKey,data:{events:k},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[i.NetworkParam.EventCount]:String(k.length)}}}_saveFailedLogsToStorage(k){for(;k.length>y;)k.shift();const M=this._getStorageKey();try{(0,o._setObjectInStorage)(M,k)}catch{r.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(k){const M=this._getStorageKey();t(this,void 0,void 0,function*(){o.Storage.isReady()||(yield o.Storage.isReadyResolver());const N=(0,o._getObjectFromStorage)(M);if(!N)return;k===w.Startup&&o.Storage.removeItem(M),(yield this._sendEvents(N))&&k===w.GainedFocus&&o.Storage.removeItem(M)}).catch(()=>{r.Log.warn("Failed to flush stored logs")})}_getStorageKey(){return`statsig.failed_logs.${(0,n._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(k){k.user&&(k.user=Object.assign({},k.user),delete k.user.privateAttributes);const M={},N=this._getCurrentPageUrl();N&&(M.statsigMetadata={currentPage:N});const O=Object.assign(Object.assign({},k),M);r.Log.debug("Enqueued Event:",O),this._queue.push(O)}_appendAndResetNonExposedChecks(){Object.keys(this._nonExposedChecks).length!==0&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var k;if(((k=this._options)===null||k===void 0?void 0:k.includeCurrentPageUrlWithEvents)!==!1)return(0,s._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var k,M;const N=(M=(k=this._options)===null||k===void 0?void 0:k.loggingIntervalMs)!==null&&M!==void 0?M:p,O=setInterval(()=>{const D=S[this._sdkKey];!D||D._flushIntervalId!==O?clearInterval(O):ty._safeFlushAndForget(this._sdkKey)},N);this._flushIntervalId=O}};return jv.EventLogger=R,jv}var ck={},t6;function CR(){return t6||(t6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigMetadataProvider=t.SDK_VERSION=void 0,t.SDK_VERSION="3.12.1";let e={sdkVersion:t.SDK_VERSION,sdkType:"js-mono"};t.StatsigMetadataProvider={get:()=>e,add:n=>{e=Object.assign(Object.assign({},e),n)}}}(ck)),ck}var dk={},n6;function aCe(){return n6||(n6=1,Object.defineProperty(dk,"__esModule",{value:!0})),dk}var Kf={},yS={},ES={},r6;function sD(){if(r6)return ES;r6=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.getUUID=void 0;function t(){if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();let e=new Date().getTime(),n=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(Math.random()*4)]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,i=>{let s=Math.random()*16;return e>0?(s=(e+s)%16|0,e=Math.floor(e/16)):(s=(n+s)%16|0,n=Math.floor(n/16)),(i==="x"?s:s&7|8).toString(16)})}return ES.getUUID=t,ES}var i6;function aD(){if(i6)return yS;i6=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.StableID=void 0;const t=wA(),e=La(),n=sp(),r=sD(),i={};yS.StableID={get:l=>{if(i[l]==null){let c=o(l);c==null&&(c=(0,r.getUUID)(),a(c,l)),i[l]=c}return i[l]},setOverride:(l,c)=>{i[c]=l,a(l,c)}};function s(l){return`statsig.stable_id.${(0,t._getStorageKey)(l)}`}function a(l,c){const f=s(c);try{(0,n._setObjectInStorage)(f,l)}catch{e.Log.warn("Failed to save StableID")}}function o(l){const c=s(l);return(0,n._getObjectFromStorage)(c)}return yS}var ym={},s6;function zG(){if(s6)return ym;s6=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym._getFullUserHash=ym._normalizeUser=void 0;const t=pw(),e=La();function n(i,s,a){try{const o=JSON.parse(JSON.stringify(i));return s!=null&&s.environment!=null?o.statsigEnvironment=s.environment:a!=null&&(o.statsigEnvironment={tier:a}),o}catch{return e.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}}ym._normalizeUser=n;function r(i){return i?(0,t._DJB2Object)(i):null}return ym._getFullUserHash=r,ym}var SS={},a6;function jG(){if(a6)return SS;a6=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS._typedJsonParse=void 0;const t=La();function e(n,r,i){try{const s=JSON.parse(n);if(s&&typeof s=="object"&&r in s)return s}catch{}return t.Log.error(`Failed to parse ${i}`),null}return SS._typedJsonParse=e,SS}var o6;function oCe(){if(o6)return Kf;o6=1;var t=Kf.__awaiter||function(p,m,_,y){function E(S){return S instanceof _?S:new _(function(w){w(S)})}return new(_||(_=Promise))(function(S,w){function R(M){try{k(y.next(M))}catch(N){w(N)}}function C(M){try{k(y.throw(M))}catch(N){w(N)}}function k(M){M.done?S(M.value):E(M.value).then(R,C)}k((y=y.apply(p,m||[])).next())})};Object.defineProperty(Kf,"__esModule",{value:!0}),Kf._makeDataAdapterResult=Kf.DataAdapterCore=void 0;const e=La(),n=aD(),r=zG(),i=sp(),s=jG(),a=10;let o=class{constructor(m,_){this._adapterName=m,this._cacheSuffix=_,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey=`statsig.last_modified_time.${_}`,this._inMemoryCache=new c}attach(m,_){this._sdkKey=m,this._options=_}getDataSync(m){const _=m&&(0,r._normalizeUser)(m,this._options),y=this._getCacheKey(_),E=this._inMemoryCache.get(y,_);if(E)return E;const S=this._loadFromCache(y);return S?(this._inMemoryCache.add(y,S),this._inMemoryCache.get(y,_)):null}setData(m,_){const y=_&&(0,r._normalizeUser)(_,this._options),E=this._getCacheKey(y);this._inMemoryCache.add(E,l("Bootstrap",m,null,y))}_getDataAsyncImpl(m,_,y){return t(this,void 0,void 0,function*(){i.Storage.isReady()||(yield i.Storage.isReadyResolver());const E=m??this.getDataSync(_),S=[this._fetchAndPrepFromNetwork(E,_,y)];return y!=null&&y.timeoutMs&&S.push(new Promise(w=>setTimeout(w,y.timeoutMs)).then(()=>(e.Log.debug("Fetching latest value timed out"),null))),yield Promise.race(S)})}_prefetchDataImpl(m,_){return t(this,void 0,void 0,function*(){const y=m&&(0,r._normalizeUser)(m,this._options),E=this._getCacheKey(y),S=yield this._getDataAsyncImpl(null,y,_);S&&this._inMemoryCache.add(E,Object.assign(Object.assign({},S),{source:"Prefetch"}))})}_fetchAndPrepFromNetwork(m,_,y){var E;return t(this,void 0,void 0,function*(){const S=(E=m==null?void 0:m.data)!==null&&E!==void 0?E:null,w=m!=null&&this._isCachedResultValidFor204(m,_),R=yield this._fetchFromNetwork(S,_,y,w);if(!R)return e.Log.debug("No response returned for latest value"),null;const C=(0,s._typedJsonParse)(R,"has_updates","Response"),k=this._getSdkKey(),M=n.StableID.get(k);let N=null;if((C==null?void 0:C.has_updates)===!0)N=l("Network",R,M,_);else if(S&&(C==null?void 0:C.has_updates)===!1)N=l("NetworkNotModified",S,M,_);else return null;const O=this._getCacheKey(_);return this._inMemoryCache.add(O,N),this._writeToCache(O,N),N})}_getSdkKey(){return this._sdkKey!=null?this._sdkKey:(e.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(m){var _;const y=(_=i.Storage.getItem)===null||_===void 0?void 0:_.call(i.Storage,m);if(y==null)return null;const E=(0,s._typedJsonParse)(y,"source","Cached Result");return E?Object.assign(Object.assign({},E),{source:"Cache"}):null}_writeToCache(m,_){i.Storage.setItem(m,JSON.stringify(_)),this._runLocalStorageCacheEviction(m)}_runLocalStorageCacheEviction(m){var _;const y=(_=(0,i._getObjectFromStorage)(this._lastModifiedStoreKey))!==null&&_!==void 0?_:{};y[m]=Date.now();const E=f(y,a);E&&(delete y[E],i.Storage.removeItem(E)),(0,i._setObjectInStorage)(this._lastModifiedStoreKey,y)}};Kf.DataAdapterCore=o;function l(p,m,_,y){return{source:p,data:m,receivedAt:Date.now(),stableID:_,fullUserHash:(0,r._getFullUserHash)(y)}}Kf._makeDataAdapterResult=l;class c{constructor(){this._data={}}get(m,_){var y;const E=this._data[m],S=E==null?void 0:E.stableID,w=(y=_==null?void 0:_.customIDs)===null||y===void 0?void 0:y.stableID;return w&&S&&w!==S?(e.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):E}add(m,_){const y=f(this._data,a-1);y&&delete this._data[y],this._data[m]=_}merge(m){this._data=Object.assign(Object.assign({},this._data),m)}}function f(p,m){const _=Object.keys(p);return _.length<=m?null:_.reduce((y,E)=>{const S=p[y],w=p[E];return typeof S=="object"&&typeof w=="object"?w.receivedAt<S.receivedAt?E:y:w<S?E:y})}return Kf}var fk={},l6;function lCe(){return l6||(l6=1,Object.defineProperty(fk,"__esModule",{value:!0})),fk}var hx={},bS={},u6;function oD(){if(u6)return bS;u6=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.SDKType=void 0;const t={};let e;return bS.SDKType={_get:n=>{var r;return((r=t[n])!==null&&r!==void 0?r:"js-mono")+(e??"")},_setClientType(n,r){t[n]=r},_setBindingType(n){(!e||e==="-react")&&(e="-"+n)}},bS}var c6;function HG(){return c6||(c6=1,function(t){var e=hx.__awaiter||function(f,p,m,_){function y(E){return E instanceof m?E:new m(function(S){S(E)})}return new(m||(m=Promise))(function(E,S){function w(k){try{C(_.next(k))}catch(M){S(M)}}function R(k){try{C(_.throw(k))}catch(M){S(M)}}function C(k){k.done?E(k.value):y(k.value).then(w,R)}C((_=_.apply(f,p||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=t.EXCEPTION_ENDPOINT=void 0;const n=La(),r=oD(),i=CR();t.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const s="[Statsig] UnknownError";class a{constructor(p,m,_,y){this._sdkKey=p,this._options=m,this._emitter=_,this._lastSeenError=y,this._seen=new Set}wrap(p){try{const m=p;c(m).forEach(_=>{const y=m[_];"$EB"in y||(m[_]=(...E)=>this._capture(_,()=>y.apply(p,E)),m[_].$EB=!0)})}catch(m){this._onError("eb:wrap",m)}}logError(p,m){this._onError(p,m)}getLastSeenErrorAndReset(){const p=this._lastSeenError;return this._lastSeenError=void 0,p??null}attachErrorIfNoneExists(p){this._lastSeenError||(this._lastSeenError=o(p))}_capture(p,m){try{const _=m();return _&&_ instanceof Promise?_.catch(y=>this._onError(p,y)):_}catch(_){return this._onError(p,_),null}}_onError(p,m){try{n.Log.warn(`Caught error in ${p}`,{error:m}),e(this,void 0,void 0,function*(){var y,E,S,w,R,C,k;const M=m||Error(s),N=M instanceof Error,O=N?M.name:"No Name",D=o(M);if(this._lastSeenError=D,this._seen.has(O))return;if(this._seen.add(O),!((E=(y=this._options)===null||y===void 0?void 0:y.networkConfig)===null||E===void 0)&&E.preventAllNetworkTraffic){(S=this._emitter)===null||S===void 0||S.call(this,{name:"error",error:m,tag:p});return}const L=r.SDKType._get(this._sdkKey),B=i.StatsigMetadataProvider.get(),ee=N?M.stack:l(M),te=JSON.stringify(Object.assign({tag:p,exception:O,info:ee},Object.assign(Object.assign({},B),{sdkType:L})));yield((C=(R=(w=this._options)===null||w===void 0?void 0:w.networkConfig)===null||R===void 0?void 0:R.networkOverrideFunc)!==null&&C!==void 0?C:fetch)(t.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(L),"STATSIG-SDK-VERSION":String(B.sdkVersion),"Content-Type":"application/json"},body:te}),(k=this._emitter)===null||k===void 0||k.call(this,{name:"error",error:m,tag:p})}).then(()=>{}).catch(()=>{})}catch{}}}t.ErrorBoundary=a;function o(f){return f instanceof Error?f:typeof f=="string"?new Error(f):new Error("An unknown error occurred.")}function l(f){try{return JSON.stringify(f)}catch{return s}}function c(f){const p=new Set;let m=Object.getPrototypeOf(f);for(;m&&m!==Object.prototype;)Object.getOwnPropertyNames(m).filter(_=>typeof(m==null?void 0:m[_])=="function").forEach(_=>p.add(_)),m=Object.getPrototypeOf(m);return Array.from(p)}}(hx)),hx}var hk={},d6;function uCe(){return d6||(d6=1,Object.defineProperty(hk,"__esModule",{value:!0})),hk}var pk={},f6;function cCe(){return f6||(f6=1,Object.defineProperty(pk,"__esModule",{value:!0})),pk}var mk={},h6;function dCe(){return h6||(h6=1,Object.defineProperty(mk,"__esModule",{value:!0})),mk}var Em={},p6;function VG(){if(p6)return Em;p6=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.createMemoKey=Em.MemoPrefix=void 0,Em.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_layer:"l",_paramStore:"p"};const t=new Set([]),e=new Set(["userPersistedValues"]);function n(r,i,s){let a=`${r}|${i}`;if(!s)return a;for(const o of Object.keys(s)){if(e.has(o))return;t.has(o)?a+=`|${o}=true`:a+=`|${o}=${s[o]}`}return a}return Em.createMemoKey=n,Em}var Hv={},Yf={},Vv={},m6;function fCe(){if(m6)return Vv;m6=1;var t=Vv.__awaiter||function(o,l,c,f){function p(m){return m instanceof c?m:new c(function(_){_(m)})}return new(c||(c=Promise))(function(m,_){function y(w){try{S(f.next(w))}catch(R){_(R)}}function E(w){try{S(f.throw(w))}catch(R){_(R)}}function S(w){w.done?m(w.value):p(w.value).then(y,E)}S((f=f.apply(o,l||[])).next())})};Object.defineProperty(Vv,"__esModule",{value:!0}),Vv._fetchTxtRecords=void 0;const e=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),n="https://cloudflare-dns.com/dns-query",r=["i","e","d"],i=200;function s(o){return t(this,void 0,void 0,function*(){const l=yield o(n,{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:e});if(!l.ok){const p=new Error("Failed to fetch TXT records from DNS");throw p.name="DnsTxtFetchError",p}const c=yield l.arrayBuffer(),f=new Uint8Array(c);return a(f)})}Vv._fetchTxtRecords=s;function a(o){const l=o.findIndex((f,p)=>p<i&&String.fromCharCode(f)==="="&&r.includes(String.fromCharCode(o[p-1])));if(l===-1){const f=new Error("Failed to parse TXT records from DNS");throw f.name="DnsTxtParseError",f}let c="";for(let f=l-1;f<o.length;f++)c+=String.fromCharCode(o[f]);return c.split(",")}return Vv}var g6;function hCe(){if(g6)return Yf;g6=1;var t=Yf.__awaiter||function(_,y,E,S){function w(R){return R instanceof E?R:new E(function(C){C(R)})}return new(E||(E=Promise))(function(R,C){function k(O){try{N(S.next(O))}catch(D){C(D)}}function M(O){try{N(S.throw(O))}catch(D){C(D)}}function N(O){O.done?R(O.value):w(O.value).then(k,M)}N((S=S.apply(_,y||[])).next())})};Object.defineProperty(Yf,"__esModule",{value:!0}),Yf._isDomainFailure=Yf.NetworkFallbackResolver=void 0;const e=fCe(),n=pw(),r=La(),i=sp(),s=7*24*60*60*1e3,a=4*60*60*1e3;let o=class{constructor(y){var E;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=(E=y.networkConfig)===null||E===void 0?void 0:E.networkOverrideFunc}setErrorBoundary(y){this._errorBoundary=y}tryBumpExpiryTime(y,E){var S;const w=(S=this._fallbackInfo)===null||S===void 0?void 0:S[E.endpoint];w&&(w.expiryTime=Date.now()+s,f(y,Object.assign(Object.assign({},this._fallbackInfo),{[E.endpoint]:w})))}getActiveFallbackUrl(y,E){var S,w;let R=this._fallbackInfo;R==null&&(R=(S=p(y))!==null&&S!==void 0?S:{},this._fallbackInfo=R);const C=R[E.endpoint];return!C||Date.now()>((w=C.expiryTime)!==null&&w!==void 0?w:0)?(delete R[E.endpoint],this._fallbackInfo=R,f(y,this._fallbackInfo),null):C.url?C.url:null}getFallbackFromProvided(y){const E=m(y);return E?y.replace(E,""):null}tryFetchUpdatedFallbackInfo(y,E,S,w){var R,C;return t(this,void 0,void 0,function*(){try{if(!l(S,w))return!1;const M=E.customUrl==null&&E.fallbackUrls==null?yield this._tryFetchFallbackUrlsFromNetwork(E):E.fallbackUrls,N=this._pickNewFallbackUrl((R=this._fallbackInfo)===null||R===void 0?void 0:R[E.endpoint],M);return N?(this._updateFallbackInfoWithNewUrl(y,E.endpoint,N),!0):!1}catch(k){return(C=this._errorBoundary)===null||C===void 0||C.logError("tryFetchUpdatedFallbackInfo",k),!1}})}_updateFallbackInfoWithNewUrl(y,E,S){var w,R,C;const k={url:S,expiryTime:Date.now()+s,previous:[]},M=(w=this._fallbackInfo)===null||w===void 0?void 0:w[E];M&&k.previous.push(...M.previous),k.previous.length>10&&(k.previous=[]);const N=(C=(R=this._fallbackInfo)===null||R===void 0?void 0:R[E])===null||C===void 0?void 0:C.url;N!=null&&k.previous.push(N),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[E]:k}),f(y,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(y){var E;return t(this,void 0,void 0,function*(){const S=this._dnsQueryCooldowns[y.endpoint];if(S&&Date.now()<S)return null;this._dnsQueryCooldowns[y.endpoint]=Date.now()+a;const w=[],R=yield(0,e._fetchTxtRecords)((E=this._networkOverrideFunc)!==null&&E!==void 0?E:fetch),C=m(y.defaultUrl);for(const k of R){if(!k.startsWith(y.endpointDnsKey+"="))continue;const M=k.split("=");if(M.length>1){let N=M[1];N.endsWith("/")&&(N=N.slice(0,-1)),w.push(`https://${N}${C}`)}}return w})}_pickNewFallbackUrl(y,E){var S;if(E==null)return null;const w=new Set((S=y==null?void 0:y.previous)!==null&&S!==void 0?S:[]),R=y==null?void 0:y.url;let C=null;for(const k of E){const M=k.endsWith("/")?k.slice(0,-1):k;if(!w.has(k)&&M!==R){C=M;break}}return C}};Yf.NetworkFallbackResolver=o;function l(_,y){var E;const S=(E=_==null?void 0:_.toLowerCase())!==null&&E!==void 0?E:"";return y||S.includes("uncaught exception")||S.includes("failed to fetch")||S.includes("networkerror when attempting to fetch resource")}Yf._isDomainFailure=l;function c(_){return`statsig.network_fallback.${(0,n._DJB2)(_)}`}function f(_,y){const E=c(_);if(!y||Object.keys(y).length===0){i.Storage.removeItem(E);return}i.Storage.setItem(E,JSON.stringify(y))}function p(_){const y=c(_),E=i.Storage.getItem(y);if(!E)return null;try{return JSON.parse(E)}catch{return r.Log.error("Failed to parse FallbackInfo"),null}}function m(_){try{return new URL(_).pathname}catch{return null}}return Yf}var wS={},_6;function GG(){if(_6)return wS;_6=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.SDKFlags=void 0;const t={};return wS.SDKFlags={setFlags:(e,n)=>{t[e]=n},get:(e,n)=>{var r,i;return(i=(r=t[e])===null||r===void 0?void 0:r[n])!==null&&i!==void 0?i:!1}},wS}var gk={},v6;function lD(){return v6||(v6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSession=t.SessionID=void 0;const e=wA(),n=La(),r=sp(),i=sD(),s=30*60*1e3,a=4*60*60*1e3,o={};t.SessionID={get:w=>t.StatsigSession.get(w).data.sessionID},t.StatsigSession={get:w=>{o[w]==null&&(o[w]=l(w));const R=o[w];return f(R)},overrideInitialSessionID:(w,R)=>{o[R]=c(w,R)}};function l(w){let R=S(w);const C=Date.now();return R||(R={sessionID:(0,i.getUUID)(),startTime:C,lastUpdate:C}),{data:R,sdkKey:w}}function c(w,R){const C=Date.now();return{data:{sessionID:w,startTime:C,lastUpdate:C},sdkKey:R}}function f(w){const R=Date.now(),C=w.data;(m(C)||_(C))&&(C.sessionID=(0,i.getUUID)(),C.startTime=R),C.lastUpdate=R,E(C,w.sdkKey),clearTimeout(w.idleTimeoutID),clearTimeout(w.ageTimeoutID);const k=R-C.startTime,M=w.sdkKey;return w.idleTimeoutID=p(M,s),w.ageTimeoutID=p(M,a-k),w}function p(w,R){return setTimeout(()=>{const C=__STATSIG__==null?void 0:__STATSIG__.instance(w);C&&C.$emt({name:"session_expired"})},R)}function m({lastUpdate:w}){return Date.now()-w>s}function _({startTime:w}){return Date.now()-w>a}function y(w){return`statsig.session_id.${(0,e._getStorageKey)(w)}`}function E(w,R){const C=y(R);try{(0,r._setObjectInStorage)(C,w)}catch{n.Log.warn("Failed to save SessionID")}}function S(w){const R=y(w);return(0,r._getObjectFromStorage)(R)}}(gk)),gk}var TS={},y6;function $G(){return y6||(y6=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.ErrorTag=void 0,TS.ErrorTag={NetworkError:"NetworkError"}),TS}var E6;function pCe(){if(E6)return Hv;E6=1;var t=Hv.__awaiter||function(ne,H,V,W){function J(X){return X instanceof V?X:new V(function(ie){ie(X)})}return new(V||(V=Promise))(function(X,ie){function pe(ae){try{le(W.next(ae))}catch(Ee){ie(Ee)}}function Z(ae){try{le(W.throw(ae))}catch(Ee){ie(Ee)}}function le(ae){ae.done?X(ae.value):J(ae.value).then(pe,Z)}le((W=W.apply(ne,H||[])).next())})};Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.NetworkCore=void 0,s0();const e=s0(),n=PP(),r=La(),i=TA(),s=hCe(),a=GG(),o=oD(),l=A0(),c=lD(),f=aD(),p=$G(),m=CR(),_=iD(),y=1e4,E=500,S=3e4,w=1e3,R=50,C=R/w,k=new Set([408,500,502,503,504,522,524,599]);let M=class{constructor(H,V){this._emitter=V,this._errorBoundary=null,this._timeout=y,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,H&&(this._options=H),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new s.NetworkFallbackResolver(this._options)}setErrorBoundary(H){this._errorBoundary=H,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(H)}isBeaconSupported(){return typeof navigator<"u"&&typeof navigator.sendBeacon=="function"}getLastUsedInitUrlAndReset(){const H=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,H}beacon(H){return t(this,void 0,void 0,function*(){if(!N(H))return!1;const V=this._getInternalRequestArgs("POST",H);yield this._tryToCompressBody(V);const W=yield this._getPopulatedURL(V),J=navigator;return J.sendBeacon.bind(J)(W,V.body)})}post(H){return t(this,void 0,void 0,function*(){const V=this._getInternalRequestArgs("POST",H);return this._tryEncodeBody(V),yield this._tryToCompressBody(V),this._sendRequest(V)})}get(H){const V=this._getInternalRequestArgs("GET",H);return this._sendRequest(V)}_sendRequest(H){var V,W,J,X;return t(this,void 0,void 0,function*(){if(!N(H)||this._netConfig.preventAllNetworkTraffic)return null;const{method:ie,body:pe,retries:Z,attempt:le}=H,ae=H.urlConfig.endpoint;if(this._isRateLimited(ae))return r.Log.warn(`Request to ${ae} was blocked because you are making requests too frequently.`),null;const Ee=le??1,ke=typeof AbortController<"u"?new AbortController:null,$e=setTimeout(()=>{ke==null||ke.abort(`Timeout of ${this._timeout}ms expired.`)},this._timeout),Le=yield this._getPopulatedURL(H);let We=null;const ot=(0,_._isUnloading)();try{const Mt={method:ie,body:pe,headers:Object.assign({},H.headers),signal:ke==null?void 0:ke.signal,priority:H.priority,keepalive:ot};B(H,Ee);const Wt=this._leakyBucket[ae];if(Wt&&(Wt.lastRequestTime=Date.now(),this._leakyBucket[ae]=Wt),We=yield((V=this._netConfig.networkOverrideFunc)!==null&&V!==void 0?V:fetch)(Le,Mt),clearTimeout($e),!We.ok){const vn=yield We.text().catch(()=>"No Text"),pn=new Error(`NetworkError: ${Le} ${vn}`);throw pn.name="NetworkError",pn}const ue=yield We.text();return ee(H,We,Ee,ue),this._fallbackResolver.tryBumpExpiryTime(H.sdkKey,H.urlConfig),{body:ue,code:We.status}}catch(Mt){const Wt=D(ke,Mt),ir=L(ke);if(ee(H,We,Ee,"",Mt),(yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(H.sdkKey,H.urlConfig,Wt,ir))&&(H.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(H.sdkKey,H.urlConfig)),!Z||Ee>Z||!k.has((W=We==null?void 0:We.status)!==null&&W!==void 0?W:500)){(J=this._emitter)===null||J===void 0||J.call(this,{name:"error",error:Mt,tag:p.ErrorTag.NetworkError,requestArgs:H});const vn=`A networking error occurred during ${ie} request to ${Le}.`;return r.Log.error(vn,Wt,Mt),(X=this._errorBoundary)===null||X===void 0||X.attachErrorIfNoneExists(vn),null}return yield te(Ee),this._sendRequest(Object.assign(Object.assign({},H),{retries:Z,attempt:Ee+1}))}})}_isRateLimited(H){var V;const W=Date.now(),J=(V=this._leakyBucket[H])!==null&&V!==void 0?V:{count:0,lastRequestTime:W},X=W-J.lastRequestTime,ie=Math.floor(X*C);return J.count=Math.max(0,J.count-ie),J.count>=R?!0:(J.count+=1,J.lastRequestTime=W,this._leakyBucket[H]=J,!1)}_getPopulatedURL(H){var V;return t(this,void 0,void 0,function*(){const W=(V=H.fallbackUrl)!==null&&V!==void 0?V:H.urlConfig.getUrl();(H.urlConfig.endpoint===i.Endpoint._initialize||H.urlConfig.endpoint===i.Endpoint._download_config_specs)&&(this._lastUsedInitUrl=W);const J=Object.assign({[i.NetworkParam.SdkKey]:H.sdkKey,[i.NetworkParam.SdkType]:o.SDKType._get(H.sdkKey),[i.NetworkParam.SdkVersion]:m.SDK_VERSION,[i.NetworkParam.Time]:String(Date.now()),[i.NetworkParam.SessionID]:c.SessionID.get(H.sdkKey)},H.params),X=Object.keys(J).map(ie=>`${encodeURIComponent(ie)}=${encodeURIComponent(J[ie])}`).join("&");return`${W}${X?`?${X}`:""}`})}_tryEncodeBody(H){var V;const W=(0,l._getWindowSafe)(),J=H.body;if(!(!H.isStatsigEncodable||this._options.disableStatsigEncoding||typeof J!="string"||(0,e._getStatsigGlobalFlag)("no-encode")!=null||!(W!=null&&W.btoa)))try{H.body=W.btoa(J).split("").reverse().join(""),H.params=Object.assign(Object.assign({},(V=H.params)!==null&&V!==void 0?V:{}),{[i.NetworkParam.StatsigEncoded]:"1"})}catch(X){r.Log.warn(`Request encoding failed for ${H.urlConfig.getUrl()}`,X)}}_tryToCompressBody(H){var V;return t(this,void 0,void 0,function*(){const W=H.body;if(!(!H.isCompressable||this._options.disableCompression||typeof W!="string"||a.SDKFlags.get(H.sdkKey,"enable_log_event_compression")!==!0||(0,e._getStatsigGlobalFlag)("no-compress")!=null||typeof CompressionStream>"u"||typeof TextEncoder>"u"))try{const J=new TextEncoder().encode(W),X=new CompressionStream("gzip"),ie=X.writable.getWriter();ie.write(J).catch(r.Log.error),ie.close().catch(r.Log.error);const pe=X.readable.getReader(),Z=[];let le;for(;!(le=yield pe.read()).done;)Z.push(le.value);const ae=Z.reduce(($e,Le)=>$e+Le.length,0),Ee=new Uint8Array(ae);let ke=0;for(const $e of Z)Ee.set($e,ke),ke+=$e.length;H.body=Ee,H.params=Object.assign(Object.assign({},(V=H.params)!==null&&V!==void 0?V:{}),{[i.NetworkParam.IsGzipped]:"1"})}catch(J){r.Log.warn(`Request compression failed for ${H.urlConfig.getUrl()}`,J)}})}_getInternalRequestArgs(H,V){const W=this._fallbackResolver.getActiveFallbackUrl(V.sdkKey,V.urlConfig),J=Object.assign(Object.assign({},V),{method:H,fallbackUrl:W});return"data"in V&&O(J,V.data),J}};Hv.NetworkCore=M;const N=ne=>ne.sdkKey?!0:(r.Log.warn("Unable to make request without an SDK key"),!1),O=(ne,H)=>{const{sdkKey:V,fallbackUrl:W}=ne,J=f.StableID.get(V),X=c.SessionID.get(V),ie=o.SDKType._get(V);ne.body=JSON.stringify(Object.assign(Object.assign({},H),{statsigMetadata:Object.assign(Object.assign({},m.StatsigMetadataProvider.get()),{stableID:J,sessionID:X,sdkType:ie,fallbackUrl:W})}))};function D(ne,H){return ne!=null&&ne.signal.aborted&&typeof ne.signal.reason=="string"?ne.signal.reason:typeof H=="string"?H:H instanceof Error?`${H.name}: ${H.message}`:"Unknown Error"}function L(ne){return(ne==null?void 0:ne.signal.aborted)&&typeof ne.signal.reason=="string"&&ne.signal.reason.includes("Timeout")||!1}function B(ne,H){ne.urlConfig.endpoint===i.Endpoint._initialize&&n.Diagnostics._markInitNetworkReqStart(ne.sdkKey,{attempt:H})}function ee(ne,H,V,W,J){ne.urlConfig.endpoint===i.Endpoint._initialize&&n.Diagnostics._markInitNetworkReqEnd(ne.sdkKey,n.Diagnostics._getDiagnosticsData(H,V,W,J))}function te(ne){return t(this,void 0,void 0,function*(){yield new Promise(H=>setTimeout(H,Math.min(E*(ne*ne),S)))})}return Hv}var _k={},S6;function mCe(){return S6||(S6=1,Object.defineProperty(_k,"__esModule",{value:!0})),_k}var vk={},b6;function gCe(){return b6||(b6=1,Object.defineProperty(vk,"__esModule",{value:!0})),vk}var Gv={},w6;function _Ce(){if(w6)return Gv;w6=1;var t=Gv.__awaiter||function(m,_,y,E){function S(w){return w instanceof y?w:new y(function(R){R(w)})}return new(y||(y=Promise))(function(w,R){function C(N){try{M(E.next(N))}catch(O){R(O)}}function k(N){try{M(E.throw(N))}catch(O){R(O)}}function M(N){N.done?w(N.value):S(N.value).then(C,k)}M((E=E.apply(m,_||[])).next())})};Object.defineProperty(Gv,"__esModule",{value:!0}),Gv.StatsigClientBase=void 0,s0();const e=s0(),n=HG(),r=BG(),i=La(),s=VG(),a=A0(),o=lD(),l=sp(),c=3e3;let f=class{constructor(_,y,E,S){var w;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};const R=this.$emt.bind(this);(S==null?void 0:S.logLevel)!=null&&(i.Log.level=S.logLevel),S!=null&&S.disableStorage&&l.Storage._setDisabled(!0),S!=null&&S.initialSessionID&&o.StatsigSession.overrideInitialSessionID(S.initialSessionID,_),S!=null&&S.storageProvider&&l.Storage._setProvider(S.storageProvider),this._sdkKey=_,this._options=S??{},this._memoCache={},this.overrideAdapter=(w=S==null?void 0:S.overrideAdapter)!==null&&w!==void 0?w:null,this._logger=new r.EventLogger(_,R,E,S),this._errorBoundary=new n.ErrorBoundary(_,S,R),this._errorBoundary.wrap(this),this._errorBoundary.wrap(y),this._errorBoundary.wrap(this._logger),E.setErrorBoundary(this._errorBoundary),this.dataAdapter=y,this.dataAdapter.attach(_,S),this.storageProvider=l.Storage,this._primeReadyRipcord(),p(_,this)}updateRuntimeOptions(_){_.disableLogging!=null&&(this._options.disableLogging=_.disableLogging,this._logger.setLoggingDisabled(_.disableLogging)),_.disableStorage!=null&&(this._options.disableStorage=_.disableStorage,l.Storage._setDisabled(_.disableStorage))}flush(){return this._logger.flush()}shutdown(){return t(this,void 0,void 0,function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()})}on(_,y){this._listeners[_]||(this._listeners[_]=[]),this._listeners[_].push(y)}off(_,y){if(this._listeners[_]){const E=this._listeners[_].indexOf(y);E!==-1&&this._listeners[_].splice(E,1)}}$on(_,y){y.__isInternal=!0,this.on(_,y)}$emt(_){var y;const E=S=>{try{S(_)}catch(w){if(S.__isInternal===!0){this._errorBoundary.logError(`__emit:${_.name}`,w);return}i.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",_)}};this._listeners[_.name]&&this._listeners[_.name].forEach(S=>E(S)),(y=this._listeners["*"])===null||y===void 0||y.forEach(E)}_setStatus(_,y){this.loadingStatus=_,this._memoCache={},this.$emt({name:"values_updated",status:_,values:y})}_enqueueExposure(_,y,E){if((E==null?void 0:E.disableExposureLog)===!0){this._logger.incrementNonExposureCount(_);return}this._logger.enqueue(y)}_memoize(_,y){return(E,S)=>{if(this._options.disableEvaluationMemoization)return y(E,S);const w=(0,s.createMemoKey)(_,E,S);return w?(w in this._memoCache||(Object.keys(this._memoCache).length>=c&&(this._memoCache={}),this._memoCache[w]=y(E,S)),this._memoCache[w]):y(E,S)}}};Gv.StatsigClientBase=f;function p(m,_){var y;if((0,a._isServerEnv)())return;const E=(0,e._getStatsigGlobal)(),S=(y=E.instances)!==null&&y!==void 0?y:{},w=_;S[m]!=null&&i.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),S[m]=w,E.firstInstance||(E.firstInstance=w),E.instances=S,__STATSIG__=E}return Gv}var xS={},T6;function vCe(){return T6||(T6=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.DataAdapterCachePrefix=void 0,xS.DataAdapterCachePrefix="statsig.cached"),xS}var yk={},x6;function yCe(){return x6||(x6=1,Object.defineProperty(yk,"__esModule",{value:!0})),yk}var Ek={},C6;function ECe(){return C6||(C6=1,Object.defineProperty(Ek,"__esModule",{value:!0})),Ek}var Ea={},R6;function SCe(){if(R6)return Ea;R6=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea._makeTypedGet=Ea._mergeOverride=Ea._makeLayer=Ea._makeExperiment=Ea._makeDynamicConfig=Ea._makeFeatureGate=void 0;const t=La(),e=rD(),n="default";function r(f,p,m,_){var y;return{name:f,details:p,ruleID:(y=m==null?void 0:m.rule_id)!==null&&y!==void 0?y:n,__evaluation:m,value:_}}function i(f,p,m){return r(f,p,m,(m==null?void 0:m.value)===!0)}Ea._makeFeatureGate=i;function s(f,p,m){var _;const y=(_=m==null?void 0:m.value)!==null&&_!==void 0?_:{};return Object.assign(Object.assign({},r(f,p,m,y)),{get:c(f,m==null?void 0:m.value)})}Ea._makeDynamicConfig=s;function a(f,p,m){var _;const y=s(f,p,m);return Object.assign(Object.assign({},y),{groupName:(_=m==null?void 0:m.group_name)!==null&&_!==void 0?_:null})}Ea._makeExperiment=a;function o(f,p,m,_){var y,E;return Object.assign(Object.assign({},r(f,p,m,void 0)),{get:c(f,m==null?void 0:m.value,_),groupName:(y=m==null?void 0:m.group_name)!==null&&y!==void 0?y:null,__value:(E=m==null?void 0:m.value)!==null&&E!==void 0?E:{}})}Ea._makeLayer=o;function l(f,p,m,_){return Object.assign(Object.assign(Object.assign({},f),p),{get:c(f.name,m,_)})}Ea._mergeOverride=l;function c(f,p,m){return(_,y)=>{var E;const S=(E=p==null?void 0:p[_])!==null&&E!==void 0?E:null;return S==null?y??null:y!=null&&!(0,e._isTypeMatch)(S,y)?(t.Log.warn(`Parameter type mismatch. '${f}.${_}' was found to be type '${typeof S}' but fallback/return type is '${typeof y}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),y??null):(m==null||m(_),S)}}return Ea._makeTypedGet=c,Ea}var Sk={},M6;function bCe(){return M6||(M6=1,Object.defineProperty(Sk,"__esModule",{value:!0})),Sk}var Sm={},A6;function wCe(){if(A6)return Sm;A6=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.UPDATE_DETAIL_ERROR_MESSAGES=Sm.createUpdateDetails=void 0;const t=(e,n,r,i,s,a)=>({duration:r,source:n,success:e,error:i,sourceUrl:s,warnings:a});return Sm.createUpdateDetails=t,Sm.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."},Sm}var I6;function a_(){return I6||(I6=1,function(t){var e=_S.__createBinding||(Object.create?function(l,c,f,p){p===void 0&&(p=f);var m=Object.getOwnPropertyDescriptor(c,f);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,p,m)}:function(l,c,f,p){p===void 0&&(p=f),l[p]=c[f]}),n=_S.__exportStar||function(l,c){for(var f in l)f!=="default"&&!Object.prototype.hasOwnProperty.call(c,f)&&e(c,l,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Log=t.EventLogger=t.Diagnostics=void 0,s0();const r=PP();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return r.Diagnostics}});const i=BG();Object.defineProperty(t,"EventLogger",{enumerable:!0,get:function(){return i.EventLogger}});const s=La();Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return s.Log}});const a=CR(),o=sp();Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return o.Storage}}),n(s0(),t),n(wA(),t),n(aCe(),t),n(oCe(),t),n(PP(),t),n(lCe(),t),n(HG(),t),n(uCe(),t),n(cCe(),t),n(pw(),t),n(dCe(),t),n(La(),t),n(VG(),t),n(TA(),t),n(pCe(),t),n(mCe(),t),n(gCe(),t),n(A0(),t),n(oD(),t),n(lD(),t),n(aD(),t),n(_Ce(),t),n($G(),t),n(vCe(),t),n(UG(),t),n(CR(),t),n(yCe(),t),n(ECe(),t),n(SCe(),t),n(bCe(),t),n(zG(),t),n(sp(),t),n(jG(),t),n(rD(),t),n(FG(),t),n(sD(),t),n(iD(),t),n(wCe(),t),n(GG(),t),__STATSIG__=Object.assign(Object.assign({},__STATSIG__!=null?__STATSIG__:{}),{Log:s.Log,SDK_VERSION:a.SDK_VERSION})}(_S)),_S}var px={},k6;function TCe(){if(k6)return px;k6=1,Object.defineProperty(px,"__esModule",{value:!0});const t=a_();let e=class{constructor(r){this._sdkKey=r,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,t._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(r,i){var s;if(!r)return!1;const a=(0,t._typedJsonParse)(r.data,"has_updates","EvaluationResponse");return a==null?!1:(this._source=r.source,(a==null?void 0:a.has_updates)!==!0||(this._rawValues=r.data,this._lcut=a.time,this._receivedAt=r.receivedAt,this._values=a,this._bootstrapMetadata=this._extractBootstrapMetadata(r.source,a),r.source&&a.user&&this._setWarningState(i,a),t.SDKFlags.setFlags(this._sdkKey,(s=a.sdk_flags)!==null&&s!==void 0?s:{})),!0)}getWarnings(){if(this._warnings.size!==0)return Array.from(this._warnings)}getGate(r){var i;return this._getDetailedStoreResult((i=this._values)===null||i===void 0?void 0:i.feature_gates,r)}getConfig(r){var i;return this._getDetailedStoreResult((i=this._values)===null||i===void 0?void 0:i.dynamic_configs,r)}getLayer(r){var i;return this._getDetailedStoreResult((i=this._values)===null||i===void 0?void 0:i.layer_configs,r)}getParamStore(r){var i;return this._getDetailedStoreResult((i=this._values)===null||i===void 0?void 0:i.param_stores,r)}getSource(){return this._source}getExposureMapping(){var r;return(r=this._values)===null||r===void 0?void 0:r.exposures}_extractBootstrapMetadata(r,i){if(r!=="Bootstrap")return null;const s={};return i.user&&(s.user=i.user),i.sdkInfo&&(s.generatorSDKInfo=i.sdkInfo),s.lcut=i.time,s}_getDetailedStoreResult(r,i){let s=null;return r&&(s=r[i]?r[i]:r[(0,t._DJB2)(i)]),{result:s,details:this._getDetails(s==null)}}_setWarningState(r,i){var s;const a=t.StableID.get(this._sdkKey);if(((s=r.customIDs)===null||s===void 0?void 0:s.stableID)!==a){this._warnings.add("StableIDMismatch");return}if("user"in i){const o=i.user;(0,t._getFullUserHash)(r)!==(0,t._getFullUserHash)(o)&&this._warnings.add("PartialUserMatch")}}getCurrentSourceDetails(){if(this._source==="Uninitialized"||this._source==="NoValues")return{reason:this._source};const r={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(r.warnings=Array.from(this._warnings)),r}_getDetails(r){var i,s;const a=this.getCurrentSourceDetails();let o=a.reason;const l=(i=a.warnings)!==null&&i!==void 0?i:[];this._source==="Bootstrap"&&l.length>0&&(o=o+l[0]),o!=="Uninitialized"&&o!=="NoValues"&&(o=`${o}:${r?"Unrecognized":"Recognized"}`);const c=this._source==="Bootstrap"&&(s=this._bootstrapMetadata)!==null&&s!==void 0?s:void 0;return c&&(a.bootstrapMetadata=c),Object.assign(Object.assign({},a),{reason:o})}};return px.default=e,px}var CS={},RS={},O6;function xCe(){if(O6)return RS;O6=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS._resolveDeltasResponse=void 0;const t=a_(),e=2;function n(a,o){const l=(0,t._typedJsonParse)(o,"checksum","DeltasEvaluationResponse");if(!l)return{hadBadDeltaChecksum:!0};const c=r(a,l),f=i(c),p=(0,t._DJB2Object)({feature_gates:f.feature_gates,dynamic_configs:f.dynamic_configs,layer_configs:f.layer_configs},e);return p===l.checksumV2?JSON.stringify(f):{hadBadDeltaChecksum:!0,badChecksum:p,badMergedConfigs:f,badFullResponse:l.deltas_full_response}}RS._resolveDeltasResponse=n;function r(a,o){return Object.assign(Object.assign(Object.assign({},a),o),{feature_gates:Object.assign(Object.assign({},a.feature_gates),o.feature_gates),layer_configs:Object.assign(Object.assign({},a.layer_configs),o.layer_configs),dynamic_configs:Object.assign(Object.assign({},a.dynamic_configs),o.dynamic_configs)})}function i(a){const o=a;return s(a.deleted_gates,o.feature_gates),delete o.deleted_gates,s(a.deleted_configs,o.dynamic_configs),delete o.deleted_configs,s(a.deleted_layers,o.layer_configs),delete o.deleted_layers,o}function s(a,o){a==null||a.forEach(l=>{delete o[l]})}return RS}var P6;function WG(){if(P6)return CS;P6=1;var t=CS.__awaiter||function(i,s,a,o){function l(c){return c instanceof a?c:new a(function(f){f(c)})}return new(a||(a=Promise))(function(c,f){function p(y){try{_(o.next(y))}catch(E){f(E)}}function m(y){try{_(o.throw(y))}catch(E){f(E)}}function _(y){y.done?c(y.value):l(y.value).then(p,m)}_((o=o.apply(i,s||[])).next())})};Object.defineProperty(CS,"__esModule",{value:!0});const e=a_(),n=xCe();class r extends e.NetworkCore{constructor(s,a){super(s,a);const o=s==null?void 0:s.networkConfig;this._initializeUrlConfig=new e.UrlConfiguration(e.Endpoint._initialize,o==null?void 0:o.initializeUrl,o==null?void 0:o.api,o==null?void 0:o.initializeFallbackUrls)}fetchEvaluations(s,a,o,l,c){return t(this,void 0,void 0,function*(){const f=a?(0,e._typedJsonParse)(a,"has_updates","InitializeResponse"):null;let p={user:l,hash:"djb2",deltasResponseRequested:!1,full_checksum:null};return f!=null&&f.has_updates&&(p=Object.assign(Object.assign({},p),{sinceTime:c?f.time:0,previousDerivedFields:"derived_fields"in f&&c?f.derived_fields:{},deltasResponseRequested:!0,full_checksum:f.full_checksum})),this._fetchEvaluations(s,f,p,o)})}_fetchEvaluations(s,a,o,l){var c,f;return t(this,void 0,void 0,function*(){const p=yield this.post({sdkKey:s,urlConfig:this._initializeUrlConfig,data:o,retries:2,isStatsigEncodable:!0,priority:l});if((p==null?void 0:p.code)===204)return'{"has_updates": false}';if((p==null?void 0:p.code)!==200)return(c=p==null?void 0:p.body)!==null&&c!==void 0?c:null;if((a==null?void 0:a.has_updates)!==!0||((f=p.body)===null||f===void 0?void 0:f.includes('"is_delta":true'))!==!0||o.deltasResponseRequested!==!0)return p.body;const m=(0,n._resolveDeltasResponse)(a,p.body);return typeof m=="string"?m:this._fetchEvaluations(s,a,Object.assign(Object.assign(Object.assign({},o),m),{deltasResponseRequested:!1}),l)})}}return CS.default=r,CS}var MS={},L6;function CCe(){if(L6)return MS;L6=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS._makeParamStoreGetter=void 0;const t=a_(),e={disableExposureLog:!0};function n(f){return f==null||f.disableExposureLog===!1}function r(f,p){return p!=null&&!(0,t._isTypeMatch)(f,p)}function i(f,p){return f.value}function s(f,p,m){return f.getFeatureGate(p.gate_name,n(m)?void 0:e).value?p.pass_value:p.fail_value}function a(f,p,m,_){const E=f.getDynamicConfig(p.config_name,e).get(p.param_name);return r(E,m)?m:(n(_)&&f.getDynamicConfig(p.config_name),E)}function o(f,p,m,_){const E=f.getExperiment(p.experiment_name,e).get(p.param_name);return r(E,m)?m:(n(_)&&f.getExperiment(p.experiment_name),E)}function l(f,p,m,_){const E=f.getLayer(p.layer_name,e).get(p.param_name);return r(E,m)?m:(n(_)&&f.getLayer(p.layer_name).get(p.param_name),E)}function c(f,p,m){return(_,y)=>{if(p==null)return y;const E=p[_];if(E==null||y!=null&&(0,t._typeOf)(y)!==E.param_type)return y;switch(E.ref_type){case"static":return i(E);case"gate":return s(f,E,m);case"dynamic_config":return a(f,E,y,m);case"experiment":return o(f,E,y,m);case"layer":return l(f,E,y,m);default:return y}}}return MS._makeParamStoreGetter=c,MS}var $v={},N6;function RCe(){if(N6)return $v;N6=1;var t=$v.__awaiter||function(i,s,a,o){function l(c){return c instanceof a?c:new a(function(f){f(c)})}return new(a||(a=Promise))(function(c,f){function p(y){try{_(o.next(y))}catch(E){f(E)}}function m(y){try{_(o.throw(y))}catch(E){f(E)}}function _(y){y.done?c(y.value):l(y.value).then(p,m)}_((o=o.apply(i,s||[])).next())})};Object.defineProperty($v,"__esModule",{value:!0}),$v.StatsigEvaluationsDataAdapter=void 0;const e=a_(),n=WG();let r=class extends e.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(s,a){super.attach(s,a),this._network=new n.default(a??{})}getDataAsync(s,a,o){return this._getDataAsyncImpl(s,(0,e._normalizeUser)(a,this._options),o)}prefetchData(s,a){return this._prefetchDataImpl(s,a)}setData(s){const a=(0,e._typedJsonParse)(s,"has_updates","data");a&&"user"in a?super.setData(s,a.user):e.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(s,a){super.setData(s,a)}_fetchFromNetwork(s,a,o,l){var c;return t(this,void 0,void 0,function*(){const f=yield(c=this._network)===null||c===void 0?void 0:c.fetchEvaluations(this._getSdkKey(),s,o==null?void 0:o.priority,a,l);return f??null})}_getCacheKey(s){var a;const o=(0,e._getStorageKey)(this._getSdkKey(),s,(a=this._options)===null||a===void 0?void 0:a.customUserCacheKeyFunc);return`${e.DataAdapterCachePrefix}.${this._cacheSuffix}.${o}`}_isCachedResultValidFor204(s,a){return s.fullUserHash!=null&&s.fullUserHash===(0,e._getFullUserHash)(a)}};return $v.StatsigEvaluationsDataAdapter=r,$v}var D6;function MCe(){if(D6)return gS;D6=1;var t=gS.__awaiter||function(o,l,c,f){function p(m){return m instanceof c?m:new c(function(_){_(m)})}return new(c||(c=Promise))(function(m,_){function y(w){try{S(f.next(w))}catch(R){_(R)}}function E(w){try{S(f.throw(w))}catch(R){_(R)}}function S(w){w.done?m(w.value):p(w.value).then(y,E)}S((f=f.apply(o,l||[])).next())})};Object.defineProperty(gS,"__esModule",{value:!0});const e=a_(),n=TCe(),r=WG(),i=CCe(),s=RCe();let a=class LP extends e.StatsigClientBase{static instance(l){const c=(0,e._getStatsigGlobal)().instance(l);return c instanceof LP?c:(e.Log.warn((0,e._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new LP(l??"",{}))}constructor(l,c,f=null){var p,m;e.SDKType._setClientType(l,"javascript-client");const _=new r.default(f,E=>{this.$emt(E)});super(l,(p=f==null?void 0:f.dataAdapter)!==null&&p!==void 0?p:new s.StatsigEvaluationsDataAdapter,_,f),this.getFeatureGate=this._memoize(e.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(e.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(e.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getLayer=this._memoize(e.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(e.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new n.default(l),this._network=_,this._user=this._configureUser(c,f);const y=(m=f==null?void 0:f.plugins)!==null&&m!==void 0?m:[];for(const E of y)E.bind(this)}initializeSync(l){var c;return this.loadingStatus!=="Uninitialized"?(0,e.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...(c=this._store.getWarnings())!==null&&c!==void 0?c:[]]):(this._logger.start(),this.updateUserSync(this._user,l))}initializeAsync(l){return t(this,void 0,void 0,function*(){return this._initializePromise?this._initializePromise:(this._initializePromise=this._initializeAsyncImpl(l),this._initializePromise)})}updateUserSync(l,c){var f;const p=performance.now(),m=[...(f=this._store.getWarnings())!==null&&f!==void 0?f:[]];this._resetForUser(l);const _=this.dataAdapter.getDataSync(this._user);_==null&&m.push("NoCachedValues"),this._store.setValues(_,this._user),this._finalizeUpdate(_);const y=c==null?void 0:c.disableBackgroundCacheRefresh;return y===!0||y==null&&(_==null?void 0:_.source)==="Bootstrap"?(0,e.createUpdateDetails)(!0,this._store.getSource(),performance.now()-p,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),m):(this._runPostUpdate(_??null,this._user),(0,e.createUpdateDetails)(!0,this._store.getSource(),performance.now()-p,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),m))}updateUserAsync(l,c){return t(this,void 0,void 0,function*(){this._resetForUser(l);const f=this._user;e.Diagnostics._markInitOverallStart(this._sdkKey);let p=this.dataAdapter.getDataSync(f);if(this._store.setValues(p,this._user),this._setStatus("Loading",p),p=yield this.dataAdapter.getDataAsync(p,f,c),f!==this._user)return(0,e.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let m=!1;p!=null&&(e.Diagnostics._markInitProcessStart(this._sdkKey),m=this._store.setValues(p,this._user),e.Diagnostics._markInitProcessEnd(this._sdkKey,{success:m})),this._finalizeUpdate(p),m||(this._errorBoundary.attachErrorIfNoneExists(e.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),e.Diagnostics._markInitOverallEnd(this._sdkKey,m,this._store.getCurrentSourceDetails());const _=e.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,e.createUpdateDetails)(m,this._store.getSource(),_,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())})}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:e.StatsigSession.get(this._sdkKey),stableID:e.StableID.get(this._sdkKey)}}checkGate(l,c){return this.getFeatureGate(l,c).value}logEvent(l,c,f){const p=typeof l=="string"?{eventName:l,value:c,metadata:f}:l;this._logger.enqueue(Object.assign(Object.assign({},p),{user:this._user,time:Date.now()}))}_primeReadyRipcord(){this.$on("error",()=>{this.loadingStatus==="Loading"&&this._finalizeUpdate(null)})}_initializeAsyncImpl(l){return t(this,void 0,void 0,function*(){return e.Storage.isReady()||(yield e.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,l)})}_finalizeUpdate(l){this._store.finalize(),this._setStatus("Ready",l)}_runPostUpdate(l,c){this.dataAdapter.getDataAsync(l,c,{priority:"low"}).catch(f=>{e.Log.error("An error occurred after update.",f)})}_resetForUser(l){this._logger.reset(),this._store.reset(),this._user=this._configureUser(l,this._options)}_configureUser(l,c){var f;const p=(0,e._normalizeUser)(l,c),m=(f=p.customIDs)===null||f===void 0?void 0:f.stableID;return m&&e.StableID.setOverride(m,this._sdkKey),p}_getFeatureGateImpl(l,c){var f,p;const{result:m,details:_}=this._store.getGate(l),y=(0,e._makeFeatureGate)(l,_,m),E=(p=(f=this.overrideAdapter)===null||f===void 0?void 0:f.getGateOverride)===null||p===void 0?void 0:p.call(f,y,this._user,c),S=E??y;return this._enqueueExposure(l,(0,e._createGateExposure)(this._user,S,this._store.getExposureMapping()),c),this.$emt({name:"gate_evaluation",gate:S}),S}_getDynamicConfigImpl(l,c){var f,p;const{result:m,details:_}=this._store.getConfig(l),y=(0,e._makeDynamicConfig)(l,_,m),E=(p=(f=this.overrideAdapter)===null||f===void 0?void 0:f.getDynamicConfigOverride)===null||p===void 0?void 0:p.call(f,y,this._user,c),S=E??y;return this._enqueueExposure(l,(0,e._createConfigExposure)(this._user,S,this._store.getExposureMapping()),c),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:S}),S}_getExperimentImpl(l,c){var f,p,m,_;const{result:y,details:E}=this._store.getConfig(l),S=(0,e._makeExperiment)(l,E,y);S.__evaluation!=null&&(S.__evaluation.secondary_exposures=(0,e._mapExposures)((p=(f=S.__evaluation)===null||f===void 0?void 0:f.secondary_exposures)!==null&&p!==void 0?p:[],this._store.getExposureMapping()));const w=(_=(m=this.overrideAdapter)===null||m===void 0?void 0:m.getExperimentOverride)===null||_===void 0?void 0:_.call(m,S,this._user,c),R=w??S;return this._enqueueExposure(l,(0,e._createConfigExposure)(this._user,R,this._store.getExposureMapping()),c),this.$emt({name:"experiment_evaluation",experiment:R}),R}_getLayerImpl(l,c){var f,p,m;const{result:_,details:y}=this._store.getLayer(l),E=(0,e._makeLayer)(l,y,_),S=(p=(f=this.overrideAdapter)===null||f===void 0?void 0:f.getLayerOverride)===null||p===void 0?void 0:p.call(f,E,this._user,c);c!=null&&c.disableExposureLog&&this._logger.incrementNonExposureCount(l);const w=(0,e._mergeOverride)(E,S,(m=S==null?void 0:S.__value)!==null&&m!==void 0?m:E.__value,R=>{c!=null&&c.disableExposureLog||this._enqueueExposure(l,(0,e._createLayerParameterExposure)(this._user,w,R,this._store.getExposureMapping()),c)});return this.$emt({name:"layer_evaluation",layer:w}),w}_getParameterStoreImpl(l,c){var f,p;const{result:m,details:_}=this._store.getParamStore(l);this._logger.incrementNonExposureCount(l);const y={name:l,details:_,__configuration:m,get:(0,i._makeParamStoreGetter)(this,m,c)},E=(p=(f=this.overrideAdapter)===null||f===void 0?void 0:f.getParamStoreOverride)===null||p===void 0?void 0:p.call(f,y,c);return E!=null&&(y.__configuration=E.config,y.details=E.details,y.get=(0,i._makeParamStoreGetter)(this,E.config,c)),y}};return gS.default=a,gS}var U6;function ACe(){return U6||(U6=1,function(t){var e=mS.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(s,a);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,o,l)}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),n=mS.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClient=void 0;const r=MCe();t.StatsigClient=r.default,n(a_(),t),__STATSIG__=Object.assign(Object.assign({},__STATSIG__!=null?__STATSIG__:{}),{StatsigClient:r.default}),t.default=__STATSIG__}(mS)),mS}var ICe=ACe();class kCe{constructor(){this.statsigClient=void 0}async initialize(e,n){if(this.statsigClient!=null)return;const r={};await this.initializeStatsigClient(r,e,n)}async initializeWithUser(e,n,r,i){const s={userID:e};n&&(s.email=n),this.statsigClient!=null?await this.statsigClient.updateUserAsync(s):await this.initializeStatsigClient(s,r,i)}async initializeStatsigClient(e,n,r){if(this.statsigClient||!r)return;const s={environment:{tier:this.getStatsigTier(n)}};this.statsigClient=new ICe.StatsigClient(r,e,s),await this.statsigClient.initializeAsync()}getStatsigTier(e){return e==="prod"?"production":"development"}getConfig(e){if(!this.statsigClient)return g4[e];const n=this.statsigClient.getDynamicConfig(e);return n?n.value:g4[e]}isEnabled(e){return this.statsigClient?this.statsigClient.checkGate(e):!1}getContext(){var e;return(e=this.statsigClient)==null?void 0:e.getContext()}logEvent(e,n,r){this.statsigClient&&this.statsigClient.logEvent(e,n,r)}}class OCe{async initialize(e){console.log("Logging initialized: ",e)}identify(e,n,r,i){console.log("Logging identified: ",n,r)}setContext(e,n){console.log("Logging set context: ",e,n)}unsetContext(e){console.log("Logging unset context: ",e)}startContextTimer(e){console.log("Logging start context timer: ",e)}removeContextTimer(e){console.log("Logging remove context timer: ",e)}async uploadLogs(e,n){console.log("Would be uploading logs for call ID: ",e)}info(e,...n){console.log("Logging info: ",e,...n)}debug(e,...n){console.log("Logging debug: ",e,...n)}warn(e,...n){console.log("Logging warn: ",e,...n)}error(e,...n){console.error("Logging error: ",e,...n)}}function RR(t,e,n){const r=n.getHandler(),i=Array.isArray(r)?r:[r];return F6[t]>=F6[n.getLevel()]&&i.includes(e)}const yn={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},F6={[yn.ok]:0,[yn.debug]:1,[yn.info]:2,[yn.notice]:4,[yn.warn]:5,[yn.error]:6,[yn.critical]:7,[yn.alert]:8,[yn.emerg]:9};function xA(t,{includeMessage:e=!1}={}){return{stack:t.stack,kind:t.type,message:e?t.message:void 0,causes:t.causes,fingerprint:t.fingerprint,handling:t.handling}}var PCe=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const b1={console:"console",http:"http",silent:"silent"},LCe=Object.keys(yn);class Nl{constructor(e,n,r,i=b1.http,s=yn.debug,a={}){this.handleLogStrategy=e,this.handlerType=i,this.level=s,this.contextManager=i0(n),this.contextManager.setContext(a),r&&this.contextManager.setContextProperty("logger",{name:r})}logImplementation(e,n,r=yn.info,i,s){const a=Yr(n);let o;if(i!=null){const l=ON({stackTrace:af(i)?Lc(i):void 0,originalError:i,nonErrorPrefix:"Provided",source:go.LOGGER,handling:"handled",startClocks:ca()});o=Vo({error:xA(l,{includeMessage:!0})},a)}else o=a;this.handleLogStrategy({message:Yr(e),context:o,status:r},this,s)}log(e,n,r=yn.info,i){let s;RR(r,b1.http,this)&&(s=n0()),this.logImplementation(e,n,r,i,s)}setContext(e){this.contextManager.setContext(e)}getContext(){return this.contextManager.getContext()}setContextProperty(e,n){this.contextManager.setContextProperty(e,n)}removeContextProperty(e){this.contextManager.removeContextProperty(e)}clearContext(){this.contextManager.clearContext()}setHandler(e){this.handlerType=e}getHandler(){return this.handlerType}setLevel(e){this.level=e}getLevel(){return this.level}}PCe([mge],Nl.prototype,"logImplementation",null);Nl.prototype.ok=of(yn.ok);Nl.prototype.debug=of(yn.debug);Nl.prototype.info=of(yn.info);Nl.prototype.notice=of(yn.notice);Nl.prototype.warn=of(yn.warn);Nl.prototype.error=of(yn.error);Nl.prototype.critical=of(yn.critical);Nl.prototype.alert=of(yn.alert);Nl.prototype.emerg=of(yn.emerg);function of(t){return function(e,n,r){let i;RR(t,b1.http,this)&&(i=n0()),this.logImplementation(e,n,t,r,i)}}function NCe(t,e){return{view:{referrer:document.referrer,url:window.location.href},context:t.getContext(),user:e.getContext()}}const DCe=32*Kd;function UCe(t){t.usePciIntake===!0&&t.site&&t.site!=="datadoghq.com"&&Jn.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");const e=aH(t),n=B6(t.forwardConsoleLogs,pR(Ai),"Forward Console Logs"),r=B6(t.forwardReports,pR(r0),"Forward Reports");if(!(!e||!n||!r))return t.forwardErrorsToLogs&&!n.includes(Ai.error)&&n.push(Ai.error),{forwardErrorsToLogs:t.forwardErrorsToLogs!==!1,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:DCe,...e}}function B6(t,e,n){if(t===void 0)return[];if(!(t==="all"||Array.isArray(t)&&t.every(r=>e.includes(r)))){Jn.error(`${n} should be "all" or an array with allowed values "${e.join('", "')}"`);return}return t==="all"?e:j_e(t)}function FCe(t){const e=oH(t);return{forward_errors_to_logs:t.forwardErrorsToLogs,forward_console_logs:t.forwardConsoleLogs,forward_reports:t.forwardReports,use_pci_intake:t.usePciIntake,...e}}function BCe(t,e,n){const r=LN();let i,s;const a=e.observable.subscribe(o);function o(){if(!s||!i||!e.isGranted())return;a.unsubscribe();const l=n(i,s);r.drain(l)}return{init(l){if(!l){Jn.error("Missing configuration");return}if(lH(l.enableExperimentalFeatures),Mc()&&(l=zCe(l)),i=l,s){fA("DD_LOGS",l);return}const c=UCe(l);c&&(s=c,pA().subscribe(Mr),e.tryToInit(c.trackingConsent),o())},get initConfiguration(){return i},getInternalContext:Mr,handleLog(l,c,f,p=t(),m=Us()){r.add(_=>_.handleLog(l,c,f,p,m))}}}function zCe(t){return{...t,clientToken:"empty"}}const z6="logs";function jCe(t){const e=HH(),n=i0(e.getOrCreateTracker(2)),r=i0(e.getOrCreateTracker(1)),i=nH();function s(){return NCe(n,r)}let a=BCe(s,i,(c,f)=>{c.storeContextsAcrossPages&&(yR(f,n,z6,2),yR(f,r,z6,1));const p=t(c,f,s,i);return a=HCe(c,p),p});const o={},l=new Nl((...c)=>a.handleLog(...c),e.createDetachedTracker());return mH({logger:l,init:Pt(c=>a.init(c)),setTrackingConsent:Pt(c=>{i.update(c),Yi({feature:"set-tracking-consent",tracking_consent:c})}),getGlobalContext:Pt(()=>n.getContext()),setGlobalContext:Pt(c=>n.setContext(c)),setGlobalContextProperty:Pt((c,f)=>n.setContextProperty(c,f)),removeGlobalContextProperty:Pt(c=>n.removeContextProperty(c)),clearGlobalContext:Pt(()=>n.clearContext()),createLogger:Pt((c,f={})=>(o[c]=new Nl((...p)=>a.handleLog(...p),e.createDetachedTracker(),Yr(c),f.handler,f.level,Yr(f.context)),o[c])),getLogger:Pt(c=>o[c]),getInitConfiguration:Pt(()=>hA(a.initConfiguration)),getInternalContext:Pt(c=>a.getInternalContext(c)),setUser:Pt(c=>{Xj(c)&&r.setContext(mR(c))}),getUser:Pt(()=>r.getContext()),setUserProperty:Pt((c,f)=>{const p=mR({[c]:f})[c];r.setContextProperty(c,p)}),removeUserProperty:Pt(c=>r.removeContextProperty(c)),clearUser:Pt(()=>r.clearContext())})}function HCe(t,e){return{init:n=>{fA("DD_LOGS",n)},initConfiguration:t,...e}}const VCe="logs";function GCe(t,e){const n=RH(t,VCe,r=>WCe(t,r),e);return{findTrackedSession:(r,i={returnInactive:!1})=>{const s=n.findSession(r,i);return s&&s.trackingType==="1"?{id:s.id,anonymousId:s.anonymousId}:void 0},expireObservable:n.expireObservable}}function $Ce(t){const n=qG(t)==="1"?{}:void 0;return{findTrackedSession:()=>n,expireObservable:new hr}}function qG(t){return Bh(t.sessionSampleRate)?"1":"0"}function WCe(t,e){const n=qCe(e)?e:qG(t);return{trackingType:n,isTracked:n==="1"}}function qCe(t){return t==="0"||t==="1"}let j6=!1;function yC(t){const e=window;if(mA()){const r=n(e.DD_RUM_SYNTHETICS);return!r&&!j6&&(j6=!0,r_("Logs sent before RUM is injected by the synthetics worker",{testId:GH(),resultId:$H()})),r}return n(e.DD_RUM);function n(r){if(r&&r.getInternalContext)return r.getInternalContext(t)}}function XCe(t,e,n,r,i){const s=LCe.concat(["custom"]),a={};s.forEach(o=>{a[o]=fC(o,e.eventRateLimiterThreshold,i)}),n.subscribe(0,({rawLogsEvent:o,messageContext:l=void 0,savedCommonContext:c=void 0,domainContext:f})=>{var p,m;const _=cA(o.date),y=t.findTrackedSession(_);if(!t.findTrackedSession(_,{returnInactive:!0}))return;const S=c||r();y&&y.anonymousId&&!S.user.anonymous_id&&(S.user.anonymous_id=y.anonymousId);const w=Vo({service:e.service,session_id:y?y.id:void 0,session:y?{id:y.id}:void 0,usr:Ug(S.user)?void 0:S.user,view:S.view},S.context,yC(_),o,l);((p=e.beforeSend)===null||p===void 0?void 0:p.call(e,w,f))===!1||w.origin!==go.AGENT&&((m=a[w.status])!==null&&m!==void 0?m:a.custom).isLimitReached()||n.notify(1,w)})}const KCe={[Ai.log]:yn.info,[Ai.debug]:yn.debug,[Ai.info]:yn.info,[Ai.warn]:yn.warn,[Ai.error]:yn.error};function YCe(t,e){const n=jH(t.forwardConsoleLogs).subscribe(r=>{const i={rawLogsEvent:{date:Us(),message:r.message,origin:go.CONSOLE,error:r.error&&xA(r.error),status:KCe[r.api]},domainContext:{handlingStack:r.handlingStack}};e.notify(0,i)});return{stop:()=>{n.unsubscribe()}}}function ZCe(t,e){const n=_H(t,t.forwardReports).subscribe(r=>{let i=r.message,s;const a=r.originalError.type==="deprecation"?yn.warn:yn.error;a===yn.error?s=xA(r):r.stack&&(i+=` Found in ${P_e(r.stack)}`),e.notify(0,{rawLogsEvent:{date:Us(),message:i,origin:go.REPORT,error:s,status:a}})});return{stop:()=>{n.unsubscribe()}}}function JCe(t,e){if(!t.forwardErrorsToLogs)return{stop:Mr};const n=zH(t).subscribe(s=>{s.state==="complete"&&i("xhr",s)}),r=pA().subscribe(s=>{s.state==="resolve"&&i("fetch",s)});function i(s,a){!sH(a.url)&&(nRe(a)||MH(a.status))&&("xhr"in a?QCe(a.xhr,t,o):a.response?tRe(a.response,t,o):a.error&&eRe(a.error,t,o));function o(l){const c={isAborted:a.isAborted,handlingStack:a.handlingStack};e.notify(0,{rawLogsEvent:{message:`${rRe(s)} error ${a.method} ${a.url}`,date:a.startClocks.timeStamp,error:{stack:l||"Failed to load",handling:void 0},http:{method:a.method,status_code:a.status,url:a.url},status:yn.error,origin:go.NETWORK},domainContext:c})}}return{stop:()=>{n.unsubscribe(),r.unsubscribe()}}}function QCe(t,e,n){typeof t.response=="string"?n(uD(t.response,e)):n(t.response)}function eRe(t,e,n){n(uD(n_(Lc(t)),e))}function tRe(t,e,n){const r=AH(t);!r||!r.body?n():window.TextDecoder?iRe(r.body,e.requestErrorResponseLengthLimit,(i,s)=>{n(i?`Unable to retrieve response: ${i}`:s)}):r.text().then(Pt(i=>n(uD(i,e))),Pt(i=>n(`Unable to retrieve response: ${i}`)))}function nRe(t){return t.status===0&&t.responseType!=="opaque"}function uD(t,e){return t.length>e.requestErrorResponseLengthLimit?`${t.substring(0,e.requestErrorResponseLengthLimit)}...`:t}function rRe(t){return t==="xhr"?"XHR":"Fetch"}function iRe(t,e,n){VH(t,(r,i,s)=>{if(r)n(r);else{let a=new TextDecoder().decode(i);s&&(a+="..."),n(void 0,a)}},{bytesLimit:e,collectStreamBody:!0})}function sRe(t,e){if(!t.forwardErrorsToLogs)return{stop:Mr};const n=new hr,{stop:r}=pH(n),i=n.subscribe(s=>{e.notify(0,{rawLogsEvent:{message:s.message,date:s.startClocks.timeStamp,error:xA(s),origin:go.SOURCE,status:yn.error}})});return{stop:()=>{r(),i.unsubscribe()}}}const aRe=BH;function oRe(t){function e(n,r,i,s,a){const o=Vo(r.getContext(),n.context);if(RR(n.status,b1.console,r)&&uRe(n,o),RR(n.status,b1.http,r)){const l={rawLogsEvent:{date:a||Us(),message:n.message,status:n.status,origin:go.LOGGER},messageContext:o,savedCommonContext:s};i&&(l.domainContext={handlingStack:i}),t.notify(0,l)}}return{handleLog:e}}const lRe={[yn.ok]:Ai.debug,[yn.debug]:Ai.debug,[yn.info]:Ai.info,[yn.notice]:Ai.info,[yn.warn]:Ai.warn,[yn.error]:Ai.error,[yn.critical]:Ai.error,[yn.alert]:Ai.error,[yn.emerg]:Ai.error};function uRe({status:t,message:e},n){qm[lRe[t]].call(dc,e,n)}function cRe(t,e,n,r,i){const s=NN(t,{endpoint:t.logsEndpointBuilder,encoder:g1()},t.replica&&{endpoint:t.replica.logsEndpointBuilder,encoder:g1()},n,r,i.expireObservable);return e.subscribe(1,a=>{s.add(a)}),s}function dRe(t){const e=i_();t.subscribe(1,n=>{e.send("log",n)})}function fRe(t){return{get:e=>{const n=t.findTrackedSession(e);if(n)return{session_id:n.id}}}}function hRe(t){return e=>{t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,origin:go.AGENT,status:yn.error}}),r_("Error reported to customer",{"error.message":e.message})}}function pRe(t,e,n,r,i){const s=wH("browser-logs-sdk",e);s.setContextProvider(()=>{var o,l,c,f,p,m;return{application:{id:(o=yC())===null||o===void 0?void 0:o.application_id},session:{id:(l=i.findTrackedSession())===null||l===void 0?void 0:l.id},view:{id:(f=(c=yC())===null||c===void 0?void 0:c.view)===null||f===void 0?void 0:f.id},action:{id:(m=(p=yC())===null||p===void 0?void 0:p.user_action)===null||m===void 0?void 0:m.id}}});const a=[];if(Mc()){const o=i_(),l=s.observable.subscribe(c=>o.send("internal_telemetry",c));a.push(()=>l.unsubscribe())}else{const o=NN(e,{endpoint:e.rumEndpointBuilder,encoder:g1()},e.replica&&{endpoint:e.replica.rumEndpointBuilder,encoder:g1()},n,r,i.expireObservable);a.push(()=>o.stop());const l=s.observable.subscribe(c=>o.add(c,xH(e)));a.push(()=>l.unsubscribe())}return TH(),CH(FCe(t)),{telemetry:s,stop:()=>{a.forEach(o=>o())}}}function mRe(t,e,n,r){const i=new aRe,s=[];i.subscribe(1,m=>PN("logs",m));const a=hRe(i),o=FH(e),l=e.sessionStoreStrategyType&&!Mc()&&!mA()?GCe(e,r):$Ce(e),{stop:c}=pRe(t,e,a,o,l);s.push(()=>c()),JCe(e,i),sRe(e,i),YCe(e,i),ZCe(e,i);const{handleLog:f}=oRe(i);if(XCe(l,e,i,n,a),Mc())dRe(i);else{const{stop:m}=cRe(e,i,a,o,l);s.push(()=>m())}const p=fRe(l);return{handleLog:f,getInternalContext:p.get,stop:()=>{s.forEach(m=>m())}}}const nh=jCe(mRe);gH(sf(),"DD_LOGS",nh);const jb=class jb{constructor(e,n,r,i){this.useDatadog=!1,this.logsToUpload=[],this.logContext={},this.logContextTimers={},this.clientName=n,this.clientVersion=r,this.clientBuildNumber=i,this.env=e,e==="prod"&&(console.log=(s,...a)=>{this.info(s.toString(),...a)},console.info=(s,...a)=>{this.info(s.toString(),...a)},console.debug=(s,...a)=>{this.debug(s.toString(),...a)},console.warn=(s,...a)=>{this.warn(s.toString(),...a)},console.error=(s,...a)=>{this.error(s.toString(),...a)})}async initialize(e){const{datadogClientToken:n,baseUrl:r,enableDatadog:i=!1,sessionSampleRate:s=100,enableErrorTracking:a=!1}=e;i&&n!==void 0&&n.length>0&&(this.useDatadog=!0,jb.isDatadogInitialized||(nh.init({clientToken:n,site:"us5.datadoghq.com",forwardErrorsToLogs:a,sessionSampleRate:s,forwardConsoleLogs:"all",service:this.clientName.toLowerCase().replace(/-/g,"_"),env:this.env}),jb.isDatadogInitialized=!0,this.baseUrl=r)),this.setContext("client_name",this.clientName),this.setContext("client_version",this.clientVersion),this.setContext("client_build_number",this.clientBuildNumber)}identify(e,n,r,i){this.setContext("user",{uid:e,email:n,displayName:r,isStaff:i})}setContext(e,n){this.useDatadog&&nh.setGlobalContextProperty(e,n),this.logContext[e]=n}unsetContext(e){this.useDatadog&&nh.setGlobalContextProperty(e,void 0),delete this.logContext[e]}startContextTimer(e){this.logContextTimers[e]=Date.now()}removeContextTimer(e){delete this.logContextTimers[e]}async uploadLogs(e,n){return this.logsToUpload.length===0?(this.debug("No logs to upload"),Promise.resolve()):fetch(`${this.baseUrl??""}/api/generate-call-file-upload-url`,{method:"POST",headers:{"Content-Type":"application/json","Client-Name":this.clientName,Authorization:`Bearer ${n}`},body:JSON.stringify({call_id:e,file_name:"client_logs.json"})}).then(r=>r.json()).then(r=>{if(r&&r.upload_url)return fetch(r.upload_url,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.logsToUpload)}).then(i=>{i.ok&&(this.info("Logs uploaded successfully"),this.logsToUpload=[])}).catch(i=>{this.error("Error uploading logs:",i)});this.error("Failed to get upload URL")}).catch(r=>{this.info("Error generating upload URL for logs:",r)})}info(e,...n){this.useDatadog&&nh.logger.info(e+this.argsToString(n)),this.addLogToUpload("INFO",e,n)}debug(e,...n){this.useDatadog&&nh.logger.debug(e+this.argsToString(n)),this.addLogToUpload("DEBUG",e,n)}warn(e,...n){this.useDatadog&&nh.logger.warn(e+this.argsToString(n)),this.addLogToUpload("WARN",e,n)}error(e,...n){this.useDatadog&&nh.logger.error(e+this.argsToString(n)),this.addLogToUpload("ERROR",e,n)}argsToString(e){return e.map(n=>n instanceof Error?JSON.stringify({message:n.message,name:n.name,stack:n.stack,cause:n.cause}):JSON.stringify(n)).join(", ")}addLogToUpload(e,n,r){const i=new Date().toISOString(),s=Object.keys(this.logContextTimers).reduce((a,o)=>(a[o]=(Date.now()-this.logContextTimers[o])/1e3,a),{});this.logsToUpload.push({level:e,event:n,context:this.logContext,timestamp:i,...s,...r})}};jb.isDatadogInitialized=!1;let NP=jb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new Map,XG={activated:!1,tokenObservers:[]},gRe={initialized:!1,enabled:!1};function ns(t){return DP.get(t)||Object.assign({},XG)}function _Re(t,e){return DP.set(t,e),DP.get(t)}function CA(){return gRe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KG="https://content-firebaseappcheck.googleapis.com/v1",vRe="exchangeRecaptchaEnterpriseToken",yRe="exchangeDebugToken",H6={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ERe=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SRe{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Xb,this.pending.promise.catch(n=>{}),await bRe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Xb,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function bRe(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wRe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},oo=new E0("appCheck","AppCheck",wRe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function cD(t){if(!ns(t).activated)throw oo.create("use-before-activation",{appName:t.name})}function YG(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60;let a="";return n&&(a+=mx(n)+"d:"),r&&(a+=mx(r)+"h:"),a+=mx(i)+"m:"+mx(s)+"s",a}function mx(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}const s={method:"POST",body:JSON.stringify(e),headers:r};let a;try{a=await fetch(t,s)}catch(p){throw oo.create("fetch-network-error",{originalErrorMessage:p==null?void 0:p.message})}if(a.status!==200)throw oo.create("fetch-status-error",{httpStatus:a.status});let o;try{o=await a.json()}catch(p){throw oo.create("fetch-parse-error",{originalErrorMessage:p==null?void 0:p.message})}const l=o.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw oo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const c=Number(l[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+c,issuedAtTimeMillis:f}}function TRe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${KG}/projects/${n}/apps/${r}:${vRe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function ZG(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${KG}/projects/${n}/apps/${r}:${yRe}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xRe="firebase-app-check-database",CRe=1,w1="firebase-app-check-store",JG="debug-token";let gx=null;function QG(){return gx||(gx=new Promise((t,e)=>{try{const n=indexedDB.open(xRe,CRe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(oo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(w1,{keyPath:"compositeKey"})}}}catch(n){e(oo.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),gx)}function RRe(t){return t$(n$(t))}function MRe(t,e){return e$(n$(t),e)}function ARe(t){return e$(JG,t)}function IRe(){return t$(JG)}async function e$(t,e){const r=(await QG()).transaction(w1,"readwrite"),s=r.objectStore(w1).put({compositeKey:t,value:e});return new Promise((a,o)=>{s.onsuccess=l=>{a()},r.onerror=l=>{var c;o(oo.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}async function t$(t){const n=(await QG()).transaction(w1,"readonly"),i=n.objectStore(w1).get(t);return new Promise((s,a)=>{i.onsuccess=o=>{const l=o.target.result;s(l?l.value:void 0)},n.onerror=o=>{var l;a(oo.create("storage-get",{originalErrorMessage:(l=o.target.error)===null||l===void 0?void 0:l.message}))}})}function n$(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new VN("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kRe(t){if(mN()){let e;try{e=await RRe(t)}catch(n){T1.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function bk(t,e){return mN()?MRe(t,e).catch(n=>{T1.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function ORe(){let t;try{t=await IRe()}catch{}if(t)return t;{const e=L9();return ARe(e).catch(n=>T1.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(){return CA().enabled}async function hD(){const t=CA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function PRe(){const t=k9(),e=CA();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Xb;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(ORe())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LRe={error:"UNKNOWN_ERROR"};function NRe(t){return hN.encodeString(JSON.stringify(t),!1)}async function MR(t,e=!1){const n=t.app;cD(n);const r=ns(n);let i=r.token,s;if(i&&!fy(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(fy(l)?i=l:await bk(n,void 0))}if(!e&&i&&fy(i))return{token:i.token};let a=!1;if(fD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=dD(ZG(n,await hD()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),a=!0);const l=await r.exchangeTokenPromise;return await bk(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),a=!0),i=await ns(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?T1.warn(l.message):T1.error(l),s=l}let o;return i?s?fy(i)?o={token:i.token,internalError:s}:o=$6(s):(o={token:i.token},r.token=i,await bk(n,i)):o=$6(s),a&&s$(n,o),o}async function DRe(t){const e=t.app;cD(e);const{provider:n}=ns(e);if(fD()){const r=await hD(),{token:i}=await dD(ZG(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function r$(t,e,n,r){const{app:i}=t,s=ns(i),a={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,a],s.token&&fy(s.token)){const o=s.token;Promise.resolve().then(()=>{n({token:o.token}),G6(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>G6(t))}function i$(t,e){const n=ns(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function G6(t){const{app:e}=t,n=ns(e);let r=n.tokenRefresher;r||(r=URe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function URe(t){const{app:e}=t;return new SRe(async()=>{const n=ns(e);let r;if(n.token?r=await MR(t,!0):r=await MR(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ns(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},H6.RETRIAL_MIN_WAIT,H6.RETRIAL_MAX_WAIT)}function s$(t,e){const n=ns(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function fy(t){return t.expireTimeMillis-Date.now()>0}function $6(t){return{token:NRe(LRe),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FRe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=ns(this.app);for(const n of e)i$(this.app,n.next);return Promise.resolve()}}function BRe(t,e){return new FRe(t,e)}function zRe(t){return{getToken:e=>MR(t,e),getLimitedUseToken:()=>DRe(t),addTokenListener:e=>r$(t,"INTERNAL",e),removeTokenListener:e=>i$(t.app,e)}}const jRe="@firebase/app-check",HRe="0.8.10",VRe="https://www.google.com/recaptcha/enterprise.js";function GRe(t,e){const n=new Xb,r=ns(t);r.reCAPTCHAState={initialized:n};const i=$Re(t),s=V6(!0);return s?W6(t,e,s,i,n):XRe(()=>{const a=V6(!0);if(!a)throw new Error("no recaptcha");W6(t,e,a,i,n)}),n.promise}function W6(t,e,n,r,i){n.ready(()=>{qRe(t,e,n,r),i.resolve(n)})}function $Re(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function WRe(t){cD(t);const n=await ns(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=ns(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function qRe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{ns(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{ns(t).reCAPTCHAState.succeeded=!1}}),s=ns(t);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function XRe(t){const e=document.createElement("script");e.src=VRe,e.onload=t,document.head.appendChild(e)}class pD{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n,r;YRe(this._throttleData);const i=await WRe(this._app).catch(a=>{throw oo.create("recaptcha-error")});if(!(!((e=ns(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw oo.create("recaptcha-error");let s;try{s=await dD(TRe(this._app,i),this._heartbeatServiceProvider)}catch(a){throw!((n=a.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=KRe(Number((r=a.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),oo.create("throttled",{time:YG(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):a}return this._throttleData=null,s}initialize(e){this._app=e,this._heartbeatServiceProvider=vA(e,"heartbeat"),GRe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof pD?this._siteKey===e._siteKey:!1}}function KRe(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+ERe,httpStatus:t};{const n=e?e.backoffCount:0,r=aue(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function YRe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw oo.create("throttled",{time:YG(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZRe(t=zV(),e){t=qo(t);const n=vA(t,"app-check");if(CA().initialized||PRe(),fD()&&hD().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw oo.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return JRe(t,e.provider,e.isTokenAutoRefreshEnabled),ns(t).isTokenAutoRefreshEnabled&&r$(r,"INTERNAL",()=>{}),r}function JRe(t,e,n){const r=_Re(t,Object.assign({},XG));r.activated=!0,r.provider=e,r.cachedTokenPromise=kRe(t).then(i=>(i&&fy(i)&&(r.token=i,s$(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,r.provider.initialize(t)}async function QRe(t,e){const n=await MR(t,e);if(n.error)throw n.error;return{token:n.token}}const eMe="app-check",q6="app-check-internal";function tMe(){Bg(new rp(eMe,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return BRe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(q6).initialize()})),Bg(new rp(q6,t=>{const e=t.getProvider("app-check").getImmediate();return zRe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),vg(jRe,HRe)}tMe();class nMe{constructor(e,n){this.appCheck=null,this.firebaseApp=e,this.logManager=n}async initialize(e){if(!(this.appCheck||!this.firebaseApp)){if(!e){this.logManager.debug("No Firebase App Check site key provided, validation will be disabled");return}try{const n=new pD(e);this.appCheck=ZRe(this.firebaseApp,{provider:n,isTokenAutoRefreshEnabled:!0}),this.logManager.info("Firebase App Check initialized successfully")}catch(n){this.logManager.error("Failed to initialize Firebase App Check:",n)}}}async getAppCheckToken(e=!1){if(this.appCheck)try{return(await QRe(this.appCheck,e)).token}catch(n){this.logManager.warn("Failed to get Firebase App Check token:",n);return}}}class rMe{async initialize(e){}async getAppCheckToken(e){}}class iMe{constructor(){kt(this,"provider");kt(this,"analyticsManager");kt(this,"initPromiseResolve");kt(this,"initPromise")}async init(e,n){this.provider=new lbe(nA,e,!0,n),this.analyticsManager=this.provider.getAnalyticsManager();const r=n.getConfig(eg.DATADOG_CONFIG);await this.analyticsManager.initialize({rudderstackWriteKey:e.rudderstackWriteKey,datadogRumClientToken:e.datadogRumKey,datadogRumAppId:e.datadogRumAppId,datadogEnabled:r.rum_enabled,datadogSampleRate:r.rum_session_sample_rate}),this.analyticsManager.setContext("client_version",v9),this.analyticsManager.setContext("client_build_number",e.clientBuildNumber),this.initPromiseResolve!=null&&this.initPromiseResolve(this.analyticsManager)}getAnalyticsManager(){return this.analyticsManager}waitForAnalyticsManager(){return this.analyticsManager!=null?Promise.resolve(this.analyticsManager):(this.initPromise==null&&(this.initPromise=new Promise(e=>{this.initPromiseResolve=e})),this.initPromise)}}const lf=new iMe,X6=t=>{let e;const n=new Set,r=(f,p)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const _=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(y=>y(e,_))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{n.clear()}},c=e=t(r,i,l);return l},sMe=t=>t?X6(t):X6;var wk={exports:{}},Tk={},xk={exports:{}},Ck={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K6;function aMe(){if(K6)return Ck;K6=1;var t=G1();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function o(p,m){var _=m(),y=r({inst:{value:_,getSnapshot:m}}),E=y[0].inst,S=y[1];return s(function(){E.value=_,E.getSnapshot=m,l(E)&&S({inst:E})},[p,_,m]),i(function(){return l(E)&&S({inst:E}),p(function(){l(E)&&S({inst:E})})},[p]),a(_),_}function l(p){var m=p.getSnapshot;p=p.value;try{var _=m();return!n(p,_)}catch{return!0}}function c(p,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return Ck.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,Ck}var Y6;function oMe(){return Y6||(Y6=1,xk.exports=aMe()),xk.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z6;function lMe(){if(Z6)return Tk;Z6=1;var t=G1(),e=oMe();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,o=t.useMemo,l=t.useDebugValue;return Tk.useSyncExternalStoreWithSelector=function(c,f,p,m,_){var y=s(null);if(y.current===null){var E={hasValue:!1,value:null};y.current=E}else E=y.current;y=o(function(){function w(N){if(!R){if(R=!0,C=N,N=m(N),_!==void 0&&E.hasValue){var O=E.value;if(_(O,N))return k=O}return k=N}if(O=k,r(C,N))return O;var D=m(N);return _!==void 0&&_(O,D)?(C=N,O):(C=N,k=D)}var R=!1,C,k,M=p===void 0?null:p;return[function(){return w(f())},M===null?void 0:function(){return w(M())}]},[f,p,m,_]);var S=i(c,y[0],y[1]);return a(function(){E.hasValue=!0,E.value=S},[S]),l(S),S},Tk}var J6;function uMe(){return J6||(J6=1,wk.exports=lMe()),wk.exports}var cMe=uMe();const dMe=Xg(cMe),{useDebugValue:fMe}=Fe,{useSyncExternalStoreWithSelector:hMe}=dMe,pMe=t=>t;function mMe(t,e=pMe,n){const r=hMe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return fMe(r),r}const Q6=t=>{const e=typeof t=="function"?sMe(t):t,n=(r,i)=>mMe(e,r,i);return Object.assign(n,e),n},mD=t=>t?Q6(t):Q6;var Vh=(t=>(t.NONE="none",t.NEEDS_TO_LINK_CREDENTIAL="needsToLinkCredential",t.HANDLED="handled",t))(Vh||{}),x1=(t=>(t.GOOGLE="google",t.APPLE="apple",t))(x1||{});const UP=async()=>{(await lf.waitForAnalyticsManager()).track(new w9)};let eB=!1;const tB=async t=>await Promise.resolve(""),nB=async(t,e,n)=>{const r=lf.getAnalyticsManager();r==null||r.track(new mle);const{auth:i}=e(),{firebaseUser:s}=e();t instanceof uu&&(t.addScope("profile"),t.addScope("email"),t.setCustomParameters({prompt:"select_account"}));const a=e().loginWithPopup;a&&n({isLoading:!0});try{s!=null&&s.isAnonymous?a?(await Owe(s,t),await UP()):await Bwe(s,t):i!=null&&(a?(await IP(i,t),await UP()):await Uwe(i,t))}catch(o){FP(i,o,n)}},En=mD()((t,e)=>({firebaseUser:void 0,isLoggedInUser:!1,isLoading:!0,loadingFailed:!1,sesameUser:void 0,isFirebaseInitialized:!1,auth:void 0,loginWithPopup:!1,redirectResultStatus:Vh.NONE,pendingUserCredential:void 0,getIdToken:tB,signInWithGoogle:()=>nB(new uu,e,t),signInWithApple:()=>nB(new Hh("apple.com"),e,t),linkPendingUserCredential:async()=>{const{pendingUserCredential:n,auth:r}=e();if(n!=null&&r!=null){const{credential:i,existingAccountSignInMethod:s}=n;if(s===x1.GOOGLE){const a=new uu,o=await IP(r,a);await l5(o.user,i)}else if(s===x1.APPLE){const a=new Hh("apple.com"),o=await IP(r,a);await l5(o.user,i)}}},logOut:async()=>{const n=kP();try{await fwe(n),t({firebaseUser:void 0,sesameUser:void 0,isLoggedInUser:!1,redirectResultStatus:Vh.NONE})}catch(r){FP(n,r,t)}},setLoading:n=>t({isLoading:n}),initialize:n=>{if(En.getState().isFirebaseInitialized)return;const r=kP();r.useDeviceLanguage(),dwe(r,async i=>{try{await jwe(r)!=null&&!eB&&(await UP(),t({redirectResultStatus:Vh.HANDLED}),eB=!0)}catch(s){FP(r,s,t);return}if(i){const s=!i.isAnonymous;if(s){t({firebaseUser:i??void 0});const a=await i.getIdToken(),o=await fetch("/api/external/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(o.status===500)t({isLoading:!1,loadingFailed:!0});else if(o.status===401||o.status===403)r&&r.signOut(),window.location.href=`/?error=${o.status===403?"unauthorized":"idTokenExpired"}`,t({isLoading:!1});else if(o.status===404)t({isLoading:!1});else{const l=await o.json();t({sesameUser:l,isLoading:!1,isLoggedInUser:!0})}}else s||t({isLoading:!1})}else t({sesameUser:void 0,firebaseUser:void 0,isLoggedInUser:!1,isLoading:!1})}),t({auth:r,loginWithPopup:n,isFirebaseInitialized:!0,getIdToken:async i=>{var a;return await(((a=r==null?void 0:r.currentUser)==null?void 0:a.getIdToken(i))??tB())}})},updateSesameUser:n=>{t({sesameUser:n,isLoggedInUser:!0,isLoading:!1})}}));async function FP(t,e,n){var r;if(e.code==="auth/credential-already-in-use"&&t!=null)gMe(t,e);else if(e.code==="auth/account-exists-with-different-credential"&&t!=null&&((r=e.customData)==null?void 0:r.email)!=null&&typeof e.customData.email=="string"){const{email:i}=e.customData,s=Hh.credentialFromError(e),a=await lwe(t,i);if(s!=null){let o;a.includes("google.com")?o=x1.GOOGLE:a.includes("apple.com")&&(o=x1.APPLE),o!=null&&n({redirectResultStatus:Vh.NEEDS_TO_LINK_CREDENTIAL,pendingUserCredential:{email:i,credential:s,existingAccountSignInMethod:o},isLoading:!1})}}else if(!(e.code==="auth/cancelled-popup-request"||e.code==="auth/popup-closed-by-user")){const i=lf.getAnalyticsManager();throw i==null||i.track(new gle(e.code,e.message)),e}}async function gMe(t,e){const n=Hh.credentialFromError(e);if(n!=null){await awe(t,n);const r=lf.getAnalyticsManager();r==null||r.track(new w9)}}var mw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},RA=typeof window>"u"||"Deno"in globalThis;function su(){}function _Me(t,e){return typeof t=="function"?t(e):t}function vMe(t){return typeof t=="number"&&t>=0&&t!==1/0}function yMe(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rB(t,e){return typeof t=="function"?t(e):t}function EMe(t,e){return typeof t=="function"?t(e):t}function iB(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(r){if(e.queryHash!==gD(a,e.options))return!1}else if(!C1(e.queryKey,a))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function sB(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(zg(e.options.mutationKey)!==zg(s))return!1}else if(!C1(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function gD(t,e){return((e==null?void 0:e.queryKeyHashFn)||zg)(t)}function zg(t){return JSON.stringify(t,(e,n)=>BP(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function C1(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!C1(t[n],e[n])):!1}function a$(t,e){if(t===e)return t;const n=aB(t)&&aB(e);if(n||BP(t)&&BP(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),a=s.length,o=n?[]:{};let l=0;for(let c=0;c<a;c++){const f=n?c:s[c];(!n&&r.includes(f)||n)&&t[f]===void 0&&e[f]===void 0?(o[f]=void 0,l++):(o[f]=a$(t[f],e[f]),o[f]===t[f]&&t[f]!==void 0&&l++)}return i===a&&l===i?t:o}return e}function SMe(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function aB(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function BP(t){if(!oB(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!oB(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function oB(t){return Object.prototype.toString.call(t)==="[object Object]"}function bMe(t){return new Promise(e=>{setTimeout(e,t)})}function wMe(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?a$(t,e):e}function TMe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function xMe(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var _D=Symbol();function o$(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===_D?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var lg,Eh,Ny,b7,CMe=(b7=class extends mw{constructor(){super();Bn(this,lg);Bn(this,Eh);Bn(this,Ny);hn(this,Ny,e=>{if(!RA&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Pe(this,Eh)||this.setEventListener(Pe(this,Ny))}onUnsubscribe(){var e;this.hasListeners()||((e=Pe(this,Eh))==null||e.call(this),hn(this,Eh,void 0))}setEventListener(e){var n;hn(this,Ny,e),(n=Pe(this,Eh))==null||n.call(this),hn(this,Eh,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Pe(this,lg)!==e&&(hn(this,lg,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Pe(this,lg)=="boolean"?Pe(this,lg):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},lg=new WeakMap,Eh=new WeakMap,Ny=new WeakMap,b7),l$=new CMe,Dy,Sh,Uy,w7,RMe=(w7=class extends mw{constructor(){super();Bn(this,Dy,!0);Bn(this,Sh);Bn(this,Uy);hn(this,Uy,e=>{if(!RA&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Pe(this,Sh)||this.setEventListener(Pe(this,Uy))}onUnsubscribe(){var e;this.hasListeners()||((e=Pe(this,Sh))==null||e.call(this),hn(this,Sh,void 0))}setEventListener(e){var n;hn(this,Uy,e),(n=Pe(this,Sh))==null||n.call(this),hn(this,Sh,e(this.setOnline.bind(this)))}setOnline(e){Pe(this,Dy)!==e&&(hn(this,Dy,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Pe(this,Dy)}},Dy=new WeakMap,Sh=new WeakMap,Uy=new WeakMap,w7),AR=new RMe;function MMe(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function AMe(t){return Math.min(1e3*2**t,3e4)}function u$(t){return(t??"online")==="online"?AR.isOnline():!0}var c$=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Rk(t){return t instanceof c$}function d$(t){let e=!1,n=0,r=!1,i;const s=MMe(),a=E=>{var S;r||(m(new c$(E)),(S=t.abort)==null||S.call(t))},o=()=>{e=!0},l=()=>{e=!1},c=()=>l$.isFocused()&&(t.networkMode==="always"||AR.isOnline())&&t.canRun(),f=()=>u$(t.networkMode)&&t.canRun(),p=E=>{var S;r||(r=!0,(S=t.onSuccess)==null||S.call(t,E),i==null||i(),s.resolve(E))},m=E=>{var S;r||(r=!0,(S=t.onError)==null||S.call(t,E),i==null||i(),s.reject(E))},_=()=>new Promise(E=>{var S;i=w=>{(r||c())&&E(w)},(S=t.onPause)==null||S.call(t)}).then(()=>{var E;i=void 0,r||(E=t.onContinue)==null||E.call(t)}),y=()=>{if(r)return;let E;const S=n===0?t.initialPromise:void 0;try{E=S??t.fn()}catch(w){E=Promise.reject(w)}Promise.resolve(E).then(p).catch(w=>{var N;if(r)return;const R=t.retry??(RA?0:3),C=t.retryDelay??AMe,k=typeof C=="function"?C(n,w):C,M=R===!0||typeof R=="number"&&n<R||typeof R=="function"&&R(n,w);if(e||!M){m(w);return}n++,(N=t.onFail)==null||N.call(t,n,w),bMe(k).then(()=>c()?void 0:_()).then(()=>{e?m(w):y()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:o,continueRetry:l,canStart:f,start:()=>(f()?y():_().then(y),s)}}function IMe(){let t=[],e=0,n=o=>{o()},r=o=>{o()},i=o=>setTimeout(o,0);const s=o=>{e?t.push(o):i(()=>{n(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{r(()=>{o.forEach(l=>{n(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{s(()=>{o(...l)})},schedule:s,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var Ls=IMe(),ug,T7,f$=(T7=class{constructor(){Bn(this,ug)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vMe(this.gcTime)&&hn(this,ug,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(RA?1/0:5*60*1e3))}clearGcTimeout(){Pe(this,ug)&&(clearTimeout(Pe(this,ug)),hn(this,ug,void 0))}},ug=new WeakMap,T7),Fy,By,gl,Qs,H1,cg,au,yd,x7,kMe=(x7=class extends f${constructor(e){super();Bn(this,au);Bn(this,Fy);Bn(this,By);Bn(this,gl);Bn(this,Qs);Bn(this,H1);Bn(this,cg);hn(this,cg,!1),hn(this,H1,e.defaultOptions),this.setOptions(e.options),this.observers=[],hn(this,gl,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,hn(this,Fy,PMe(this.options)),this.state=e.state??Pe(this,Fy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Pe(this,Qs))==null?void 0:e.promise}setOptions(e){this.options={...Pe(this,H1),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Pe(this,gl).remove(this)}setData(e,n){const r=wMe(this.state.data,e,this.options);return xi(this,au,yd).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){xi(this,au,yd).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=Pe(this,Qs))==null?void 0:r.promise;return(i=Pe(this,Qs))==null||i.cancel(e),n?n.then(su).catch(su):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Pe(this,Fy))}isActive(){return this.observers.some(e=>EMe(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_D||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!yMe(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Pe(this,Qs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Pe(this,Qs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Pe(this,gl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Pe(this,Qs)&&(Pe(this,cg)?Pe(this,Qs).cancel({revert:!0}):Pe(this,Qs).cancelRetry()),this.scheduleGc()),Pe(this,gl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xi(this,au,yd).call(this,{type:"invalidate"})}fetch(e,n){var l,c,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Pe(this,Qs))return Pe(this,Qs).continueRetry(),Pe(this,Qs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(hn(this,cg,!0),r.signal)})},s=()=>{const p=o$(this.options,n),m={queryKey:this.queryKey,meta:this.meta};return i(m),hn(this,cg,!1),this.options.persister?this.options.persister(p,m,this):p(m)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(a),(l=this.options.behavior)==null||l.onFetch(a,this),hn(this,By,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=a.fetchOptions)==null?void 0:c.meta))&&xi(this,au,yd).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const o=p=>{var m,_,y,E;Rk(p)&&p.silent||xi(this,au,yd).call(this,{type:"error",error:p}),Rk(p)||((_=(m=Pe(this,gl).config).onError)==null||_.call(m,p,this),(E=(y=Pe(this,gl).config).onSettled)==null||E.call(y,this.state.data,p,this)),this.scheduleGc()};return hn(this,Qs,d$({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,_,y,E;if(p===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(S){o(S);return}(_=(m=Pe(this,gl).config).onSuccess)==null||_.call(m,p,this),(E=(y=Pe(this,gl).config).onSettled)==null||E.call(y,p,this.state.error,this),this.scheduleGc()},onError:o,onFail:(p,m)=>{xi(this,au,yd).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{xi(this,au,yd).call(this,{type:"pause"})},onContinue:()=>{xi(this,au,yd).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),Pe(this,Qs).start()}},Fy=new WeakMap,By=new WeakMap,gl=new WeakMap,Qs=new WeakMap,H1=new WeakMap,cg=new WeakMap,au=new WeakSet,yd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...OMe(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Rk(i)&&i.revert&&Pe(this,By)?{...Pe(this,By),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ls.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Pe(this,gl).notify({query:this,type:"updated",action:e})})},x7);function OMe(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:u$(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function PMe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var oc,C7,LMe=(C7=class extends mw{constructor(e={}){super();Bn(this,oc);this.config=e,hn(this,oc,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??gD(i,n);let a=this.get(s);return a||(a=new kMe({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){Pe(this,oc).has(e.queryHash)||(Pe(this,oc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Pe(this,oc).get(e.queryHash);n&&(e.destroy(),n===e&&Pe(this,oc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ls.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Pe(this,oc).get(e)}getAll(){return[...Pe(this,oc).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>iB(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>iB(e,r)):n}notify(e){Ls.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ls.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ls.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},oc=new WeakMap,C7),lc,wa,dg,uc,rh,R7,NMe=(R7=class extends f${constructor(e){super();Bn(this,uc);Bn(this,lc);Bn(this,wa);Bn(this,dg);this.mutationId=e.mutationId,hn(this,wa,e.mutationCache),hn(this,lc,[]),this.state=e.state||h$(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Pe(this,lc).includes(e)||(Pe(this,lc).push(e),this.clearGcTimeout(),Pe(this,wa).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){hn(this,lc,Pe(this,lc).filter(n=>n!==e)),this.scheduleGc(),Pe(this,wa).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Pe(this,lc).length||(this.state.status==="pending"?this.scheduleGc():Pe(this,wa).remove(this))}continue(){var e;return((e=Pe(this,dg))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,a,o,l,c,f,p,m,_,y,E,S,w,R,C,k,M,N,O;hn(this,dg,d$({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(D,L)=>{xi(this,uc,rh).call(this,{type:"failed",failureCount:D,error:L})},onPause:()=>{xi(this,uc,rh).call(this,{type:"pause"})},onContinue:()=>{xi(this,uc,rh).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Pe(this,wa).canRun(this)}));const n=this.state.status==="pending",r=!Pe(this,dg).canStart();try{if(!n){xi(this,uc,rh).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=Pe(this,wa).config).onMutate)==null?void 0:s.call(i,e,this));const L=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e));L!==this.state.context&&xi(this,uc,rh).call(this,{type:"pending",context:L,variables:e,isPaused:r})}const D=await Pe(this,dg).start();return await((c=(l=Pe(this,wa).config).onSuccess)==null?void 0:c.call(l,D,e,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,D,e,this.state.context)),await((_=(m=Pe(this,wa).config).onSettled)==null?void 0:_.call(m,D,null,this.state.variables,this.state.context,this)),await((E=(y=this.options).onSettled)==null?void 0:E.call(y,D,null,e,this.state.context)),xi(this,uc,rh).call(this,{type:"success",data:D}),D}catch(D){try{throw await((w=(S=Pe(this,wa).config).onError)==null?void 0:w.call(S,D,e,this.state.context,this)),await((C=(R=this.options).onError)==null?void 0:C.call(R,D,e,this.state.context)),await((M=(k=Pe(this,wa).config).onSettled)==null?void 0:M.call(k,void 0,D,this.state.variables,this.state.context,this)),await((O=(N=this.options).onSettled)==null?void 0:O.call(N,void 0,D,e,this.state.context)),D}finally{xi(this,uc,rh).call(this,{type:"error",error:D})}}finally{Pe(this,wa).runNext(this)}}},lc=new WeakMap,wa=new WeakMap,dg=new WeakMap,uc=new WeakSet,rh=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ls.batch(()=>{Pe(this,lc).forEach(r=>{r.onMutationUpdate(e)}),Pe(this,wa).notify({mutation:this,type:"updated",action:e})})},R7);function h$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Cd,ou,V1,M7,DMe=(M7=class extends mw{constructor(e={}){super();Bn(this,Cd);Bn(this,ou);Bn(this,V1);this.config=e,hn(this,Cd,new Set),hn(this,ou,new Map),hn(this,V1,0)}build(e,n,r){const i=new NMe({mutationCache:this,mutationId:++HT(this,V1)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){Pe(this,Cd).add(e);const n=_x(e);if(typeof n=="string"){const r=Pe(this,ou).get(n);r?r.push(e):Pe(this,ou).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Pe(this,Cd).delete(e)){const n=_x(e);if(typeof n=="string"){const r=Pe(this,ou).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Pe(this,ou).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=_x(e);if(typeof n=="string"){const r=Pe(this,ou).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=_x(e);if(typeof n=="string"){const i=(r=Pe(this,ou).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ls.batch(()=>{Pe(this,Cd).forEach(e=>{this.notify({type:"removed",mutation:e})}),Pe(this,Cd).clear(),Pe(this,ou).clear()})}getAll(){return Array.from(Pe(this,Cd))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>sB(n,r))}findAll(e={}){return this.getAll().filter(n=>sB(e,n))}notify(e){Ls.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ls.batch(()=>Promise.all(e.map(n=>n.continue().catch(su))))}},Cd=new WeakMap,ou=new WeakMap,V1=new WeakMap,M7);function _x(t){var e;return(e=t.options.scope)==null?void 0:e.id}function lB(t){return{onFetch:(e,n)=>{var f,p,m,_,y;const r=e.options,i=(m=(p=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:m.direction,s=((_=e.state.data)==null?void 0:_.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let E=!1;const S=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},w=o$(e.options,e.fetchOptions),R=async(C,k,M)=>{if(E)return Promise.reject();if(k==null&&C.pages.length)return Promise.resolve(C);const N={queryKey:e.queryKey,pageParam:k,direction:M?"backward":"forward",meta:e.options.meta};S(N);const O=await w(N),{maxPages:D}=e.options,L=M?xMe:TMe;return{pages:L(C.pages,O,D),pageParams:L(C.pageParams,k,D)}};if(i&&s.length){const C=i==="backward",k=C?UMe:uB,M={pages:s,pageParams:a},N=k(r,M);o=await R(M,N,C)}else{const C=t??s.length;do{const k=l===0?a[0]??r.initialPageParam:uB(r,o);if(l>0&&k==null)break;o=await R(o,k),l++}while(l<C)}return o};e.options.persister?e.fetchFn=()=>{var E,S;return(S=(E=e.options).persister)==null?void 0:S.call(E,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function uB(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function UMe(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var _i,bh,wh,zy,jy,Th,Hy,Vy,A7,FMe=(A7=class{constructor(t={}){Bn(this,_i);Bn(this,bh);Bn(this,wh);Bn(this,zy);Bn(this,jy);Bn(this,Th);Bn(this,Hy);Bn(this,Vy);hn(this,_i,t.queryCache||new LMe),hn(this,bh,t.mutationCache||new DMe),hn(this,wh,t.defaultOptions||{}),hn(this,zy,new Map),hn(this,jy,new Map),hn(this,Th,0)}mount(){HT(this,Th)._++,Pe(this,Th)===1&&(hn(this,Hy,l$.subscribe(async t=>{t&&(await this.resumePausedMutations(),Pe(this,_i).onFocus())})),hn(this,Vy,AR.subscribe(async t=>{t&&(await this.resumePausedMutations(),Pe(this,_i).onOnline())})))}unmount(){var t,e;HT(this,Th)._--,Pe(this,Th)===0&&((t=Pe(this,Hy))==null||t.call(this),hn(this,Hy,void 0),(e=Pe(this,Vy))==null||e.call(this),hn(this,Vy,void 0))}isFetching(t){return Pe(this,_i).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Pe(this,bh).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Pe(this,_i).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Pe(this,_i).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(rB(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Pe(this,_i).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=Pe(this,_i).get(r.queryHash),s=i==null?void 0:i.state.data,a=_Me(e,s);if(a!==void 0)return Pe(this,_i).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Ls.batch(()=>Pe(this,_i).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Pe(this,_i).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Pe(this,_i);Ls.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Pe(this,_i),r={type:"active",...t};return Ls.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ls.batch(()=>Pe(this,_i).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(su).catch(su)}invalidateQueries(t,e={}){return Ls.batch(()=>{if(Pe(this,_i).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none")return Promise.resolve();const n={...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ls.batch(()=>Pe(this,_i).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(su)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(su)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Pe(this,_i).build(this,e);return n.isStaleByTime(rB(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(su).catch(su)}fetchInfiniteQuery(t){return t.behavior=lB(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(su).catch(su)}ensureInfiniteQueryData(t){return t.behavior=lB(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return AR.isOnline()?Pe(this,bh).resumePausedMutations():Promise.resolve()}getQueryCache(){return Pe(this,_i)}getMutationCache(){return Pe(this,bh)}getDefaultOptions(){return Pe(this,wh)}setDefaultOptions(t){hn(this,wh,t)}setQueryDefaults(t,e){Pe(this,zy).set(zg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Pe(this,zy).values()],n={};return e.forEach(r=>{C1(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Pe(this,jy).set(zg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Pe(this,jy).values()];let n={};return e.forEach(r=>{C1(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Pe(this,wh).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=gD(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_D&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Pe(this,wh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Pe(this,_i).clear(),Pe(this,bh).clear()}},_i=new WeakMap,bh=new WeakMap,wh=new WeakMap,zy=new WeakMap,jy=new WeakMap,Th=new WeakMap,Hy=new WeakMap,Vy=new WeakMap,A7),xh,Ch,ro,Rd,$d,EC,zP,I7,BMe=(I7=class extends mw{constructor(n,r){super();Bn(this,$d);Bn(this,xh);Bn(this,Ch);Bn(this,ro);Bn(this,Rd);hn(this,xh,n),this.setOptions(r),this.bindMethods(),xi(this,$d,EC).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=Pe(this,xh).defaultMutationOptions(n),SMe(this.options,r)||Pe(this,xh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Pe(this,ro),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&zg(r.mutationKey)!==zg(this.options.mutationKey)?this.reset():((i=Pe(this,ro))==null?void 0:i.state.status)==="pending"&&Pe(this,ro).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Pe(this,ro))==null||n.removeObserver(this)}onMutationUpdate(n){xi(this,$d,EC).call(this),xi(this,$d,zP).call(this,n)}getCurrentResult(){return Pe(this,Ch)}reset(){var n;(n=Pe(this,ro))==null||n.removeObserver(this),hn(this,ro,void 0),xi(this,$d,EC).call(this),xi(this,$d,zP).call(this)}mutate(n,r){var i;return hn(this,Rd,r),(i=Pe(this,ro))==null||i.removeObserver(this),hn(this,ro,Pe(this,xh).getMutationCache().build(Pe(this,xh),this.options)),Pe(this,ro).addObserver(this),Pe(this,ro).execute(n)}},xh=new WeakMap,Ch=new WeakMap,ro=new WeakMap,Rd=new WeakMap,$d=new WeakSet,EC=function(){var r;const n=((r=Pe(this,ro))==null?void 0:r.state)??h$();hn(this,Ch,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},zP=function(n){Ls.batch(()=>{var r,i,s,a,o,l,c,f;if(Pe(this,Rd)&&this.hasListeners()){const p=Pe(this,Ch).variables,m=Pe(this,Ch).context;(n==null?void 0:n.type)==="success"?((i=(r=Pe(this,Rd)).onSuccess)==null||i.call(r,n.data,p,m),(a=(s=Pe(this,Rd)).onSettled)==null||a.call(s,n.data,null,p,m)):(n==null?void 0:n.type)==="error"&&((l=(o=Pe(this,Rd)).onError)==null||l.call(o,n.error,p,m),(f=(c=Pe(this,Rd)).onSettled)==null||f.call(c,void 0,n.error,p,m))}this.listeners.forEach(p=>{p(Pe(this,Ch))})})},I7),p$=P.createContext(void 0),zMe=t=>{const e=P.useContext(p$);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},jMe=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),U.jsx(p$.Provider,{value:t,children:e}));function HMe(t,e){return typeof t=="function"?t(...e):!!t}function VMe(){}function I0(t,e){const n=zMe(),[r]=P.useState(()=>new BMe(n,t));P.useEffect(()=>{r.setOptions(t)},[r,t]);const i=P.useSyncExternalStore(P.useCallback(a=>r.subscribe(Ls.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=P.useCallback((a,o)=>{r.mutate(a,o).catch(VMe)},[r]);if(i.error&&HMe(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const GMe=({children:t})=>{const{getIdToken:e}=En();Dn.BASE="/api",Dn.HEADERS=async()=>({Authorization:`Bearer ${await e()}`,"Client-Name":nA});const n=new FMe({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}});return U.jsx(jMe,{client:n,children:t})};var jP=(t=>(t.LOCAL="local",t.DEV="dev",t.PROD="prod",t))(jP||{});const m$=P.createContext(void 0),$Me=({children:t,...e})=>{const{sesameEnv:n,statSigKey:r}=e,[i,s]=P.useState(void 0),a=P.useCallback(async o=>{i==null&&(await o.initialize(n,r),s(o))},[i,n,r]);return P.useEffect(()=>{if(i==null){const o=new kCe;a(o)}},[r,a,i]),U.jsx(m$.Provider,{value:i,children:t})};function MA(){return P.useContext(m$)}const g$=Fe.createContext(void 0),WMe=({children:t,environmentConfig:e})=>{const[n,r]=Fe.useState(void 0),i=MA();Fe.useEffect(()=>{if(i!=null&&n==null){const o=e.name!==jP.DEV&&e.name!==jP.PROD?new OCe:new NP(e.name,nA,v9,e.clientBuildNumber??0),l=i.getConfig(eg.DATADOG_CONFIG);o.initialize({datadogClientToken:e.datadogRumKey,baseUrl:e.baseUrl,enableDatadog:l.logs_enabled,sessionSampleRate:l.log_session_sample_rate,enableErrorTracking:l.enable_error_tracking}).then(()=>{r(o)}).catch(c=>{console.error("Failed to initialize logger:",c)})}},[e,i,n]);const s=P.useMemo(()=>({logger:n}),[n]);return U.jsx(g$.Provider,{value:s,children:t})},AA=()=>{const t=P.useContext(g$);if(!t)throw new Error("useLogManager must be used within a LogManagerProvider");return t},_$=P.createContext(void 0);function qMe(){return P.useContext(_$)}const XMe=({children:t,environmentConfig:e,app:n})=>{const[r,i]=P.useState(void 0),{logger:s}=AA();return P.useEffect(()=>{if(s&&!r){let a;n?a=new nMe(n,s):a=new rMe,e.recaptchaSiteKey?a.initialize(e.recaptchaSiteKey).then(()=>{i(a)}):i(a)}},[e,r,n,s]),U.jsx(_$.Provider,{value:r,children:t})};function IA(t){const e=P.useRef(void 0);return P.useEffect(()=>{e.current=t},[t]),e.current}const KMe={webClient:void 0,maybeInitClient:()=>{},release:()=>{}};class YMe{constructor(){kt(this,"sesameWebClient")}getSesameWebClient(){return this.sesameWebClient}}const ZMe=new YMe,gw=P.createContext(KMe),JMe=({children:t,...e})=>{const n=MA(),r=qMe(),{sesameApiUrl:i,sesameEnv:s,firebaseConfig:a,rudderstackWriteKey:o,datadogClientToken:l,datadogRumClientToken:c,datadogRumApplicationId:f}=e,[p,m]=P.useState(void 0),_=En(D=>D.firebaseUser),y=_!=null&&_.isAnonymous===!1,{logger:E}=AA(),S=P.useCallback(D=>{m(D),ZMe.sesameWebClient=D},[]),w=P.useCallback(async()=>{if(p!=null){const D=p.getSession();await(D==null?void 0:D.disconnect())}S(void 0),M(!1)},[p,S]),R=P.useCallback(async()=>{await w()},[w]),C=IA(y);P.useEffect(()=>{y!==C&&(E==null||E.info(`SesameWebClientProvider releasing web client because auth state changed. isFirebaseUserLoggedIn: ${y}, wasFirebaseUserLoggedIn: ${C}`),R())},[y,C,R,E]);const[k,M]=P.useState(!1),N=P.useCallback(async D=>{p==null&&(await D.init(),S(D))},[p,S]);P.useEffect(()=>{if(n==null)return;const D=lf.getAnalyticsManager();if(p==null&&k&&D!=null&&E!=null&&r!=null){const L=new sCe({name:s,baseUrl:i,firebaseConfig:a,datadogKey:l,datadogRumKey:c,datadogRumAppId:f,rudderstackWriteKey:o},nA,n,D,E,r);N(L)}},[l,c,f,a,o,s,m,i,N,n,p,k,E,r]);const O=P.useCallback(()=>{M(!0)},[]);return U.jsx(gw.Provider,{value:{webClient:p,maybeInitClient:O,release:w},children:t})},HP={apiKey:"AIzaSyDtC7Uwb5pGAsdmrH2T4Gqdk5Mga07jYPM",authDomain:"app.sesame.com",projectId:"sesame-ai-demo",storageBucket:"sesame-ai-demo.firebasestorage.app",messagingSenderId:"1072000975600",appId:"1:1072000975600:web:75b0bf3a9bb8d92e767835"},SC={name:"prod",baseUrl:"https://sesameai.app",firebaseConfig:HP,datadogKey:"pubc6988a80d0b195496943ccc888005970",datadogRumKey:"pubdd980a347a9e4fe18c474b1aa7e40e99",datadogRumAppId:"8d4f492d-f4b0-4237-9e00-c6aec780b500",rudderstackWriteKey:"2wpiqnS6W3104MQz7mwfyQjME6d",statSigKey:"client-TGCzyFkjJ0ZvNupjjxCKPpxPEO8WdmZjQhxLgJlgM6H",recaptchaSiteKey:"6LcBG2ArAAAAANSlSl82BWSfAK9SFPSDeAIPKP_l",clientBuildNumber:parseInt("58",10)},QMe=({children:t})=>{const e=MA();return P.useLayoutEffect(()=>{En.getState().initialize(!1)},[]),P.useLayoutEffect(()=>{e!=null&&lf.init(SC,e)},[e]),t},eAe=({children:t})=>{const e="prod",n="client-TGCzyFkjJ0ZvNupjjxCKPpxPEO8WdmZjQhxLgJlgM6H",r="https://sesameai.app",i="2wpiqnS6W3104MQz7mwfyQjME6d",s="pubc6988a80d0b195496943ccc888005970",a="pubdd980a347a9e4fe18c474b1aa7e40e99",o="8d4f492d-f4b0-4237-9e00-c6aec780b500",l=P.useMemo(()=>$N(HP),[]);return P.useEffect(()=>{DV.initialize("G-ZZLPJBMBEN")},[]),U.jsx($Me,{sesameEnv:e,statSigKey:n,children:U.jsx(WMe,{environmentConfig:SC,children:U.jsx(XMe,{app:l,environmentConfig:SC,children:U.jsx(JMe,{datadogClientToken:s,datadogRumApplicationId:o,datadogRumClientToken:a,firebaseConfig:HP,recaptchaSiteKey:SC.recaptchaSiteKey,rudderstackWriteKey:i,sesameApiUrl:r,sesameEnv:e,children:U.jsx(QMe,{children:t})})})})})},v$=Fe.createContext(null),tAe=({children:t})=>{const[e,n]=P.useState(""),[r,i]=P.useState(""),[s,a]=P.useState(null),[o,l]=P.useState(!1),[c,f]=P.useState(1),p=P.useMemo(()=>({setNickname:n,nickname:e,setBirthDate:i,birthDate:r,setStep:f,step:c,gender:s,setGender:a,isTextInputFocused:o,setIsTextInputFocused:l}),[e,r,c,s,o]);return U.jsx(v$.Provider,{value:p,children:t})},ap=()=>{const t=P.useContext(v$);if(!t)throw new Error("useNux must be used within a NuxProvider");return t},nt={unavailableMessage:"Sorry, {character} couldnt pick up the call. Please call back later.",micInputNotDetected:"Microphone input not detected. Please refresh your browser.",callDropped:"The call failed. Please try again later.",poorConnection:"Network latency may be affecting your call. If possible, try switching to a better connection.",microphoneAccessDenied:"Unable to request microphone permission, please update your browser system settings to enable.",backgroundCallEnded:"Call ended by closing or minimizing browser, feel free to call back!",warnSafari175:"This browser version (17.5) may result in degraded audio quality.",videoFailed:"Failed to download clip.",defaultErrorMessage:"Something went wrong",microphoneAccessPrompt:"To chat with {character}, please allow us to use your microphone.",connecting:"Connecting to {character}...",webglUnavailable:"WebGL is unavailable for animation.",webglContextLost:"WebGL is unavailable for animation.",endCall:"End call",mute:"Mute",unmute:"Unmute",downloadClip:"Download clip",downloadNow:"Download now",preparingClip:"Preparing clip... ",skip:"Skip",submit:"Submit",done:"Done",maya:"Maya",miles:"Miles",cancel:"Cancel",confirm:"Confirm",continue:"Continue",googleLoginButtonLabel:"Continue with Google",appleLoginButtonLabel:"Continue with Apple",googleLoginButtonLabelShort:"With Google",appleLoginButtonLabelShort:"With Apple",skipLoginButtonLabel:"Skip to try 5 min sessions",logIn:"Log in",logInPageHeader:"Log in for a more personalized experience",logInPageSubtext:"Includes long-term memory, access to new features, and 30 minute sessions.",logInPageSubtextLinkCredential:"An account already exists for {email}. Press Continue to link your account.",accountModalHeader:"Your Account",accountModalLogoutButton:"Log out",accountModalNameLabel:"What should we call you?",accountModalAllowTraining:"Improve the model for everyone",accountModalAllowTrainingSubtext:"Allow your calls to be used to train our models which makes Sesame better for you and everyone who uses Sesame.",accountModalEmailUpdatesLabel:"Email me about product updates and news",accountModalDeleteAccountButtonLabel:"Delete account",accountModalCloseButtonA11yLabel:"Close",accountModalLoggedInAs:"Logged in as",accountModalAvatarA11yLabel:"User avatar",postCallStarRatingLabel:"How was your conversation?",postCallFeedbackSubmittedHeader:"Thank you for your feedback!",postCallFeedbackSubmittedSubtext:"Sesame is working on improving your experience.",postCallThankYou:"Thank you for talking to {character}",postCallShareMore:"Share more",postCallContinue:"Continue to the next conversation",postCallFreeFormFeedbackHeader:"What went well? How can we improve?",postCallFreeFormFeedbackTextInputHint:"Type your answer here",loggedOutPostCallHeader:"Log in for longer calls",sesame:"Sesame",callHeaderSubtitle:"by sesame",nuxHeadingStep1:"Welcome",nuxHeadingStep2:"Hi {nickname}, what is your birthday?",nuxHeadingStep3:"What is your gender?",nuxNicknamePlaceholder:"What should we call you?",nuxBirthdayYearPlaceholder:"yyyy",nuxBirthdayMonthPlaceholder:"mm",nuxBirthdayDayPlaceholder:"dd",nuxSkipForNow:"Skip for now",nuxNicknameExplanation:"A nickname helps keep the chat natural and personal.",nuxBirthdayExplanation:"Your age helps us adjust the conversation to better suit you.",nicknameMaxLengthError:"Maximum 50 characters allowed.",nuxBirthdayExplanation2:"Your information stays private.",nuxBirthdayAgeError:"You must be at least 13 years old to log into Sesame.",nuxBirthdayDateError:"Please enter a valid date.",nuxGenderExplanation:"We ask for your gender to help us improve Sesame for everyone.",nuxGenderMALE:"Man",nuxGenderFEMALE:"Woman",nuxGenderNON_BINARY:"Non-binary",nuxGenderPREFERENCE_NOT_TO_SAY:"Prefer not to say",nuxCompleteOnboarding:"Finish",nuxAgreeToTerms:"By registering, you agree to Sesame's Terms of Use and Privacy Policy.",nuxStartOver:"Start over",beforeUnloadCallConnectedMessage:"Are you sure? This will end your call.",navigateEndCallConfirmationAlertTitle:"Are you sure?",navigateEndCallConfirmationAlertBody:"Leaving this page will end the call.",deleteAccountConfirmationAlertTitle:"Are you sure you want to delete your account?",deleteAccountConfirmationAlertBody:"Deleting your account will permanently erase all your Sesame data and cannot be reversed.",deleteAccountConfirmationAlertConfirmLabel:"Delete account",deleteAccountFailureAlertBody:"Failed to delete account. Please try again later.",homeGreetingMorning:"Morning, {nickname}",homeGreetingAfternoon:"Afternoon, {nickname}",homeGreetingEvening:"Evening, {nickname}",termsOfUseLoggedOutCall:"By using our services, you agree to Sesame's [Terms of Use](termsOfUse) and [Privacy Policy](privacyPolicy).",termsOfUserAccountRegistration:"By registering, you agree to Sesame's [Terms of Use](termsOfUse) and [Privacy Policy](privacyPolicy).",notFoundPageHeader:"We can't find the page you are looking for.",notFoundPageButtonLabel:"Back to home",errorPageHeader:"Something went wrong",callId:"Call ID: {callId}",copyToClipboard:"Click to copy",copied:"Copied!"};function y$(t){return t.gender!=null&&t.gender.trim().length>0&&t.birthday!=null&&t.birthday.trim().length>0}const Qd="/",R1="/login",hy="/onboarding";var AS={},cB;function nAe(){if(cB)return AS;cB=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.parse=a,AS.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function a(m,_){const y=new s,E=m.length;if(E<2)return y;const S=(_==null?void 0:_.decode)||f;let w=0;do{const R=m.indexOf("=",w);if(R===-1)break;const C=m.indexOf(";",w),k=C===-1?E:C;if(R>k){w=m.lastIndexOf(";",R-1)+1;continue}const M=o(m,w,R),N=l(m,R,M),O=m.slice(M,N);if(y[O]===void 0){let D=o(m,R+1,k),L=l(m,k,D);const B=S(m.slice(D,L));y[O]=B}w=k+1}while(w<E);return y}function o(m,_,y){do{const E=m.charCodeAt(_);if(E!==32&&E!==9)return _}while(++_<y);return y}function l(m,_,y){for(;_>y;){const E=m.charCodeAt(--_);if(E!==32&&E!==9)return _+1}return y}function c(m,_,y){const E=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(m))throw new TypeError(`argument name is invalid: ${m}`);const S=E(_);if(!e.test(S))throw new TypeError(`argument val is invalid: ${_}`);let w=m+"="+S;if(!y)return w;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);w+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);w+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);w+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);w+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(w+="; HttpOnly"),y.secure&&(w+="; Secure"),y.partitioned&&(w+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return w}function f(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function p(m){return i.call(m)==="[object Date]"}return AS}nAe();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var E$=t=>{throw TypeError(t)},rAe=(t,e,n)=>e.has(t)||E$("Cannot "+n),Mk=(t,e,n)=>(rAe(t,e,"read from private field"),n?n.call(t):e.get(t)),iAe=(t,e,n)=>e.has(t)?E$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),dB="popstate";function sAe(t={}){function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return M1("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:op(i)}return oAe(e,n,null,t)}function In(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ni(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aAe(){return Math.random().toString(36).substring(2,10)}function fB(t,e){return{usr:t.state,key:t.key,idx:e}}function M1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ep(e):e,state:n,key:e&&e.key||r||aAe()}}function op({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ep(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function oAe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=f();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function f(){return(a.state||{idx:null}).idx}function p(){o="POP";let S=f(),w=S==null?null:S-c;c=S,l&&l({action:o,location:E.location,delta:w})}function m(S,w){o="PUSH";let R=M1(E.location,S,w);c=f()+1;let C=fB(R,c),k=E.createHref(R);try{a.pushState(C,"",k)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(k)}s&&l&&l({action:o,location:E.location,delta:1})}function _(S,w){o="REPLACE";let R=M1(E.location,S,w);c=f();let C=fB(R,c),k=E.createHref(R);a.replaceState(C,"",k),s&&l&&l({action:o,location:E.location,delta:0})}function y(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof S=="string"?S:op(S);return R=R.replace(/ $/,"%20"),In(w,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,w)}let E={get action(){return o},get location(){return t(i,a)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(dB,p),l=S,()=>{i.removeEventListener(dB,p),l=null}},createHref(S){return e(i,S)},createURL:y,encodeLocation(S){let w=y(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:_,go(S){return a.go(S)}};return E}var ab,hB=class{constructor(t){if(iAe(this,ab,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(Mk(this,ab).has(t))return Mk(this,ab).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){Mk(this,ab).set(t,e)}};ab=new WeakMap;var pB=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","unstable_lazyMiddleware","children"]);function lAe(t){return t.index===!0}function IR(t,e,n=[],r={}){return t.map((i,s)=>{let a=[...n,String(s)],o=typeof i.id=="string"?i.id:a.join("-");if(In(i.index!==!0||!i.children,"Cannot specify children on an index route"),In(!r[o],`Found a route id collision on id "${o}".  Route id's must be globally unique within Data Router usages`),lAe(i)){let l={...i,...e(i),id:o};return r[o]=l,l}else{let l={...i,...e(i),id:o,children:void 0};return r[o]=l,i.children&&(l.children=IR(i.children,e,a,r)),l}})}function vh(t,e,n="/"){return bC(t,e,n,!1)}function bC(t,e,n,r){let i=typeof e=="string"?Ep(e):e,s=Dl(i.pathname||"/",n);if(s==null)return null;let a=S$(t);cAe(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=SAe(s);o=yAe(a[l],c,r)}return o}function uAe(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function S$(t,e=[],n=[],r=""){let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(In(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=wc([r,l.relativePath]),f=n.concat(l);s.children&&s.children.length>0&&(In(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),S$(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:_Ae(c,s.index),routesMeta:f})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of b$(s.path))i(s,a,l)}),e}function b$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=b$(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function cAe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vAe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var dAe=/^:[\w-]+$/,fAe=3,hAe=2,pAe=1,mAe=10,gAe=-2,mB=t=>t==="*";function _Ae(t,e){let n=t.split("/"),r=n.length;return n.some(mB)&&(r+=gAe),e&&(r+=hAe),n.filter(i=>!mB(i)).reduce((i,s)=>i+(dAe.test(s)?fAe:s===""?pAe:mAe),r)}function vAe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function yAe(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=kR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),m=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=kR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:wc([s,p.pathname]),pathnameBase:TAe(wc([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=wc([s,p.pathnameBase]))}return a}function kR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=EAe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:f,isOptional:p},m)=>{if(f==="*"){let y=o[m]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const _=o[m];return p&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function EAe(t,e=!1,n=!0){Ni(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function SAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ni(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Dl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bAe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ep(t):t;return{pathname:n?n.startsWith("/")?n:wAe(n,e):e,search:xAe(r),hash:CAe(i)}}function wAe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ak(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kA(t){let e=w$(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function OA(t,e,n,r=!1){let i;typeof t=="string"?i=Ep(t):(i={...t},In(!i.pathname||!i.pathname.includes("?"),Ak("?","pathname","search",i)),In(!i.pathname||!i.pathname.includes("#"),Ak("#","pathname","hash",i)),In(!i.search||!i.search.includes("#"),Ak("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}o=p>=0?e[p]:"/"}let l=bAe(i,o),c=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}var wc=t=>t.join("/").replace(/\/\/+/g,"/"),TAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,OR=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function A1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var T$=["POST","PUT","PATCH","DELETE"],RAe=new Set(T$),MAe=["GET",...T$],AAe=new Set(MAe),IAe=new Set([301,302,303,307,308]),kAe=new Set([307,308]),Ik={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},OAe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IS={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PAe=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),x$="remix-router-transitions",C$=Symbol("ResetLoaderData");function LAe(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";In(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.mapRouteProperties||PAe,i={},s=IR(t.routes,r,void 0,i),a,o=t.basename||"/",l=t.dataStrategy||jAe,c={unstable_middleware:!1,...t.future},f=null,p=new Set,m=null,_=null,y=null,E=t.hydrationData!=null,S=vh(s,t.history.location,o),w=!1,R=null;if(S==null&&!t.patchRoutesOnNavigation){let oe=_l(404,{pathname:t.history.location.pathname}),{matches:he,route:Ce}=MB(s);S=he,R={[Ce.id]:oe}}S&&!t.hydrationData&&ht(S,s,t.history.location.pathname).active&&(S=null);let C;if(S)if(S.some(oe=>oe.route.lazy))C=!1;else if(!S.some(oe=>oe.route.loader))C=!0;else{let oe=t.hydrationData?t.hydrationData.loaderData:null,he=t.hydrationData?t.hydrationData.errors:null;if(he){let Ce=S.findIndex(Ve=>he[Ve.route.id]!==void 0);C=S.slice(0,Ce+1).every(Ve=>!GP(Ve.route,oe,he))}else C=S.every(Ce=>!GP(Ce.route,oe,he))}else{C=!1,S=[];let oe=ht(null,s,t.history.location.pathname);oe.active&&oe.matches&&(w=!0,S=oe.matches)}let k,M={historyAction:t.history.action,location:t.history.location,matches:S,initialized:C,navigation:Ik,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||R,fetchers:new Map,blockers:new Map},N="POP",O=!1,D,L=!1,B=new Map,ee=null,te=!1,ne=!1,H=new Set,V=new Map,W=0,J=-1,X=new Map,ie=new Set,pe=new Map,Z=new Map,le=new Set,ae=new Map,Ee,ke=null;function $e(){if(f=t.history.listen(({action:oe,location:he,delta:Ce})=>{if(Ee){Ee(),Ee=void 0;return}Ni(ae.size===0||Ce!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ve=an({currentLocation:M.location,nextLocation:he,historyAction:oe});if(Ve&&Ce!=null){let dt=new Promise(zt=>{Ee=zt});t.history.go(Ce*-1),Yt(Ve,{state:"blocked",location:he,proceed(){Yt(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),dt.then(()=>t.history.go(Ce))},reset(){let zt=new Map(M.blockers);zt.set(Ve,IS),ot({blockers:zt})}});return}return ue(oe,he)}),n){QAe(e,B);let oe=()=>eIe(e,B);e.addEventListener("pagehide",oe),ee=()=>e.removeEventListener("pagehide",oe)}return M.initialized||ue("POP",M.location,{initialHydration:!0}),k}function Le(){f&&f(),ee&&ee(),p.clear(),D&&D.abort(),M.fetchers.forEach((oe,he)=>st(he)),M.blockers.forEach((oe,he)=>wt(he))}function We(oe){return p.add(oe),()=>p.delete(oe)}function ot(oe,he={}){M={...M,...oe};let Ce=[],Ve=[];M.fetchers.forEach((dt,zt)=>{dt.state==="idle"&&(le.has(zt)?Ce.push(zt):Ve.push(zt))}),le.forEach(dt=>{!M.fetchers.has(dt)&&!V.has(dt)&&Ce.push(dt)}),[...p].forEach(dt=>dt(M,{deletedFetchers:Ce,viewTransitionOpts:he.viewTransitionOpts,flushSync:he.flushSync===!0})),Ce.forEach(dt=>st(dt)),Ve.forEach(dt=>M.fetchers.delete(dt))}function Mt(oe,he,{flushSync:Ce}={}){var mt,Bt;let Ve=M.actionData!=null&&M.navigation.formMethod!=null&&lu(M.navigation.formMethod)&&M.navigation.state==="loading"&&((mt=oe.state)==null?void 0:mt._isRedirect)!==!0,dt;he.actionData?Object.keys(he.actionData).length>0?dt=he.actionData:dt=null:Ve?dt=M.actionData:dt=null;let zt=he.loaderData?CB(M.loaderData,he.loaderData,he.matches||[],he.errors):M.loaderData,Gt=M.blockers;Gt.size>0&&(Gt=new Map(Gt),Gt.forEach((qt,On)=>Gt.set(On,IS)));let At=O===!0||M.navigation.formMethod!=null&&lu(M.navigation.formMethod)&&((Bt=oe.state)==null?void 0:Bt._isRedirect)!==!0;a&&(s=a,a=void 0),te||N==="POP"||(N==="PUSH"?t.history.push(oe,oe.state):N==="REPLACE"&&t.history.replace(oe,oe.state));let Ft;if(N==="POP"){let qt=B.get(M.location.pathname);qt&&qt.has(oe.pathname)?Ft={currentLocation:M.location,nextLocation:oe}:B.has(oe.pathname)&&(Ft={currentLocation:oe,nextLocation:M.location})}else if(L){let qt=B.get(M.location.pathname);qt?qt.add(oe.pathname):(qt=new Set([oe.pathname]),B.set(M.location.pathname,qt)),Ft={currentLocation:M.location,nextLocation:oe}}ot({...he,actionData:dt,loaderData:zt,historyAction:N,location:oe,initialized:!0,navigation:Ik,revalidation:"idle",restoreScrollPosition:ze(oe,he.matches||M.matches),preventScrollReset:At,blockers:Gt},{viewTransitionOpts:Ft,flushSync:Ce===!0}),N="POP",O=!1,L=!1,te=!1,ne=!1,ke==null||ke.resolve(),ke=null}async function Wt(oe,he){if(typeof oe=="number"){t.history.go(oe);return}let Ce=VP(M.location,M.matches,o,oe,he==null?void 0:he.fromRouteId,he==null?void 0:he.relative),{path:Ve,submission:dt,error:zt}=gB(!1,Ce,he),Gt=M.location,At=M1(M.location,Ve,he&&he.state);At={...At,...t.history.encodeLocation(At)};let Ft=he&&he.replace!=null?he.replace:void 0,mt="PUSH";Ft===!0?mt="REPLACE":Ft===!1||dt!=null&&lu(dt.formMethod)&&dt.formAction===M.location.pathname+M.location.search&&(mt="REPLACE");let Bt=he&&"preventScrollReset"in he?he.preventScrollReset===!0:void 0,qt=(he&&he.flushSync)===!0,On=an({currentLocation:Gt,nextLocation:At,historyAction:mt});if(On){Yt(On,{state:"blocked",location:At,proceed(){Yt(On,{state:"proceeding",proceed:void 0,reset:void 0,location:At}),Wt(oe,he)},reset(){let Tr=new Map(M.blockers);Tr.set(On,IS),ot({blockers:Tr})}});return}await ue(mt,At,{submission:dt,pendingError:zt,preventScrollReset:Bt,replace:he&&he.replace,enableViewTransition:he&&he.viewTransition,flushSync:qt})}function ir(){ke||(ke=tIe()),Ue(),ot({revalidation:"loading"});let oe=ke.promise;return M.navigation.state==="submitting"?oe:M.navigation.state==="idle"?(ue(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),oe):(ue(N||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:L===!0}),oe)}async function ue(oe,he,Ce){D&&D.abort(),D=null,N=oe,te=(Ce&&Ce.startUninterruptedRevalidation)===!0,De(M.location,M.matches),O=(Ce&&Ce.preventScrollReset)===!0,L=(Ce&&Ce.enableViewTransition)===!0;let Ve=a||s,dt=Ce&&Ce.overrideNavigation,zt=Ce!=null&&Ce.initialHydration&&M.matches&&M.matches.length>0&&!w?M.matches:vh(Ve,he,o),Gt=(Ce&&Ce.flushSync)===!0;if(zt&&M.initialized&&!ne&&XAe(M.location,he)&&!(Ce&&Ce.submission&&lu(Ce.submission.formMethod))){Mt(he,{matches:zt},{flushSync:Gt});return}let At=ht(zt,Ve,he.pathname);if(At.active&&At.matches&&(zt=At.matches),!zt){let{error:Ir,notFoundMatches:xr,route:Wr}=er(he.pathname);Mt(he,{matches:xr,loaderData:{},errors:{[Wr.id]:Ir}},{flushSync:Gt});return}D=new AbortController;let Ft=Wv(t.history,he,D.signal,Ce&&Ce.submission),mt=new hB(t.unstable_getContext?await t.unstable_getContext():void 0),Bt;if(Ce&&Ce.pendingError)Bt=[Zm(zt).route.id,{type:"error",error:Ce.pendingError}];else if(Ce&&Ce.submission&&lu(Ce.submission.formMethod)){let Ir=await vn(Ft,he,Ce.submission,zt,mt,At.active,{replace:Ce.replace,flushSync:Gt});if(Ir.shortCircuited)return;if(Ir.pendingActionResult){let[xr,Wr]=Ir.pendingActionResult;if(No(Wr)&&A1(Wr.error)&&Wr.error.status===404){D=null,Mt(he,{matches:Ir.matches,loaderData:{},errors:{[xr]:Wr.error}});return}}zt=Ir.matches||zt,Bt=Ir.pendingActionResult,dt=kk(he,Ce.submission),Gt=!1,At.active=!1,Ft=Wv(t.history,Ft.url,Ft.signal)}let{shortCircuited:qt,matches:On,loaderData:Tr,errors:Ar}=await pn(Ft,he,zt,mt,At.active,dt,Ce&&Ce.submission,Ce&&Ce.fetcherSubmission,Ce&&Ce.replace,Ce&&Ce.initialHydration===!0,Gt,Bt);qt||(D=null,Mt(he,{matches:On||zt,...RB(Bt),loaderData:Tr,errors:Ar}))}async function vn(oe,he,Ce,Ve,dt,zt,Gt={}){Ue();let At=ZAe(he,Ce);if(ot({navigation:At},{flushSync:Gt.flushSync===!0}),zt){let Bt=await lt(Ve,he.pathname,oe.signal);if(Bt.type==="aborted")return{shortCircuited:!0};if(Bt.type==="error"){let qt=Zm(Bt.partialMatches).route.id;return{matches:Bt.partialMatches,pendingActionResult:[qt,{type:"error",error:Bt.error}]}}else if(Bt.matches)Ve=Bt.matches;else{let{notFoundMatches:qt,error:On,route:Tr}=er(he.pathname);return{matches:qt,pendingActionResult:[Tr.id,{type:"error",error:On}]}}}let Ft,mt=ob(Ve,he);if(!mt.route.action&&!mt.route.lazy)Ft={type:"error",error:_l(405,{method:oe.method,pathname:he.pathname,routeId:mt.route.id})};else{let Bt=await j("action",oe,[mt],Ve,dt,null);if(Ft=Bt[mt.route.id],!Ft){for(let qt of Ve)if(Bt[qt.route.id]){Ft=Bt[qt.route.id];break}}if(oe.signal.aborted)return{shortCircuited:!0}}if(rg(Ft)){let Bt;return Gt&&Gt.replace!=null?Bt=Gt.replace:Bt=wB(Ft.response.headers.get("Location"),new URL(oe.url),o)===M.location.pathname+M.location.search,await Y(oe,Ft,!0,{submission:Ce,replace:Bt}),{shortCircuited:!0}}if(No(Ft)){let Bt=Zm(Ve,mt.route.id);return(Gt&&Gt.replace)!==!0&&(N="PUSH"),{matches:Ve,pendingActionResult:[Bt.route.id,Ft]}}return{matches:Ve,pendingActionResult:[mt.route.id,Ft]}}async function pn(oe,he,Ce,Ve,dt,zt,Gt,At,Ft,mt,Bt,qt){let On=zt||kk(he,Gt),Tr=Gt||At||IB(On),Ar=!te&&!mt;if(dt){if(Ar){let ct=Cn(qt);ot({navigation:On,...ct!==void 0?{actionData:ct}:{}},{flushSync:Bt})}let Ze=await lt(Ce,he.pathname,oe.signal);if(Ze.type==="aborted")return{shortCircuited:!0};if(Ze.type==="error"){let ct=Zm(Ze.partialMatches).route.id;return{matches:Ze.partialMatches,loaderData:{},errors:{[ct]:Ze.error}}}else if(Ze.matches)Ce=Ze.matches;else{let{error:ct,notFoundMatches:Zt,route:$t}=er(he.pathname);return{matches:Zt,loaderData:{},errors:{[$t.id]:ct}}}}let Ir=a||s,[xr,Wr]=vB(t.history,M,Ce,Tr,he,mt===!0,ne,H,le,pe,ie,Ir,o,qt);if(J=++W,xr.length===0&&Wr.length===0){let Ze=gt();return Mt(he,{matches:Ce,loaderData:{},errors:qt&&No(qt[1])?{[qt[0]]:qt[1].error}:null,...RB(qt),...Ze?{fetchers:new Map(M.fetchers)}:{}},{flushSync:Bt}),{shortCircuited:!0}}if(Ar){let Ze={};if(!dt){Ze.navigation=On;let ct=Cn(qt);ct!==void 0&&(Ze.actionData=ct)}Wr.length>0&&(Ze.fetchers=ut(Wr)),ot(Ze,{flushSync:Bt})}Wr.forEach(Ze=>{Ut(Ze.key),Ze.controller&&V.set(Ze.key,Ze.controller)});let yo=()=>Wr.forEach(Ze=>Ut(Ze.key));D&&D.signal.addEventListener("abort",yo);let{loaderResults:Ko,fetcherResults:$}=await _e(Ce,xr,Wr,oe,Ve);if(oe.signal.aborted)return{shortCircuited:!0};D&&D.signal.removeEventListener("abort",yo),Wr.forEach(Ze=>V.delete(Ze.key));let ge=vx(Ko);if(ge)return await Y(oe,ge.result,!0,{replace:Ft}),{shortCircuited:!0};if(ge=vx($),ge)return ie.add(ge.key),await Y(oe,ge.result,!0,{replace:Ft}),{shortCircuited:!0};let{loaderData:Te,errors:Me}=xB(M,Ce,Ko,qt,Wr,$);mt&&M.errors&&(Me={...M.errors,...Me});let ce=gt(),Xe=cn(J),pt=ce||Xe||Wr.length>0;return{matches:Ce,loaderData:Te,errors:Me,...pt?{fetchers:new Map(M.fetchers)}:{}}}function Cn(oe){if(oe&&!No(oe[1]))return{[oe[0]]:oe[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function ut(oe){return oe.forEach(he=>{let Ce=M.fetchers.get(he.key),Ve=kS(void 0,Ce?Ce.data:void 0);M.fetchers.set(he.key,Ve)}),new Map(M.fetchers)}async function Qn(oe,he,Ce,Ve){Ut(oe);let dt=(Ve&&Ve.flushSync)===!0,zt=a||s,Gt=VP(M.location,M.matches,o,Ce,he,Ve==null?void 0:Ve.relative),At=vh(zt,Gt,o),Ft=ht(At,zt,Gt);if(Ft.active&&Ft.matches&&(At=Ft.matches),!At){Oe(oe,he,_l(404,{pathname:Gt}),{flushSync:dt});return}let{path:mt,submission:Bt,error:qt}=gB(!0,Gt,Ve);if(qt){Oe(oe,he,qt,{flushSync:dt});return}let On=ob(At,mt),Tr=new hB(t.unstable_getContext?await t.unstable_getContext():void 0),Ar=(Ve&&Ve.preventScrollReset)===!0;if(Bt&&lu(Bt.formMethod)){await Dt(oe,he,mt,On,At,Tr,Ft.active,dt,Ar,Bt);return}pe.set(oe,{routeId:he,path:mt}),await Ie(oe,he,mt,On,At,Tr,Ft.active,dt,Ar,Bt)}async function Dt(oe,he,Ce,Ve,dt,zt,Gt,At,Ft,mt){Ue(),pe.delete(oe);function Bt(Tt){if(!Tt.route.action&&!Tt.route.lazy){let tn=_l(405,{method:mt.formMethod,pathname:Ce,routeId:he});return Oe(oe,he,tn,{flushSync:At}),!0}return!1}if(!Gt&&Bt(Ve))return;let qt=M.fetchers.get(oe);Be(oe,JAe(mt,qt),{flushSync:At});let On=new AbortController,Tr=Wv(t.history,Ce,On.signal,mt);if(Gt){let Tt=await lt(dt,Ce,Tr.signal,oe);if(Tt.type==="aborted")return;if(Tt.type==="error"){Oe(oe,he,Tt.error,{flushSync:At});return}else if(Tt.matches){if(dt=Tt.matches,Ve=ob(dt,Ce),Bt(Ve))return}else{Oe(oe,he,_l(404,{pathname:Ce}),{flushSync:At});return}}V.set(oe,On);let Ar=W,xr=(await j("action",Tr,[Ve],dt,zt,oe))[Ve.route.id];if(Tr.signal.aborted){V.get(oe)===On&&V.delete(oe);return}if(le.has(oe)){if(rg(xr)||No(xr)){Be(oe,ih(void 0));return}}else{if(rg(xr))if(V.delete(oe),J>Ar){Be(oe,ih(void 0));return}else return ie.add(oe),Be(oe,kS(mt)),Y(Tr,xr,!1,{fetcherSubmission:mt,preventScrollReset:Ft});if(No(xr)){Oe(oe,he,xr.error);return}}let Wr=M.navigation.location||M.location,yo=Wv(t.history,Wr,On.signal),Ko=a||s,$=M.navigation.state!=="idle"?vh(Ko,M.navigation.location,o):M.matches;In($,"Didn't find any matches after fetcher action");let ge=++W;X.set(oe,ge);let Te=kS(mt,xr.data);M.fetchers.set(oe,Te);let[Me,ce]=vB(t.history,M,$,mt,Wr,!1,ne,H,le,pe,ie,Ko,o,[Ve.route.id,xr]);ce.filter(Tt=>Tt.key!==oe).forEach(Tt=>{let tn=Tt.key,jn=M.fetchers.get(tn),Hn=kS(void 0,jn?jn.data:void 0);M.fetchers.set(tn,Hn),Ut(tn),Tt.controller&&V.set(tn,Tt.controller)}),ot({fetchers:new Map(M.fetchers)});let Xe=()=>ce.forEach(Tt=>Ut(Tt.key));On.signal.addEventListener("abort",Xe);let{loaderResults:pt,fetcherResults:Ze}=await _e($,Me,ce,yo,zt);if(On.signal.aborted)return;On.signal.removeEventListener("abort",Xe),X.delete(oe),V.delete(oe),ce.forEach(Tt=>V.delete(Tt.key));let ct=vx(pt);if(ct)return Y(yo,ct.result,!1,{preventScrollReset:Ft});if(ct=vx(Ze),ct)return ie.add(ct.key),Y(yo,ct.result,!1,{preventScrollReset:Ft});let{loaderData:Zt,errors:$t}=xB(M,$,pt,void 0,ce,Ze);if(M.fetchers.has(oe)){let Tt=ih(xr.data);M.fetchers.set(oe,Tt)}cn(ge),M.navigation.state==="loading"&&ge>J?(In(N,"Expected pending action"),D&&D.abort(),Mt(M.navigation.location,{matches:$,loaderData:Zt,errors:$t,fetchers:new Map(M.fetchers)})):(ot({errors:$t,loaderData:CB(M.loaderData,Zt,$,$t),fetchers:new Map(M.fetchers)}),ne=!1)}async function Ie(oe,he,Ce,Ve,dt,zt,Gt,At,Ft,mt){let Bt=M.fetchers.get(oe);Be(oe,kS(mt,Bt?Bt.data:void 0),{flushSync:At});let qt=new AbortController,On=Wv(t.history,Ce,qt.signal);if(Gt){let xr=await lt(dt,Ce,On.signal,oe);if(xr.type==="aborted")return;if(xr.type==="error"){Oe(oe,he,xr.error,{flushSync:At});return}else if(xr.matches)dt=xr.matches,Ve=ob(dt,Ce);else{Oe(oe,he,_l(404,{pathname:Ce}),{flushSync:At});return}}V.set(oe,qt);let Tr=W,Ir=(await j("loader",On,[Ve],dt,zt,oe))[Ve.route.id];if(V.get(oe)===qt&&V.delete(oe),!On.signal.aborted){if(le.has(oe)){Be(oe,ih(void 0));return}if(rg(Ir))if(J>Tr){Be(oe,ih(void 0));return}else{ie.add(oe),await Y(On,Ir,!1,{preventScrollReset:Ft});return}if(No(Ir)){Oe(oe,he,Ir.error);return}Be(oe,ih(Ir.data))}}async function Y(oe,he,Ce,{submission:Ve,fetcherSubmission:dt,preventScrollReset:zt,replace:Gt}={}){he.response.headers.has("X-Remix-Revalidate")&&(ne=!0);let At=he.response.headers.get("Location");In(At,"Expected a Location header on the redirect Response"),At=wB(At,new URL(oe.url),o);let Ft=M1(M.location,At,{_isRedirect:!0});if(n){let Ar=!1;if(he.response.headers.has("X-Remix-Reload-Document"))Ar=!0;else if(vD.test(At)){const Ir=t.history.createURL(At);Ar=Ir.origin!==e.location.origin||Dl(Ir.pathname,o)==null}if(Ar){Gt?e.location.replace(At):e.location.assign(At);return}}D=null;let mt=Gt===!0||he.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Bt,formAction:qt,formEncType:On}=M.navigation;!Ve&&!dt&&Bt&&qt&&On&&(Ve=IB(M.navigation));let Tr=Ve||dt;if(kAe.has(he.response.status)&&Tr&&lu(Tr.formMethod))await ue(mt,Ft,{submission:{...Tr,formAction:At},preventScrollReset:zt||O,enableViewTransition:Ce?L:void 0});else{let Ar=kk(Ft,Ve);await ue(mt,Ft,{overrideNavigation:Ar,fetcherSubmission:dt,preventScrollReset:zt||O,enableViewTransition:Ce?L:void 0})}}async function j(oe,he,Ce,Ve,dt,zt){let Gt,At={};try{Gt=await VAe(l,oe,he,Ce,Ve,zt,i,r,dt)}catch(Ft){return Ce.forEach(mt=>{At[mt.route.id]={type:"error",error:Ft}}),At}for(let[Ft,mt]of Object.entries(Gt))if(KAe(mt)){let Bt=mt.result;At[Ft]={type:"redirect",response:WAe(Bt,he,Ft,Ve,o)}}else At[Ft]=await $Ae(mt);return At}async function _e(oe,he,Ce,Ve,dt){let zt=j("loader",Ve,he,oe,dt,null),Gt=Promise.all(Ce.map(async mt=>{if(mt.matches&&mt.match&&mt.controller){let qt=(await j("loader",Wv(t.history,mt.path,mt.controller.signal),[mt.match],mt.matches,dt,mt.key))[mt.match.route.id];return{[mt.key]:qt}}else return Promise.resolve({[mt.key]:{type:"error",error:_l(404,{pathname:mt.path})}})})),At=await zt,Ft=(await Gt).reduce((mt,Bt)=>Object.assign(mt,Bt),{});return{loaderResults:At,fetcherResults:Ft}}function Ue(){ne=!0,pe.forEach((oe,he)=>{V.has(he)&&H.add(he),Ut(he)})}function Be(oe,he,Ce={}){M.fetchers.set(oe,he),ot({fetchers:new Map(M.fetchers)},{flushSync:(Ce&&Ce.flushSync)===!0})}function Oe(oe,he,Ce,Ve={}){let dt=Zm(M.matches,he);st(oe),ot({errors:{[dt.route.id]:Ce},fetchers:new Map(M.fetchers)},{flushSync:(Ve&&Ve.flushSync)===!0})}function Et(oe){return Z.set(oe,(Z.get(oe)||0)+1),le.has(oe)&&le.delete(oe),M.fetchers.get(oe)||OAe}function st(oe){let he=M.fetchers.get(oe);V.has(oe)&&!(he&&he.state==="loading"&&X.has(oe))&&Ut(oe),pe.delete(oe),X.delete(oe),ie.delete(oe),le.delete(oe),H.delete(oe),M.fetchers.delete(oe)}function yt(oe){let he=(Z.get(oe)||0)-1;he<=0?(Z.delete(oe),le.add(oe)):Z.set(oe,he),ot({fetchers:new Map(M.fetchers)})}function Ut(oe){let he=V.get(oe);he&&(he.abort(),V.delete(oe))}function Qe(oe){for(let he of oe){let Ce=Et(he),Ve=ih(Ce.data);M.fetchers.set(he,Ve)}}function gt(){let oe=[],he=!1;for(let Ce of ie){let Ve=M.fetchers.get(Ce);In(Ve,`Expected fetcher: ${Ce}`),Ve.state==="loading"&&(ie.delete(Ce),oe.push(Ce),he=!0)}return Qe(oe),he}function cn(oe){let he=[];for(let[Ce,Ve]of X)if(Ve<oe){let dt=M.fetchers.get(Ce);In(dt,`Expected fetcher: ${Ce}`),dt.state==="loading"&&(Ut(Ce),X.delete(Ce),he.push(Ce))}return Qe(he),he.length>0}function Kt(oe,he){let Ce=M.blockers.get(oe)||IS;return ae.get(oe)!==he&&ae.set(oe,he),Ce}function wt(oe){M.blockers.delete(oe),ae.delete(oe)}function Yt(oe,he){let Ce=M.blockers.get(oe)||IS;In(Ce.state==="unblocked"&&he.state==="blocked"||Ce.state==="blocked"&&he.state==="blocked"||Ce.state==="blocked"&&he.state==="proceeding"||Ce.state==="blocked"&&he.state==="unblocked"||Ce.state==="proceeding"&&he.state==="unblocked",`Invalid blocker state transition: ${Ce.state} -> ${he.state}`);let Ve=new Map(M.blockers);Ve.set(oe,he),ot({blockers:Ve})}function an({currentLocation:oe,nextLocation:he,historyAction:Ce}){if(ae.size===0)return;ae.size>1&&Ni(!1,"A router only supports one blocker at a time");let Ve=Array.from(ae.entries()),[dt,zt]=Ve[Ve.length-1],Gt=M.blockers.get(dt);if(!(Gt&&Gt.state==="proceeding")&&zt({currentLocation:oe,nextLocation:he,historyAction:Ce}))return dt}function er(oe){let he=_l(404,{pathname:oe}),Ce=a||s,{matches:Ve,route:dt}=MB(Ce);return{notFoundMatches:Ve,route:dt,error:he}}function ve(oe,he,Ce){if(m=oe,y=he,_=Ce||null,!E&&M.navigation===Ik){E=!0;let Ve=ze(M.location,M.matches);Ve!=null&&ot({restoreScrollPosition:Ve})}return()=>{m=null,y=null,_=null}}function tt(oe,he){return _&&_(oe,he.map(Ve=>uAe(Ve,M.loaderData)))||oe.key}function De(oe,he){if(m&&y){let Ce=tt(oe,he);m[Ce]=y()}}function ze(oe,he){if(m){let Ce=tt(oe,he),Ve=m[Ce];if(typeof Ve=="number")return Ve}return null}function ht(oe,he,Ce){if(t.patchRoutesOnNavigation)if(oe){if(Object.keys(oe[0].params).length>0)return{active:!0,matches:bC(he,Ce,o,!0)}}else return{active:!0,matches:bC(he,Ce,o,!0)||[]};return{active:!1,matches:null}}async function lt(oe,he,Ce,Ve){if(!t.patchRoutesOnNavigation)return{type:"success",matches:oe};let dt=oe;for(;;){let zt=a==null,Gt=a||s,At=i;try{await t.patchRoutesOnNavigation({signal:Ce,path:he,matches:dt,fetcherKey:Ve,patch:(Bt,qt)=>{Ce.aborted||EB(Bt,qt,Gt,At,r)}})}catch(Bt){return{type:"error",error:Bt,partialMatches:dt}}finally{zt&&!Ce.aborted&&(s=[...s])}if(Ce.aborted)return{type:"aborted"};let Ft=vh(Gt,he,o);if(Ft)return{type:"success",matches:Ft};let mt=bC(Gt,he,o,!0);if(!mt||dt.length===mt.length&&dt.every((Bt,qt)=>Bt.route.id===mt[qt].route.id))return{type:"success",matches:null};dt=mt}}function Rn(oe){i={},a=IR(oe,r,void 0,i)}function wr(oe,he){let Ce=a==null;EB(oe,he,a||s,i,r),Ce&&(s=[...s],ot({}))}return k={get basename(){return o},get future(){return c},get state(){return M},get routes(){return s},get window(){return e},initialize:$e,subscribe:We,enableScrollRestoration:ve,navigate:Wt,fetch:Qn,revalidate:ir,createHref:oe=>t.history.createHref(oe),encodeLocation:oe=>t.history.encodeLocation(oe),getFetcher:Et,deleteFetcher:yt,dispose:Le,getBlocker:Kt,deleteBlocker:wt,patchRoutes:wr,_internalFetchControllers:V,_internalSetRoutes:Rn},k}function NAe(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function VP(t,e,n,r,i,s){let a,o;if(i){a=[];for(let c of e)if(a.push(c),c.route.id===i){o=c;break}}else a=e,o=e[e.length-1];let l=OA(r||".",kA(a),Dl(t.pathname,n)||t.pathname,s==="path");if(r==null&&(l.search=t.search,l.hash=t.hash),(r==null||r===""||r===".")&&o){let c=yD(l.search);if(o.route.index&&!c)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&c){let f=new URLSearchParams(l.search),p=f.getAll("index");f.delete("index"),p.filter(_=>_).forEach(_=>f.append("index",_));let m=f.toString();l.search=m?`?${m}`:""}}return n!=="/"&&(l.pathname=l.pathname==="/"?n:wc([n,l.pathname])),op(l)}function gB(t,e,n){if(!n||!NAe(n))return{path:e};if(n.formMethod&&!YAe(n.formMethod))return{path:e,error:_l(405,{method:n.formMethod})};let r=()=>({path:e,error:_l(400,{type:"invalid-body"})}),s=(n.formMethod||"get").toUpperCase(),a=A$(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!lu(s))return r();let p=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,[_,y])=>`${m}${_}=${y}
`,""):String(n.body);return{path:e,submission:{formMethod:s,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:p}}}else if(n.formEncType==="application/json"){if(!lu(s))return r();try{let p=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:s,formAction:a,formEncType:n.formEncType,formData:void 0,json:p,text:void 0}}}catch{return r()}}}In(typeof FormData=="function","FormData is not available in this environment");let o,l;if(n.formData)o=$P(n.formData),l=n.formData;else if(n.body instanceof FormData)o=$P(n.body),l=n.body;else if(n.body instanceof URLSearchParams)o=n.body,l=TB(o);else if(n.body==null)o=new URLSearchParams,l=new FormData;else try{o=new URLSearchParams(n.body),l=TB(o)}catch{return r()}let c={formMethod:s,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(lu(c.formMethod))return{path:e,submission:c};let f=Ep(e);return t&&f.search&&yD(f.search)&&o.append("index",""),f.search=`?${o}`,{path:op(f),submission:c}}function _B(t,e,n=!1){let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function vB(t,e,n,r,i,s,a,o,l,c,f,p,m,_){let y=_?No(_[1])?_[1].error:_[1].data:void 0,E=t.createURL(e.location),S=t.createURL(i),w=n;s&&e.errors?w=_B(n,Object.keys(e.errors)[0],!0):_&&No(_[1])&&(w=_B(n,_[0]));let R=_?_[1].statusCode:void 0,C=R&&R>=400,k=w.filter((N,O)=>{let{route:D}=N;if(D.lazy)return!0;if(D.loader==null)return!1;if(s)return GP(D,e.loaderData,e.errors);if(DAe(e.loaderData,e.matches[O],N))return!0;let L=e.matches[O],B=N;return yB(N,{currentUrl:E,currentParams:L.params,nextUrl:S,nextParams:B.params,...r,actionResult:y,actionStatus:R,defaultShouldRevalidate:C?!1:a||E.pathname+E.search===S.pathname+S.search||E.search!==S.search||UAe(L,B)})}),M=[];return c.forEach((N,O)=>{if(s||!n.some(te=>te.route.id===N.routeId)||l.has(O))return;let D=vh(p,N.path,m);if(!D){M.push({key:O,routeId:N.routeId,path:N.path,matches:null,match:null,controller:null});return}let L=e.fetchers.get(O),B=ob(D,N.path),ee=!1;f.has(O)?ee=!1:o.has(O)?(o.delete(O),ee=!0):L&&L.state!=="idle"&&L.data===void 0?ee=a:ee=yB(B,{currentUrl:E,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:n[n.length-1].params,...r,actionResult:y,actionStatus:R,defaultShouldRevalidate:C?!1:a}),ee&&M.push({key:O,routeId:N.routeId,path:N.path,matches:D,match:B,controller:new AbortController})}),[k,M]}function GP(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function DAe(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function UAe(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function yB(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function EB(t,e,n,r,i){let s;if(t){let l=r[t];In(l,`No route found to patch children into: routeId = ${t}`),l.children||(l.children=[]),s=l.children}else s=n;let a=e.filter(l=>!s.some(c=>R$(l,c))),o=IR(a,i,[t||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...o)}function R$(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>R$(n,s))}):!1}var SB=new WeakMap;async function FAe(t,e,n){let r=n[t.id];if(In(r,"No route found in manifest"),!t.lazy)return;let i=SB.get(r);if(i){await i;return}let s=t.lazy().then(a=>{let o={};for(let l in a){let f=r[l]!==void 0&&l!=="hasErrorBoundary";Ni(!f,`Route "${r.id}" has a static property "${l}" defined but its lazy function is also returning a value for this property. The lazy route property "${l}" will be ignored.`),Ni(!pB.has(l),"Route property "+l+" is not a supported property to be returned from a lazy route function. This property will be ignored."),!f&&!pB.has(l)&&(o[l]=a[l])}Object.assign(r,o),Object.assign(r,{...e(r),lazy:void 0})});SB.set(r,s),await s}async function BAe(t,e){if(!t.unstable_lazyMiddleware)return;let n=e[t.id];if(In(n,"No route found in manifest"),n.unstable_middleware)Ni(!1,`Route "${n.id}" has a static property "unstable_middleware" defined. The "unstable_lazyMiddleware" function will be ignored.`);else{let r=await t.unstable_lazyMiddleware();if(!t.unstable_lazyMiddleware)return;n.unstable_middleware||(n.unstable_middleware=r)}n.unstable_lazyMiddleware=void 0}function zAe(t,e){let n=t.map(r=>r.route.unstable_lazyMiddleware?BAe(r.route,e):void 0).filter(Boolean);return n.length>0?Promise.all(n):void 0}async function bB(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,s)=>{n[e[s].route.id]=i}),n}async function jAe(t){return t.matches.some(e=>e.route.unstable_middleware)?HAe(t,!1,()=>bB(t),(e,n)=>({[n]:{type:"error",result:e}})):bB(t)}async function HAe(t,e,n,r){let{matches:i,request:s,params:a,context:o}=t,l={handlerResult:void 0};try{let c=i.flatMap(p=>p.route.unstable_middleware?p.route.unstable_middleware.map(m=>[p.route.id,m]):[]),f=await M$({request:s,params:a,context:o},c,e,l,n);return e?f:l.handlerResult}catch(c){if(!l.middlewareError)throw c;let f=await r(l.middlewareError.error,l.middlewareError.routeId);return l.handlerResult?Object.assign(l.handlerResult,f):f}}async function M$(t,e,n,r,i,s=0){let{request:a}=t;if(a.signal.aborted)throw a.signal.reason?a.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`);let o=e[s];if(!o)return r.handlerResult=await i(),r.handlerResult;let[l,c]=o,f=!1,p,m=async()=>{if(f)throw new Error("You may only call `next()` once per middleware");f=!0,await M$(t,e,n,r,i,s+1)};try{let _=await c({request:t.request,params:t.params,context:t.context},m);return f?_===void 0?p:_:m()}catch(_){throw r.middlewareError?r.middlewareError.error!==_&&(r.middlewareError={routeId:l,error:_}):r.middlewareError={routeId:l,error:_},_}}async function VAe(t,e,n,r,i,s,a,o,l){let c=zAe(i,a),f=i.map(_=>_.route.lazy?FAe(_.route,o,a):void 0);c&&await c;let p=i.map((_,y)=>{let E=f[y],S=r.some(R=>R.route.id===_.route.id);return{..._,shouldLoad:S,resolve:async R=>(R&&n.method==="GET"&&(_.route.lazy||_.route.loader)&&(S=!0),S?GAe(e,n,_,E,R,l):Promise.resolve({type:"data",result:void 0}))}}),m=await t({matches:p,request:n,params:i[0].params,fetcherKey:s,context:l});try{await Promise.all(f)}catch{}return m}async function GAe(t,e,n,r,i,s){let a,o,l=c=>{let f,p=new Promise((y,E)=>f=E);o=()=>f(),e.signal.addEventListener("abort",o);let m=y=>typeof c!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${t}" [routeId: ${n.route.id}]`)):c({request:e,params:n.params,context:s},...y!==void 0?[y]:[]),_=(async()=>{try{return{type:"data",result:await(i?i(E=>m(E)):m())}}catch(y){return{type:"error",result:y}}})();return Promise.race([_,p])};try{let c=n.route[t];if(r)if(c){let f,[p]=await Promise.all([l(c).catch(m=>{f=m}),r]);if(f!==void 0)throw f;a=p}else if(await r,c=n.route[t],c)a=await l(c);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw _l(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:"data",result:void 0};else if(c)a=await l(c);else{let f=new URL(e.url),p=f.pathname+f.search;throw _l(404,{pathname:p})}}catch(c){return{type:"error",result:c}}finally{o&&e.signal.removeEventListener("abort",o)}return a}async function $Ae(t){var r,i,s,a,o,l;let{result:e,type:n}=t;if(I$(e)){let c;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(f){return{type:"error",error:f}}return n==="error"?{type:"error",error:new OR(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}return n==="error"?AB(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new OR(((s=e.init)==null?void 0:s.status)||500,void 0,e.data),statusCode:A1(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:A1(e)?e.status:void 0}:AB(e)?{type:"data",data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function WAe(t,e,n,r,i){let s=t.headers.get("Location");if(In(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!vD.test(s)){let a=r.slice(0,r.findIndex(o=>o.route.id===n)+1);s=VP(new URL(e.url),a,i,s),t.headers.set("Location",s)}return t}function wB(t,e,n){if(vD.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Dl(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Wv(t,e,n,r){let i=t.createURL(A$(e)).toString(),s={signal:n};if(r&&lu(r.formMethod)){let{formMethod:a,formEncType:o}=r;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(r.json)):o==="text/plain"?s.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?s.body=$P(r.formData):s.body=r.formData}return new Request(i,s)}function $P(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function TB(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function qAe(t,e,n,r=!1,i=!1){let s={},a=null,o,l=!1,c={},f=n&&No(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let m=p.route.id,_=e[m];if(In(!rg(_),"Cannot handle redirect results in processLoaderData"),No(_)){let y=_.error;if(f!==void 0&&(y=f,f=void 0),a=a||{},i)a[m]=y;else{let E=Zm(t,m);a[E.route.id]==null&&(a[E.route.id]=y)}r||(s[m]=C$),l||(l=!0,o=A1(_.error)?_.error.status:500),_.headers&&(c[m]=_.headers)}else s[m]=_.data,_.statusCode&&_.statusCode!==200&&!l&&(o=_.statusCode),_.headers&&(c[m]=_.headers)}),f!==void 0&&n&&(a={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:c}}function xB(t,e,n,r,i,s){let{loaderData:a,errors:o}=qAe(e,n,r);return i.forEach(l=>{let{key:c,match:f,controller:p}=l,m=s[c];if(In(m,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(No(m)){let _=Zm(t.matches,f==null?void 0:f.route.id);o&&o[_.route.id]||(o={...o,[_.route.id]:m.error}),t.fetchers.delete(c)}else if(rg(m))In(!1,"Unhandled fetcher revalidation redirect");else{let _=ih(m.data);t.fetchers.set(c,_)}}),{loaderData:a,errors:o}}function CB(t,e,n,r){let i=Object.entries(e).filter(([,s])=>s!==C$).reduce((s,[a,o])=>(s[a]=o,s),{});for(let s of n){let a=s.route.id;if(!e.hasOwnProperty(a)&&t.hasOwnProperty(a)&&s.route.loader&&(i[a]=t[a]),r&&r.hasOwnProperty(a))break}return i}function RB(t){return t?No(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Zm(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function MB(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function _l(t,{pathname:e,routeId:n,method:r,type:i,message:s}={}){let a="Unknown Server Error",o="Unknown @remix-run/router error";return t===400?(a="Bad Request",r&&e&&n?o=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(o="Unable to encode submission body")):t===403?(a="Forbidden",o=`Route "${n}" does not match URL "${e}"`):t===404?(a="Not Found",o=`No route matches URL "${e}"`):t===405&&(a="Method Not Allowed",r&&e&&n?o=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(o=`Invalid request method "${r.toUpperCase()}"`)),new OR(t||500,a,new Error(o),!0)}function vx(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(rg(i))return{key:r,result:i}}}function A$(t){let e=typeof t=="string"?Ep(t):t;return op({...e,hash:""})}function XAe(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function KAe(t){return I$(t.result)&&IAe.has(t.result.status)}function No(t){return t.type==="error"}function rg(t){return(t&&t.type)==="redirect"}function AB(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function I$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function YAe(t){return AAe.has(t.toUpperCase())}function lu(t){return RAe.has(t.toUpperCase())}function yD(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ob(t,e){let n=typeof e=="string"?Ep(e).search:e.search;if(t[t.length-1].route.index&&yD(n||""))return t[t.length-1];let r=w$(t);return r[r.length-1]}function IB(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:a}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function kk(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ZAe(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function kS(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function JAe(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ih(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function QAe(t,e){try{let n=t.sessionStorage.getItem(x$);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function eIe(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(x$,JSON.stringify(n))}catch(r){Ni(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function tIe(){let t,e,n=new Promise((r,i)=>{t=async s=>{r(s);try{await n}catch{}},e=async s=>{i(s);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var o_=P.createContext(null);o_.displayName="DataRouter";var _w=P.createContext(null);_w.displayName="DataRouterState";var ED=P.createContext({isTransitioning:!1});ED.displayName="ViewTransition";var k$=P.createContext(new Map);k$.displayName="Fetchers";var nIe=P.createContext(null);nIe.displayName="Await";var xu=P.createContext(null);xu.displayName="Navigation";var PA=P.createContext(null);PA.displayName="Location";var Nc=P.createContext({outlet:null,matches:[],isDataRoute:!1});Nc.displayName="Route";var SD=P.createContext(null);SD.displayName="RouteError";function rIe(t,{relative:e}={}){In(k0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(xu),{hash:i,pathname:s,search:a}=vw(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:wc([n,s])),r.createHref({pathname:o,search:a,hash:i})}function k0(){return P.useContext(PA)!=null}function Cu(){return In(k0(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(PA).location}var O$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P$(t){P.useContext(xu).static||P.useLayoutEffect(t)}function uf(){let{isDataRoute:t}=P.useContext(Nc);return t?gIe():iIe()}function iIe(){In(k0(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(o_),{basename:e,navigator:n}=P.useContext(xu),{matches:r}=P.useContext(Nc),{pathname:i}=Cu(),s=JSON.stringify(kA(r)),a=P.useRef(!1);return P$(()=>{a.current=!0}),P.useCallback((l,c={})=>{if(Ni(a.current,O$),!a.current)return;if(typeof l=="number"){n.go(l);return}let f=OA(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:wc([e,f.pathname])),(c.replace?n.replace:n.push)(f,c.state,c)},[e,n,s,i,t])}P.createContext(null);function vw(t,{relative:e}={}){let{matches:n}=P.useContext(Nc),{pathname:r}=Cu(),i=JSON.stringify(kA(n));return P.useMemo(()=>OA(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function sIe(t,e,n,r){In(k0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=P.useContext(xu),{matches:a}=P.useContext(Nc),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",p=o&&o.route;{let R=p&&p.path||"";L$(c,!p||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let m=Cu(),_;_=m;let y=_.pathname||"/",E=y;if(f!=="/"){let R=f.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=!s&&n&&n.matches&&n.matches.length>0?n.matches:vh(t,{pathname:E});return Ni(p||S!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Ni(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),cIe(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:wc([f,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:wc([f,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,n,r)}function aIe(){let t=mIe(),e=A1(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,a)}var oIe=P.createElement(aIe,null),lIe=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?P.createElement(Nc.Provider,{value:this.props.routeContext},P.createElement(SD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uIe({routeContext:t,match:e,children:n}){let r=P.useContext(o_);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Nc.Provider,{value:t},n)}function cIe(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);In(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,o=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:f,errors:p}=n,m=c.route.loader&&!f.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((l,c,f)=>{let p,m=!1,_=null,y=null;n&&(p=s&&c.route.id?s[c.route.id]:void 0,_=c.route.errorElement||oIe,a&&(o<0&&f===0?(L$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):o===f&&(m=!0,y=c.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,f+1)),S=()=>{let w;return p?w=_:m?w=y:c.route.Component?w=P.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,P.createElement(uIe,{match:c,routeContext:{outlet:l,matches:E,isDataRoute:n!=null},children:w})};return n&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?P.createElement(lIe,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):S()},null)}function bD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dIe(t){let e=P.useContext(o_);return In(e,bD(t)),e}function fIe(t){let e=P.useContext(_w);return In(e,bD(t)),e}function hIe(t){let e=P.useContext(Nc);return In(e,bD(t)),e}function wD(t){let e=hIe(t),n=e.matches[e.matches.length-1];return In(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function pIe(){return wD("useRouteId")}function mIe(){var r;let t=P.useContext(SD),e=fIe("useRouteError"),n=wD("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function gIe(){let{router:t}=dIe("useNavigate"),e=wD("useNavigate"),n=P.useRef(!1);return P$(()=>{n.current=!0}),P.useCallback(async(i,s={})=>{Ni(n.current,O$),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var kB={};function L$(t,e,n){!e&&!kB[t]&&(kB[t]=!0,Ni(!1,n))}var OB={};function PB(t,e){!t&&!OB[e]&&(OB[e]=!0,console.warn(e))}function _Ie(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Ni(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Ni(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Ni(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var vIe=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function yIe({router:t,flushSync:e}){let[n,r]=P.useState(t.state),[i,s]=P.useState(),[a,o]=P.useState({isTransitioning:!1}),[l,c]=P.useState(),[f,p]=P.useState(),[m,_]=P.useState(),y=P.useRef(new Map),E=P.useCallback((C,{deletedFetchers:k,flushSync:M,viewTransitionOpts:N})=>{C.fetchers.forEach((D,L)=>{D.data!==void 0&&y.current.set(L,D.data)}),k.forEach(D=>y.current.delete(D)),PB(M===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(PB(N==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!N||!O){e&&M?e(()=>r(C)):P.startTransition(()=>r(C));return}if(e&&M){e(()=>{f&&(l&&l.resolve(),f.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let D=t.window.document.startViewTransition(()=>{e(()=>r(C))});D.finished.finally(()=>{e(()=>{c(void 0),p(void 0),s(void 0),o({isTransitioning:!1})})}),e(()=>p(D));return}f?(l&&l.resolve(),f.skipTransition(),_({state:C,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(s(C),o({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[t.window,e,f,l]);P.useLayoutEffect(()=>t.subscribe(E),[t,E]),P.useEffect(()=>{a.isTransitioning&&!a.flushSync&&c(new vIe)},[a]),P.useEffect(()=>{if(l&&i&&t.window){let C=i,k=l.promise,M=t.window.document.startViewTransition(async()=>{P.startTransition(()=>r(C)),await k});M.finished.finally(()=>{c(void 0),p(void 0),s(void 0),o({isTransitioning:!1})}),p(M)}},[i,l,t.window]),P.useEffect(()=>{l&&i&&n.location.key===i.location.key&&l.resolve()},[l,f,n.location,i]),P.useEffect(()=>{!a.isTransitioning&&m&&(s(m.state),o({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),_(void 0))},[a.isTransitioning,m]);let S=P.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:C=>t.navigate(C),push:(C,k,M)=>t.navigate(C,{state:k,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(C,k,M)=>t.navigate(C,{replace:!0,state:k,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[t]),w=t.basename||"/",R=P.useMemo(()=>({router:t,navigator:S,static:!1,basename:w}),[t,S,w]);return P.createElement(P.Fragment,null,P.createElement(o_.Provider,{value:R},P.createElement(_w.Provider,{value:n},P.createElement(k$.Provider,{value:y.current},P.createElement(ED.Provider,{value:a},P.createElement(bIe,{basename:w,location:n.location,navigationType:n.historyAction,navigator:S},P.createElement(EIe,{routes:t.routes,future:t.future,state:n})))))),null)}var EIe=P.memo(SIe);function SIe({routes:t,future:e,state:n}){return sIe(t,void 0,n,e)}function TD({to:t,replace:e,state:n,relative:r}){In(k0(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(xu);Ni(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(Nc),{pathname:a}=Cu(),o=uf(),l=OA(t,kA(s),a,r==="path"),c=JSON.stringify(l);return P.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:r})},[o,c,r,e,n]),null}function lb(t){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bIe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){In(!k0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=P.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=Ep(n));let{pathname:l="/",search:c="",hash:f="",state:p=null,key:m="default"}=n,_=P.useMemo(()=>{let y=Dl(l,a);return y==null?null:{location:{pathname:y,search:c,hash:f,state:p,key:m},navigationType:r}},[a,l,c,f,p,m,r]);return Ni(_!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${f}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:P.createElement(xu.Provider,{value:o},P.createElement(PA.Provider,{children:e,value:_}))}function WP(t,e=[]){let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let s=[...e,i];if(r.type===P.Fragment){n.push.apply(n,WP(r.props.children,s));return}In(r.type===lb,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=WP(r.props.children,s)),n.push(a)}),n}var wIe=WP,wC="get",TC="application/x-www-form-urlencoded";function LA(t){return t!=null&&typeof t.tagName=="string"}function TIe(t){return LA(t)&&t.tagName.toLowerCase()==="button"}function xIe(t){return LA(t)&&t.tagName.toLowerCase()==="form"}function CIe(t){return LA(t)&&t.tagName.toLowerCase()==="input"}function RIe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MIe(t,e){return t.button===0&&(!e||e==="_self")&&!RIe(t)}function qP(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function AIe(t,e){let n=qP(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var yx=null;function IIe(){if(yx===null)try{new FormData(document.createElement("form"),0),yx=!1}catch{yx=!0}return yx}var kIe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ok(t){return t!=null&&!kIe.has(t)?(Ni(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${TC}"`),null):t}function OIe(t,e){let n,r,i,s,a;if(xIe(t)){let o=t.getAttribute("action");r=o?Dl(o,e):null,n=t.getAttribute("method")||wC,i=Ok(t.getAttribute("enctype"))||TC,s=new FormData(t)}else if(TIe(t)||CIe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?Dl(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||wC,i=Ok(t.getAttribute("formenctype"))||Ok(o.getAttribute("enctype"))||TC,s=new FormData(o,t),!IIe()){let{name:c,type:f,value:p}=t;if(f==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,p)}}else{if(LA(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wC,r=null,i=TC,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function xD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function PIe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LIe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NIe(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await PIe(s,n);return a.links?a.links():[]}return[]}));return BIe(r.flat(1).filter(LIe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function LB(t,e,n,r,i,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var f;return n[c].pathname!==l.pathname||((f=n[c].route.path)==null?void 0:f.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var p;let f=r.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function DIe(t,e,{includeHydrateFallback:n}={}){return UIe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function UIe(t){return[...new Set(t)]}function FIe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function BIe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(FIe(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function zIe(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Dl(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function N$(){let t=P.useContext(o_);return xD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function jIe(){let t=P.useContext(_w);return xD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var CD=P.createContext(void 0);CD.displayName="FrameworkContext";function D$(){let t=P.useContext(CD);return xD(t,"You must render this element inside a <HydratedRouter> element"),t}function HIe(t,e){let n=P.useContext(CD),[r,i]=P.useState(!1),[s,a]=P.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:f,onTouchStart:p}=e,m=P.useRef(null);P.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let E=w=>{w.forEach(R=>{a(R.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[t]),P.useEffect(()=>{if(r){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[r]);let _=()=>{i(!0)},y=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:OS(o,_),onBlur:OS(l,y),onMouseEnter:OS(c,_),onMouseLeave:OS(f,y),onTouchStart:OS(p,_)}]:[!1,m,{}]}function OS(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function VIe({page:t,...e}){let{router:n}=N$(),r=P.useMemo(()=>vh(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement($Ie,{page:t,matches:r,...e}):null}function GIe(t){let{manifest:e,routeModules:n}=D$(),[r,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return NIe(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function $Ie({page:t,matches:e,...n}){let r=Cu(),{manifest:i,routeModules:s}=D$(),{basename:a}=N$(),{loaderData:o,matches:l}=jIe(),c=P.useMemo(()=>LB(t,e,l,i,r,"data"),[t,e,l,i,r]),f=P.useMemo(()=>LB(t,e,l,i,r,"assets"),[t,e,l,i,r]),p=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,E=!1;if(e.forEach(w=>{var C;let R=i.routes[w.route.id];!R||!R.hasLoader||(!c.some(k=>k.route.id===w.route.id)&&w.route.id in o&&((C=s[w.route.id])!=null&&C.shouldRevalidate)||R.hasClientLoader?E=!0:y.add(w.route.id))}),y.size===0)return[];let S=zIe(t,a);return E&&y.size>0&&S.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[S.pathname+S.search]},[a,o,r,i,c,e,t,s]),m=P.useMemo(()=>DIe(f,i),[f,i]),_=GIe(f);return P.createElement(P.Fragment,null,p.map(y=>P.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>P.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),_.map(({key:y,link:E})=>P.createElement("link",{key:y,...E})))}function WIe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var U$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{U$&&(window.__reactRouterVersion="7.4.1")}catch{}function qIe(t,e){return LAe({basename:e==null?void 0:e.basename,unstable_getContext:e==null?void 0:e.unstable_getContext,future:e==null?void 0:e.future,history:sAe({window:e==null?void 0:e.window}),hydrationData:XIe(),routes:t,mapRouteProperties:_Ie,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function XIe(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:KIe(t.errors)}),t}function KIe(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new OR(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}var F$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B$=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:f,viewTransition:p,...m},_){let{basename:y}=P.useContext(xu),E=typeof c=="string"&&F$.test(c),S,w=!1;if(typeof c=="string"&&E&&(S=c,U$))try{let L=new URL(window.location.href),B=c.startsWith("//")?new URL(L.protocol+c):new URL(c),ee=Dl(B.pathname,y);B.origin===L.origin&&ee!=null?c=ee+B.search+B.hash:w=!0}catch{Ni(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=rIe(c,{relative:i}),[C,k,M]=HIe(r,m),N=QIe(c,{replace:a,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:p});function O(L){e&&e(L),L.defaultPrevented||N(L)}let D=P.createElement("a",{...m,...M,href:S||R,onClick:w||s?e:O,ref:WIe(_,k),target:l,"data-discover":!E&&n==="render"?"true":void 0});return C&&!E?P.createElement(P.Fragment,null,D,P.createElement(VIe,{page:R})):D});B$.displayName="Link";var YIe=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:l,...c},f){let p=vw(a,{relative:c.relative}),m=Cu(),_=P.useContext(_w),{navigator:y,basename:E}=P.useContext(xu),S=_!=null&&s2e(p)&&o===!0,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,R=m.pathname,C=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(R=R.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&E&&(C=Dl(C,E)||C);const k=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=R===w||!i&&R.startsWith(w)&&R.charAt(k)==="/",N=C!=null&&(C===w||!i&&C.startsWith(w)&&C.charAt(w.length)==="/"),O={isActive:M,isPending:N,isTransitioning:S},D=M?e:void 0,L;typeof r=="function"?L=r(O):L=[r,M?"active":null,N?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof s=="function"?s(O):s;return P.createElement(B$,{...c,"aria-current":D,className:L,ref:f,style:B,to:a,viewTransition:o},typeof l=="function"?l(O):l)});YIe.displayName="NavLink";var ZIe=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=wC,action:o,onSubmit:l,relative:c,preventScrollReset:f,viewTransition:p,...m},_)=>{let y=r2e(),E=i2e(o,{relative:c}),S=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&F$.test(o),R=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let k=C.nativeEvent.submitter,M=(k==null?void 0:k.getAttribute("formmethod"))||a;y(k||C.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:i,state:s,relative:c,preventScrollReset:f,viewTransition:p})};return P.createElement("form",{ref:_,method:S,action:E,onSubmit:r?l:R,...m,"data-discover":!w&&t==="render"?"true":void 0})});ZIe.displayName="Form";function JIe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z$(t){let e=P.useContext(o_);return In(e,JIe(t)),e}function QIe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=uf(),l=Cu(),c=vw(t,{relative:s});return P.useCallback(f=>{if(MIe(f,e)){f.preventDefault();let p=n!==void 0?n:op(l)===op(c);o(t,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,n,r,e,t,i,s,a])}function e2e(t){Ni(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(qP(t)),n=P.useRef(!1),r=Cu(),i=P.useMemo(()=>AIe(r.search,n.current?null:e.current),[r.search]),s=uf(),a=P.useCallback((o,l)=>{const c=qP(typeof o=="function"?o(i):o);n.current=!0,s("?"+c,l)},[s,i]);return[i,a]}var t2e=0,n2e=()=>`__${String(++t2e)}__`;function r2e(){let{router:t}=z$("useSubmit"),{basename:e}=P.useContext(xu),n=pIe();return P.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=OIe(r,e);if(i.navigate===!1){let f=i.fetcherKey||n2e();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function i2e(t,{relative:e}={}){let{basename:n}=P.useContext(xu),r=P.useContext(Nc);In(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...vw(t||".",{relative:e})},a=Cu();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(f=>f==="")){o.delete("index"),l.filter(p=>p).forEach(p=>o.append("index",p));let f=o.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:wc([n,s.pathname])),op(s)}function s2e(t,e={}){let n=P.useContext(ED);In(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=z$("useViewTransitionState"),i=vw(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Dl(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Dl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return kR(i.pathname,a)!=null||kR(i.pathname,s)!=null}new TextEncoder;/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a2e(t){return P.createElement(yIe,{flushSync:eN.flushSync,...t})}class o2e{constructor(){kt(this,"analyticsManager");kt(this,"loggedEvents",new Set)}init(){this.analyticsManager==null&&(this.analyticsManager=lf.getAnalyticsManager())}logOnboardingLoggedIn(){this.analyticsManager!=null&&!this.loggedEvents.has("logged_in")&&(this.analyticsManager.track(new wle),this.loggedEvents.add("logged_in"))}logOnboardingViewed(){var e;this.loggedEvents.has("logged_in")&&!this.loggedEvents.has("viewed")&&((e=this.analyticsManager)==null||e.track(new Tle),this.loggedEvents.add("viewed"))}logOnboardingCompleted(){var e;this.loggedEvents.has("viewed")&&!this.loggedEvents.has("completed")&&((e=this.analyticsManager)==null||e.track(new xle),this.loggedEvents.add("completed"))}}const PR=new o2e,RD=({className:t="",width:e=24,height:n=24})=>U.jsx("svg",{className:t,fill:"none",height:n,viewBox:"0 0 24 24",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M21.1219 11.2896C21.1219 11.6833 20.9844 12.0177 20.7094 12.2927L14.5969 18.3864C14.3156 18.6677 14 18.8083 13.65 18.8083C13.25 18.8083 12.9281 18.6833 12.6844 18.4333C12.4406 18.1896 12.3187 17.8864 12.3187 17.5239C12.3187 17.3177 12.3562 17.1364 12.4312 16.9802C12.5125 16.8177 12.6156 16.6739 12.7406 16.5489L14.8406 14.4489L17.9437 11.5989L18.5156 12.4521L14.8781 12.6489H4.275C3.85625 12.6489 3.51563 12.5239 3.25313 12.2739C2.99688 12.0239 2.86875 11.6958 2.86875 11.2896C2.86875 10.8833 2.99688 10.5552 3.25313 10.3052C3.51563 10.0552 3.85625 9.93018 4.275 9.93018H14.8781L18.5156 10.1271L17.9437 10.9802L14.8406 8.13018L12.7406 6.0208C12.6156 5.8958 12.5125 5.75518 12.4312 5.59893C12.3562 5.43643 12.3187 5.25205 12.3187 5.0458C12.3187 4.6833 12.4406 4.38018 12.6844 4.13643C12.9281 3.88643 13.25 3.76143 13.65 3.76143C13.8187 3.76143 13.9844 3.79893 14.1469 3.87393C14.3094 3.94268 14.4625 4.04893 14.6062 4.19268L20.7094 10.2864C20.9844 10.5552 21.1219 10.8896 21.1219 11.2896Z",fill:"#5B652A"})});var Ex={},NB;function l2e(){if(NB)return Ex;NB=1,Ex.match=s,Ex.parse=a;var t=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,e=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,n=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function s(f,p){return a(f).some(function(m){var _=m.inverse,y=m.type==="all"||p.type===m.type;if(y&&_||!(y||_))return!1;var E=m.expressions.every(function(S){var w=S.feature,R=S.modifier,C=S.value,k=p[w];if(!k)return!1;switch(w){case"orientation":case"scan":return k.toLowerCase()===C.toLowerCase();case"width":case"height":case"device-width":case"device-height":C=c(C),k=c(k);break;case"resolution":C=l(C),k=l(k);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":C=o(C),k=o(k);break;case"grid":case"color":case"color-index":case"monochrome":C=parseInt(C,10)||1,k=parseInt(k,10)||0;break}switch(R){case"min":return k>=C;case"max":return k<=C;default:return k===C}});return E&&!_||!E&&_})}function a(f){return f.split(",").map(function(p){p=p.trim();var m=p.match(t),_=m[1],y=m[2],E=m[3]||"",S={};return S.inverse=!!_&&_.toLowerCase()==="not",S.type=y?y.toLowerCase():"all",E=E.match(/\([^\)]+\)/g)||[],S.expressions=E.map(function(w){var R=w.match(e),C=R[1].toLowerCase().match(n);return{modifier:C[1],feature:C[2],value:R[2]}}),S})}function o(f){var p=Number(f),m;return p||(m=f.match(/^(\d+)\s*\/\s*(\d+)$/),p=m[1]/m[2]),p}function l(f){var p=parseFloat(f),m=String(f).match(i)[1];switch(m){case"dpcm":return p/2.54;case"dppx":return p*96;default:return p}}function c(f){var p=parseFloat(f),m=String(f).match(r)[1];switch(m){case"em":return p*16;case"rem":return p*16;case"cm":return p*96/2.54;case"mm":return p*96/2.54/10;case"in":return p*96;case"pt":return p*72;case"pc":return p*72/12;default:return p}}return Ex}var Pk,DB;function u2e(){if(DB)return Pk;DB=1;var t=l2e().match,e=typeof window<"u"?window.matchMedia:null;function n(i,s,a){var o=this,l;e&&!a&&(l=e.call(window,i)),l?(this.matches=l.matches,this.media=l.media,l.addListener(p)):(this.matches=t(i,s),this.media=i),this.addListener=c,this.removeListener=f,this.dispose=m;function c(_){l&&l.addListener(_)}function f(_){l&&l.removeListener(_)}function p(_){o.matches=_.matches,o.media=_.media}function m(){l&&l.removeListener(p)}}function r(i,s,a){return new n(i,s,a)}return Pk=r,Pk}var c2e=u2e();const d2e=Xg(c2e);var f2e=/[A-Z]/g,h2e=/^ms-/,Lk={};function p2e(t){return"-"+t.toLowerCase()}function j$(t){if(Lk.hasOwnProperty(t))return Lk[t];var e=t.replace(f2e,p2e);return Lk[t]=h2e.test(e)?"-"+e:e}function m2e(t,e){if(t===e)return!0;if(!t||!e)return!1;const n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(let s=0;s<i;s++){const a=n[s];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var Nk={exports:{}},Dk,UB;function g2e(){if(UB)return Dk;UB=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dk=t,Dk}var Uk,FB;function _2e(){if(FB)return Uk;FB=1;var t=g2e();function e(){}function n(){}return n.resetWarningCache=e,Uk=function(){function r(a,o,l,c,f,p){if(p!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},Uk}var BB;function v2e(){return BB||(BB=1,Nk.exports=_2e()()),Nk.exports}var y2e=v2e();const dr=Xg(y2e),Ta=dr.oneOfType([dr.string,dr.number]),MD={all:dr.bool,grid:dr.bool,aural:dr.bool,braille:dr.bool,handheld:dr.bool,print:dr.bool,projection:dr.bool,screen:dr.bool,tty:dr.bool,tv:dr.bool,embossed:dr.bool},H$={orientation:dr.oneOf(["portrait","landscape"]),scan:dr.oneOf(["progressive","interlace"]),aspectRatio:dr.string,deviceAspectRatio:dr.string,height:Ta,deviceHeight:Ta,width:Ta,deviceWidth:Ta,color:dr.bool,colorIndex:dr.bool,monochrome:dr.bool,resolution:Ta,type:Object.keys(MD)},{type:xFe,...E2e}=H$,V$={minAspectRatio:dr.string,maxAspectRatio:dr.string,minDeviceAspectRatio:dr.string,maxDeviceAspectRatio:dr.string,minHeight:Ta,maxHeight:Ta,minDeviceHeight:Ta,maxDeviceHeight:Ta,minWidth:Ta,maxWidth:Ta,minDeviceWidth:Ta,maxDeviceWidth:Ta,minColor:dr.number,maxColor:dr.number,minColorIndex:dr.number,maxColorIndex:dr.number,minMonochrome:dr.number,maxMonochrome:dr.number,minResolution:Ta,maxResolution:Ta,...E2e},S2e={...MD,...V$};var b2e={all:S2e,types:MD,matchers:H$,features:V$};const w2e=t=>`not ${t}`,T2e=(t,e)=>{const n=j$(t);return typeof e=="number"&&(e=`${e}px`),e===!0?n:e===!1?w2e(n):`(${n}: ${e})`},x2e=t=>t.join(" and "),C2e=t=>{const e=[];return Object.keys(b2e.all).forEach(n=>{const r=t[n];r!=null&&e.push(T2e(n,r))}),x2e(e)},R2e=P.createContext(void 0),M2e=t=>t.query||C2e(t),zB=t=>t?Object.keys(t).reduce((n,r)=>(n[j$(r)]=t[r],n),{}):void 0,G$=()=>{const t=P.useRef(!1);return P.useEffect(()=>{t.current=!0},[]),t.current},A2e=t=>{const e=P.useContext(R2e),n=()=>zB(t)||zB(e),[r,i]=P.useState(n);return P.useEffect(()=>{const s=n();m2e(r,s)||i(s)},[t,e]),r},I2e=t=>{const e=()=>M2e(t),[n,r]=P.useState(e);return P.useEffect(()=>{const i=e();n!==i&&r(i)},[t]),n},k2e=(t,e)=>{const n=()=>d2e(t,e||{},!!e),[r,i]=P.useState(n),s=G$();return P.useEffect(()=>{if(s){const a=n();return i(a),()=>{a&&a.dispose()}}},[t,e]),r},O2e=t=>{const[e,n]=P.useState(t.matches);return P.useEffect(()=>{const r=i=>{n(i.matches)};return t.addListener(r),n(t.matches),()=>{t.removeListener(r)}},[t]),e},lp=(t,e,n)=>{const r=A2e(e),i=I2e(t);if(!i)throw new Error("Invalid or missing MediaQuery!");const s=k2e(i,r),a=O2e(s);return G$(),P.useEffect(()=>{},[a]),P.useEffect(()=>()=>{s&&s.dispose()},[]),a},AD=({children:t,shortHeight:e=!1})=>{const n=e?"h-[160px]":"h-[350px]";return U.jsx("div",{className:di("bg-white rounded-xl w-[350px] sm:w-[536px] sm:h-[536px] flex flex-col justify-center items-center mt-4 mx-4 sm:mx-0",n),children:t})};function ID(){const t=lp({maxWidth:Qg.SM}),{isTextInputFocused:e}=ap();return e&&t}const P2e=()=>{const t=lp({maxWidth:Qg.SM}),{nickname:e,setNickname:n,setStep:r}=ap(),i=Fe.useRef(null),[s,a]=Fe.useState(null),{setIsTextInputFocused:o}=ap(),l=ID();P.useEffect(()=>{var p;t||(p=i.current)==null||p.focus()},[t]);const c=p=>{var m;(m=i.current)==null||m.blur(),p==null||p.preventDefault(),r(2)},f=U.jsxs("div",{className:"flex flex-col items-center justify-center w-full px-4 sm:px-20 mt-auto mb-4",children:[U.jsx("a",{className:"cursor-pointer underline",onClick:()=>{n(""),r(2)},children:U.jsx(Li,{className:"text-xs text-center cursor-pointer underline",children:nt.nuxSkipForNow})}),U.jsx(Li,{className:"text-xs text-center",children:nt.nuxNicknameExplanation})]});return U.jsxs("form",{onSubmit:c,children:[U.jsxs(AD,{shortHeight:t,children:[U.jsxs("div",{className:"h-full flex flex-col items-center justify-center w-full px-6 sm:px-20",children:[U.jsx("div",{className:"flex flex-col items-center justify-center w-full px-6 sm:px-8",children:U.jsx("input",{className:"w-full focus-visible:outline-none text-xl sm:text-2xl font-semibold text-green16 placeholder-green17 p-2 border-b border-b-gray1 text-center flex-1",placeholder:nt.nuxNicknamePlaceholder,ref:i,type:"text",value:e,onBlur:()=>{o(!1)},onChange:p=>{var _;const m=p.currentTarget.value.replace(/[^a-zA-Z\s]/g,"");if(m.length>S9){a(nt.nicknameMaxLengthError);return}a(null),n(m),m.length>0&&((_=i.current)==null||_.focus())},onFocus:()=>{o(!0)}})}),U.jsx("div",{className:"h-8 mt-4",children:s?U.jsx(Li,{className:"text-center",variant:eA.ERROR,children:s}):null})]}),t?null:f]}),t&&!l?U.jsx("div",{className:"mt-8",children:f}):null,U.jsx("div",{className:"flex flex-col items-center justify-center w-full px-20",children:U.jsx(Qi,{className:"p-6 rounded-xl mt-10",iconStart:U.jsx(RD,{}),isDisabled:e.length===0||s!==null,isSymmetrical:!1,type:Wb.SUBMIT,variant:vi.BRAND,onClick:t?void 0:c,onTouchEnd:t?c:void 0})})]})},L2e=()=>{const t=lp({maxWidth:Qg.SM}),{setBirthDate:e,setStep:n}=ap(),[r,i]=P.useState(""),[s,a]=P.useState(""),[o,l]=P.useState(""),[c,f]=P.useState(!0),[p,m]=P.useState(null),{setIsTextInputFocused:_}=ap(),y=ID(),E=Fe.useRef(null),S=Fe.useRef(null),w=Fe.useRef(null),R=(te,ne,H)=>{const V=new Date,W=new Date(te,ne-1,H);let J=V.getFullYear()-W.getFullYear();const X=V.getMonth()-W.getMonth(),ie=V.getDate()-W.getDate();return(X<0||X===0&&ie<0)&&J--,J>=13},C=(te,ne,H)=>{const V=new Date(te,ne-1,H);return V.getFullYear()===te&&V.getMonth()===ne-1&&V.getDate()===H},k=te=>te%4===0&&te%100!==0||te%400===0,M=(te,ne)=>te===2?k(ne)?29:28:[4,6,9,11].includes(te)?30:31;P.useEffect(()=>{var te;(te=S.current)==null||te.focus()},[]),P.useEffect(()=>{var te;r.length===2&&((te=E.current)==null||te.focus())},[r]),P.useEffect(()=>{var te;s.length===2&&((te=w.current)==null||te.focus())},[s]),P.useEffect(()=>{if(o.length===4&&s.length>0&&r.length>0){const te=parseInt(o,10),ne=parseInt(s,10),H=parseInt(r,10),V=R(te,ne,H);C(te,ne,H)?V?(m(null),f(!1)):(m(nt.nuxBirthdayAgeError),f(!0)):(m(nt.nuxBirthdayDateError),f(!0))}},[o,s,r]);const N=te=>{te==null||te.preventDefault();const ne=s.length===1?`0${s}`:s,H=r.length===1?`0${r}`:r;e(`${o}-${ne}-${H}`),n(3)},O=te=>te.replace(/\D/g,""),D=te=>{f(!0);const ne=O(te);ne.length===4&&parseInt(ne,10)>new Date().getFullYear()||l(ne)},L=te=>{f(!0);const ne=O(te);ne.length===2&&parseInt(ne,10)>12||a(ne)},B=te=>{f(!0);const ne=O(te),H=parseInt(ne,10),V=parseInt(s,10),W=parseInt(o,10);if(V&&W){const J=M(V,W);if(H>J)return}else if(H>31)return;i(ne)},ee=U.jsxs("div",{className:"flex flex-col items-center justify-center w-full px-4 sm:px-20 mt-auto mb-4",children:[U.jsx(Li,{className:"text-xs text-center",children:nt.nuxBirthdayExplanation}),U.jsx(Li,{className:"text-xs text-center",children:nt.nuxBirthdayExplanation2})]});return U.jsxs("form",{onSubmit:N,children:[U.jsxs(AD,{shortHeight:t,children:[U.jsxs("div",{className:"h-full flex flex-col items-center justify-center w-full px-6 sm:px-20",children:[U.jsxs("div",{className:"flex items-center justify-center w-full px-6 sm:px-10 gap-2",children:[U.jsx("input",{className:"w-full focus-visible:outline-none text-xl sm:text-2xl font-semibold text-green16 placeholder-green17 p-2 border-b border-b-gray1 text-center flex-1",inputMode:"numeric",maxLength:2,placeholder:nt.nuxBirthdayMonthPlaceholder,ref:S,type:"text",value:s,onBlur:()=>{_(!1)},onChange:te=>L(te.target.value),onFocus:()=>{_(!0)}}),U.jsx("span",{className:"text-2xl font-semibold text-green17",children:" / "}),U.jsx("input",{className:"w-full focus-visible:outline-none text-xl sm:text-2xl font-semibold text-green16 placeholder-green17 p-2 border-b border-b-gray1 text-center flex-1",inputMode:"numeric",maxLength:2,placeholder:nt.nuxBirthdayDayPlaceholder,ref:w,type:"text",value:r,onBlur:()=>{_(!1)},onChange:te=>B(te.target.value),onFocus:()=>{_(!0)}}),U.jsx("span",{className:"text-2xl font-semibold text-green17",children:" / "}),U.jsx("input",{className:"w-full focus-visible:outline-none text-xl sm:text-2xl font-semibold text-green16 placeholder-green17 p-2 border-b border-b-gray1 text-center flex-1",inputMode:"numeric",maxLength:4,placeholder:nt.nuxBirthdayYearPlaceholder,ref:E,type:"text",value:o,onBlur:()=>{_(!1)},onChange:te=>D(te.currentTarget.value),onFocus:()=>{_(!0)}})]}),U.jsx("div",{className:"h-8 mt-4",children:p?U.jsx(Li,{className:"text-center",variant:eA.ERROR,children:p}):null})]}),t?null:ee]}),t&&!y?U.jsx("div",{className:"mt-8",children:ee}):null,U.jsx("div",{className:"flex flex-col items-center justify-center w-full px-6 sm:px-20",children:U.jsx(Qi,{className:"p-6 rounded-xl mt-10",iconStart:U.jsx(RD,{}),isDisabled:c||p!==null,isSymmetrical:!1,type:Wb.SUBMIT,variant:vi.BRAND,onClick:t?void 0:N,onTouchEnd:t?N:void 0})})]})};class jB extends Error{constructor(n,r,i){super(i);kt(this,"url");kt(this,"status");kt(this,"statusText");kt(this,"body");kt(this,"request");this.name="ApiError",this.url=r.url,this.status=r.status,this.statusText=r.statusText,this.body=r.body,this.request=n}}class N2e extends Error{constructor(e){super(e),this.name="CancelError"}get isCancelled(){return!0}}class D2e{constructor(e){kt(this,"_isResolved");kt(this,"_isRejected");kt(this,"_isCancelled");kt(this,"cancelHandlers");kt(this,"promise");kt(this,"_resolve");kt(this,"_reject");this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this.cancelHandlers=[],this.promise=new Promise((n,r)=>{this._resolve=n,this._reject=r;const i=o=>{this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,this._resolve&&this._resolve(o))},s=o=>{this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,this._reject&&this._reject(o))},a=o=>{this._isResolved||this._isRejected||this._isCancelled||this.cancelHandlers.push(o)};return Object.defineProperty(a,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(a,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(a,"isCancelled",{get:()=>this._isCancelled}),e(i,s,a)})}get[Symbol.toStringTag](){return"Cancellable Promise"}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}cancel(){if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this.cancelHandlers.length)try{for(const e of this.cancelHandlers)e()}catch(e){console.warn("Cancellation threw an error",e);return}this.cancelHandlers.length=0,this._reject&&this._reject(new N2e("Request aborted"))}}get isCancelled(){return this._isCancelled}}const yw=t=>typeof t=="string",Fk=t=>yw(t)&&t!=="",kD=t=>t instanceof Blob,$$=t=>t instanceof FormData,U2e=t=>{try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}},F2e=t=>{const e=[],n=(i,s)=>{e.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`)},r=(i,s)=>{s!=null&&(s instanceof Date?n(i,s.toISOString()):Array.isArray(s)?s.forEach(a=>r(i,a)):typeof s=="object"?Object.entries(s).forEach(([a,o])=>r(`${i}[${a}]`,o)):n(i,s))};return Object.entries(t).forEach(([i,s])=>r(i,s)),e.length?`?${e.join("&")}`:""},B2e=(t,e)=>{const n=encodeURI,r=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(s,a)=>{var o;return(o=e.path)!=null&&o.hasOwnProperty(a)?n(String(e.path[a])):s}),i=t.BASE+r;return e.query?i+F2e(e.query):i},z2e=t=>{if(t.formData){const e=new FormData,n=(r,i)=>{yw(i)||kD(i)?e.append(r,i):e.append(r,JSON.stringify(i))};return Object.entries(t.formData).filter(([,r])=>r!=null).forEach(([r,i])=>{Array.isArray(i)?i.forEach(s=>n(r,s)):n(r,i)}),e}},Sx=async(t,e)=>typeof e=="function"?e(t):e,j2e=async(t,e)=>{const[n,r,i,s]=await Promise.all([Sx(e,t.TOKEN),Sx(e,t.USERNAME),Sx(e,t.PASSWORD),Sx(e,t.HEADERS)]),a=Object.entries({Accept:"application/json",...s,...e.headers}).filter(([,o])=>o!=null).reduce((o,[l,c])=>({...o,[l]:String(c)}),{});if(Fk(n)&&(a.Authorization=`Bearer ${n}`),Fk(r)&&Fk(i)){const o=U2e(`${r}:${i}`);a.Authorization=`Basic ${o}`}return e.body!==void 0&&(e.mediaType?a["Content-Type"]=e.mediaType:kD(e.body)?a["Content-Type"]=e.body.type||"application/octet-stream":yw(e.body)?a["Content-Type"]="text/plain":$$(e.body)||(a["Content-Type"]="application/json")),new Headers(a)},H2e=t=>{var e,n;if(t.body!==void 0)return(e=t.mediaType)!=null&&e.includes("application/json")||(n=t.mediaType)!=null&&n.includes("+json")?JSON.stringify(t.body):yw(t.body)||kD(t.body)||$$(t.body)?t.body:JSON.stringify(t.body)},V2e=async(t,e,n,r,i,s,a)=>{const o=new AbortController;let l={headers:s,body:r??i,method:e.method,signal:o.signal};for(const c of t.interceptors.request._fns)l=await c(l);return a(()=>o.abort()),await fetch(n,l)},G2e=(t,e)=>{if(e){const n=t.headers.get(e);if(yw(n))return n}},$2e=async t=>{if(t.status!==204)try{const e=t.headers.get("Content-Type");if(e){const n=["application/octet-stream","application/pdf","application/zip","audio/","image/","video/"];if(e.includes("application/json")||e.includes("+json"))return await t.json();if(n.some(r=>e.includes(r)))return await t.blob();if(e.includes("multipart/form-data"))return await t.formData();if(e.includes("text/"))return await t.text()}}catch(e){console.error(e)}},W2e=(t,e)=>{const r={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"Im a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",...t.errors}[e.status];if(r)throw new jB(t,e,r);if(!e.ok){const i=e.status??"unknown",s=e.statusText??"unknown",a=(()=>{try{return JSON.stringify(e.body,null,2)}catch{return}})();throw new jB(t,e,`Generic Error: status: ${i}; status text: ${s}; body: ${a}`)}},$n=(t,e)=>new D2e(async(n,r,i)=>{try{const s=B2e(t,e),a=z2e(e),o=H2e(e),l=await j2e(t,e);if(!i.isCancelled){let c=await V2e(t,e,s,o,a,l,i);for(const y of t.interceptors.response._fns)c=await y(c);const f=await $2e(c),p=G2e(c,e.responseHeader);let m=f;e.responseTransformer&&c.ok&&(m=await e.responseTransformer(f));const _={url:s,ok:c.ok,status:c.status,statusText:c.statusText,body:p??m};W2e(e,_),n(_.body)}}catch(s){r(s)}});class q2e{static postExternalGenerateCallFileUploadUrl(e){return $n(Dn,{method:"POST",url:"/external/generate-call-file-upload-url",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static postExternalCallRecording(e){return $n(Dn,{method:"POST",url:"/external/call-recording",formData:e.formData,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static postExternalSubscribe(e){return $n(Dn,{method:"POST",url:"/external/subscribe",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteExternalSubscribe(e){return $n(Dn,{method:"DELETE",url:"/external/subscribe",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static postExternalCallRating(e){return $n(Dn,{method:"POST",url:"/external/call-rating",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}}class Ew{static postExternalGenerateCallFileUploadUrl(e){return $n(Dn,{method:"POST",url:"/external/generate-call-file-upload-url",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static postExternalCallRecording(e){return $n(Dn,{method:"POST",url:"/external/call-recording",formData:e.formData,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}static postExternalSubscribe(e){return $n(Dn,{method:"POST",url:"/external/subscribe",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteExternalSubscribe(e){return $n(Dn,{method:"DELETE",url:"/external/subscribe",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static postExternalCallRating(e){return $n(Dn,{method:"POST",url:"/external/call-rating",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static postExternalBugReport(e){return $n(Dn,{method:"POST",url:"/external/bug-report",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static getExternalLabelingProjectsByProjectId(e){return $n(Dn,{method:"GET",url:"/external/labeling/projects/{project_id}",path:{project_id:e.projectId},errors:{422:"Validation Error"}})}static getExternalLabelingProjectByNameByName(e){return $n(Dn,{method:"GET",url:"/external/labeling/project-by-name/{name}",path:{name:e.name},errors:{422:"Validation Error"}})}static getExternalLabelingItemSetByNameByName(e){return $n(Dn,{method:"GET",url:"/external/labeling/item-set-by-name/{name}",path:{name:e.name},errors:{422:"Validation Error"}})}static getExternalLabelingCrowdItems(e){return $n(Dn,{method:"GET",url:"/external/labeling/crowd-items",query:{project_id:e.projectId,item_set:e.itemSet},errors:{422:"Validation Error"}})}static postExternalLabelingCrowdLabels(e){return $n(Dn,{method:"POST",url:"/external/labeling/crowd-labels",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static getExternalLabelingStaffItems(e){return $n(Dn,{method:"GET",url:"/external/labeling/staff-items",query:{item_ids:e.itemIds,project_id:e.projectId,item_set:e.itemSet},errors:{422:"Validation Error"}})}static postExternalLabelingStaffLabels(e){return $n(Dn,{method:"POST",url:"/external/labeling/staff-labels",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static getExternalPresets(){return $n(Dn,{method:"GET",url:"/external/presets"})}static getExternalPreset(e){return $n(Dn,{method:"GET",url:"/external/preset",query:{name:e.name},errors:{422:"Validation Error"}})}static getExternalPresetNames(){return $n(Dn,{method:"GET",url:"/external/preset-names"})}static getExternalPresetList(){return $n(Dn,{method:"GET",url:"/external/preset-list"})}static getExternalFullPresets(){return $n(Dn,{method:"GET",url:"/external/full-presets"})}static getExternalCharacterByCharacterPreset(e){return $n(Dn,{method:"GET",url:"/external/character/{character}/preset",path:{character:e.character},errors:{422:"Validation Error"}})}static putExternalStorageByFilePath(e){return $n(Dn,{method:"PUT",url:"/external/storage/{file_path}",path:{file_path:e.filePath},errors:{422:"Validation Error"}})}static getExternalTestflightVersion(e){return $n(Dn,{method:"GET",url:"/external/testflight-version",query:{appstore_id:e.appstoreId},errors:{422:"Validation Error"}})}static getExternalInspirationsPaginated(e={}){return $n(Dn,{method:"GET",url:"/external/inspirations/paginated",query:{page:e.page,page_size:e.pageSize,earliest_published_at:e.earliestPublishedAt,earliest_created_at:e.earliestCreatedAt,sort_ascending:e.sortAscending,hours_back:e.hoursBack,source_type:e.sourceType},errors:{422:"Validation Error"}})}static getExternalHealth(){return $n(Dn,{method:"GET",url:"/external/health"})}static getExternalUser(){return $n(Dn,{method:"GET",url:"/external/user"})}static putExternalUser(e={}){return $n(Dn,{method:"PUT",url:"/external/user",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static deleteExternalUser(){return $n(Dn,{method:"DELETE",url:"/external/user"})}static patchExternalUser(e){return $n(Dn,{method:"PATCH",url:"/external/user",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static putExternalUserSetEulaSigned(){return $n(Dn,{method:"PUT",url:"/external/user/set-eula-signed"})}static getExternalUserResponders(){return $n(Dn,{method:"GET",url:"/external/user/responders"})}static deleteExternalUserClearChatHistory(){return $n(Dn,{method:"DELETE",url:"/external/user/clear-chat-history"})}}const X2e=t=>I0({mutationFn:({requestBody:e})=>q2e.postExternalCallRating({requestBody:e}),...t}),W$=t=>I0({mutationFn:({requestBody:e})=>Ew.postExternalSubscribe({requestBody:e}),...t}),q$=t=>I0({mutationFn:({requestBody:e})=>Ew.putExternalUser({requestBody:e}),...t}),K2e=t=>I0({mutationFn:({requestBody:e})=>Ew.patchExternalUser({requestBody:e}),...t}),Y2e=t=>I0({mutationFn:({requestBody:e})=>Ew.deleteExternalSubscribe({requestBody:e}),...t}),Z2e=t=>I0({mutationFn:()=>Ew.deleteExternalUser(),...t});function xl(t,e){const n=/(\{(\w+)\})|(\[([^\]]+)\]\((\w+)\))/g,r=[];let i=0,s;for(;(s=n.exec(t))!==null;){if(s.index>i&&r.push(t.slice(i,s.index)),s[1]){const o=s[2],l=e[o];r.push(typeof l=="function"?l(o):l??`{${o}}`)}else if(s[3]){const o=s[4],l=s[5],c=e[l];typeof c=="function"?r.push(c(o)):r.push(`[${o}](${l})`)}const{lastIndex:a}=n;i=a}return i<t.length&&r.push(t.slice(i)),r}function J2e({putUser:t,requestBody:e,onSuccess:n}){t({requestBody:e},{onSuccess:r=>{En.getState().updateSesameUser(r),n==null||n(r)}})}function X$({subscribe:t,requestBody:e}){const{sesameUser:n}=En.getState();if(n!=null){const r={...n,prefer_product_news_emails:!0};En.getState().updateSesameUser(r)}t({requestBody:e},{onSuccess:r=>{r.user!=null&&En.getState().updateSesameUser(r.user)},onError:()=>{n!=null&&En.getState().updateSesameUser(n)}})}const Q2e=["MALE","FEMALE","NON_BINARY","PREFERENCE_NOT_TO_SAY"],eke=()=>{const t=lp({maxWidth:Qg.SM}),e=uf(),{gender:n,setGender:r,nickname:i,birthDate:s}=ap(),{mutate:a,isPending:o}=q$(),{mutate:l}=W$(),{setIsTextInputFocused:c}=ap();P.useEffect(()=>{c(!1)},[c]);const f=m=>{m==null||m.preventDefault(),J2e({putUser:a,requestBody:{gender:n,nickname:i,birthday:s},onSuccess:_=>{X$({subscribe:l,requestBody:{email:_.email}}),e(Qd,{replace:!0}),PR.logOnboardingCompleted()}})},p=U.jsx("div",{className:"flex flex-col items-center justify-center w-full px-4 sm:px-20 mt-auto mb-4",children:U.jsx(Li,{className:"text-xs sm:text-sm text-center",children:nt.nuxGenderExplanation})});return U.jsxs("form",{onSubmit:f,children:[U.jsxs(AD,{children:[U.jsx("div",{className:"h-full flex flex-col gap-2 sm:gap-4 items-center justify-evenly sm:justify-center w-full px-10 py-6 sm:px-24",children:Q2e.map(m=>U.jsx(Qi,{className:"px-4 py-4 sm:px-6 sm:py-6 text-2xl",fullWidth:!0,isActive:m===n,label:nt[`nuxGender${m}`],textClassName:"text-2xl",type:Wb.BUTTON,variant:m===n?vi.BRAND:vi.TERTIARY,onClick:()=>{r(m)}},m))}),t?null:p]}),U.jsx("div",{className:"flex flex-col items-center justify-center w-full px-20",children:U.jsx(Qi,{className:"mt-10",isDisabled:n==null||o,isLoading:o,label:nt.nuxCompleteOnboarding,size:qb.XLARGE,textClassName:"text-lg",type:Wb.SUBMIT,variant:vi.BRAND,onClick:f})}),U.jsx(Li,{className:"text-center text-xs mt-4",children:xl(nt.termsOfUserAccountRegistration,{termsOfUse:m=>U.jsx(KC,{openInNewTab:!0,href:y9,children:m},m),privacyPolicy:m=>U.jsx(KC,{openInNewTab:!0,href:E9,children:m},m)})})]})},tke=()=>{const{step:t,nickname:e}=ap(),n=En(c=>c.isLoading),r=En(c=>c.sesameUser),i=()=>{switch(t){case 1:return U.jsx(P2e,{});case 2:return U.jsx(L2e,{});case 3:return U.jsx(eke,{})}return null},s=()=>{switch(t){case 1:return nt.nuxHeadingStep1;case 2:return nt.nuxHeadingStep2.replace("{nickname}",e);case 3:return nt.nuxHeadingStep3}return""},a=ID(),o=r!=null&&y$(r),l=!n&&!o;return Fe.useEffect(()=>{l&&PR.logOnboardingViewed()},[l]),n?null:o?U.jsx(TD,{to:Qd}):U.jsx("div",{className:"flex flex-row items-start justify-center flex-1 min-w-xl px-5",children:U.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[a?null:U.jsx(lo,{className:"text-green2 text-center",level:Ps.H2,children:s()}),i()]})})};var Bk={exports:{}},HB;function nke(){return HB||(HB=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,f){this.fn=l,this.context=c,this.once=f||!1}function s(l,c,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var _=new i(f,p||l,m),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],_]:l._events[y].push(_):(l._events[y]=_,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,p;if(this._eventsCount===0)return c;for(p in f=this._events)e.call(f,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=n?n+c:c,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,_=p.length,y=new Array(_);m<_;m++)y[m]=p[m].fn;return y},o.prototype.listenerCount=function(c){var f=n?n+c:c,p=this._events[f];return p?p.fn?1:p.length:0},o.prototype.emit=function(c,f,p,m,_,y){var E=n?n+c:c;if(!this._events[E])return!1;var S=this._events[E],w=arguments.length,R,C;if(S.fn){switch(S.once&&this.removeListener(c,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,m),!0;case 5:return S.fn.call(S.context,f,p,m,_),!0;case 6:return S.fn.call(S.context,f,p,m,_,y),!0}for(C=1,R=new Array(w-1);C<w;C++)R[C-1]=arguments[C];S.fn.apply(S.context,R)}else{var k=S.length,M;for(C=0;C<k;C++)switch(S[C].once&&this.removeListener(c,S[C].fn,void 0,!0),w){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,m);break;default:if(!R)for(M=1,R=new Array(w-1);M<w;M++)R[M-1]=arguments[M];S[C].fn.apply(S[C].context,R)}}return!0},o.prototype.on=function(c,f,p){return s(this,c,f,p,!1)},o.prototype.once=function(c,f,p){return s(this,c,f,p,!0)},o.prototype.removeListener=function(c,f,p,m){var _=n?n+c:c;if(!this._events[_])return this;if(!f)return a(this,_),this;var y=this._events[_];if(y.fn)y.fn===f&&(!m||y.once)&&(!p||y.context===p)&&a(this,_);else{for(var E=0,S=[],w=y.length;E<w;E++)(y[E].fn!==f||m&&!y[E].once||p&&y[E].context!==p)&&S.push(y[E]);S.length?this._events[_]=S.length===1?S[0]:S:a(this,_)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(Bk)),Bk.exports}var rke=nke();const ike=Xg(rke);class ske{constructor(){kt(this,"emitter",new ike)}dispatch(e,n){this.emitter.emit(e,n)}subscribe(e,n){this.emitter.on(e,n)}unsubscribe(e,n){this.emitter.off(e,n)}}const up=new ske;var ef=(t=>(t.SKIP_POST_CALL="SKIP_POST_CALL",t.SHOW_ALERT="SHOW_ALERT",t))(ef||{});const ake=({height:t=36,width:e=36})=>U.jsx("svg",{fill:"none",height:t,viewBox:"0 0 36 36",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M11.85 26.2812C11.2813 26.2812 10.8344 26.15 10.5094 25.8875C10.1844 25.625 10.0219 25.2656 10.0219 24.8094C10.0219 24.2094 10.2063 23.5813 10.575 22.925C10.95 22.2625 11.4875 21.6438 12.1875 21.0688C12.8875 20.4938 13.7281 20.0281 14.7094 19.6719C15.6906 19.3094 16.7875 19.1281 18 19.1281C19.2187 19.1281 20.3156 19.3094 21.2906 19.6719C22.2719 20.0281 23.1094 20.4938 23.8031 21.0688C24.5031 21.6438 25.0406 22.2625 25.4156 22.925C25.7906 23.5813 25.9781 24.2094 25.9781 24.8094C25.9781 25.2656 25.8156 25.625 25.4906 25.8875C25.1719 26.15 24.725 26.2812 24.15 26.2812H11.85ZM18 17.4875C17.3 17.4875 16.6594 17.3 16.0781 16.925C15.4969 16.55 15.0312 16.0469 14.6812 15.4156C14.3375 14.7844 14.1656 14.0781 14.1656 13.2969C14.1656 12.5344 14.3406 11.8406 14.6906 11.2156C15.0406 10.5906 15.5062 10.0938 16.0875 9.725C16.6687 9.35625 17.3062 9.17188 18 9.17188C18.7 9.17188 19.3406 9.35625 19.9219 9.725C20.5031 10.0875 20.9687 10.5813 21.3187 11.2063C21.6687 11.8313 21.8437 12.5219 21.8437 13.2781C21.8437 14.0656 21.6687 14.7781 21.3187 15.4156C20.975 16.0469 20.5125 16.55 19.9312 16.925C19.35 17.3 18.7062 17.4875 18 17.4875Z",fill:"#5B652A"})}),oke=({height:t=32,width:e=32,fillColor:n="#000000"})=>U.jsx("svg",{fill:n,height:t,viewBox:"0 0 32 32",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M21 11L11 21M11 11L21 21",stroke:"#111111",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:"0.5",strokeWidth:"2"})});async function lke({deleteUser:t}){await t(),await En.getState().logOut()}function uke({unsubscribe:t,requestBody:e}){const{sesameUser:n}=En.getState();if(n!=null){const r={...n,prefer_product_news_emails:!1};En.getState().updateSesameUser(r)}t({requestBody:e},{onSuccess:r=>{r.user!=null&&En.getState().updateSesameUser(r.user)},onError:()=>{n!=null&&En.getState().updateSesameUser(n)}})}function VB({patchUser:t,requestBody:e,onSuccess:n}){t({requestBody:e},{onSuccess:r=>{En.getState().updateSesameUser(r),n==null||n(r)}})}function cke(t,e,n){var r=this,i=P.useRef(null),s=P.useRef(0),a=P.useRef(null),o=P.useRef([]),l=P.useRef(),c=P.useRef(),f=P.useRef(t),p=P.useRef(!0);f.current=t;var m=typeof window<"u",_=!e&&e!==0&&m;if(typeof t!="function")throw new TypeError("Expected a function");e=+e||0;var y=!!(n=n||{}).leading,E=!("trailing"in n)||!!n.trailing,S="maxWait"in n,w="debounceOnServer"in n&&!!n.debounceOnServer,R=S?Math.max(+n.maxWait||0,e):null;P.useEffect(function(){return p.current=!0,function(){p.current=!1}},[]);var C=P.useMemo(function(){var k=function(B){var ee=o.current,te=l.current;return o.current=l.current=null,s.current=B,c.current=f.current.apply(te,ee)},M=function(B,ee){_&&cancelAnimationFrame(a.current),a.current=_?requestAnimationFrame(B):setTimeout(B,ee)},N=function(B){if(!p.current)return!1;var ee=B-i.current;return!i.current||ee>=e||ee<0||S&&B-s.current>=R},O=function(B){return a.current=null,E&&o.current?k(B):(o.current=l.current=null,c.current)},D=function B(){var ee=Date.now();if(N(ee))return O(ee);if(p.current){var te=e-(ee-i.current),ne=S?Math.min(te,R-(ee-s.current)):te;M(B,ne)}},L=function(){if(m||w){var B=Date.now(),ee=N(B);if(o.current=[].slice.call(arguments),l.current=r,i.current=B,ee){if(!a.current&&p.current)return s.current=i.current,M(D,e),y?k(i.current):c.current;if(S)return M(D,e),k(i.current)}return a.current||M(D,e),c.current}};return L.cancel=function(){a.current&&(_?cancelAnimationFrame(a.current):clearTimeout(a.current)),s.current=0,o.current=i.current=l.current=a.current=null},L.isPending=function(){return!!a.current},L.flush=function(){return a.current?O(Date.now()):c.current},L},[y,S,e,R,E,_,m,w]);return C}var NA=(t=>(t.ACCOUNT_MODAL="ACCOUNT_MODAL",t))(NA||{});const dke=()=>{const t=En(H=>H.sesameUser),e=En(H=>H.firebaseUser),n=Fe.useMemo(()=>{var H;return(H=e==null?void 0:e.providerData[0])==null?void 0:H.photoURL},[e]),{setIsOpen:r,setModal:i}=tA(),[s,a]=Fe.useState((t==null?void 0:t.nickname)??""),[o,l]=Fe.useState(void 0),[c,f]=Fe.useState((t==null?void 0:t.allow_training_from_calls)===!0),[p,m]=Fe.useState((t==null?void 0:t.prefer_product_news_emails)===!0),{mutate:_,isPending:y}=K2e(),{mutate:E,isPending:S}=W$(),{mutate:w,isPending:R}=Y2e(),{mutateAsync:C}=Z2e(),k=cke(H=>{VB({patchUser:_,requestBody:{nickname:H}})},500),M=uf(),N=Fe.useCallback(async()=>{await En.getState().logOut(),M(R1),r(!1)},[M,r]),O=H=>{f(H),VB({patchUser:_,requestBody:{allow_training_from_calls:H}})},D=H=>{m(H),t&&(H?X$({subscribe:E,requestBody:{email:t.email}}):uke({unsubscribe:w,requestBody:{email:t.email}}))},L=Fe.useCallback(H=>{const V=H.currentTarget.value;a(V),V.length>S9?l(nt.nicknameMaxLengthError):(l(void 0),k(V))},[k]),B=Fe.useCallback(async()=>{try{await lke({deleteUser:C}),r(!1),M(R1)}catch{up.dispatch(ef.SHOW_ALERT,{title:nt.defaultErrorMessage,body:nt.deleteAccountFailureAlertBody,cancelText:nt.continue,onAlertCancel:()=>{r(!1)}})}},[r,C,M]),ee=Fe.useCallback(()=>{up.dispatch(ef.SHOW_ALERT,{title:nt.deleteAccountConfirmationAlertTitle,body:nt.deleteAccountConfirmationAlertBody,confirmText:nt.deleteAccountConfirmationAlertConfirmLabel,cancelText:nt.cancel,onAlertConfirm:B,onAlertCancel:()=>{setTimeout(()=>{i(NA.ACCOUNT_MODAL),r(!0)},300)}})},[B,i,r]),te=Fe.useCallback(()=>{r(!1)},[r]),ne=Fe.useCallback(()=>{r(!1),setTimeout(()=>{ee()},300)},[r,ee]);return U.jsxs("div",{className:"flex h-full",children:[U.jsx("div",{className:"border-r-2 w-16 flex-col items-center justify-center h-full hidden xs:flex",children:U.jsx("div",{className:"flex items-center justify-center border-r-4 border-r-green2 w-full",children:U.jsx(ake,{})})}),U.jsxs("div",{className:"p-8 flex flex-col justify-between w-full",children:[U.jsxs("div",{className:"flex flex-col gap-4",children:[U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsx(lo,{fontVariant:pg.SEASON_MIX,level:Ps.H2,children:nt.accountModalHeader}),U.jsx(Qi,{"aria-label":nt.accountModalCloseButtonA11yLabel,className:"rounded-md",iconStart:U.jsx(oke,{height:32,width:32}),variant:vi.GHOST,onClick:te})]}),U.jsxs("div",{className:"flex flex-col gap-2",children:[U.jsx(Li,{className:"text-quaternary",fontSizeClassName:"text-xs",children:nt.accountModalLoggedInAs}),U.jsx("div",{children:U.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n?U.jsx("img",{alt:nt.accountModalAvatarA11yLabel,className:"w-[44px] h-[44px] rounded-full object-cover",src:n}):null,U.jsx(Li,{className:"text-tertiary",fontSizeClassName:"text-base",children:t==null?void 0:t.email})]})})]}),U.jsxs("div",{className:"flex flex-col gap-2",children:[U.jsx(tle,{id:"nickname",label:nt.accountModalNameLabel,suffix:U.jsx(Yoe,{icon:p9.EDIT}),value:s,onChange:L}),o!=null?U.jsx(Li,{fontSizeClassName:"text-xs",variant:eA.ERROR,children:o}):null]}),U.jsx(qoe,{}),U.jsxs("div",{className:"flex flex-col gap-6",children:[U.jsx(u4,{checked:c,description:nt.accountModalAllowTrainingSubtext,id:"allowTraining",isDisabled:y,label:nt.accountModalAllowTraining,onChange:O}),U.jsx(u4,{checked:p,id:"emailUpdates",isDisabled:S||R,label:nt.accountModalEmailUpdatesLabel,onChange:D})]})]}),U.jsxs("div",{className:"flex flex-col items-center gap-2 justify-center py-4 mt-2",children:[U.jsx(Qi,{fullWidth:!0,label:nt.accountModalLogoutButton,variant:vi.SECONDARY,onClick:N}),U.jsx(Qi,{fullWidth:!0,label:nt.accountModalDeleteAccountButtonLabel,variant:vi.DANGER,onClick:ne})]})]})]})},fke=()=>{const{setIsOpen:t,alertProps:e,setAlertProps:n}=tA();if(e==null)return null;const{title:r,body:i,confirmText:s,cancelText:a,onAlertConfirm:o,onAlertCancel:l}=e,c=P.useCallback(()=>{o==null||o(),t(!1)},[t,o]),f=P.useCallback(()=>{t(!1),n(void 0),l==null||l()},[t,l,n]);return U.jsxs("div",{className:"flex flex-col p-6",children:[U.jsx(lo,{className:"mb-5",level:Ps.H2,children:r}),U.jsx(Li,{className:"mb-8",children:i}),U.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3",children:[a==null?null:U.jsx(Qi,{fullWidth:!0,label:a,variant:vi.SECONDARY,onClick:f}),s==null?null:U.jsx(Qi,{fullWidth:!0,label:s,variant:vi.DANGER,onClick:c})]})]})},hke={[NA.ACCOUNT_MODAL]:dke},pke=()=>{const{isOpen:t,modal:e,setModal:n,setIsOpen:r,setAlertProps:i}=tA(),s=Fe.useCallback(c=>{i(c),r(!0),n(void 0)},[r,i,n]);if(Fe.useEffect(()=>(up.subscribe(ef.SHOW_ALERT,s),()=>{up.unsubscribe(ef.SHOW_ALERT,s)}),[s]),!t)return null;const a=t&&e!=null,o=t&&e==null,l=e==null?null:hke[e];return U.jsxs(U.Fragment,{children:[U.jsx(ele,{isOpen:a,onClose:()=>r(!1),children:l==null?null:U.jsx(l,{})}),U.jsx(Qoe,{isOpen:o,onClose:()=>r(!1),children:U.jsx(fke,{})})]})};let GB=0;function K$(){const[t,e]=P.useState(GB);return P.useEffect(()=>{const n=()=>{const r=window.innerHeight;e(r),GB=r};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}const Y$=({className:t,fillColor:e,width:n=24,height:r=24})=>U.jsx("svg",{className:t,fill:"none",height:r,viewBox:"0 0 21 24",width:n,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M20.5556 11.9355V23.871c-2.1599 0-4.1839-.5825-5.9295-1.5978-3.545-2.0625-5.9295-5.92-5.9295-10.3377V0c2.1599 0 4.1839.582452 5.9295 1.59777 3.5451 2.06245 5.9295 5.92 5.9295 10.33773ZM2.92522.798881C2.06504.289635 1.06573 0 0 0v5.96774c0 2.20887 1.17641 4.13766 2.92522 5.16886.86017.5092 1.8595.7989 2.92522.7989V5.96774c0-2.20886-1.17642-4.13764-2.92522-5.168859Z",fill:e??"currentColor"})}),mke=({height:t=24,width:e=24})=>U.jsx("svg",{fill:"none",height:t,viewBox:"0 0 24 24",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M11.9906 21.2179C10.6281 21.2179 9.34687 20.9585 8.14687 20.4398C6.95312 19.9273 5.90313 19.2179 4.99688 18.3117C4.09063 17.4054 3.37813 16.3554 2.85938 15.1617C2.34688 13.9617 2.09063 12.6804 2.09063 11.3179C2.09063 9.94917 2.34688 8.66792 2.85938 7.47417C3.37813 6.27417 4.09063 5.22105 4.99688 4.3148C5.90313 3.40855 6.95312 2.69917 8.14687 2.18667C9.34687 1.67417 10.6281 1.41792 11.9906 1.41792C13.3594 1.41792 14.6406 1.67417 15.8344 2.18667C17.0344 2.69917 18.0875 3.40855 18.9937 4.3148C19.9 5.22105 20.6094 6.27417 21.1219 7.47417C21.6406 8.66792 21.9 9.94917 21.9 11.3179C21.9 12.6804 21.6406 13.9617 21.1219 15.1617C20.6094 16.3554 19.9 17.4054 18.9937 18.3117C18.0875 19.2179 17.0344 19.9273 15.8344 20.4398C14.6406 20.9585 13.3594 21.2179 11.9906 21.2179ZM11.9906 19.3335C12.6594 19.3335 13.3469 19.2398 14.0531 19.0523C14.7594 18.871 15.4281 18.6054 16.0594 18.2554C16.6969 17.9054 17.2437 17.4804 17.7 16.9804C17.3125 16.4179 16.8281 15.946 16.2469 15.5648C15.6719 15.1835 15.025 14.896 14.3062 14.7023C13.5937 14.5085 12.8219 14.4117 11.9906 14.4117C11.1594 14.4117 10.3812 14.5117 9.65625 14.7117C8.9375 14.9054 8.29375 15.196 7.725 15.5835C7.15625 15.9648 6.675 16.4304 6.28125 16.9804C6.74375 17.4804 7.29062 17.9054 7.92187 18.2554C8.55937 18.6054 9.22812 18.871 9.92812 19.0523C10.6344 19.2398 11.3219 19.3335 11.9906 19.3335ZM11.9906 12.7429C12.6219 12.7492 13.1875 12.5898 13.6875 12.2648C14.1937 11.9398 14.5937 11.5023 14.8875 10.9523C15.1875 10.396 15.3375 9.7773 15.3375 9.09605C15.3375 8.4523 15.1875 7.85855 14.8875 7.3148C14.5875 6.77105 14.1844 6.33667 13.6781 6.01167C13.1781 5.68042 12.6156 5.5148 11.9906 5.5148C11.3719 5.5148 10.8094 5.68042 10.3031 6.01167C9.79687 6.33667 9.39375 6.77105 9.09375 7.3148C8.8 7.85855 8.65312 8.4523 8.65312 9.09605C8.65312 9.7773 8.8 10.3929 9.09375 10.9429C9.3875 11.4929 9.78437 11.9304 10.2844 12.2554C10.7906 12.5804 11.3594 12.7429 11.9906 12.7429Z",fill:"#5B652A"})}),gke=({timerIsRunning:t,className:e})=>{const[n,r]=P.useState(0);P.useEffect(()=>{let o=null;return t&&(o=window.setInterval(()=>{r(l=>l+1)},1e3)),()=>{o&&clearInterval(o)}},[t]);const i=Math.floor(n/60),s=n%60,a=`${String(i).padStart(2,"0")}:${String(s).padStart(2,"0")}`;return U.jsx(lo,{className:di("min-w-[68px]",e),level:Ps.H2,children:a})};var li=(t=>(t[t.SELECT_COMPANION=0]="SELECT_COMPANION",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.POST_CALL=3]="POST_CALL",t))(li||{});const _ke={enableRecording:!1,ringtone:null,ringtoneMaxDurationMs:null,connectedChime:null,disconnectedChime:null,inputReadyChime:null,inputWarmupMs:3e3,prepareAudioNotification:!0},$B={a:"Maya",b:"Maya-Alpha"},zn=mD(t=>({mayaIsInitialized:!1,setMayaIsInitialized:e=>t({mayaIsInitialized:e}),callWarning:void 0,setCallWarning:e=>t({callWarning:e}),callState:Hr.DISCONNECTED,setCallState:e=>t({callState:e}),lastSelectedCharacter:"Maya",setLastSelectedCharacter:e=>t({lastSelectedCharacter:e}),callView:li.SELECT_COMPANION,setCallView:e=>t({callView:e}),callLimitReached:!1,setCallLimitReached:e=>t({callLimitReached:e}),animateCompanionSelectionIntro:!1,setAnimateCompanionSelectionIntro:e=>t({animateCompanionSelectionIntro:e}),callVisualizerOuterContainerDimensions:{width:0,height:0},setCallVisualizerOuterContainerDimensions:e=>t({callVisualizerOuterContainerDimensions:e}),callId:void 0,setCallId:e=>t({callId:e})})),WB="text-green12 my-0",vke=()=>{const t=zn(r=>r.lastSelectedCharacter),e=zn(r=>r.callState===Hr.CONNECTED),n=P.useMemo(()=>({animation:"fadeIn 0.3s forwards"}),[]);return e?U.jsxs("div",{className:"flex flex-col justify-center items-center",style:n,children:[U.jsx("div",{children:U.jsxs("span",{className:di("flex items-center gap-2"),children:[U.jsx(lo,{className:WB,level:Ps.H2,children:t}),U.jsx(gke,{className:WB,timerIsRunning:e})]})}),U.jsx(Li,{className:"text-lg text-green9 leading-6",children:nt.callHeaderSubtitle})]}):null};function Z$(t){up.dispatch(ef.SHOW_ALERT,{title:nt.navigateEndCallConfirmationAlertTitle,body:nt.navigateEndCallConfirmationAlertBody,confirmText:nt.confirm,cancelText:nt.cancel,onAlertConfirm:t})}const yke=()=>{const{setIsOpen:t,setModal:e}=tA(),n=uf(),r=En(p=>p.isLoggedInUser),i=En(p=>p.isLoading),s=En(p=>p.loadingFailed),o=Cu().pathname,l=zn(p=>p.callState===Hr.CONNECTED),c=P.useCallback(()=>{e(NA.ACCOUNT_MODAL),t(!0)},[t,e]),f=P.useCallback(async()=>{l?Z$(()=>n(R1)):(o===hy&&await En.getState().logOut(),n(R1))},[n,l,o]);return i?null:r&&o!==hy?U.jsx("div",{className:"p-2",children:U.jsx("a",{className:"cursor-pointer",onClick:c,children:U.jsx(mke,{})})}):s?null:U.jsx(Qi,{label:o===hy?nt.nuxStartOver:nt.logIn,variant:o===hy?vi.SECONDARY:vi.PRIMARY,onClick:f})},qB={[Qd]:vke},Eke=()=>{const t=Cu(),e=P.useMemo(()=>{let i;return t.pathname in qB&&(i=qB[t.pathname]),i},[t.pathname]),n=zn(i=>i.callState===Hr.CONNECTED),r=P.useCallback(()=>{n?Z$(()=>{window.location.href=iC}):window.location.href=iC},[n]);return U.jsxs("div",{className:"flex items-center justify-between p-6 flex-0 min-h-[88px] max-h-[88px]",children:[U.jsx("div",{className:"min-w-[72px]",children:U.jsx("button",{"aria-label":iC,className:"p-2",onClick:r,children:U.jsx(Y$,{fillColor:"#5B652A",height:20,width:20})})}),U.jsx("div",{children:e==null?null:U.jsx(e,{})}),U.jsx("div",{className:"min-w-[72px] flex justify-end",children:U.jsx(yke,{})})]})},bx=({includeHeader:t=!0,children:e})=>{const n=K$(),r=Fe.useMemo(()=>({height:`${n}px`}),[n]);return Fe.useEffect(()=>{document.body.style.height=`${n}px`},[n]),U.jsxs(U.Fragment,{children:[U.jsxs("div",{className:"flex flex-col bg-color-light-1 overflow-y-auto",style:r,children:[t?U.jsx(Eke,{}):null,e]}),U.jsx(pke,{})]})},Ske=({className:t="",width:e=24,height:n=24})=>U.jsx("svg",{className:t,fill:"none",height:n,viewBox:"0 0 30 30",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M4.89844 14.3906V12.1992C4.89844 11.7617 5.05469 11.3945 5.36719 11.0977C5.6875 10.8008 6.06641 10.6523 6.50391 10.6523C6.94141 10.6523 7.32031 10.8008 7.64062 11.0977C7.96875 11.3945 8.13281 11.7617 8.13281 12.1992V14.2852C8.13281 15.6133 8.42969 16.7695 9.02344 17.7539C9.61719 18.7383 10.4297 19.5 11.4609 20.0391C12.5 20.5781 13.6797 20.8477 15 20.8477C16.3203 20.8477 17.4961 20.5781 18.5273 20.0391C19.5664 19.5 20.3828 18.7383 20.9766 17.7539C21.5781 16.7695 21.8789 15.6133 21.8789 14.2852V12.1992C21.8789 11.7617 22.0352 11.3945 22.3477 11.0977C22.668 10.8008 23.0508 10.6523 23.4961 10.6523C23.9414 10.6523 24.3203 10.8008 24.6328 11.0977C24.9453 11.3945 25.1016 11.7617 25.1016 12.1992V14.3906C25.1016 16.1719 24.7305 17.7344 23.9883 19.0781C23.2539 20.4219 22.2383 21.5 20.9414 22.3125C19.6445 23.125 18.168 23.6289 16.5117 23.8242V25.4883H20.707C21.1445 25.4883 21.5234 25.6406 21.8438 25.9453C22.1719 26.25 22.3359 26.625 22.3359 27.0703C22.3359 27.4922 22.1719 27.8594 21.8438 28.1719C21.5234 28.4844 21.1445 28.6406 20.707 28.6406H9.29297C8.85547 28.6406 8.47266 28.4844 8.14453 28.1719C7.82422 27.8594 7.66406 27.4922 7.66406 27.0703C7.66406 26.625 7.82422 26.25 8.14453 25.9453C8.47266 25.6406 8.85547 25.4883 9.29297 25.4883H13.5V23.8242C11.8359 23.6289 10.3555 23.125 9.05859 22.3125C7.76953 21.5 6.75391 20.4219 6.01172 19.0781C5.26953 17.7344 4.89844 16.1719 4.89844 14.3906ZM15 18.6328C14.1797 18.6328 13.418 18.4414 12.7148 18.0586C12.0195 17.668 11.4609 17.1211 11.0391 16.418C10.6172 15.7148 10.4062 14.8945 10.4062 13.957V5.94141C10.4062 5.00391 10.6172 4.1875 11.0391 3.49219C11.4609 2.78906 12.0195 2.24219 12.7148 1.85156C13.418 1.46094 14.1797 1.26562 15 1.26562C15.8203 1.26562 16.5781 1.46094 17.2734 1.85156C17.9688 2.24219 18.5234 2.78906 18.9375 3.49219C19.3594 4.19531 19.5703 5.01562 19.5703 5.95312V13.957C19.5703 14.8945 19.3594 15.7148 18.9375 16.418C18.5234 17.1211 17.9688 17.668 17.2734 18.0586C16.5781 18.4414 15.8203 18.6328 15 18.6328Z",fill:"#5B652A"})}),bke=({className:t="",width:e=24,height:n=24})=>U.jsx("svg",{className:t,fill:"none",height:n,viewBox:"0 0 30 30",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M4.89844 14.3906V12.1992C4.89844 11.7617 5.05469 11.3945 5.36719 11.0977C5.6875 10.8008 6.06641 10.6523 6.50391 10.6523C6.94141 10.6523 7.32031 10.8008 7.64062 11.0977C7.96875 11.3945 8.13281 11.7617 8.13281 12.1992V14.2852C8.13281 15.6133 8.42969 16.7695 9.02344 17.7539C9.61719 18.7383 10.4297 19.5 11.4609 20.0391C12.5 20.5781 13.6797 20.8477 15 20.8477C15.6484 20.8477 16.2656 20.7812 16.8516 20.6484C17.4453 20.5078 17.9922 20.3086 18.4922 20.0508L20.8125 22.3828C20.1953 22.7656 19.5234 23.0781 18.7969 23.3203C18.0703 23.5625 17.3086 23.7305 16.5117 23.8242V25.4883H20.707C21.1445 25.4883 21.5234 25.6406 21.8438 25.9453C22.1719 26.25 22.3359 26.625 22.3359 27.0703C22.3359 27.4922 22.1719 27.8594 21.8438 28.1719C21.5234 28.4844 21.1445 28.6406 20.707 28.6406H9.29297C8.85547 28.6406 8.47266 28.4844 8.14453 28.1719C7.82422 27.8594 7.66406 27.4922 7.66406 27.0703C7.66406 26.625 7.82422 26.25 8.14453 25.9453C8.47266 25.6406 8.85547 25.4883 9.29297 25.4883H13.5V23.8242C11.8359 23.6289 10.3555 23.125 9.05859 22.3125C7.76953 21.5 6.75391 20.4219 6.01172 19.0781C5.26953 17.7344 4.89844 16.1719 4.89844 14.3906ZM21.668 15.8203C21.8086 15.3359 21.8789 14.8242 21.8789 14.2852V12.1992C21.8789 11.7617 22.0352 11.3945 22.3477 11.0977C22.668 10.8008 23.0508 10.6523 23.4961 10.6523C23.9414 10.6523 24.3203 10.8008 24.6328 11.0977C24.9453 11.3945 25.1016 11.7617 25.1016 12.1992V14.3906C25.1016 15.875 24.832 17.2266 24.293 18.4453L21.668 15.8203ZM15 18.6328C14.1797 18.6328 13.418 18.4414 12.7148 18.0586C12.0195 17.668 11.4609 17.1211 11.0391 16.418C10.6172 15.7148 10.4062 14.8945 10.4062 13.957V11.9648L16.7227 18.2812C16.1758 18.5156 15.6016 18.6328 15 18.6328ZM15 1.42969C14.3203 1.42969 13.6914 1.56641 13.1133 1.83984C12.5352 2.10547 12.0391 2.48438 11.625 2.97656C11.2109 3.46875 10.918 4.05078 10.7461 4.72266V4.91016L19.5586 13.7227C19.5664 13.6836 19.5703 13.6445 19.5703 13.6055C19.5703 13.5664 19.5703 13.5312 19.5703 13.5V6.11719C19.5703 5.17969 19.3594 4.35938 18.9375 3.65625C18.5234 2.95312 17.9688 2.40625 17.2734 2.01562C16.5781 1.625 15.8203 1.42969 15 1.42969ZM24.9375 24.1992L4.81641 4.11328C4.62891 3.92578 4.53516 3.69141 4.53516 3.41016C4.53516 3.12109 4.62891 2.88281 4.81641 2.69531C5.01953 2.5 5.25781 2.40234 5.53125 2.40234C5.8125 2.40234 6.05078 2.5 6.24609 2.69531L26.3555 22.7812C26.5508 22.9766 26.6484 23.2148 26.6484 23.4961C26.6484 23.7695 26.5508 24.0039 26.3555 24.1992C26.168 24.3945 25.9336 24.4922 25.6523 24.4922C25.3711 24.4922 25.1328 24.3945 24.9375 24.1992Z",fill:"#5B652A"})}),XB=({icon:t,text:e,className:n,...r})=>U.jsxs("button",{className:di("relative w-full px-10 py-6 flex justify-between items-center","text-green2","hover:bg-mayaBase duration-300",n),...r,children:[U.jsx("span",{className:"flex-shrink-0 flex justify-center items-center",children:t}),U.jsx("span",{className:"text-md font-medium text-secondary",children:e})]}),J$=Fe.createContext({onMute:()=>{},onUnmute:()=>{}}),wke=({children:t})=>{const{webClient:e}=Fe.useContext(gw),n=Fe.useCallback(()=>{var s;(s=e==null?void 0:e.getSession())==null||s.setMuteInput(!0)},[e]),r=Fe.useCallback(()=>{var s;(s=e==null?void 0:e.getSession())==null||s.setMuteInput(!1)},[e]),i=Fe.useMemo(()=>({onMute:n,onUnmute:r}),[n,r]);return U.jsx(J$.Provider,{value:i,children:t})};function Tke(t){const e=P.useRef(void 0),n=P.useCallback(()=>t!=null?Promise.resolve(t):(e.current==null&&(e.current=(()=>{let i;return{promise:new Promise(a=>{i=a}),resolve:i}})()),e.current.promise),[t]),r=IA(t);return P.useEffect(()=>{t!=null&&e.current!=null&&e.current.resolve(t)},[t]),P.useEffect(()=>{r!=null&&t==null&&(e.current=void 0)},[r,t]),n}function bd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q$(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ho={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},a0={duration:.5,overwrite:!1,delay:0},OD,Ds,ni,Tc=1e8,ia=1/Tc,XP=Math.PI*2,xke=XP/4,Cke=0,eW=Math.sqrt,Rke=Math.cos,Mke=Math.sin,Es=function(e){return typeof e=="string"},yi=function(e){return typeof e=="function"},tf=function(e){return typeof e=="number"},PD=function(e){return typeof e>"u"},kc=function(e){return typeof e=="object"},uo=function(e){return e!==!1},LD=function(){return typeof window<"u"},wx=function(e){return yi(e)||Es(e)},tW=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},oa=Array.isArray,KP=/(?:-?\.?\d|\.)+/gi,nW=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,py=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,zk=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,rW=/[+-]=-?[.\d]+/,iW=/[^,'"\[\]\s]+/gi,Ake=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ui,ac,YP,ND,Go={},LR={},sW,aW=function(e){return(LR=o0(e,Go))&&po},DD=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},I1=function(e,n){return!n&&console.warn(e)},oW=function(e,n){return e&&(Go[e]=n)&&LR&&(LR[e]=n)||Go},k1=function(){return 0},Ike={suppressEvents:!0,isStart:!0,kill:!1},xC={suppressEvents:!0,kill:!1},kke={suppressEvents:!0},UD={},Gh=[],ZP={},lW,Do={},jk={},KB=30,CC=[],FD="",BD=function(e){var n=e[0],r,i;if(kc(n)||yi(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(i=CC.length;i--&&!CC[i].targetTest(n););r=CC[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new OW(e[i],r)))||e.splice(i,1);return e},yg=function(e){return e._gsap||BD(Cl(e))[0]._gsap},uW=function(e,n,r){return(r=e[n])&&yi(r)?e[n]():PD(r)&&e.getAttribute&&e.getAttribute(n)||r},co=function(e,n){return(e=e.split(",")).forEach(n)||e},Ii=function(e){return Math.round(e*1e5)/1e5||0},ji=function(e){return Math.round(e*1e7)/1e7||0},Ry=function(e,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},Oke=function(e,n){for(var r=n.length,i=0;e.indexOf(n[i])<0&&++i<r;);return i<r},NR=function(){var e=Gh.length,n=Gh.slice(0),r,i;for(ZP={},Gh.length=0,r=0;r<e;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},cW=function(e,n,r,i){Gh.length&&!Ds&&NR(),e.render(n,r,Ds&&n<0&&(e._initted||e._startAt)),Gh.length&&!Ds&&NR()},dW=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(iW).length<2?n:Es(e)?e.trim():e},fW=function(e){return e},$o=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},Pke=function(e){return function(n,r){for(var i in r)i in n||i==="duration"&&e||i==="ease"||(n[i]=r[i])}},o0=function(e,n){for(var r in n)e[r]=n[r];return e},YB=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=kc(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},DR=function(e,n){var r={},i;for(i in e)i in n||(r[i]=e[i]);return r},Ib=function(e){var n=e.parent||ui,r=e.keyframes?Pke(oa(e.keyframes)):$o;if(uo(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},Lke=function(e,n){for(var r=e.length,i=r===n.length;i&&r--&&e[r]===n[r];);return r<0},hW=function(e,n,r,i,s){var a=e[i],o;if(s)for(o=n[s];a&&a[s]>o;)a=a._prev;return a?(n._next=a._next,a._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[i]=n,n._prev=a,n.parent=n._dp=e,n},DA=function(e,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=n._prev,a=n._next;s?s._next=a:e[r]===n&&(e[r]=a),a?a._prev=s:e[i]===n&&(e[i]=s),n._next=n._prev=n.parent=null},cp=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Eg=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},Nke=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},JP=function(e,n,r,i){return e._startAt&&(Ds?e._startAt.revert(xC):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,i))},Dke=function t(e){return!e||e._ts&&t(e.parent)},ZB=function(e){return e._repeat?l0(e._tTime,e=e.duration()+e._rDelay)*e:0},l0=function(e,n){var r=Math.floor(e=ji(e/n));return e&&r===e?r-1:r},UR=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},UA=function(e){return e._end=ji(e._start+(e._tDur/Math.abs(e._ts||e._rts||ia)||0))},FA=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=ji(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),UA(e),r._dirty||Eg(r,e)),e},pW=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=UR(e.rawTime(),n),(!n._dur||Sw(0,n.totalDuration(),r)-n._tTime>ia)&&n.render(r,!0)),Eg(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},fc=function(e,n,r,i){return n.parent&&cp(n),n._start=ji((tf(r)?r:r||e!==ui?ml(e,r,n):e._time)+n._delay),n._end=ji(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),hW(e,n,"_first","_last",e._sort?"_start":0),QP(n)||(e._recent=n),i||pW(e,n),e._ts<0&&FA(e,e._tTime),e},mW=function(e,n){return(Go.ScrollTrigger||DD("scrollTrigger",n))&&Go.ScrollTrigger.create(n,e)},gW=function(e,n,r,i,s){if(jD(e,n,s),!e._initted)return 1;if(!r&&e._pt&&!Ds&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&lW!==Fo.frame)return Gh.push(e),e._lazy=[s,i],1},Uke=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},QP=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},Fke=function(e,n,r,i){var s=e.ratio,a=n<0||!n&&(!e._start&&Uke(e)&&!(!e._initted&&QP(e))||(e._ts<0||e._dp._ts<0)&&!QP(e))?0:1,o=e._rDelay,l=0,c,f,p;if(o&&e._repeat&&(l=Sw(0,e._tDur,n),f=l0(l,o),e._yoyo&&f&1&&(a=1-a),f!==l0(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||Ds||i||e._zTime===ia||!n&&e._zTime){if(!e._initted&&gW(e,n,i,r,l))return;for(p=e._zTime,e._zTime=n||(r?ia:0),r||(r=n&&!p),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;n<0&&JP(e,n,r,!0),e._onUpdate&&!r&&zo(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&zo(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===a&&(a&&cp(e,1),!r&&!Ds&&(zo(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},Bke=function(e,n,r){var i;if(r>n)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},u0=function(e,n,r,i){var s=e._repeat,a=ji(n)||0,o=e._tTime/e._tDur;return o&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:ji(a*(s+1)+e._rDelay*s):a,o>0&&!i&&FA(e,e._tTime=e._tDur*o),e.parent&&UA(e),r||Eg(e.parent,e),e},JB=function(e){return e instanceof Ma?Eg(e):u0(e,e._dur)},zke={_start:0,endTime:k1,totalDuration:k1},ml=function t(e,n,r){var i=e.labels,s=e._recent||zke,a=e.duration()>=Tc?s.endTime(!1):e._dur,o,l,c;return Es(n)&&(isNaN(n)||n in i)?(l=n.charAt(0),c=n.substr(-1)==="%",o=n.indexOf("="),l==="<"||l===">"?(o>=0&&(n=n.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(o<0?s:r).totalDuration()/100:1)):o<0?(n in i||(i[n]=a),i[n]):(l=parseFloat(n.charAt(o-1)+n.substr(o+1)),c&&r&&(l=l/100*(oa(r)?r[0]:r).totalDuration()),o>1?t(e,n.substr(0,o-1),r)+l:a+l)):n==null?a:+n},kb=function(e,n,r){var i=tf(n[1]),s=(i?2:1)+(e<2?0:1),a=n[s],o,l;if(i&&(a.duration=n[1]),a.parent=r,e){for(o=a,l=r;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=uo(l.vars.inherit)&&l.parent;a.immediateRender=uo(o.immediateRender),e<2?a.runBackwards=1:a.startAt=n[s-1]}return new zi(n[0],a,n[s+1])},Sp=function(e,n){return e||e===0?n(e):n},Sw=function(e,n,r){return r<e?e:r>n?n:r},ra=function(e,n){return!Es(e)||!(n=Ake.exec(e))?"":n[1]},jke=function(e,n,r){return Sp(r,function(i){return Sw(e,n,i)})},eL=[].slice,_W=function(e,n){return e&&kc(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&kc(e[0]))&&!e.nodeType&&e!==ac},Hke=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Es(i)&&!n||_W(i,1)?(s=r).push.apply(s,Cl(i)):r.push(i)})||r},Cl=function(e,n,r){return ni&&!n&&ni.selector?ni.selector(e):Es(e)&&!r&&(YP||!c0())?eL.call((n||ND).querySelectorAll(e),0):oa(e)?Hke(e,r):_W(e)?eL.call(e,0):e?[e]:[]},tL=function(e){return e=Cl(e)[0]||I1("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Cl(n,r.querySelectorAll?r:r===e?I1("Invalid scope")||ND.createElement("div"):e)}},vW=function(e){return e.sort(function(){return .5-Math.random()})},yW=function(e){if(yi(e))return e;var n=kc(e)?e:{each:e},r=Sg(n.ease),i=n.from||0,s=parseFloat(n.base)||0,a={},o=i>0&&i<1,l=isNaN(i)||o,c=n.axis,f=i,p=i;return Es(i)?f=p={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(f=i[0],p=i[1]),function(m,_,y){var E=(y||n).length,S=a[E],w,R,C,k,M,N,O,D,L;if(!S){if(L=n.grid==="auto"?0:(n.grid||[1,Tc])[1],!L){for(O=-1e8;O<(O=y[L++].getBoundingClientRect().left)&&L<E;);L<E&&L--}for(S=a[E]=[],w=l?Math.min(L,E)*f-.5:i%L,R=L===Tc?0:l?E*p/L-.5:i/L|0,O=0,D=Tc,N=0;N<E;N++)C=N%L-w,k=R-(N/L|0),S[N]=M=c?Math.abs(c==="y"?k:C):eW(C*C+k*k),M>O&&(O=M),M<D&&(D=M);i==="random"&&vW(S),S.max=O-D,S.min=D,S.v=E=(parseFloat(n.amount)||parseFloat(n.each)*(L>E?E-1:c?c==="y"?E/L:L:Math.max(L,E/L))||0)*(i==="edges"?-1:1),S.b=E<0?s-E:s,S.u=ra(n.amount||n.each)||0,r=r&&E<0?AW(r):r}return E=(S[m]-S.min)/S.max||0,ji(S.b+(r?r(E):E)*S.v)+S.u}},nL=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=ji(Math.round(parseFloat(r)/e)*e*n);return(i-i%1)/n+(tf(r)?0:ra(r))}},EW=function(e,n){var r=oa(e),i,s;return!r&&kc(e)&&(i=r=e.radius||Tc,e.values?(e=Cl(e.values),(s=!tf(e[0]))&&(i*=i)):e=nL(e.increment)),Sp(n,r?yi(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=Tc,f=0,p=e.length,m,_;p--;)s?(m=e[p].x-o,_=e[p].y-l,m=m*m+_*_):m=Math.abs(e[p]-o),m<c&&(c=m,f=p);return f=!i||c<=i?e[f]:a,s||f===a||tf(a)?f:f+ra(a)}:nL(e))},SW=function(e,n,r,i){return Sp(oa(e)?!n:r===!0?!!(r=0):!i,function(){return oa(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*i)/i})},Vke=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduce(function(s,a){return a(s)},i)}},Gke=function(e,n){return function(r){return e(parseFloat(r))+(n||ra(r))}},$ke=function(e,n,r){return wW(e,n,0,1,r)},bW=function(e,n,r){return Sp(r,function(i){return e[~~n(i)]})},Wke=function t(e,n,r){var i=n-e;return oa(e)?bW(e,t(0,e.length),n):Sp(r,function(s){return(i+(s-e)%i)%i+e})},qke=function t(e,n,r){var i=n-e,s=i*2;return oa(e)?bW(e,t(0,e.length-1),n):Sp(r,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},O1=function(e){for(var n=0,r="",i,s,a,o;~(i=e.indexOf("random(",n));)a=e.indexOf(")",i),o=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(o?iW:KP),r+=e.substr(n,i-n)+SW(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),n=a+1;return r+e.substr(n,e.length-n)},wW=function(e,n,r,i,s){var a=n-e,o=i-r;return Sp(s,function(l){return r+((l-e)/a*o||0)})},Xke=function t(e,n,r,i){var s=isNaN(e+n)?0:function(_){return(1-_)*e+_*n};if(!s){var a=Es(e),o={},l,c,f,p,m;if(r===!0&&(i=1)&&(r=null),a)e={p:e},n={p:n};else if(oa(e)&&!oa(n)){for(f=[],p=e.length,m=p-2,c=1;c<p;c++)f.push(t(e[c-1],e[c]));p--,s=function(y){y*=p;var E=Math.min(m,~~y);return f[E](y-E)},r=n}else i||(e=o0(oa(e)?[]:{},e));if(!f){for(l in n)zD.call(o,e,l,"get",n[l]);s=function(y){return GD(y,o)||(a?e.p:e)}}}return Sp(r,s)},QB=function(e,n,r){var i=e.labels,s=Tc,a,o,l;for(a in i)o=i[a]-n,o<0==!!r&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},zo=function(e,n,r){var i=e.vars,s=i[n],a=ni,o=e._ctx,l,c,f;if(s)return l=i[n+"Params"],c=i.callbackScope||e,r&&Gh.length&&NR(),o&&(ni=o),f=l?s.apply(c,l):s.call(c),ni=a,f},ub=function(e){return cp(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ds),e.progress()<1&&zo(e,"onInterrupt"),e},my,TW=[],xW=function(e){if(e)if(e=!e.name&&e.default||e,LD()||e.headless){var n=e.name,r=yi(e),i=n&&!r&&e.init?function(){this._props=[]}:e,s={init:k1,render:GD,add:zD,kill:cOe,modifier:uOe,rawVars:0},a={targetTest:0,get:0,getSetter:VD,aliases:{},register:0};if(c0(),e!==i){if(Do[n])return;$o(i,$o(DR(e,s),a)),o0(i.prototype,o0(s,DR(e,a))),Do[i.prop=n]=i,e.targetTest&&(CC.push(i),UD[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}oW(n,i),e.register&&e.register(po,i,fo)}else TW.push(e)},Br=255,cb={aqua:[0,Br,Br],lime:[0,Br,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Br],navy:[0,0,128],white:[Br,Br,Br],olive:[128,128,0],yellow:[Br,Br,0],orange:[Br,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Br,0,0],pink:[Br,192,203],cyan:[0,Br,Br],transparent:[Br,Br,Br,0]},Hk=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Br+.5|0},CW=function(e,n,r){var i=e?tf(e)?[e>>16,e>>8&Br,e&Br]:0:cb.black,s,a,o,l,c,f,p,m,_,y;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),cb[e])i=cb[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Br,i&Br,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Br,e&Br]}else if(e.substr(0,3)==="hsl"){if(i=y=e.match(KP),!n)l=+i[0]%360/360,c=+i[1]/100,f=+i[2]/100,a=f<=.5?f*(c+1):f+c-f*c,s=f*2-a,i.length>3&&(i[3]*=1),i[0]=Hk(l+1/3,s,a),i[1]=Hk(l,s,a),i[2]=Hk(l-1/3,s,a);else if(~e.indexOf("="))return i=e.match(nW),r&&i.length<4&&(i[3]=1),i}else i=e.match(KP)||cb.transparent;i=i.map(Number)}return n&&!y&&(s=i[0]/Br,a=i[1]/Br,o=i[2]/Br,p=Math.max(s,a,o),m=Math.min(s,a,o),f=(p+m)/2,p===m?l=c=0:(_=p-m,c=f>.5?_/(2-p-m):_/(p+m),l=p===s?(a-o)/_+(a<o?6:0):p===a?(o-s)/_+2:(s-a)/_+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(f*100+.5)),r&&i.length<4&&(i[3]=1),i},RW=function(e){var n=[],r=[],i=-1;return e.split($h).forEach(function(s){var a=s.match(py)||[];n.push.apply(n,a),r.push(i+=a.length+1)}),n.c=r,n},e8=function(e,n,r){var i="",s=(e+i).match($h),a=n?"hsla(":"rgba(",o=0,l,c,f,p;if(!s)return e;if(s=s.map(function(m){return(m=CW(m,n,1))&&a+(n?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),r&&(f=RW(e),l=r.c,l.join(i)!==f.c.join(i)))for(c=e.replace($h,"1").split(py),p=c.length-1;o<p;o++)i+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(f.length?f:s.length?s:r).shift());if(!c)for(c=e.split($h),p=c.length-1;o<p;o++)i+=c[o]+s[o];return i+c[p]},$h=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in cb)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Kke=/hsl[a]?\(/,MW=function(e){var n=e.join(" "),r;if($h.lastIndex=0,$h.test(n))return r=Kke.test(n),e[1]=e8(e[1],r),e[0]=e8(e[0],r,RW(e[1])),!0},P1,Fo=function(){var t=Date.now,e=500,n=33,r=t(),i=r,s=1e3/240,a=s,o=[],l,c,f,p,m,_,y=function E(S){var w=t()-i,R=S===!0,C,k,M,N;if((w>e||w<0)&&(r+=w-n),i+=w,M=i-r,C=M-a,(C>0||R)&&(N=++p.frame,m=M-p.time*1e3,p.time=M=M/1e3,a+=C+(C>=s?4:s-C),k=1),R||(l=c(E)),k)for(_=0;_<o.length;_++)o[_](M,m,N,S)};return p={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(S){return m/(1e3/(S||60))},wake:function(){sW&&(!YP&&LD()&&(ac=YP=window,ND=ac.document||{},Go.gsap=po,(ac.gsapVersions||(ac.gsapVersions=[])).push(po.version),aW(LR||ac.GreenSockGlobals||!ac.gsap&&ac||{}),TW.forEach(xW)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&p.sleep(),c=f||function(S){return setTimeout(S,a-p.time*1e3+1|0)},P1=1,y(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(l),P1=0,c=k1},lagSmoothing:function(S,w){e=S||1/0,n=Math.min(w||33,e)},fps:function(S){s=1e3/(S||240),a=p.time*1e3+s},add:function(S,w,R){var C=w?function(k,M,N,O){S(k,M,N,O),p.remove(C)}:S;return p.remove(S),o[R?"unshift":"push"](C),c0(),C},remove:function(S,w){~(w=o.indexOf(S))&&o.splice(w,1)&&_>=w&&_--},_listeners:o},p}(),c0=function(){return!P1&&Fo.wake()},qn={},Yke=/^[\d.\-M][\d.\-,\s]/,Zke=/["']/g,Jke=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,a=r.length,o,l,c;s<a;s++)l=r[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),n[i]=isNaN(c)?c.replace(Zke,"").trim():+c,i=l.substr(o+1).trim();return n},Qke=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n);return e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)},eOe=function(e){var n=(e+"").split("("),r=qn[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Jke(n[1])]:Qke(e).split(",").map(dW)):qn._CE&&Yke.test(e)?qn._CE("",e):r},AW=function(e){return function(n){return 1-e(1-n)}},IW=function t(e,n){for(var r=e._first,i;r;)r instanceof Ma?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Sg=function(e,n){return e&&(yi(e)?e:qn[e]||eOe(e))||n},l_=function(e,n,r,i){r===void 0&&(r=function(l){return 1-n(1-l)}),i===void 0&&(i=function(l){return l<.5?n(l*2)/2:1-n((1-l)*2)/2});var s={easeIn:n,easeOut:r,easeInOut:i},a;return co(e,function(o){qn[o]=Go[o]=s,qn[a=o.toLowerCase()]=r;for(var l in s)qn[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=qn[o+"."+l]=s[l]}),s},kW=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},Vk=function t(e,n,r){var i=n>=1?n:1,s=(r||(e?.3:.45))/(n<1?n:1),a=s/XP*(Math.asin(1/i)||0),o=function(f){return f===1?1:i*Math.pow(2,-10*f)*Mke((f-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:kW(o);return s=XP/s,l.config=function(c,f){return t(e,c,f)},l},Gk=function t(e,n){n===void 0&&(n=1.70158);var r=function(a){return a?--a*a*((n+1)*a+n)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:kW(r);return i.config=function(s){return t(e,s)},i};co("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;l_(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});qn.Linear.easeNone=qn.none=qn.Linear.easeIn;l_("Elastic",Vk("in"),Vk("out"),Vk());(function(t,e){var n=1/e,r=2*n,i=2.5*n,s=function(o){return o<n?t*o*o:o<r?t*Math.pow(o-1.5/e,2)+.75:o<i?t*(o-=2.25/e)*o+.9375:t*Math.pow(o-2.625/e,2)+.984375};l_("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);l_("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});l_("Circ",function(t){return-(eW(1-t*t)-1)});l_("Sine",function(t){return t===1?1:-Rke(t*xke)+1});l_("Back",Gk("in"),Gk("out"),Gk());qn.SteppedEase=qn.steps=Go.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,i=e+(n?0:1),s=n?1:0,a=1-ia;return function(o){return((i*Sw(0,a,o)|0)+s)*r}}};a0.ease=qn["quad.out"];co("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return FD+=t+","+t+"Params,"});var OW=function(e,n){this.id=Cke++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:uW,this.set=n?n.getSetter:VD},L1=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,u0(this,+n.duration,1,1),this.data=n.data,ni&&(this._ctx=ni,ni.data.push(this)),P1||Fo.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,u0(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(c0(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(FA(this,r),!s._dp||s.parent||pW(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&fc(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===ia||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),cW(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+ZB(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+ZB(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?l0(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?UR(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-1e-8?0:this._rts,this.totalTime(Sw(-Math.abs(this._delay),this._tDur,s),i!==!1),UA(this),Nke(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(c0(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ia&&(this._tTime-=ia)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&fc(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(uo(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?UR(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=kke);var i=Ds;return Ds=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Ds=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,JB(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,JB(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(ml(this,r),uo(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,uo(i)),this._dur||(this._zTime=-1e-8),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-ia)},e.eventCallback=function(r,i,s){var a=this.vars;return arguments.length>1?(i?(a[r]=i,s&&(a[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete a[r],this):a[r]},e.then=function(r){var i=this;return new Promise(function(s){var a=yi(r)?r:fW,o=function(){var c=i.then;i.then=null,yi(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=c),s(a),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},e.kill=function(){ub(this)},t}();$o(L1.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ma=function(t){Q$(e,t);function e(r,i){var s;return r===void 0&&(r={}),s=t.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=uo(r.sortChildren),ui&&fc(r.parent||ui,bd(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&mW(bd(s),r.scrollTrigger),s}var n=e.prototype;return n.to=function(i,s,a){return kb(0,arguments,this),this},n.from=function(i,s,a){return kb(1,arguments,this),this},n.fromTo=function(i,s,a,o){return kb(2,arguments,this),this},n.set=function(i,s,a){return s.duration=0,s.parent=this,Ib(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new zi(i,s,ml(this,a),1),this},n.call=function(i,s,a){return fc(this,zi.delayedCall(0,i,s),a)},n.staggerTo=function(i,s,a,o,l,c,f){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=f,a.parent=this,new zi(i,a,ml(this,l)),this},n.staggerFrom=function(i,s,a,o,l,c,f){return a.runBackwards=1,Ib(a).immediateRender=uo(a.immediateRender),this.staggerTo(i,s,a,o,l,c,f)},n.staggerFromTo=function(i,s,a,o,l,c,f,p){return o.startAt=a,Ib(o).immediateRender=uo(o.immediateRender),this.staggerTo(i,s,o,l,c,f,p)},n.render=function(i,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,f=i<=0?0:ji(i),p=this._zTime<0!=i<0&&(this._initted||!c),m,_,y,E,S,w,R,C,k,M,N,O;if(this!==ui&&f>l&&i>=0&&(f=l),f!==this._tTime||a||p){if(o!==this._time&&c&&(f+=this._time-o,i+=this._time-o),m=f,k=this._start,C=this._ts,w=!C,p&&(c||(o=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(N=this._yoyo,S=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(S*100+i,s,a);if(m=ji(f%S),f===l?(E=this._repeat,m=c):(M=ji(f/S),E=~~M,E&&E===M&&(m=c,E--),m>c&&(m=c)),M=l0(this._tTime,S),!o&&this._tTime&&M!==E&&this._tTime-M*S-this._dur<=0&&(M=E),N&&E&1&&(m=c-m,O=1),E!==M&&!this._lock){var D=N&&M&1,L=D===(N&&E&1);if(E<M&&(D=!D),o=D?0:f%c?c:f,this._lock=1,this.render(o||(O?0:ji(E*S)),s,!c)._lock=0,this._tTime=f,!s&&this.parent&&zo(this,"onRepeat"),this.vars.repeatRefresh&&!O&&(this.invalidate()._lock=1),o&&o!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,L&&(this._lock=2,o=D?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!O&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;IW(this,O)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(R=Bke(this,ji(o),ji(m)),R&&(f-=m-(m=R._start))),this._tTime=f,this._time=m,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&m&&!s&&!E&&(zo(this,"onStart"),this._tTime!==f))return this;if(m>=o&&i>=0)for(_=this._first;_;){if(y=_._next,(_._act||m>=_._start)&&_._ts&&R!==_){if(_.parent!==this)return this.render(i,s,a);if(_.render(_._ts>0?(m-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(m-_._start)*_._ts,s,a),m!==this._time||!this._ts&&!w){R=0,y&&(f+=this._zTime=-1e-8);break}}_=y}else{_=this._last;for(var B=i<0?i:m;_;){if(y=_._prev,(_._act||B<=_._end)&&_._ts&&R!==_){if(_.parent!==this)return this.render(i,s,a);if(_.render(_._ts>0?(B-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(B-_._start)*_._ts,s,a||Ds&&(_._initted||_._startAt)),m!==this._time||!this._ts&&!w){R=0,y&&(f+=this._zTime=B?-1e-8:ia);break}}_=y}}if(R&&!s&&(this.pause(),R.render(m>=o?0:-1e-8)._zTime=m>=o?1:-1,this._ts))return this._start=k,UA(this),this.render(i,s,a);this._onUpdate&&!s&&zo(this,"onUpdate",!0),(f===l&&this._tTime>=this.totalDuration()||!f&&o)&&(k===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(f===l&&this._ts>0||!f&&this._ts<0)&&cp(this,1),!s&&!(i<0&&!o)&&(f||o||!l)&&(zo(this,f===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,s){var a=this;if(tf(s)||(s=ml(this,s,i)),!(i instanceof L1)){if(oa(i))return i.forEach(function(o){return a.add(o,s)}),this;if(Es(i))return this.addLabel(i,s);if(yi(i))i=zi.delayedCall(0,i);else return this}return this!==i?fc(this,i,s):this},n.getChildren=function(i,s,a,o){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-1e8);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof zi?s&&l.push(c):(a&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},n.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},n.remove=function(i){return Es(i)?this.removeLabel(i):yi(i)?this.killTweensOf(i):(i.parent===this&&DA(this,i),i===this._recent&&(this._recent=this._last),Eg(this))},n.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ji(Fo.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},n.addLabel=function(i,s){return this.labels[i]=ml(this,s),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,s,a){var o=zi.delayedCall(0,s||k1,a);return o.data="isPause",this._hasPause=1,fc(this,o,ml(this,i))},n.removePause=function(i){var s=this._first;for(i=ml(this,i);s;)s._start===i&&s.data==="isPause"&&cp(s),s=s._next},n.killTweensOf=function(i,s,a){for(var o=this.getTweensOf(i,a),l=o.length;l--;)Oh!==o[l]&&o[l].kill(i,s);return this},n.getTweensOf=function(i,s){for(var a=[],o=Cl(i),l=this._first,c=tf(s),f;l;)l instanceof zi?Oke(l._targets,o)&&(c?(!Oh||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(f=l.getTweensOf(o,s)).length&&a.push.apply(a,f),l=l._next;return a},n.tweenTo=function(i,s){s=s||{};var a=this,o=ml(a,i),l=s,c=l.startAt,f=l.onStart,p=l.onStartParams,m=l.immediateRender,_,y=zi.to(a,$o({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||ia,onStart:function(){if(a.pause(),!_){var S=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());y._dur!==S&&u0(y,S,0,1).render(y._time,!0,!0),_=1}f&&f.apply(y,p||[])}},s));return m?y.render(0):y},n.tweenFromTo=function(i,s,a){return this.tweenTo(s,$o({startAt:{time:ml(this,i)}},a))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),QB(this,ml(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),QB(this,ml(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+ia)},n.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=i,o._end+=i),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=i);return Eg(this)},n.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Eg(this)},n.totalDuration=function(i){var s=0,a=this,o=a._last,l=Tc,c,f,p;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(p=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),f=o._start,f>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,fc(a,o,f-o._delay,1)._lock=0):l=f,f<0&&o._ts&&(s-=f,(!p&&!a._dp||p&&p.smoothChildTiming)&&(a._start+=f/a._ts,a._time-=f,a._tTime-=f),a.shiftChildren(-f,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;u0(a,a===ui&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(ui._ts&&(cW(ui,UR(i,ui)),lW=Fo.frame),Fo.frame>=KB){KB+=Ho.autoSleep||120;var s=ui._first;if((!s||!s._ts)&&Ho.autoSleep&&Fo._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Fo.sleep()}}},e}(L1);$o(Ma.prototype,{_lock:0,_hasPause:0,_forcing:0});var tOe=function(e,n,r,i,s,a,o){var l=new fo(this._pt,e,n,0,1,FW,null,s),c=0,f=0,p,m,_,y,E,S,w,R;for(l.b=r,l.e=i,r+="",i+="",(w=~i.indexOf("random("))&&(i=O1(i)),a&&(R=[r,i],a(R,e,n),r=R[0],i=R[1]),m=r.match(zk)||[];p=zk.exec(i);)y=p[0],E=i.substring(c,p.index),_?_=(_+1)%5:E.substr(-5)==="rgba("&&(_=1),y!==m[f++]&&(S=parseFloat(m[f-1])||0,l._pt={_next:l._pt,p:E||f===1?E:",",s:S,c:y.charAt(1)==="="?Ry(S,y)-S:parseFloat(y)-S,m:_&&_<4?Math.round:0},c=zk.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=o,(rW.test(i)||w)&&(l.e=0),this._pt=l,l},zD=function(e,n,r,i,s,a,o,l,c,f){yi(i)&&(i=i(s||0,e,a));var p=e[n],m=r!=="get"?r:yi(p)?c?e[n.indexOf("set")||!yi(e["get"+n.substr(3)])?n:"get"+n.substr(3)](c):e[n]():p,_=yi(p)?c?aOe:DW:HD,y;if(Es(i)&&(~i.indexOf("random(")&&(i=O1(i)),i.charAt(1)==="="&&(y=Ry(m,i)+(ra(m)||0),(y||y===0)&&(i=y))),!f||m!==i||rL)return!isNaN(m*i)&&i!==""?(y=new fo(this._pt,e,n,+m||0,i-(m||0),typeof p=="boolean"?lOe:UW,0,_),c&&(y.fp=c),o&&y.modifier(o,this,e),this._pt=y):(!p&&!(n in e)&&DD(n,i),tOe.call(this,e,n,m,i,_,l||Ho.stringFilter,c))},nOe=function(e,n,r,i,s){if(yi(e)&&(e=Ob(e,s,n,r,i)),!kc(e)||e.style&&e.nodeType||oa(e)||tW(e))return Es(e)?Ob(e,s,n,r,i):e;var a={},o;for(o in e)a[o]=Ob(e[o],s,n,r,i);return a},PW=function(e,n,r,i,s,a){var o,l,c,f;if(Do[e]&&(o=new Do[e]).init(s,o.rawVars?n[e]:nOe(n[e],i,s,a,r),r,i,a)!==!1&&(r._pt=l=new fo(r._pt,s,e,0,1,o.render,o,0,o.priority),r!==my))for(c=r._ptLookup[r._targets.indexOf(s)],f=o._props.length;f--;)c[o._props[f]]=l;return o},Oh,rL,jD=function t(e,n,r){var i=e.vars,s=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,c=i.onUpdate,f=i.runBackwards,p=i.yoyoEase,m=i.keyframes,_=i.autoRevert,y=e._dur,E=e._startAt,S=e._targets,w=e.parent,R=w&&w.data==="nested"?w.vars.targets:S,C=e._overwrite==="auto"&&!OD,k=e.timeline,M,N,O,D,L,B,ee,te,ne,H,V,W,J;if(k&&(!m||!s)&&(s="none"),e._ease=Sg(s,a0.ease),e._yEase=p?AW(Sg(p===!0?s:p,a0.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!k&&!!i.runBackwards,!k||m&&!i.stagger){if(te=S[0]?yg(S[0]).harness:0,W=te&&i[te.prop],M=DR(i,UD),E&&(E._zTime<0&&E.progress(1),n<0&&f&&o&&!_?E.render(-1,!0):E.revert(f&&y?xC:Ike),E._lazy=0),a){if(cp(e._startAt=zi.set(S,$o({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!E&&uo(l),startAt:null,delay:0,onUpdate:c&&function(){return zo(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Ds||!o&&!_)&&e._startAt.revert(xC),o&&y&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(f&&y&&!E){if(n&&(o=!1),O=$o({overwrite:!1,data:"isFromStart",lazy:o&&!E&&uo(l),immediateRender:o,stagger:0,parent:w},M),W&&(O[te.prop]=W),cp(e._startAt=zi.set(S,O)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Ds?e._startAt.revert(xC):e._startAt.render(-1,!0)),e._zTime=n,!o)t(e._startAt,ia,ia);else if(!n)return}for(e._pt=e._ptCache=0,l=y&&uo(l)||l&&!y,N=0;N<S.length;N++){if(L=S[N],ee=L._gsap||BD(S)[N]._gsap,e._ptLookup[N]=H={},ZP[ee.id]&&Gh.length&&NR(),V=R===S?N:R.indexOf(L),te&&(ne=new te).init(L,W||M,e,V,R)!==!1&&(e._pt=D=new fo(e._pt,L,ne.name,0,1,ne.render,ne,0,ne.priority),ne._props.forEach(function(X){H[X]=D}),ne.priority&&(B=1)),!te||W)for(O in M)Do[O]&&(ne=PW(O,M,e,V,L,R))?ne.priority&&(B=1):H[O]=D=zD.call(e,L,O,"get",M[O],V,R,0,i.stringFilter);e._op&&e._op[N]&&e.kill(L,e._op[N]),C&&e._pt&&(Oh=e,ui.killTweensOf(L,H,e.globalTime(n)),J=!e.parent,Oh=0),e._pt&&l&&(ZP[ee.id]=1)}B&&BW(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!J,m&&n<=0&&k.render(Tc,!0,!0)},rOe=function(e,n,r,i,s,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[n],f,p,m,_;if(!c)for(c=e._ptCache[n]=[],m=e._ptLookup,_=e._targets.length;_--;){if(f=m[_][n],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==n&&f.fp!==n;)f=f._next;if(!f)return rL=1,e.vars[n]="+=0",jD(e,o),rL=0,l?I1(n+" not eligible for reset"):1;c.push(f)}for(_=c.length;_--;)p=c[_],f=p._pt||p,f.s=(i||i===0)&&!s?i:f.s+(i||0)+a*f.c,f.c=r-f.s,p.e&&(p.e=Ii(r)+ra(p.e)),p.b&&(p.b=f.s+ra(p.b))},iOe=function(e,n){var r=e[0]?yg(e[0]).harness:0,i=r&&r.aliases,s,a,o,l;if(!i)return n;s=o0({},n);for(a in i)if(a in s)for(l=i[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},sOe=function(e,n,r,i){var s=n.ease||i||"power1.inOut",a,o;if(oa(n))o=r[e]||(r[e]=[]),n.forEach(function(l,c){return o.push({t:c/(n.length-1)*100,v:l,e:s})});else for(a in n)o=r[a]||(r[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:n[a],e:s})},Ob=function(e,n,r,i,s){return yi(e)?e.call(n,r,i,s):Es(e)&&~e.indexOf("random(")?O1(e):e},LW=FD+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",NW={};co(LW+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return NW[t]=1});var zi=function(t){Q$(e,t);function e(r,i,s,a){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=t.call(this,a?i:Ib(i))||this;var l=o.vars,c=l.duration,f=l.delay,p=l.immediateRender,m=l.stagger,_=l.overwrite,y=l.keyframes,E=l.defaults,S=l.scrollTrigger,w=l.yoyoEase,R=i.parent||ui,C=(oa(r)||tW(r)?tf(r[0]):"length"in i)?[r]:Cl(r),k,M,N,O,D,L,B,ee;if(o._targets=C.length?BD(C):I1("GSAP target "+r+" not found. https://gsap.com",!Ho.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=_,y||m||wx(c)||wx(f)){if(i=o.vars,k=o.timeline=new Ma({data:"nested",defaults:E||{},targets:R&&R.data==="nested"?R.vars.targets:C}),k.kill(),k.parent=k._dp=bd(o),k._start=0,m||wx(c)||wx(f)){if(O=C.length,B=m&&yW(m),kc(m))for(D in m)~LW.indexOf(D)&&(ee||(ee={}),ee[D]=m[D]);for(M=0;M<O;M++)N=DR(i,NW),N.stagger=0,w&&(N.yoyoEase=w),ee&&o0(N,ee),L=C[M],N.duration=+Ob(c,bd(o),M,L,C),N.delay=(+Ob(f,bd(o),M,L,C)||0)-o._delay,!m&&O===1&&N.delay&&(o._delay=f=N.delay,o._start+=f,N.delay=0),k.to(L,N,B?B(M,L,C):0),k._ease=qn.none;k.duration()?c=f=0:o.timeline=0}else if(y){Ib($o(k.vars.defaults,{ease:"none"})),k._ease=Sg(y.ease||i.ease||"none");var te=0,ne,H,V;if(oa(y))y.forEach(function(W){return k.to(C,W,">")}),k.duration();else{N={};for(D in y)D==="ease"||D==="easeEach"||sOe(D,y[D],N,y.easeEach);for(D in N)for(ne=N[D].sort(function(W,J){return W.t-J.t}),te=0,M=0;M<ne.length;M++)H=ne[M],V={ease:H.e,duration:(H.t-(M?ne[M-1].t:0))/100*c},V[D]=H.v,k.to(C,V,te),te+=V.duration;k.duration()<c&&k.to({},{duration:c-k.duration()})}}c||o.duration(c=k.duration())}else o.timeline=0;return _===!0&&!OD&&(Oh=bd(o),ui.killTweensOf(C),Oh=0),fc(R,bd(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(p||!c&&!y&&o._start===ji(R._time)&&uo(p)&&Dke(bd(o))&&R.data!=="nested")&&(o._tTime=-1e-8,o.render(Math.max(0,-f)||0)),S&&mW(bd(o),S),o}var n=e.prototype;return n.render=function(i,s,a){var o=this._time,l=this._tDur,c=this._dur,f=i<0,p=i>l-ia&&!f?l:i<ia?0:i,m,_,y,E,S,w,R,C,k;if(!c)Fke(this,i,s,a);else if(p!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f||this._lazy){if(m=p,C=this.timeline,this._repeat){if(E=c+this._rDelay,this._repeat<-1&&f)return this.totalTime(E*100+i,s,a);if(m=ji(p%E),p===l?(y=this._repeat,m=c):(S=ji(p/E),y=~~S,y&&y===S?(m=c,y--):m>c&&(m=c)),w=this._yoyo&&y&1,w&&(k=this._yEase,m=c-m),S=l0(this._tTime,E),m===o&&!a&&this._initted&&y===S)return this._tTime=p,this;y!==S&&(C&&this._yEase&&IW(C,w),this.vars.repeatRefresh&&!w&&!this._lock&&m!==E&&this._initted&&(this._lock=a=1,this.render(ji(E*y),!0).invalidate()._lock=0))}if(!this._initted){if(gW(this,f?i:m,a,s,p))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&y!==S))return this;if(c!==this._dur)return this.render(i,s,a)}if(this._tTime=p,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=R=(k||this._ease)(m/c),this._from&&(this.ratio=R=1-R),m&&!o&&!s&&!y&&(zo(this,"onStart"),this._tTime!==p))return this;for(_=this._pt;_;)_.r(R,_.d),_=_._next;C&&C.render(i<0?i:C._dur*C._ease(m/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(f&&JP(this,i,s,a),zo(this,"onUpdate")),this._repeat&&y!==S&&this.vars.onRepeat&&!s&&this.parent&&zo(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(f&&!this._onUpdate&&JP(this,i,!0,!0),(i||!c)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&cp(this,1),!s&&!(f&&!o)&&(p||o||w)&&(zo(this,p===l?"onComplete":"onReverseComplete",!0),this._prom&&!(p<l&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},n.resetTo=function(i,s,a,o,l){P1||Fo.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||jD(this,c),f=this._ease(c/this._dur),rOe(this,i,s,a,o,f,c,l)?this.resetTo(i,s,a,o,1):(FA(this,0),this.parent||hW(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?ub(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ds),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Oh&&Oh.vars.overwrite!==!0)._first||ub(this),this.parent&&a!==this.timeline.totalDuration()&&u0(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=i?Cl(i):o,c=this._ptLookup,f=this._pt,p,m,_,y,E,S,w;if((!s||s==="all")&&Lke(o,l))return s==="all"&&(this._pt=0),ub(this);for(p=this._op=this._op||[],s!=="all"&&(Es(s)&&(E={},co(s,function(R){return E[R]=1}),s=E),s=iOe(o,s)),w=o.length;w--;)if(~l.indexOf(o[w])){m=c[w],s==="all"?(p[w]=s,y=m,_={}):(_=p[w]=p[w]||{},y=s);for(E in y)S=m&&m[E],S&&((!("kill"in S.d)||S.d.kill(E)===!0)&&DA(this,S,"_pt"),delete m[E]),_!=="all"&&(_[E]=1)}return this._initted&&!this._pt&&f&&ub(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return kb(1,arguments)},e.delayedCall=function(i,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(i,s,a){return kb(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return ui.killTweensOf(i,s,a)},e}(L1);$o(zi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});co("staggerTo,staggerFrom,staggerFromTo",function(t){zi[t]=function(){var e=new Ma,n=eL.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var HD=function(e,n,r){return e[n]=r},DW=function(e,n,r){return e[n](r)},aOe=function(e,n,r,i){return e[n](i.fp,r)},oOe=function(e,n,r){return e.setAttribute(n,r)},VD=function(e,n){return yi(e[n])?DW:PD(e[n])&&e.setAttribute?oOe:HD},UW=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},lOe=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},FW=function(e,n){var r=n._pt,i="";if(!e&&n.b)i=n.b;else if(e===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},GD=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},uOe=function(e,n,r,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,n,r),s=a},cOe=function(e){for(var n=this._pt,r,i;n;)i=n._next,n.p===e&&!n.op||n.op===e?DA(this,n,"_pt"):n.dep||(r=1),n=i;return!r},dOe=function(e,n,r,i){i.mSet(e,n,i.m.call(i.tween,r,i.mt),i)},BW=function(e){for(var n=e._pt,r,i,s,a;n;){for(r=n._next,i=s;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:a)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:a=n,n=r}e._pt=s},fo=function(){function t(n,r,i,s,a,o,l,c,f){this.t=r,this.s=s,this.c=a,this.p=i,this.r=o||UW,this.d=l||this,this.set=c||HD,this.pr=f||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=dOe,this.m=r,this.mt=s,this.tween=i},t}();co(FD+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return UD[t]=1});Go.TweenMax=Go.TweenLite=zi;Go.TimelineLite=Go.TimelineMax=Ma;ui=new Ma({sortChildren:!1,defaults:a0,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ho.stringFilter=MW;var bg=[],RC={},fOe=[],t8=0,hOe=0,$k=function(e){return(RC[e]||fOe).map(function(n){return n()})},iL=function(){var e=Date.now(),n=[];e-t8>2&&($k("matchMediaInit"),bg.forEach(function(r){var i=r.queries,s=r.conditions,a,o,l,c;for(o in i)a=ac.matchMedia(i[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(r.revert(),l&&n.push(r))}),$k("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),t8=e,$k("matchMedia"))},zW=function(){function t(n,r){this.selector=r&&tL(r),this.data=[],this._r=[],this.isReverted=!1,this.id=hOe++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,i,s){yi(r)&&(s=i,i=r,r=yi);var a=this,o=function(){var c=ni,f=a.selector,p;return c&&c!==a&&c.data.push(a),s&&(a.selector=tL(s)),ni=a,p=i.apply(a,arguments),yi(p)&&a._r.push(p),ni=c,a.selector=f,a.isReverted=!1,p};return a.last=o,r===yi?o(a,function(l){return a.add(null,l)}):r?a[r]=o:o},e.ignore=function(r){var i=ni;ni=null,r(this),ni=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof t?r.push.apply(r,i.getTweens()):i instanceof zi&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var o=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(f){return o.splice(o.indexOf(f),1)}));for(o.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,p){return p.g-f.g||-1/0}).forEach(function(f){return f.t.revert(r)}),l=s.data.length;l--;)c=s.data[l],c instanceof Ma?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof zi)&&c.revert&&c.revert(r);s._r.forEach(function(f){return f(r,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var a=bg.length;a--;)bg[a].id===this.id&&bg.splice(a,1)},e.revert=function(r){this.kill(r||{})},t}(),pOe=function(){function t(n){this.contexts=[],this.scope=n,ni&&ni.data.push(this)}var e=t.prototype;return e.add=function(r,i,s){kc(r)||(r={matches:r});var a=new zW(0,s||this.scope),o=a.conditions={},l,c,f;ni&&!a.selector&&(a.selector=ni.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=r;for(c in r)c==="all"?f=1:(l=ac.matchMedia(r[c]),l&&(bg.indexOf(a)<0&&bg.push(a),(o[c]=l.matches)&&(f=1),l.addListener?l.addListener(iL):l.addEventListener("change",iL)));return f&&i(a,function(p){return a.add(null,p)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},t}(),FR={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(i){return xW(i)})},timeline:function(e){return new Ma(e)},getTweensOf:function(e,n){return ui.getTweensOf(e,n)},getProperty:function(e,n,r,i){Es(e)&&(e=Cl(e)[0]);var s=yg(e||{}).get,a=r?fW:dW;return r==="native"&&(r=""),e&&(n?a((Do[n]&&Do[n].get||s)(e,n,r,i)):function(o,l,c){return a((Do[o]&&Do[o].get||s)(e,o,l,c))})},quickSetter:function(e,n,r){if(e=Cl(e),e.length>1){var i=e.map(function(f){return po.quickSetter(f,n,r)}),s=i.length;return function(f){for(var p=s;p--;)i[p](f)}}e=e[0]||{};var a=Do[n],o=yg(e),l=o.harness&&(o.harness.aliases||{})[n]||n,c=a?function(f){var p=new a;my._pt=0,p.init(e,r?f+r:f,my,0,[e]),p.render(1,p),my._pt&&GD(1,my)}:o.set(e,l);return a?c:function(f){return c(e,l,r?f+r:f,o,1)}},quickTo:function(e,n,r){var i,s=po.to(e,$o((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),a=function(l,c,f){return s.resetTo(n,l,c,f)};return a.tween=s,a},isTweening:function(e){return ui.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Sg(e.ease,a0.ease)),YB(a0,e||{})},config:function(e){return YB(Ho,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!Do[o]&&!Go[o]&&I1(n+" effect requires "+o+" plugin.")}),jk[n]=function(o,l,c){return r(Cl(o),$o(l||{},s),c)},a&&(Ma.prototype[n]=function(o,l,c){return this.add(jk[n](o,kc(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,n){qn[e]=Sg(n)},parseEase:function(e,n){return arguments.length?Sg(e,n):qn},getById:function(e){return ui.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new Ma(e),i,s;for(r.smoothChildTiming=uo(e.smoothChildTiming),ui.remove(r),r._dp=0,r._time=r._tTime=ui._time,i=ui._first;i;)s=i._next,(n||!(!i._dur&&i instanceof zi&&i.vars.onComplete===i._targets[0]))&&fc(r,i,i._start-i._delay),i=s;return fc(ui,r,0),r},context:function(e,n){return e?new zW(e,n):ni},matchMedia:function(e){return new pOe(e)},matchMediaRefresh:function(){return bg.forEach(function(e){var n=e.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&e.revert()})||iL()},addEventListener:function(e,n){var r=RC[e]||(RC[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=RC[e],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:Wke,wrapYoyo:qke,distribute:yW,random:SW,snap:EW,normalize:$ke,getUnit:ra,clamp:jke,splitColor:CW,toArray:Cl,selector:tL,mapRange:wW,pipe:Vke,unitize:Gke,interpolate:Xke,shuffle:vW},install:aW,effects:jk,ticker:Fo,updateRoot:Ma.updateRoot,plugins:Do,globalTimeline:ui,core:{PropTween:fo,globals:oW,Tween:zi,Timeline:Ma,Animation:L1,getCache:yg,_removeLinkedListItem:DA,reverting:function(){return Ds},context:function(e){return e&&ni&&(ni.data.push(e),e._ctx=ni),ni},suppressOverwrites:function(e){return OD=e}}};co("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return FR[t]=zi[t]});Fo.add(Ma.updateRoot);my=FR.to({},{duration:0});var mOe=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},gOe=function(e,n){var r=e._targets,i,s,a;for(i in n)for(s=r.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=mOe(a,i)),a&&a.modifier&&a.modifier(n[i],e,r[s],i))},Wk=function(e,n){return{name:e,rawVars:1,init:function(i,s,a){a._onInit=function(o){var l,c;if(Es(s)&&(l={},co(s,function(f){return l[f]=1}),s=l),n){l={};for(c in s)l[c]=n(s[c]);s=l}gOe(o,s)}}}},po=FR.registerPlugin({name:"attr",init:function(e,n,r,i,s){var a,o,l;this.tween=r;for(a in n)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",n[a],i,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,n){for(var r=n._pt;r;)Ds?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Wk("roundProps",nL),Wk("modifiers"),Wk("snap",EW))||FR;zi.version=Ma.version=po.version="3.12.7";sW=1;LD()&&c0();qn.Power0;qn.Power1;qn.Power2;qn.Power3;qn.Power4;qn.Linear;qn.Quad;qn.Cubic;qn.Quart;qn.Quint;qn.Strong;qn.Elastic;qn.Back;qn.SteppedEase;qn.Bounce;qn.Sine;qn.Expo;qn.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var n8,Ph,My,$D,ig,r8,WD,_Oe=function(){return typeof window<"u"},nf={},jm=180/Math.PI,Ay=Math.PI/180,qv=Math.atan2,i8=1e8,qD=/([A-Z])/g,vOe=/(left|right|width|margin|padding|x)/i,yOe=/[\s,\(]\S/,mc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},sL=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},EOe=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},SOe=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},bOe=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},jW=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},HW=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},wOe=function(e,n,r){return e.style[n]=r},TOe=function(e,n,r){return e.style.setProperty(n,r)},xOe=function(e,n,r){return e._gsap[n]=r},COe=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},ROe=function(e,n,r,i,s){var a=e._gsap;a.scaleX=a.scaleY=r,a.renderTransform(s,a)},MOe=function(e,n,r,i,s){var a=e._gsap;a[n]=r,a.renderTransform(s,a)},ci="transform",ho=ci+"Origin",AOe=function t(e,n){var r=this,i=this.target,s=i.style,a=i._gsap;if(e in nf&&s){if(this.tfm=this.tfm||{},e!=="transform")e=mc[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=xd(i,o)}):this.tfm[e]=a.x?a[e]:xd(i,e),e===ho&&(this.tfm.zOrigin=a.zOrigin);else return mc.transform.split(",").forEach(function(o){return t.call(r,o,n)});if(this.props.indexOf(ci)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ho,n,"")),e=ci}(s||n)&&this.props.push(e,n,s[e])},VW=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},IOe=function(){var e=this.props,n=this.target,r=n.style,i=n._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?n[e[s]](e[s+2]):n[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(qD,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),s=WD(),(!s||!s.isStart)&&!r[ci]&&(VW(r),i.zOrigin&&r[ho]&&(r[ho]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},GW=function(e,n){var r={target:e,props:[],revert:IOe,save:AOe};return e._gsap||po.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},$W,aL=function(e,n){var r=Ph.createElementNS?Ph.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ph.createElement(e);return r&&r.style?r:Ph.createElement(e)},xc=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(qD,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,d0(n)||n,1)||""},s8="O,Moz,ms,Ms,Webkit".split(","),d0=function(e,n,r){var i=n||ig,s=i.style,a=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(s8[a]+e in s););return a<0?null:(a===3?"ms":a>=0?s8[a]:"")+e},oL=function(){_Oe()&&window.document&&(n8=window,Ph=n8.document,My=Ph.documentElement,ig=aL("div")||{style:{}},aL("div"),ci=d0(ci),ho=ci+"Origin",ig.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",$W=!!d0("perspective"),WD=po.core.reverting,$D=1)},a8=function(e){var n=e.ownerSVGElement,r=aL("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),My.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),My.removeChild(r),s},o8=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},WW=function(e){var n,r;try{n=e.getBBox()}catch{n=a8(e),r=1}return n&&(n.width||n.height)||r||(n=a8(e)),n&&!n.width&&!n.x&&!n.y?{x:+o8(e,["x","cx","x1"])||0,y:+o8(e,["y","cy","y1"])||0,width:0,height:0}:n},qW=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&WW(e))},jg=function(e,n){if(n){var r=e.style,i;n in nf&&n!==ho&&(n=ci),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(qD,"-$1").toLowerCase())):r.removeAttribute(n)}},Lh=function(e,n,r,i,s,a){var o=new fo(e._pt,n,r,0,1,a?HW:jW);return e._pt=o,o.b=i,o.e=s,e._props.push(r),o},l8={deg:1,rad:1,turn:1},kOe={grid:1,flex:1},dp=function t(e,n,r,i){var s=parseFloat(r)||0,a=(r+"").trim().substr((s+"").length)||"px",o=ig.style,l=vOe.test(n),c=e.tagName.toLowerCase()==="svg",f=(c?"client":"offset")+(l?"Width":"Height"),p=100,m=i==="px",_=i==="%",y,E,S,w;if(i===a||!s||l8[i]||l8[a])return s;if(a!=="px"&&!m&&(s=t(e,n,r,"px")),w=e.getCTM&&qW(e),(_||a==="%")&&(nf[n]||~n.indexOf("adius")))return y=w?e.getBBox()[l?"width":"height"]:e[f],Ii(_?s/y*p:s/100*y);if(o[l?"width":"height"]=p+(m?a:i),E=i!=="rem"&&~n.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,w&&(E=(e.ownerSVGElement||{}).parentNode),(!E||E===Ph||!E.appendChild)&&(E=Ph.body),S=E._gsap,S&&_&&S.width&&l&&S.time===Fo.time&&!S.uncache)return Ii(s/S.width*p);if(_&&(n==="height"||n==="width")){var R=e.style[n];e.style[n]=p+i,y=e[f],R?e.style[n]=R:jg(e,n)}else(_||a==="%")&&!kOe[xc(E,"display")]&&(o.position=xc(e,"position")),E===e&&(o.position="static"),E.appendChild(ig),y=ig[f],E.removeChild(ig),o.position="absolute";return l&&_&&(S=yg(E),S.time=Fo.time,S.width=E[f]),Ii(m?y*s/p:y&&s?p/y*s:0)},xd=function(e,n,r,i){var s;return $D||oL(),n in mc&&n!=="transform"&&(n=mc[n],~n.indexOf(",")&&(n=n.split(",")[0])),nf[n]&&n!=="transform"?(s=D1(e,i),s=n!=="transformOrigin"?s[n]:s.svg?s.origin:zR(xc(e,ho))+" "+s.zOrigin+"px"):(s=e.style[n],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=BR[n]&&BR[n](e,n,r)||xc(e,n)||uW(e,n)||(n==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?dp(e,n,s,r)+r:s},OOe=function(e,n,r,i){if(!r||r==="none"){var s=d0(n,e,1),a=s&&xc(e,s,1);a&&a!==r?(n=s,r=a):n==="borderColor"&&(r=xc(e,"borderTopColor"))}var o=new fo(this._pt,e.style,n,0,1,FW),l=0,c=0,f,p,m,_,y,E,S,w,R,C,k,M;if(o.b=r,o.e=i,r+="",i+="",i==="auto"&&(E=e.style[n],e.style[n]=i,i=xc(e,n)||i,E?e.style[n]=E:jg(e,n)),f=[r,i],MW(f),r=f[0],i=f[1],m=r.match(py)||[],M=i.match(py)||[],M.length){for(;p=py.exec(i);)S=p[0],R=i.substring(l,p.index),y?y=(y+1)%5:(R.substr(-5)==="rgba("||R.substr(-5)==="hsla(")&&(y=1),S!==(E=m[c++]||"")&&(_=parseFloat(E)||0,k=E.substr((_+"").length),S.charAt(1)==="="&&(S=Ry(_,S)+k),w=parseFloat(S),C=S.substr((w+"").length),l=py.lastIndex-C.length,C||(C=C||Ho.units[n]||k,l===i.length&&(i+=C,o.e+=C)),k!==C&&(_=dp(e,n,E,C)||0),o._pt={_next:o._pt,p:R||c===1?R:",",s:_,c:w-_,m:y&&y<4||n==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=n==="display"&&i==="none"?HW:jW;return rW.test(i)&&(o.e=0),this._pt=o,o},u8={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},POe=function(e){var n=e.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),n[0]=u8[r]||r,n[1]=u8[i]||i,n.join(" ")},LOe=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,s=n.u,a=r._gsap,o,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],nf[o]&&(l=1,o=o==="transformOrigin"?ho:ci),jg(r,o);l&&(jg(r,ci),a&&(a.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",D1(r,1),a.uncache=1,VW(i)))}},BR={clearProps:function(e,n,r,i,s){if(s.data!=="isFromStart"){var a=e._pt=new fo(e._pt,n,r,0,0,LOe);return a.u=i,a.pr=-10,a.tween=s,e._props.push(r),1}}},N1=[1,0,0,1,0,0],XW={},KW=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},c8=function(e){var n=xc(e,ci);return KW(n)?N1:n.substr(7).match(nW).map(Ii)},XD=function(e,n){var r=e._gsap||yg(e),i=e.style,s=c8(e),a,o,l,c;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?N1:s):(s===N1&&!e.offsetParent&&e!==My&&!r.svg&&(l=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,o=e.nextElementSibling,My.appendChild(e)),s=c8(e),l?i.display=l:jg(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):My.removeChild(e))),n&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},lL=function(e,n,r,i,s,a){var o=e._gsap,l=s||XD(e,!0),c=o.xOrigin||0,f=o.yOrigin||0,p=o.xOffset||0,m=o.yOffset||0,_=l[0],y=l[1],E=l[2],S=l[3],w=l[4],R=l[5],C=n.split(" "),k=parseFloat(C[0])||0,M=parseFloat(C[1])||0,N,O,D,L;r?l!==N1&&(O=_*S-y*E)&&(D=k*(S/O)+M*(-E/O)+(E*R-S*w)/O,L=k*(-y/O)+M*(_/O)-(_*R-y*w)/O,k=D,M=L):(N=WW(e),k=N.x+(~C[0].indexOf("%")?k/100*N.width:k),M=N.y+(~(C[1]||C[0]).indexOf("%")?M/100*N.height:M)),i||i!==!1&&o.smooth?(w=k-c,R=M-f,o.xOffset=p+(w*_+R*E)-w,o.yOffset=m+(w*y+R*S)-R):o.xOffset=o.yOffset=0,o.xOrigin=k,o.yOrigin=M,o.smooth=!!i,o.origin=n,o.originIsAbsolute=!!r,e.style[ho]="0px 0px",a&&(Lh(a,o,"xOrigin",c,k),Lh(a,o,"yOrigin",f,M),Lh(a,o,"xOffset",p,o.xOffset),Lh(a,o,"yOffset",m,o.yOffset)),e.setAttribute("data-svg-origin",k+" "+M)},D1=function(e,n){var r=e._gsap||new OW(e);if("x"in r&&!n&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=xc(e,ho)||"0",f,p,m,_,y,E,S,w,R,C,k,M,N,O,D,L,B,ee,te,ne,H,V,W,J,X,ie,pe,Z,le,ae,Ee,ke;return f=p=m=E=S=w=R=C=k=0,_=y=1,r.svg=!!(e.getCTM&&qW(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[ci]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ci]!=="none"?l[ci]:"")),i.scale=i.rotate=i.translate="none"),O=XD(e,r.svg),r.svg&&(r.uncache?(X=e.getBBox(),c=r.xOrigin-X.x+"px "+(r.yOrigin-X.y)+"px",J=""):J=!n&&e.getAttribute("data-svg-origin"),lL(e,J||c,!!J||r.originIsAbsolute,r.smooth!==!1,O)),M=r.xOrigin||0,N=r.yOrigin||0,O!==N1&&(ee=O[0],te=O[1],ne=O[2],H=O[3],f=V=O[4],p=W=O[5],O.length===6?(_=Math.sqrt(ee*ee+te*te),y=Math.sqrt(H*H+ne*ne),E=ee||te?qv(te,ee)*jm:0,R=ne||H?qv(ne,H)*jm+E:0,R&&(y*=Math.abs(Math.cos(R*Ay))),r.svg&&(f-=M-(M*ee+N*ne),p-=N-(M*te+N*H))):(ke=O[6],ae=O[7],pe=O[8],Z=O[9],le=O[10],Ee=O[11],f=O[12],p=O[13],m=O[14],D=qv(ke,le),S=D*jm,D&&(L=Math.cos(-D),B=Math.sin(-D),J=V*L+pe*B,X=W*L+Z*B,ie=ke*L+le*B,pe=V*-B+pe*L,Z=W*-B+Z*L,le=ke*-B+le*L,Ee=ae*-B+Ee*L,V=J,W=X,ke=ie),D=qv(-ne,le),w=D*jm,D&&(L=Math.cos(-D),B=Math.sin(-D),J=ee*L-pe*B,X=te*L-Z*B,ie=ne*L-le*B,Ee=H*B+Ee*L,ee=J,te=X,ne=ie),D=qv(te,ee),E=D*jm,D&&(L=Math.cos(D),B=Math.sin(D),J=ee*L+te*B,X=V*L+W*B,te=te*L-ee*B,W=W*L-V*B,ee=J,V=X),S&&Math.abs(S)+Math.abs(E)>359.9&&(S=E=0,w=180-w),_=Ii(Math.sqrt(ee*ee+te*te+ne*ne)),y=Ii(Math.sqrt(W*W+ke*ke)),D=qv(V,W),R=Math.abs(D)>2e-4?D*jm:0,k=Ee?1/(Ee<0?-Ee:Ee):0),r.svg&&(J=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!KW(xc(e,ci)),J&&e.setAttribute("transform",J))),Math.abs(R)>90&&Math.abs(R)<270&&(s?(_*=-1,R+=E<=0?180:-180,E+=E<=0?180:-180):(y*=-1,R+=R<=0?180:-180)),n=n||r.uncache,r.x=f-((r.xPercent=f&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+a,r.y=p-((r.yPercent=p&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-p)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+a,r.z=m+a,r.scaleX=Ii(_),r.scaleY=Ii(y),r.rotation=Ii(E)+o,r.rotationX=Ii(S)+o,r.rotationY=Ii(w)+o,r.skewX=R+o,r.skewY=C+o,r.transformPerspective=k+a,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(i[ho]=zR(c)),r.xOffset=r.yOffset=0,r.force3D=Ho.force3D,r.renderTransform=r.svg?DOe:$W?YW:NOe,r.uncache=0,r},zR=function(e){return(e=e.split(" "))[0]+" "+e[1]},qk=function(e,n,r){var i=ra(n);return Ii(parseFloat(n)+parseFloat(dp(e,"x",r+"px",i)))+i},NOe=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,YW(e,n)},bm="0deg",PS="0px",wm=") ",YW=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.z,c=r.rotation,f=r.rotationY,p=r.rotationX,m=r.skewX,_=r.skewY,y=r.scaleX,E=r.scaleY,S=r.transformPerspective,w=r.force3D,R=r.target,C=r.zOrigin,k="",M=w==="auto"&&e&&e!==1||w===!0;if(C&&(p!==bm||f!==bm)){var N=parseFloat(f)*Ay,O=Math.sin(N),D=Math.cos(N),L;N=parseFloat(p)*Ay,L=Math.cos(N),a=qk(R,a,O*L*-C),o=qk(R,o,-Math.sin(N)*-C),l=qk(R,l,D*L*-C+C)}S!==PS&&(k+="perspective("+S+wm),(i||s)&&(k+="translate("+i+"%, "+s+"%) "),(M||a!==PS||o!==PS||l!==PS)&&(k+=l!==PS||M?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+wm),c!==bm&&(k+="rotate("+c+wm),f!==bm&&(k+="rotateY("+f+wm),p!==bm&&(k+="rotateX("+p+wm),(m!==bm||_!==bm)&&(k+="skew("+m+", "+_+wm),(y!==1||E!==1)&&(k+="scale("+y+", "+E+wm),R.style[ci]=k||"translate(0, 0)"},DOe=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,a=r.x,o=r.y,l=r.rotation,c=r.skewX,f=r.skewY,p=r.scaleX,m=r.scaleY,_=r.target,y=r.xOrigin,E=r.yOrigin,S=r.xOffset,w=r.yOffset,R=r.forceCSS,C=parseFloat(a),k=parseFloat(o),M,N,O,D,L;l=parseFloat(l),c=parseFloat(c),f=parseFloat(f),f&&(f=parseFloat(f),c+=f,l+=f),l||c?(l*=Ay,c*=Ay,M=Math.cos(l)*p,N=Math.sin(l)*p,O=Math.sin(l-c)*-m,D=Math.cos(l-c)*m,c&&(f*=Ay,L=Math.tan(c-f),L=Math.sqrt(1+L*L),O*=L,D*=L,f&&(L=Math.tan(f),L=Math.sqrt(1+L*L),M*=L,N*=L)),M=Ii(M),N=Ii(N),O=Ii(O),D=Ii(D)):(M=p,D=m,N=O=0),(C&&!~(a+"").indexOf("px")||k&&!~(o+"").indexOf("px"))&&(C=dp(_,"x",a,"px"),k=dp(_,"y",o,"px")),(y||E||S||w)&&(C=Ii(C+y-(y*M+E*O)+S),k=Ii(k+E-(y*N+E*D)+w)),(i||s)&&(L=_.getBBox(),C=Ii(C+i/100*L.width),k=Ii(k+s/100*L.height)),L="matrix("+M+","+N+","+O+","+D+","+C+","+k+")",_.setAttribute("transform",L),R&&(_.style[ci]=L)},UOe=function(e,n,r,i,s){var a=360,o=Es(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?jm:1),c=l-i,f=i+c+"deg",p,m;return o&&(p=s.split("_")[1],p==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-360)),p==="cw"&&c<0?c=(c+a*i8)%a-~~(c/a)*a:p==="ccw"&&c>0&&(c=(c-a*i8)%a-~~(c/a)*a)),e._pt=m=new fo(e._pt,n,r,i,c,EOe),m.e=f,m.u="deg",e._props.push(r),m},d8=function(e,n){for(var r in n)e[r]=n[r];return e},FOe=function(e,n,r){var i=d8({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=r.style,o,l,c,f,p,m,_,y;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),a[ci]=n,o=D1(r,1),jg(r,ci),r.setAttribute("transform",c)):(c=getComputedStyle(r)[ci],a[ci]=n,o=D1(r,1),a[ci]=c);for(l in nf)c=i[l],f=o[l],c!==f&&s.indexOf(l)<0&&(_=ra(c),y=ra(f),p=_!==y?dp(r,l,c,y):parseFloat(c),m=parseFloat(f),e._pt=new fo(e._pt,o,l,p,m-p,sL),e._pt.u=y||0,e._props.push(l));d8(o,i)};co("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",i="Bottom",s="Left",a=(e<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map(function(o){return e<2?t+o:"border"+o+t});BR[e>1?"border"+t:t]=function(o,l,c,f,p){var m,_;if(arguments.length<4)return m=a.map(function(y){return xd(o,y,c)}),_=m.join(" "),_.split(m[0]).length===5?m[0]:_;m=(f+"").split(" "),_={},a.forEach(function(y,E){return _[y]=m[E]=m[E]||m[(E-1)/2|0]}),o.init(l,_,p)}});var ZW={name:"css",register:oL,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,i,s){var a=this._props,o=e.style,l=r.vars.startAt,c,f,p,m,_,y,E,S,w,R,C,k,M,N,O,D;$D||oL(),this.styles=this.styles||GW(e),D=this.styles.props,this.tween=r;for(E in n)if(E!=="autoRound"&&(f=n[E],!(Do[E]&&PW(E,n,r,i,e,s)))){if(_=typeof f,y=BR[E],_==="function"&&(f=f.call(r,i,e,s),_=typeof f),_==="string"&&~f.indexOf("random(")&&(f=O1(f)),y)y(this,e,E,f,r)&&(O=1);else if(E.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(E)+"").trim(),f+="",$h.lastIndex=0,$h.test(c)||(S=ra(c),w=ra(f)),w?S!==w&&(c=dp(e,E,c,w)+w):S&&(f+=S),this.add(o,"setProperty",c,f,i,s,0,0,E),a.push(E),D.push(E,0,o[E]);else if(_!=="undefined"){if(l&&E in l?(c=typeof l[E]=="function"?l[E].call(r,i,e,s):l[E],Es(c)&&~c.indexOf("random(")&&(c=O1(c)),ra(c+"")||c==="auto"||(c+=Ho.units[E]||ra(xd(e,E))||""),(c+"").charAt(1)==="="&&(c=xd(e,E))):c=xd(e,E),m=parseFloat(c),R=_==="string"&&f.charAt(1)==="="&&f.substr(0,2),R&&(f=f.substr(2)),p=parseFloat(f),E in mc&&(E==="autoAlpha"&&(m===1&&xd(e,"visibility")==="hidden"&&p&&(m=0),D.push("visibility",0,o.visibility),Lh(this,o,"visibility",m?"inherit":"hidden",p?"inherit":"hidden",!p)),E!=="scale"&&E!=="transform"&&(E=mc[E],~E.indexOf(",")&&(E=E.split(",")[0]))),C=E in nf,C){if(this.styles.save(E),k||(M=e._gsap,M.renderTransform&&!n.parseTransform||D1(e,n.parseTransform),N=n.smoothOrigin!==!1&&M.smooth,k=this._pt=new fo(this._pt,o,ci,0,1,M.renderTransform,M,0,-1),k.dep=1),E==="scale")this._pt=new fo(this._pt,M,"scaleY",M.scaleY,(R?Ry(M.scaleY,R+p):p)-M.scaleY||0,sL),this._pt.u=0,a.push("scaleY",E),E+="X";else if(E==="transformOrigin"){D.push(ho,0,o[ho]),f=POe(f),M.svg?lL(e,f,0,N,0,this):(w=parseFloat(f.split(" ")[2])||0,w!==M.zOrigin&&Lh(this,M,"zOrigin",M.zOrigin,w),Lh(this,o,E,zR(c),zR(f)));continue}else if(E==="svgOrigin"){lL(e,f,1,N,0,this);continue}else if(E in XW){UOe(this,M,E,m,R?Ry(m,R+f):f);continue}else if(E==="smoothOrigin"){Lh(this,M,"smooth",M.smooth,f);continue}else if(E==="force3D"){M[E]=f;continue}else if(E==="transform"){FOe(this,f,e);continue}}else E in o||(E=d0(E)||E);if(C||(p||p===0)&&(m||m===0)&&!yOe.test(f)&&E in o)S=(c+"").substr((m+"").length),p||(p=0),w=ra(f)||(E in Ho.units?Ho.units[E]:S),S!==w&&(m=dp(e,E,c,w)),this._pt=new fo(this._pt,C?M:o,E,m,(R?Ry(m,R+p):p)-m,!C&&(w==="px"||E==="zIndex")&&n.autoRound!==!1?bOe:sL),this._pt.u=w||0,S!==w&&w!=="%"&&(this._pt.b=c,this._pt.r=SOe);else if(E in o)OOe.call(this,e,E,c,R?R+f:f);else if(E in e)this.add(e,E,c||e[E],R?R+f:f,i,s);else if(E!=="parseTransform"){DD(E,f);continue}C||(E in o?D.push(E,0,o[E]):typeof e[E]=="function"?D.push(E,2,e[E]()):D.push(E,1,c||e[E])),a.push(E)}}O&&BW(this)},render:function(e,n){if(n.tween._time||!WD())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:xd,aliases:mc,getSetter:function(e,n,r){var i=mc[n];return i&&i.indexOf(",")<0&&(n=i),n in nf&&n!==ho&&(e._gsap.x||xd(e,"x"))?r&&r8===r?n==="scale"?COe:xOe:(r8=r||{})&&(n==="scale"?ROe:MOe):e.style&&!PD(e.style[n])?wOe:~n.indexOf("-")?TOe:VD(e,n)},core:{_removeProperty:jg,_getMatrix:XD}};po.utils.checkPrefix=d0;po.core.getStyleSaver=GW;(function(t,e,n,r){var i=co(t+","+e+","+n,function(s){nf[s]=1});co(e,function(s){Ho.units[s]="deg",XW[s]=1}),mc[i[13]]=t+","+e,co(r,function(s){var a=s.split(":");mc[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");co("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Ho.units[t]="px"});po.registerPlugin(ZW);var Bd=po.registerPlugin(ZW)||po;Bd.core.Tween;function yu(t){if(typeof t=="string")return t.replace(/\s(\S+)$/," $1");if(t==null)return t;if(P.isValidElement(t)){if(typeof t.props.children=="string")return P.cloneElement(t,{},yu(t.props.children));if(P.Children.count(t.props.children)>0)return P.cloneElement(t,{},P.Children.map(t.props.children,e=>yu(e)))}return t}var BOe=Object.create,BA=Object.defineProperty,zOe=Object.getOwnPropertyDescriptor,jOe=Object.getOwnPropertyNames,HOe=Object.getPrototypeOf,VOe=Object.prototype.hasOwnProperty,Q=(t,e)=>()=>(t&&(e=t(t=0)),e),GOe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),$Oe=(t,e)=>{for(var n in e)BA(t,n,{get:e[n],enumerable:!0})},JW=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jOe(e))!VOe.call(t,i)&&i!==n&&BA(t,i,{get:()=>e[i],enumerable:!(r=zOe(e,i))||r.enumerable});return t},WOe=(t,e,n)=>(n=t!=null?BOe(HOe(t)):{},JW(!t||!t.__esModule?BA(n,"default",{value:t,enumerable:!0}):n,t)),qOe=t=>JW(BA({},"__esModule",{value:!0}),t);function XOe(t){console&&console.warn&&console.warn(t)}function _r(){_r.init.call(this)}function MC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function QW(t){return t._maxListeners===void 0?_r.defaultMaxListeners:t._maxListeners}function f8(t,e,n,r){var i,s,a;if(MC(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]),a===void 0)a=s[e]=n,++t._eventsCount;else if(typeof a=="function"?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=QW(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,XOe(o)}return t}function KOe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h8(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=KOe.bind(r);return i.listener=n,r.wrapFn=i,i}function p8(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?ZOe(i):eq(i,i.length)}function m8(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function eq(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function YOe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ZOe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}var Tm,Xk,Tx,Kk,Yk,JOe=Q(()=>{Tm=typeof Reflect=="object"?Reflect:null,Xk=Tm&&typeof Tm.apply=="function"?Tm.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},Tm&&typeof Tm.ownKeys=="function"?Tx=Tm.ownKeys:Object.getOwnPropertySymbols?Tx=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Tx=function(t){return Object.getOwnPropertyNames(t)},Kk=Number.isNaN||function(t){return t!==t},_r.EventEmitter=_r,_r.prototype._events=void 0,_r.prototype._eventsCount=0,_r.prototype._maxListeners=void 0,Yk=10,Object.defineProperty(_r,"defaultMaxListeners",{enumerable:!0,get:function(){return Yk},set:function(t){if(typeof t!="number"||t<0||Kk(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Yk=t}}),_r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_r.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Kk(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},_r.prototype.getMaxListeners=function(){return QW(this)},_r.prototype.emit=function(t){if(!t){debugger;throw new Error("Undefined event type")}for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=i[t];if(o===void 0)return!1;if(typeof o=="function")Xk(o,this,e);else for(var l=o.length,c=eq(o,l),n=0;n<l;++n)Xk(c[n],this,e);return!0},_r.prototype.addListener=function(t,e){return f8(this,t,e,!1)},_r.prototype.on=_r.prototype.addListener,_r.prototype.prependListener=function(t,e){return f8(this,t,e,!0)},_r.prototype.once=function(t,e){return MC(e),this.on(t,h8(this,t,e)),this},_r.prototype.prependOnceListener=function(t,e){return MC(e),this.prependListener(t,h8(this,t,e)),this},_r.prototype.removeListener=function(t,e){var n,r,i,s,a;if(MC(e),r=this._events,r===void 0)return this;if(n=r[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,i=s;break}if(i<0)return this;i===0?n.shift():YOe(n,i),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this},_r.prototype.off=_r.prototype.removeListener,_r.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),s;for(r=0;r<i.length;++r)s=i[r],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},_r.prototype.listeners=function(t){return p8(this,t,!0)},_r.prototype.rawListeners=function(t){return p8(this,t,!1)},_r.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):m8.call(t,e)},_r.prototype.listenerCount=m8,_r.prototype.eventNames=function(){return this._eventsCount>0?Tx(this._events):[]}}),Qu,Hi,bp=Q(()=>{JOe(),_r.prototype.off=_r.prototype.removeListener,Qu=new _r,Qu.on_prior=Qu.prependListener.bind(Qu),Qu.setMaxListeners(100),Qu.getEventCount=()=>{let t=Object.keys(Qu._events),e=0,n=0;for(;n<t.length;)Qu._events[t[n]].length&&(e+=Qu._events[t[n]].length),n++;return e},Hi=Qu}),g8,xx,Hm,QOe=Q(()=>{if(g8=typeof window<"u",xx={},g8){let t=new URLSearchParams(window.location.search);xx={},t.forEach((e,n)=>{xx[n]=e==="true"?!0:e==="false"?!1:e})}Hm=xx});function Cx(t,e,n){return Math.max(0,Math.min(1,(n-t)/(e-t)))}var _8,zA,tq,uL,Nh,nq,Zk,pu,rq,iq,sq,aq,oq,v8,xa,AC,cL,lq,jR,uq,y8,ta,db,na,HR,E8,VR,IC,dL,fL,U1,cq,GR,dq,fq,hq,wu=Q(()=>{QOe(),_8=typeof window<"u",zA=!1,tq=!1,uL=Hm.debugaudio,Hm.stats,Hm.mode&&parseInt(Hm.mode),Hm.sam,Nh=_8?Math.min(window.devicePixelRatio,2):null,nq=function(t){},Zk={w:0,h:0},pu={w:0,h:0},rq=(t,e)=>{Zk.w=t,Zk.h=e},iq=(t,e)=>{pu.w=t,pu.h=e},sq="landscape",aq="portrait",oq=function(t){},v8={HIGH:"high",MEDIUM:"medium",LOW:"low"},v8.HIGH,xa=null,AC=function(t){xa=t},cL=null,lq=function(t){cL=t},jR=null,uq=function(t){jR=t},Number(Hm.fps),y8=Object.freeze({VOID:"VOID",IDLE:"IDLE",AI_STATE:"AI_STATE"}),y8.VOID,ta="IDLE",db=function(t){ta=t},na={IDLE:"IDLE",AI:"AI",USER:"USER"},HR=0,E8=function(t){HR=Cx(0,2e3,t)},VR=0,IC=0,dL=0,fL=function(t,e){IC=t,dL=Cx(0,e,IC)},U1=0,cq=function(t,e){U1=Cx(0,e,t)},GR=0,dq=function(t,e){GR=Cx(0,e,t)},fq=function(t){VR=t,E8(t)},hq=function(t){}}),S8,Vi,wp=Q(()=>{S8={BEFORE_RENDER:"before_render",UPDATE:"update",DAWN_UPDATE:"dawn_update",PRE_UPDATE:"pre_update",POST_UPDATE:"post_update",PAUSE:"pause",PLAY:"play",RESIZE:"resize",AUDIO_STATE_CHANGE:"audio_state_change",CONNECTED:"audio_connected",DISCONNECTED:"audio_disconnected"},Vi=S8}),b8,gy,pq=Q(()=>{bp(),wu(),wp(),b8=class{constructor(){kt(this,"play",()=>new Promise(async(t,e)=>{if(this._isPlaying){console.warn("webgl already playing"),t();return}this._isPlaying=!0,this.updateEvent(),this.now=Date.now(),Hi.emit(Vi.PLAY,null),t()}));kt(this,"pause",()=>new Promise((t,e)=>{if(this._isPlaying==!1){console.warn("webgl already paused"),t();return}this._isPlaying=!1,Hi.emit(Vi.PAUSE,null),t()}));this._lastPlaying=!1,this._isPlaying=!1,this.now=Date.now(),this.absTimer=0,this.w=0,this.h=0,this.lastW=0,this.lastH=0,this.updateEvent=this.update.bind(this)}update(t=!1,e=null){this._isPlaying&&requestAnimationFrame(this.updateEvent);let n=Date.now(),r=(n-this.now)/1e3;this.now=n,this.absTimer+=r,Hi.emit(Vi.PRE_UPDATE,r,this.absTimer),Hi.emit(Vi.UPDATE,r,this.absTimer),Hi.emit(Vi.POST_UPDATE,r,this.absTimer)}resize(t){(t==null||!t.w&&!t.h)&&(t={w:this.lastW,h:this.lastH,...t}),this.w=t.w,this.h=t.h,this.fullFrameX=t.w,this.fullFrameY=t.h,rq(this.w,this.h),iq(this.fullFrameX,this.fullFrameY),oq(window.matchMedia("(orientation: landscape)").matches?sq:aq),Hi.emit(Vi.RESIZE,this.w,this.h),xa!=null&&(xa.style.width=`${this.fullFrameX}px`,xa.style.height=`${this.fullFrameY}px`),nq(parseFloat((this.w/this.fullFrameX*Nh).toFixed(3))),this._isPlaying==!1&&this.update(!0)}},gy=new b8}),mq,ePe=Q(()=>{mq={camera:{type:"folder",value:{position:{visible:!1,type:"vec3",min:-100,max:100,step:.01,value:{x:0,y:0,z:11.222349786030593}},zoom:{value:65.88,min:.1,max:1e3,step:.01},far:{visible:!1,value:500,min:0,max:1e3,step:.01},target:{visible:!1,type:"vec3",min:-100,max:100,step:.01,value:{x:0,y:0,z:0}}}},background:{type:"folder",state:"closed",value:{backgroundcolor:{type:"color",value:16185078}}},preset:{type:"folder",value:{preset:{type:"select",value:"miles",values:["maya","miles"]}}},maya:{type:"folder",value:{gradientBlurBase:{type:"color",value:14409923,name:"baseColor"},gradientBlurColor:{type:"color",value:10333018},outerRingColor:{type:"color",value:14409923},outerRingOpacity:{value:.3,min:0,max:1,step:.01},rippleColor:{type:"color",value:14409923}}},miles:{type:"folder",value:{gradientBlurBase:{type:"color",value:12831644,name:"baseColor"},gradientBlurColor:{type:"color",value:7043619},outerRingColor:{type:"color",value:14409923},outerRingOpacity:{value:.3,min:0,max:1,step:.01},rippleColor:{type:"color",value:14409923}}},general:{type:"folder",value:{audioInfluence:{value:2,min:0,max:8,step:.01},borderRadius:{visible:!1,value:92,min:0,max:1200,step:1},size:{visible:!1,type:"vec2",min:1,max:2e3,step:1,value:{x:646,y:575}},cumulativeMode:{value:!1},flipAiAndUser:{value:!1},userMaxScale:{value:.5,min:0,max:2,step:.01},userSmooth:{value:16.75,min:0,max:20,step:.25},userNoiseThreshold:{value:.2,min:0,max:1,step:.01},aiMinScale:{value:0,min:0,max:2,step:.01},aiMaxScale:{value:.5,min:0,max:2,step:.01},aiSmooth:{value:20,min:0,max:20,step:.25},rippleSpawnRate:{value:1,min:0,max:1,step:.01},rippleLineWidth:{value:2,min:0,max:5,step:.01},rippleOpacity:{value:.3,min:0,max:1,step:.01},gradientDisplacement:{type:"vec2",min:-1,max:1,step:.01,value:{x:-.27,y:.81}},uvDomainGradientNoise:{min:0,max:2,step:.01,value:.88},gradientMixer:{min:0,max:1,step:.01,value:.5}}},text:{type:"folder",state:"closed",value:{position:{type:"vec3",min:-500,max:500,step:.01,value:{x:0,y:0,z:0}},scale:{value:50,min:0,max:200,step:.01}}},nameText:{type:"folder",state:"closed",value:{position:{type:"vec3",min:-500,max:500,step:.01,value:{x:0,y:0,z:0}},scale:{value:50,min:0,max:200,step:.01}}},audio:{type:"folder",visible:!1,value:{userSumNoiseThreshold:{value:699.74,min:0,max:1e3},soundStateSustainInSeconds:{value:.25,min:0,max:1}}},IDLE:{visible:!1,type:"folder",state:"closed",value:{}},USER:{visible:!1,type:"folder",state:"closed",value:{}},AI:{visible:!1,type:"folder",state:"closed",value:{}}}}),w8,Ot,jA=Q(()=>{wu(),ePe(),w8=class{constructor(){this.currentConfig=null,this.listeners=[],this.currentConfig=mq}getAudioStateConfig(t=null){var e=t||ta;switch(e){case na.IDLE:return this.currentConfig.IDLE.value;case na.AI:return this.currentConfig.AI.value;case na.USER:return this.currentConfig.USER.value}}},Ot=new w8}),$R,gq,hL,_q,KD,vq,sc,rf,ka,hc,zd,wg,pL,mL,gL,yq,yh,Eq,Sq,bq,wq,Tq,xq,Cq,Rq,WR,qR,Mq,Aq,Iq,kq,Oq,Pq,Lq,Nq,Dq,XR,KR,YR,Hg,ZR,JR,QR,eM,YD,Uq,Fq,jd,Bq,zq,jq,Hq,Vq,Gq,$q,_L,Vg,Gg,tM,nM,bw,rM,Dh,iM,kl,Wq,fb,mu,kC,Uh,Oc,ZD,JD,f0,HA,fp,gc,u_,VA,GA,$g,QD,e3,t3,Rl,n3,r3,Tg,Wg,i3,$A,s3,WA,qA,Pb,Lb,Nb,Db,sM,aM,oM,lM,uM,cM,dM,fM,hM,pM,mM,gM,_M,vM,yM,EM,SM,bM,wM,TM,xM,Ub,CM,RM,a3,MM,AM,IM,qq,Xq,Kq,Yq,Ad,Ca,qg,F1,Cr,Vm,vL,Zq,Jq,Qq,o3,eX,tX,nX,rX,kM,yL,_c,B1,Pn=Q(()=>{$R="173",gq=0,hL=1,_q=2,KD=1,vq=2,sc=3,rf=0,ka=1,hc=2,zd=0,wg=1,pL=2,mL=3,gL=4,yq=5,yh=100,Eq=101,Sq=102,bq=103,wq=104,Tq=200,xq=201,Cq=202,Rq=203,WR=204,qR=205,Mq=206,Aq=207,Iq=208,kq=209,Oq=210,Pq=211,Lq=212,Nq=213,Dq=214,XR=0,KR=1,YR=2,Hg=3,ZR=4,JR=5,QR=6,eM=7,YD=0,Uq=1,Fq=2,jd=0,Bq=1,zq=2,jq=3,Hq=4,Vq=5,Gq=6,$q=7,_L=300,Vg=301,Gg=302,tM=303,nM=304,bw=306,rM=1e3,Dh=1001,iM=1002,kl=1003,Wq=1004,fb=1005,mu=1006,kC=1007,Uh=1008,Oc=1009,ZD=1010,JD=1011,f0=1012,HA=1013,fp=1014,gc=1015,u_=1016,VA=1017,GA=1018,$g=1020,QD=35902,e3=1021,t3=1022,Rl=1023,n3=1024,r3=1025,Tg=1026,Wg=1027,i3=1028,$A=1029,s3=1030,WA=1031,qA=1033,Pb=33776,Lb=33777,Nb=33778,Db=33779,sM=35840,aM=35841,oM=35842,lM=35843,uM=36196,cM=37492,dM=37496,fM=37808,hM=37809,pM=37810,mM=37811,gM=37812,_M=37813,vM=37814,yM=37815,EM=37816,SM=37817,bM=37818,wM=37819,TM=37820,xM=37821,Ub=36492,CM=36494,RM=36495,a3=36283,MM=36284,AM=36285,IM=36286,qq=3200,Xq=3201,Kq=0,Yq=1,Ad="",Ca="srgb",qg="srgb-linear",F1="linear",Cr="srgb",Vm=7680,vL=519,Zq=512,Jq=513,Qq=514,o3=515,eX=516,tX=517,nX=518,rX=519,kM=35044,yL="300 es",_c=2e3,B1=2001}),c_,O0=Q(()=>{c_=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){let n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){let n=this._listeners;if(n===void 0)return;let r=n[t];if(r!==void 0){let i=r.indexOf(e);i!==-1&&r.splice(i,1)}}dispatchEvent(t){let e=this._listeners;if(e===void 0)return;let n=e[t.type];if(n!==void 0){t.target=this;let r=n.slice(0);for(let i=0,s=r.length;i<s;i++)r[i].call(this,t);t.target=null}}}});function Hd(){let t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Os[t&255]+Os[t>>8&255]+Os[t>>16&255]+Os[t>>24&255]+"-"+Os[e&255]+Os[e>>8&255]+"-"+Os[e>>16&15|64]+Os[e>>24&255]+"-"+Os[n&63|128]+Os[n>>8&255]+"-"+Os[n>>16&255]+Os[n>>24&255]+Os[r&255]+Os[r>>8&255]+Os[r>>16&255]+Os[r>>24&255]).toLowerCase()}function Fn(t,e,n){return Math.max(e,Math.min(n,t))}function l3(t,e){return(t%e+e)%e}function tPe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function nPe(t,e,n){return t!==e?(n-t)/(e-t):0}function Fb(t,e,n){return(1-n)*t+n*e}function rPe(t,e,n,r){return Fb(t,e,1-Math.exp(-n*r))}function iPe(t,e=1){return e-Math.abs(l3(t,e*2)-e)}function sPe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function aPe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function oPe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function lPe(t,e){return t+Math.random()*(e-t)}function uPe(t){return t*(.5-Math.random())}function cPe(t){t!==void 0&&(EL=t);let e=EL+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function dPe(t){return t*Iy}function fPe(t){return t*h0}function hPe(t){return(t&t-1)===0&&t!==0}function pPe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function mPe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function gPe(t,e,n,r,i){let s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+r)/2),f=a((e+r)/2),p=s((e-r)/2),m=a((e-r)/2),_=s((r-e)/2),y=a((r-e)/2);switch(i){case"XYX":t.set(o*f,l*p,l*m,o*c);break;case"YZY":t.set(l*m,o*f,l*p,o*c);break;case"ZXZ":t.set(l*p,l*m,o*f,o*c);break;case"XZX":t.set(o*f,l*y,l*_,o*c);break;case"YXY":t.set(l*_,o*f,l*y,o*c);break;case"ZYZ":t.set(l*y,l*_,o*f,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function cu(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Rr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var Os,EL,Iy,h0,iX,bs=Q(()=>{Os=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],EL=1234567,Iy=Math.PI/180,h0=180/Math.PI,iX={DEG2RAD:Iy,RAD2DEG:h0,generateUUID:Hd,clamp:Fn,euclideanModulo:l3,mapLinear:tPe,inverseLerp:nPe,lerp:Fb,damp:rPe,pingpong:iPe,smoothstep:sPe,smootherstep:aPe,randInt:oPe,randFloat:lPe,randFloatSpread:uPe,seededRandom:cPe,degToRad:dPe,radToDeg:fPe,isPowerOfTwo:hPe,ceilPowerOfTwo:pPe,floorPowerOfTwo:mPe,setQuaternionFromProperEuler:gPe,normalize:Rr,denormalize:cu}}),or,_o=Q(()=>{bs(),or=class sX{constructor(e=0,n=0){sX.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Fn(this.x,e.x,n.x),this.y=Fn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Fn(this.x,e,n),this.y=Fn(this.y,e,n),this}clampLength(e,n){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Fn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;let r=this.dot(e)/n;return Math.acos(Fn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){let r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}}),An,Rx,cf=Q(()=>{An=class aX{constructor(e,n,r,i,s,a,o,l,c){aX.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c)}set(e,n,r,i,s,a,o,l,c){let f=this.elements;return f[0]=e,f[1]=i,f[2]=o,f[3]=n,f[4]=s,f[5]=l,f[6]=r,f[7]=a,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){let r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[3],l=r[6],c=r[1],f=r[4],p=r[7],m=r[2],_=r[5],y=r[8],E=i[0],S=i[3],w=i[6],R=i[1],C=i[4],k=i[7],M=i[2],N=i[5],O=i[8];return s[0]=a*E+o*R+l*M,s[3]=a*S+o*C+l*N,s[6]=a*w+o*k+l*O,s[1]=c*E+f*R+p*M,s[4]=c*S+f*C+p*N,s[7]=c*w+f*k+p*O,s[2]=m*E+_*R+y*M,s[5]=m*S+_*C+y*N,s[8]=m*w+_*k+y*O,this}multiplyScalar(e){let n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){let e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],f=e[8];return n*a*f-n*o*c-r*s*f+r*o*l+i*s*c-i*a*l}invert(){let e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],f=e[8],p=f*a-o*c,m=o*l-f*s,_=c*s-a*l,y=n*p+r*m+i*_;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);let E=1/y;return e[0]=p*E,e[1]=(i*c-f*r)*E,e[2]=(o*r-i*a)*E,e[3]=m*E,e[4]=(f*n-i*l)*E,e[5]=(i*s-o*n)*E,e[6]=_*E,e[7]=(r*l-c*n)*E,e[8]=(a*n-r*s)*E,this}transpose(){let e,n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,o){let l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(Rx.makeScale(e,n)),this}rotate(e){return this.premultiply(Rx.makeRotation(-e)),this}translate(e,n){return this.premultiply(Rx.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){let n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){let n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){let r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Rx=new An});function oX(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function z1(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function _Pe(){let t=z1("canvas");return t.style.display="block",t}function ny(t){t in SL||(SL[t]=!0,console.warn(t))}function vPe(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function yPe(t){let e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function EPe(t){let e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var SL,d_=Q(()=>{SL={}});function SPe(){let t={enabled:!0,workingColorSpace:qg,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Cr&&(i.r=Vd(i.r),i.g=Vd(i.g),i.b=Vd(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Cr&&(i.r=ky(i.r),i.g=ky(i.g),i.b=ky(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Ad?F1:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[qg]:{primaries:e,whitePoint:r,transfer:F1,toXYZ:bL,fromXYZ:wL,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Ca},outputColorSpaceConfig:{drawingBufferColorSpace:Ca}},[Ca]:{primaries:e,whitePoint:r,transfer:Cr,toXYZ:bL,fromXYZ:wL,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Ca}}}),t}function Vd(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function ky(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}var bL,wL,nr,df=Q(()=>{Pn(),cf(),bL=new An().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),wL=new An().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715),nr=SPe()}),Xv,lX,bPe=Q(()=>{d_(),df(),lX=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Xv===void 0&&(Xv=z1("canvas")),Xv.width=t.width,Xv.height=t.height;let n=Xv.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Xv}return e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=z1("canvas");e.width=t.width,e.height=t.height;let n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);let r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let s=0;s<i.length;s++)i[s]=Vd(i[s]/255)*255;return n.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Vd(e[n]/255)*255):e[n]=Vd(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}});function Jk(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?lX.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var T8,u3,uX=Q(()=>{bPe(),bs(),T8=0,u3=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:T8++}),this.uuid=Hd(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let i;if(Array.isArray(r)){i=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?i.push(Jk(r[s].image)):i.push(Jk(r[s]))}else i=Jk(r);n.url=i}return e||(t.images[this.uuid]=n),n}}}),x8,Ml,Tp=Q(()=>{O0(),Pn(),bs(),_o(),cf(),uX(),x8=0,Ml=class OC extends c_{constructor(e=OC.DEFAULT_IMAGE,n=OC.DEFAULT_MAPPING,r=Dh,i=Dh,s=mu,a=Uh,o=Rl,l=Oc,c=OC.DEFAULT_ANISOTROPY,f=Ad){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:x8++}),this.uuid=Hd(),this.name="",this.source=new u3(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new or(0,0),this.repeat=new or(1,1),this.center=new or(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new An,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_L)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rM:e.x=e.x-Math.floor(e.x);break;case Dh:e.x=e.x<0?0:1;break;case iM:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rM:e.y=e.y-Math.floor(e.y);break;case Dh:e.y=e.y<0?0:1;break;case iM:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}},Ml.DEFAULT_IMAGE=null,Ml.DEFAULT_MAPPING=_L,Ml.DEFAULT_ANISOTROPY=1}),Zr,xp=Q(()=>{bs(),Zr=class cX{constructor(e=0,n=0,r=0,i=1){cX.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s,a=e.elements,o=a[0],l=a[4],c=a[8],f=a[1],p=a[5],m=a[9],_=a[2],y=a[6],E=a[10];if(Math.abs(l-f)<.01&&Math.abs(c-_)<.01&&Math.abs(m-y)<.01){if(Math.abs(l+f)<.1&&Math.abs(c+_)<.1&&Math.abs(m+y)<.1&&Math.abs(o+p+E-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;let w=(o+1)/2,R=(p+1)/2,C=(E+1)/2,k=(l+f)/4,M=(c+_)/4,N=(m+y)/4;return w>R&&w>C?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=k/r,s=M/r):R>C?R<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(R),r=k/i,s=N/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=M/s,i=N/s),this.set(r,i,s,n),this}let S=Math.sqrt((y-m)*(y-m)+(c-_)*(c-_)+(f-l)*(f-l));return Math.abs(S)<.001&&(S=1),this.x=(y-m)/S,this.y=(c-_)/S,this.z=(f-l)/S,this.w=Math.acos((o+p+E-1)/2),this}setFromMatrixPosition(e){let n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Fn(this.x,e.x,n.x),this.y=Fn(this.y,e.y,n.y),this.z=Fn(this.z,e.z,n.z),this.w=Fn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Fn(this.x,e,n),this.y=Fn(this.y,e,n),this.z=Fn(this.z,e,n),this.w=Fn(this.w,e,n),this}clampLength(e,n){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Fn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}}),dX,wPe=Q(()=>{O0(),Tp(),Pn(),xp(),uX(),dX=class extends c_{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Zr(0,0,t,e),this.scissorTest=!1,this.viewport=new Zr(0,0,t,e);let r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mu,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);let i=new Ml(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];let s=n.count;for(let a=0;a<s;a++)this.textures[a]=i.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;let e=Object.assign({},t.texture.image);return this.texture.source=new u3(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}}),Ol,P0=Q(()=>{wPe(),Ol=class extends dX{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}}),c3,fX=Q(()=>{Tp(),Pn(),c3=class extends Ml{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=kl,this.minFilter=kl,this.wrapR=Dh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}}),hX,TPe=Q(()=>{Tp(),Pn(),hX=class extends Ml{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=kl,this.minFilter=kl,this.wrapR=Dh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}}),Oy,d3=Q(()=>{bs(),Oy=class{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,s,a){let o=n[r+0],l=n[r+1],c=n[r+2],f=n[r+3],p=i[s+0],m=i[s+1],_=i[s+2],y=i[s+3];if(a===0){t[e+0]=o,t[e+1]=l,t[e+2]=c,t[e+3]=f;return}if(a===1){t[e+0]=p,t[e+1]=m,t[e+2]=_,t[e+3]=y;return}if(f!==y||o!==p||l!==m||c!==_){let E=1-a,S=o*p+l*m+c*_+f*y,w=S>=0?1:-1,R=1-S*S;if(R>Number.EPSILON){let k=Math.sqrt(R),M=Math.atan2(k,S*w);E=Math.sin(E*M)/k,a=Math.sin(a*M)/k}let C=a*w;if(o=o*E+p*C,l=l*E+m*C,c=c*E+_*C,f=f*E+y*C,E===1-a){let k=1/Math.sqrt(o*o+l*l+c*c+f*f);o*=k,l*=k,c*=k,f*=k}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=f}static multiplyQuaternionsFlat(t,e,n,r,i,s){let a=n[r],o=n[r+1],l=n[r+2],c=n[r+3],f=i[s],p=i[s+1],m=i[s+2],_=i[s+3];return t[e]=a*_+c*f+o*m-l*p,t[e+1]=o*_+c*p+l*f-a*m,t[e+2]=l*_+c*m+a*p-o*f,t[e+3]=c*_-a*f-o*p-l*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let n=t._x,r=t._y,i=t._z,s=t._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(r/2),f=a(i/2),p=o(n/2),m=o(r/2),_=o(i/2);switch(s){case"XYZ":this._x=p*c*f+l*m*_,this._y=l*m*f-p*c*_,this._z=l*c*_+p*m*f,this._w=l*c*f-p*m*_;break;case"YXZ":this._x=p*c*f+l*m*_,this._y=l*m*f-p*c*_,this._z=l*c*_-p*m*f,this._w=l*c*f+p*m*_;break;case"ZXY":this._x=p*c*f-l*m*_,this._y=l*m*f+p*c*_,this._z=l*c*_+p*m*f,this._w=l*c*f-p*m*_;break;case"ZYX":this._x=p*c*f-l*m*_,this._y=l*m*f+p*c*_,this._z=l*c*_-p*m*f,this._w=l*c*f+p*m*_;break;case"YZX":this._x=p*c*f+l*m*_,this._y=l*m*f+p*c*_,this._z=l*c*_-p*m*f,this._w=l*c*f-p*m*_;break;case"XZY":this._x=p*c*f-l*m*_,this._y=l*m*f-p*c*_,this._z=l*c*_+p*m*f,this._w=l*c*f+p*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,n=e[0],r=e[4],i=e[8],s=e[1],a=e[5],o=e[9],l=e[2],c=e[6],f=e[10],p=n+a+f;if(p>0){let m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(c-o)*m,this._y=(i-l)*m,this._z=(s-r)*m}else if(n>a&&n>f){let m=2*Math.sqrt(1+n-a-f);this._w=(c-o)/m,this._x=.25*m,this._y=(r+s)/m,this._z=(i+l)/m}else if(a>f){let m=2*Math.sqrt(1+a-n-f);this._w=(i-l)/m,this._x=(r+s)/m,this._y=.25*m,this._z=(o+c)/m}else{let m=2*Math.sqrt(1+f-n-a);this._w=(s-r)/m,this._x=(i+l)/m,this._y=(o+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Fn(this.dot(t),-1,1)))}rotateTowards(t,e){let n=this.angleTo(t);if(n===0)return this;let r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let n=t._x,r=t._y,i=t._z,s=t._w,a=e._x,o=e._y,l=e._z,c=e._w;return this._x=n*c+s*a+r*l-i*o,this._y=r*c+s*o+i*a-n*l,this._z=i*c+s*l+n*o-r*a,this._w=s*c-n*a-r*o-i*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let n=this._x,r=this._y,i=this._z,s=this._w,a=s*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;let o=1-a*a;if(o<=Number.EPSILON){let m=1-e;return this._w=m*s+e*this._w,this._x=m*n+e*this._x,this._y=m*r+e*this._y,this._z=m*i+e*this._z,this.normalize(),this}let l=Math.sqrt(o),c=Math.atan2(l,a),f=Math.sin((1-e)*c)/l,p=Math.sin(e*c)/l;return this._w=s*f+this._w*p,this._x=n*f+this._x*p,this._y=r*f+this._y*p,this._z=i*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),i*Math.sin(e),i*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}}),xe,Mx,Qk,Jr=Q(()=>{bs(),d3(),xe=class pX{constructor(e=0,n=0,r=0){pX.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Qk.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Qk.setFromAxisAngle(e,n))}applyMatrix3(e){let n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){let n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*r),f=2*(o*n-s*i),p=2*(s*r-a*n);return this.x=n+l*c+a*p-o*f,this.y=r+l*f+o*c-s*p,this.z=i+l*p+s*f-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Fn(this.x,e.x,n.x),this.y=Fn(this.y,e.y,n.y),this.z=Fn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Fn(this.x,e,n),this.y=Fn(this.y,e,n),this.z=Fn(this.z,e,n),this}clampLength(e,n){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Fn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){let r=e.x,i=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){let n=e.lengthSq();if(n===0)return this.set(0,0,0);let r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Mx.copy(this).projectOnVector(e),this.sub(Mx)}reflect(e){return this.sub(Mx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;let r=this.dot(e)/n;return Math.acos(Fn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){let i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){let n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){let n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},Mx=new xe,Qk=new Oy});function eO(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){sh.fromArray(t,s);let o=i.x*Math.abs(sh.x)+i.y*Math.abs(sh.y)+i.z*Math.abs(sh.z),l=e.dot(sh),c=n.dot(sh),f=r.dot(sh);if(Math.max(-Math.max(l,c,f),Math.min(l,c,f))>o)return!1}return!0}var Gd,ec,fl,LS,xm,Cm,Rm,fd,hd,Zf,Kv,NS,DS,sh,f3=Q(()=>{Jr(),Gd=class{constructor(t=new xe(1/0,1/0,1/0),e=new xe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(fl.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(fl.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=fl.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let n=t.geometry;if(n!==void 0){let i=n.getAttribute("position");if(e===!0&&i!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=i.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,fl):fl.fromBufferAttribute(i,s),fl.applyMatrix4(t.matrixWorld),this.expandByPoint(fl);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),LS.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),LS.copy(n.boundingBox)),LS.applyMatrix4(t.matrixWorld),this.union(LS)}let r=t.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,fl),fl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Kv),NS.subVectors(this.max,Kv),xm.subVectors(t.a,Kv),Cm.subVectors(t.b,Kv),Rm.subVectors(t.c,Kv),fd.subVectors(Cm,xm),hd.subVectors(Rm,Cm),Zf.subVectors(xm,Rm);let e=[0,-fd.z,fd.y,0,-hd.z,hd.y,0,-Zf.z,Zf.y,fd.z,0,-fd.x,hd.z,0,-hd.x,Zf.z,0,-Zf.x,-fd.y,fd.x,0,-hd.y,hd.x,0,-Zf.y,Zf.x,0];return!eO(e,xm,Cm,Rm,NS)||(e=[1,0,0,0,1,0,0,0,1],!eO(e,xm,Cm,Rm,NS))?!1:(DS.crossVectors(fd,hd),e=[DS.x,DS.y,DS.z],eO(e,xm,Cm,Rm,NS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,fl).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(fl).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ec[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ec[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ec[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ec[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ec[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ec[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ec[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ec[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ec),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},ec=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe],fl=new xe,LS=new Gd,xm=new xe,Cm=new xe,Rm=new xe,fd=new xe,hd=new xe,Zf=new xe,Kv=new xe,NS=new xe,DS=new xe,sh=new xe}),C8,Yv,Ax,L0,XA=Q(()=>{f3(),Jr(),C8=new Gd,Yv=new xe,Ax=new xe,L0=class{constructor(t=new xe,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let n=this.center;e!==void 0?n.copy(e):C8.setFromPoints(t).getCenter(n);let r=0;for(let i=0,s=t.length;i<s;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Yv.subVectors(t,this.center);let e=Yv.lengthSq();if(e>this.radius*this.radius){let n=Math.sqrt(e),r=(n-this.radius)*.5;this.center.addScaledVector(Yv,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Ax.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Yv.copy(t.center).add(Ax)),this.expandByPoint(Yv.copy(t.center).sub(Ax))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}}),tc,Ix,US,pd,kx,FS,Ox,mX,xPe=Q(()=>{Jr(),tc=new xe,Ix=new xe,US=new xe,pd=new xe,kx=new xe,FS=new xe,Ox=new xe,mX=class{constructor(t=new xe,e=new xe(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,tc)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=tc.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(tc.copy(this.origin).addScaledVector(this.direction,e),tc.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){Ix.copy(t).add(e).multiplyScalar(.5),US.copy(e).sub(t).normalize(),pd.copy(this.origin).sub(Ix);let i=t.distanceTo(e)*.5,s=-this.direction.dot(US),a=pd.dot(this.direction),o=-pd.dot(US),l=pd.lengthSq(),c=Math.abs(1-s*s),f,p,m,_;if(c>0)if(f=s*o-a,p=s*a-o,_=i*c,f>=0)if(p>=-_)if(p<=_){let y=1/c;f*=y,p*=y,m=f*(f+s*p+2*a)+p*(s*f+p+2*o)+l}else p=i,f=Math.max(0,-(s*p+a)),m=-f*f+p*(p+2*o)+l;else p=-i,f=Math.max(0,-(s*p+a)),m=-f*f+p*(p+2*o)+l;else p<=-_?(f=Math.max(0,-(-s*i+a)),p=f>0?-i:Math.min(Math.max(-i,-o),i),m=-f*f+p*(p+2*o)+l):p<=_?(f=0,p=Math.min(Math.max(-i,-o),i),m=p*(p+2*o)+l):(f=Math.max(0,-(s*i+a)),p=f>0?i:Math.min(Math.max(-i,-o),i),m=-f*f+p*(p+2*o)+l);else p=s>0?-i:i,f=Math.max(0,-(s*p+a)),m=-f*f+p*(p+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(Ix).addScaledVector(US,p),m}intersectSphere(t,e){tc.subVectors(t.center,this.origin);let n=tc.dot(this.direction),r=tc.dot(tc)-n*n,i=t.radius*t.radius;if(r>i)return null;let s=Math.sqrt(i-r),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){let n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,s,a,o,l=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,p=this.origin;return l>=0?(n=(t.min.x-p.x)*l,r=(t.max.x-p.x)*l):(n=(t.max.x-p.x)*l,r=(t.min.x-p.x)*l),c>=0?(i=(t.min.y-p.y)*c,s=(t.max.y-p.y)*c):(i=(t.max.y-p.y)*c,s=(t.min.y-p.y)*c),n>s||i>r||((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),f>=0?(a=(t.min.z-p.z)*f,o=(t.max.z-p.z)*f):(a=(t.max.z-p.z)*f,o=(t.min.z-p.z)*f),n>o||a>r)||((a>n||n!==n)&&(n=a),(o<r||r!==r)&&(r=o),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return this.intersectBox(t,tc)!==null}intersectTriangle(t,e,n,r,i){kx.subVectors(e,t),FS.subVectors(n,t),Ox.crossVectors(kx,FS);let s=this.direction.dot(Ox),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;pd.subVectors(this.origin,t);let o=a*this.direction.dot(FS.crossVectors(pd,FS));if(o<0)return null;let l=a*this.direction.dot(kx.cross(pd));if(l<0||o+l>s)return null;let c=-a*pd.dot(Ox);return c<0?null:this.at(c/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}}),ts,Mm,hl,R8,M8,md,BS,to,Dc=Q(()=>{Pn(),Jr(),ts=class TL{constructor(e,n,r,i,s,a,o,l,c,f,p,m,_,y,E,S){TL.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c,f,p,m,_,y,E,S)}set(e,n,r,i,s,a,o,l,c,f,p,m,_,y,E,S){let w=this.elements;return w[0]=e,w[4]=n,w[8]=r,w[12]=i,w[1]=s,w[5]=a,w[9]=o,w[13]=l,w[2]=c,w[6]=f,w[10]=p,w[14]=m,w[3]=_,w[7]=y,w[11]=E,w[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new TL().fromArray(this.elements)}copy(e){let n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){let n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){let n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){let n=this.elements,r=e.elements,i=1/Mm.setFromMatrixColumn(e,0).length(),s=1/Mm.setFromMatrixColumn(e,1).length(),a=1/Mm.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){let n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),f=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){let m=a*f,_=a*p,y=o*f,E=o*p;n[0]=l*f,n[4]=-l*p,n[8]=c,n[1]=_+y*c,n[5]=m-E*c,n[9]=-o*l,n[2]=E-m*c,n[6]=y+_*c,n[10]=a*l}else if(e.order==="YXZ"){let m=l*f,_=l*p,y=c*f,E=c*p;n[0]=m+E*o,n[4]=y*o-_,n[8]=a*c,n[1]=a*p,n[5]=a*f,n[9]=-o,n[2]=_*o-y,n[6]=E+m*o,n[10]=a*l}else if(e.order==="ZXY"){let m=l*f,_=l*p,y=c*f,E=c*p;n[0]=m-E*o,n[4]=-a*p,n[8]=y+_*o,n[1]=_+y*o,n[5]=a*f,n[9]=E-m*o,n[2]=-a*c,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){let m=a*f,_=a*p,y=o*f,E=o*p;n[0]=l*f,n[4]=y*c-_,n[8]=m*c+E,n[1]=l*p,n[5]=E*c+m,n[9]=_*c-y,n[2]=-c,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){let m=a*l,_=a*c,y=o*l,E=o*c;n[0]=l*f,n[4]=E-m*p,n[8]=y*p+_,n[1]=p,n[5]=a*f,n[9]=-o*f,n[2]=-c*f,n[6]=_*p+y,n[10]=m-E*p}else if(e.order==="XZY"){let m=a*l,_=a*c,y=o*l,E=o*c;n[0]=l*f,n[4]=-p,n[8]=c*f,n[1]=m*p+E,n[5]=a*f,n[9]=_*p-y,n[2]=y*p-_,n[6]=o*f,n[10]=E*p+m}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(R8,e,M8)}lookAt(e,n,r){let i=this.elements;return to.subVectors(e,n),to.lengthSq()===0&&(to.z=1),to.normalize(),md.crossVectors(r,to),md.lengthSq()===0&&(Math.abs(r.z)===1?to.x+=1e-4:to.z+=1e-4,to.normalize(),md.crossVectors(r,to)),md.normalize(),BS.crossVectors(to,md),i[0]=md.x,i[4]=BS.x,i[8]=to.x,i[1]=md.y,i[5]=BS.y,i[9]=to.y,i[2]=md.z,i[6]=BS.z,i[10]=to.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){let r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[4],l=r[8],c=r[12],f=r[1],p=r[5],m=r[9],_=r[13],y=r[2],E=r[6],S=r[10],w=r[14],R=r[3],C=r[7],k=r[11],M=r[15],N=i[0],O=i[4],D=i[8],L=i[12],B=i[1],ee=i[5],te=i[9],ne=i[13],H=i[2],V=i[6],W=i[10],J=i[14],X=i[3],ie=i[7],pe=i[11],Z=i[15];return s[0]=a*N+o*B+l*H+c*X,s[4]=a*O+o*ee+l*V+c*ie,s[8]=a*D+o*te+l*W+c*pe,s[12]=a*L+o*ne+l*J+c*Z,s[1]=f*N+p*B+m*H+_*X,s[5]=f*O+p*ee+m*V+_*ie,s[9]=f*D+p*te+m*W+_*pe,s[13]=f*L+p*ne+m*J+_*Z,s[2]=y*N+E*B+S*H+w*X,s[6]=y*O+E*ee+S*V+w*ie,s[10]=y*D+E*te+S*W+w*pe,s[14]=y*L+E*ne+S*J+w*Z,s[3]=R*N+C*B+k*H+M*X,s[7]=R*O+C*ee+k*V+M*ie,s[11]=R*D+C*te+k*W+M*pe,s[15]=R*L+C*ne+k*J+M*Z,this}multiplyScalar(e){let n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){let e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],f=e[2],p=e[6],m=e[10],_=e[14],y=e[3],E=e[7],S=e[11],w=e[15];return y*(+s*l*p-i*c*p-s*o*m+r*c*m+i*o*_-r*l*_)+E*(+n*l*_-n*c*m+s*a*m-i*a*_+i*c*f-s*l*f)+S*(+n*c*p-n*o*_-s*a*p+r*a*_+s*o*f-r*c*f)+w*(-i*o*f-n*l*p+n*o*m+i*a*p-r*a*m+r*l*f)}transpose(){let e=this.elements,n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){let e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],f=e[8],p=e[9],m=e[10],_=e[11],y=e[12],E=e[13],S=e[14],w=e[15],R=p*S*c-E*m*c+E*l*_-o*S*_-p*l*w+o*m*w,C=y*m*c-f*S*c-y*l*_+a*S*_+f*l*w-a*m*w,k=f*E*c-y*p*c+y*o*_-a*E*_-f*o*w+a*p*w,M=y*p*l-f*E*l-y*o*m+a*E*m+f*o*S-a*p*S,N=n*R+r*C+i*k+s*M;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let O=1/N;return e[0]=R*O,e[1]=(E*m*s-p*S*s-E*i*_+r*S*_+p*i*w-r*m*w)*O,e[2]=(o*S*s-E*l*s+E*i*c-r*S*c-o*i*w+r*l*w)*O,e[3]=(p*l*s-o*m*s-p*i*c+r*m*c+o*i*_-r*l*_)*O,e[4]=C*O,e[5]=(f*S*s-y*m*s+y*i*_-n*S*_-f*i*w+n*m*w)*O,e[6]=(y*l*s-a*S*s-y*i*c+n*S*c+a*i*w-n*l*w)*O,e[7]=(a*m*s-f*l*s+f*i*c-n*m*c-a*i*_+n*l*_)*O,e[8]=k*O,e[9]=(y*p*s-f*E*s-y*r*_+n*E*_+f*r*w-n*p*w)*O,e[10]=(a*E*s-y*o*s+y*r*c-n*E*c-a*r*w+n*o*w)*O,e[11]=(f*o*s-a*p*s-f*r*c+n*p*c+a*r*_-n*o*_)*O,e[12]=M*O,e[13]=(f*E*i-y*p*i+y*r*m-n*E*m-f*r*S+n*p*S)*O,e[14]=(y*o*i-a*E*i-y*r*l+n*E*l+a*r*S-n*o*S)*O,e[15]=(a*p*i-f*o*i+f*r*l-n*p*l-a*r*m+n*o*m)*O,this}scale(e){let n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){let n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){let n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){let n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){let r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,o=e.y,l=e.z,c=s*a,f=s*o;return this.set(c*a+r,c*o-i*l,c*l+i*o,0,c*o+i*l,f*o+r,f*l-i*a,0,c*l-i*o,f*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){let i=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,c=s+s,f=a+a,p=o+o,m=s*c,_=s*f,y=s*p,E=a*f,S=a*p,w=o*p,R=l*c,C=l*f,k=l*p,M=r.x,N=r.y,O=r.z;return i[0]=(1-(E+w))*M,i[1]=(_+k)*M,i[2]=(y-C)*M,i[3]=0,i[4]=(_-k)*N,i[5]=(1-(m+w))*N,i[6]=(S+R)*N,i[7]=0,i[8]=(y+C)*O,i[9]=(S-R)*O,i[10]=(1-(m+E))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){let i=this.elements,s=Mm.set(i[0],i[1],i[2]).length(),a=Mm.set(i[4],i[5],i[6]).length(),o=Mm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],hl.copy(this);let l=1/s,c=1/a,f=1/o;return hl.elements[0]*=l,hl.elements[1]*=l,hl.elements[2]*=l,hl.elements[4]*=c,hl.elements[5]*=c,hl.elements[6]*=c,hl.elements[8]*=f,hl.elements[9]*=f,hl.elements[10]*=f,n.setFromRotationMatrix(hl),r.x=s,r.y=a,r.z=o,this}makePerspective(e,n,r,i,s,a,o=_c){let l=this.elements,c=2*s/(n-e),f=2*s/(r-i),p=(n+e)/(n-e),m=(r+i)/(r-i),_,y;if(o===_c)_=-(a+s)/(a-s),y=-2*a*s/(a-s);else if(o===B1)_=-a/(a-s),y=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=_,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,a,o=_c){let l=this.elements,c=1/(n-e),f=1/(r-i),p=1/(a-s),m=(n+e)*c,_=(r+i)*f,y,E;if(o===_c)y=(a+s)*p,E=-2*p;else if(o===B1)y=s*p,E=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-_,l[2]=0,l[6]=0,l[10]=E,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){let r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}},Mm=new xe,hl=new ts,R8=new xe(0,0,0),M8=new xe(1,1,1),md=new xe,BS=new xe,to=new xe}),tO,nO,hp,ww=Q(()=>{d3(),Dc(),bs(),tO=new ts,nO=new Oy,hp=class gX{constructor(e=0,n=0,r=0,i=gX.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){let i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],f=i[9],p=i[2],m=i[6],_=i[10];switch(n){case"XYZ":this._y=Math.asin(Fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Fn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(o,_),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Fn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,_),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(o,_));break;case"XZY":this._z=Math.asin(-Fn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return tO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tO,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return nO.setFromEuler(this),this.setFromQuaternion(nO,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}},hp.DEFAULT_ORDER="XYZ"}),h3,_X=Q(()=>{h3=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}}),A8,rO,Am,nc,zS,Zv,I8,k8,iO,sO,aO,oO,O8,Im,Px,vc,N0=Q(()=>{d3(),Jr(),Dc(),O0(),ww(),_X(),cf(),bs(),A8=0,rO=new xe,Am=new Oy,nc=new ts,zS=new xe,Zv=new xe,I8=new xe,k8=new Oy,iO=new xe(1,0,0),sO=new xe(0,1,0),aO=new xe(0,0,1),oO={type:"added"},O8={type:"removed"},Im={type:"childadded",child:null},Px={type:"childremoved",child:null},vc=class PC extends c_{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:A8++}),this.uuid=Hd(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=PC.DEFAULT_UP.clone();let e=new xe,n=new hp,r=new Oy,i=new xe(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ts},normalMatrix:{value:new An}}),this.matrix=new ts,this.matrixWorld=new ts,this.matrixAutoUpdate=PC.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=PC.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new h3,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Am.setFromAxisAngle(e,n),this.quaternion.multiply(Am),this}rotateOnWorldAxis(e,n){return Am.setFromAxisAngle(e,n),this.quaternion.premultiply(Am),this}rotateX(e){return this.rotateOnAxis(iO,e)}rotateY(e){return this.rotateOnAxis(sO,e)}rotateZ(e){return this.rotateOnAxis(aO,e)}translateOnAxis(e,n){return rO.copy(e).applyQuaternion(this.quaternion),this.position.add(rO.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(iO,e)}translateY(e){return this.translateOnAxis(sO,e)}translateZ(e){return this.translateOnAxis(aO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(nc.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?zS.copy(e):zS.set(e,n,r);let i=this.parent;this.updateWorldMatrix(!0,!1),Zv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nc.lookAt(Zv,zS,this.up):nc.lookAt(zS,Zv,this.up),this.quaternion.setFromRotationMatrix(nc),i&&(nc.extractRotation(i.matrixWorld),Am.setFromRotationMatrix(nc),this.quaternion.premultiply(Am.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(oO),Im.child=e,this.dispatchEvent(Im),Im.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(O8),Px.child=e,this.dispatchEvent(Px),Px.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),nc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),nc.multiply(e.parent.matrixWorld)),e.applyMatrix4(nc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(oO),Im.child=e,this.dispatchEvent(Im),Im.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){let s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);let i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zv,e,I8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zv,k8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);let n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){let n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){let i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){let n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let l=o.shapes;if(Array.isArray(l))for(let c=0,f=l.length;c<f;c++){let p=l[c];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let l=this.animations[o];i.animations.push(s(e.animations,l))}}if(n){let o=a(e.geometries),l=a(e.materials),c=a(e.textures),f=a(e.images),p=a(e.shapes),m=a(e.skeletons),_=a(e.animations),y=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),_.length>0&&(r.animations=_),y.length>0&&(r.nodes=y)}return r.object=i,r;function a(o){let l=[];for(let c in o){let f=o[c];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}},vc.DEFAULT_UP=new xe(0,1,0),vc.DEFAULT_MATRIX_AUTO_UPDATE=!0,vc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0}),pl,rc,Lx,ic,km,Om,lO,Nx,Dx,Ux,Fx,Bx,zx,ry,CPe=Q(()=>{Jr(),xp(),pl=new xe,rc=new xe,Lx=new xe,ic=new xe,km=new xe,Om=new xe,lO=new xe,Nx=new xe,Dx=new xe,Ux=new xe,Fx=new Zr,Bx=new Zr,zx=new Zr,ry=class iy{constructor(e=new xe,n=new xe,r=new xe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),pl.subVectors(e,n),i.cross(pl);let s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){pl.subVectors(i,n),rc.subVectors(r,n),Lx.subVectors(e,n);let a=pl.dot(pl),o=pl.dot(rc),l=pl.dot(Lx),c=rc.dot(rc),f=rc.dot(Lx),p=a*c-o*o;if(p===0)return s.set(0,0,0),null;let m=1/p,_=(c*l-o*f)*m,y=(a*f-o*l)*m;return s.set(1-_-y,y,_)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,ic)===null?!1:ic.x>=0&&ic.y>=0&&ic.x+ic.y<=1}static getInterpolation(e,n,r,i,s,a,o,l){return this.getBarycoord(e,n,r,i,ic)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ic.x),l.addScaledVector(a,ic.y),l.addScaledVector(o,ic.z),l)}static getInterpolatedAttribute(e,n,r,i,s,a){return Fx.setScalar(0),Bx.setScalar(0),zx.setScalar(0),Fx.fromBufferAttribute(e,n),Bx.fromBufferAttribute(e,r),zx.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(Fx,s.x),a.addScaledVector(Bx,s.y),a.addScaledVector(zx,s.z),a}static isFrontFacing(e,n,r,i){return pl.subVectors(r,n),rc.subVectors(e,n),pl.cross(rc).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pl.subVectors(this.c,this.b),rc.subVectors(this.a,this.b),pl.cross(rc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return iy.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return iy.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return iy.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return iy.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return iy.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){let r=this.a,i=this.b,s=this.c,a,o;km.subVectors(i,r),Om.subVectors(s,r),Nx.subVectors(e,r);let l=km.dot(Nx),c=Om.dot(Nx);if(l<=0&&c<=0)return n.copy(r);Dx.subVectors(e,i);let f=km.dot(Dx),p=Om.dot(Dx);if(f>=0&&p<=f)return n.copy(i);let m=l*p-f*c;if(m<=0&&l>=0&&f<=0)return a=l/(l-f),n.copy(r).addScaledVector(km,a);Ux.subVectors(e,s);let _=km.dot(Ux),y=Om.dot(Ux);if(y>=0&&_<=y)return n.copy(s);let E=_*c-l*y;if(E<=0&&c>=0&&y<=0)return o=c/(c-y),n.copy(r).addScaledVector(Om,o);let S=f*y-_*p;if(S<=0&&p-f>=0&&_-y>=0)return lO.subVectors(s,i),o=(p-f)/(p-f+(_-y)),n.copy(i).addScaledVector(lO,o);let w=1/(S+E+m);return a=E*w,o=m*w,n.copy(r).addScaledVector(km,a).addScaledVector(Om,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}});function uO(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}var cO,gd,jS,Wn,ks,Uc=Q(()=>{bs(),df(),Pn(),cO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gd={h:0,s:0,l:0},jS={h:0,s:0,l:0},Wn=class{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ca){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,nr.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=nr.workingColorSpace){return this.r=t,this.g=e,this.b=n,nr.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=nr.workingColorSpace){if(t=l3(t,1),e=Fn(e,0,1),n=Fn(n,0,1),e===0)this.r=this.g=this.b=n;else{let i=n<=.5?n*(1+e):n+e-n*e,s=2*n-i;this.r=uO(s,i,t+1/3),this.g=uO(s,i,t),this.b=uO(s,i,t-1/3)}return nr.toWorkingColorSpace(this,r),this}setStyle(t,e=Ca){function n(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,e);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let i=r[1],s=i.length;if(s===3)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(i,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ca){let n=cO[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Vd(t.r),this.g=Vd(t.g),this.b=Vd(t.b),this}copyLinearToSRGB(t){return this.r=ky(t.r),this.g=ky(t.g),this.b=ky(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ca){return nr.fromWorkingColorSpace(ks.copy(this),t),Math.round(Fn(ks.r*255,0,255))*65536+Math.round(Fn(ks.g*255,0,255))*256+Math.round(Fn(ks.b*255,0,255))}getHexString(t=Ca){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=nr.workingColorSpace){nr.fromWorkingColorSpace(ks.copy(this),e);let n=ks.r,r=ks.g,i=ks.b,s=Math.max(n,r,i),a=Math.min(n,r,i),o,l,c=(a+s)/2;if(a===s)o=0,l=0;else{let f=s-a;switch(l=c<=.5?f/(s+a):f/(2-s-a),s){case n:o=(r-i)/f+(r<i?6:0);break;case r:o=(i-n)/f+2;break;case i:o=(n-r)/f+4;break}o/=6}return t.h=o,t.s=l,t.l=c,t}getRGB(t,e=nr.workingColorSpace){return nr.fromWorkingColorSpace(ks.copy(this),e),t.r=ks.r,t.g=ks.g,t.b=ks.b,t}getStyle(t=Ca){nr.fromWorkingColorSpace(ks.copy(this),t);let e=ks.r,n=ks.g,r=ks.b;return t!==Ca?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(t,e,n){return this.getHSL(gd),this.setHSL(gd.h+t,gd.s+e,gd.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(gd),t.getHSL(jS);let n=Fb(gd.h,jS.h,e),r=Fb(gd.s,jS.s,e),i=Fb(gd.l,jS.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},ks=new Wn,Wn.NAMES=cO}),P8,Tw,KA=Q(()=>{Uc(),O0(),Pn(),bs(),P8=0,Tw=class extends c_{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:P8++}),this.uuid=Hd(),this.name="",this.type="Material",this.blending=wg,this.side=rf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=WR,this.blendDst=qR,this.blendEquation=yh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Wn(0,0,0),this.blendAlpha=0,this.depthFunc=Hg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vm,this.stencilZFail=Vm,this.stencilZPass=Vm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==wg&&(n.blending=this.blending),this.side!==rf&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==WR&&(n.blendSrc=this.blendSrc),this.blendDst!==qR&&(n.blendDst=this.blendDst),this.blendEquation!==yh&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Hg&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vL&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vm&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Vm&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Vm&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(i){let s=[];for(let a in i){let o=i[a];delete o.metadata,s.push(o)}return s}if(e){let i=r(t.textures),s=r(t.images);i.length>0&&(n.textures=i),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,n=null;if(e!==null){let r=e.length;n=new Array(r);for(let i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}}),Py,p3=Q(()=>{KA(),Pn(),Uc(),ww(),Py=class extends Tw{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hp,this.combine=YD,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}}),Ri,HS,L8,Al,m3,g3,la,Fc=Q(()=>{Jr(),_o(),bs(),Pn(),Ri=new xe,HS=new or,L8=0,Al=class{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:L8++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=kM,this.updateRanges=[],this.gpuType=gc,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)HS.fromBufferAttribute(this,e),HS.applyMatrix3(t),this.setXY(e,HS.x,HS.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Ri.fromBufferAttribute(this,e),Ri.applyMatrix3(t),this.setXYZ(e,Ri.x,Ri.y,Ri.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ri.fromBufferAttribute(this,e),Ri.applyMatrix4(t),this.setXYZ(e,Ri.x,Ri.y,Ri.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ri.fromBufferAttribute(this,e),Ri.applyNormalMatrix(t),this.setXYZ(e,Ri.x,Ri.y,Ri.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ri.fromBufferAttribute(this,e),Ri.transformDirection(t),this.setXYZ(e,Ri.x,Ri.y,Ri.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=cu(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=cu(e,this.array)),e}setX(t,e){return this.normalized&&(e=Rr(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=cu(e,this.array)),e}setY(t,e){return this.normalized&&(e=Rr(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=cu(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Rr(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=cu(e,this.array)),e}setW(t,e){return this.normalized&&(e=Rr(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Rr(e,this.array),n=Rr(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Rr(e,this.array),n=Rr(n,this.array),r=Rr(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=Rr(e,this.array),n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==kM&&(t.usage=this.usage),t}},m3=class extends Al{constructor(t,e,n){super(new Uint16Array(t),e,n)}},g3=class extends Al{constructor(t,e,n){super(new Uint32Array(t),e,n)}},la=class extends Al{constructor(t,e,n){super(new Float32Array(t),e,n)}}}),N8,Po,jx,Pm,no,Jv,Ki,Ru,ff=Q(()=>{Jr(),_o(),f3(),O0(),Fc(),XA(),N0(),Dc(),cf(),bs(),d_(),N8=0,Po=new ts,jx=new vc,Pm=new xe,no=new Gd,Jv=new Gd,Ki=new xe,Ru=class vX extends c_{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:N8++}),this.uuid=Hd(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(oX(e)?g3:m3)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){let n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let s=new An().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Po.makeRotationFromQuaternion(e),this.applyMatrix4(Po),this}rotateX(e){return Po.makeRotationX(e),this.applyMatrix4(Po),this}rotateY(e){return Po.makeRotationY(e),this.applyMatrix4(Po),this}rotateZ(e){return Po.makeRotationZ(e),this.applyMatrix4(Po),this}translate(e,n,r){return Po.makeTranslation(e,n,r),this.applyMatrix4(Po),this}scale(e,n,r){return Po.makeScale(e,n,r),this.applyMatrix4(Po),this}lookAt(e){return jx.lookAt(e),jx.updateMatrix(),this.applyMatrix4(jx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pm).negate(),this.translate(Pm.x,Pm.y,Pm.z),this}setFromPoints(e){let n=this.getAttribute("position");if(n===void 0){let r=[];for(let i=0,s=e.length;i<s;i++){let a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new la(r,3))}else{let r=Math.min(e.length,n.count);for(let i=0;i<r;i++){let s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gd);let e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new xe(-1/0,-1/0,-1/0),new xe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){let s=n[r];no.setFromBufferAttribute(s),this.morphTargetsRelative?(Ki.addVectors(this.boundingBox.min,no.min),this.boundingBox.expandByPoint(Ki),Ki.addVectors(this.boundingBox.max,no.max),this.boundingBox.expandByPoint(Ki)):(this.boundingBox.expandByPoint(no.min),this.boundingBox.expandByPoint(no.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new L0);let e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new xe,1/0);return}if(e){let r=this.boundingSphere.center;if(no.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){let o=n[s];Jv.setFromBufferAttribute(o),this.morphTargetsRelative?(Ki.addVectors(no.min,Jv.min),no.expandByPoint(Ki),Ki.addVectors(no.max,Jv.max),no.expandByPoint(Ki)):(no.expandByPoint(Jv.min),no.expandByPoint(Jv.max))}no.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)Ki.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Ki));if(n)for(let s=0,a=n.length;s<a;s++){let o=n[s],l=this.morphTargetsRelative;for(let c=0,f=o.count;c<f;c++)Ki.fromBufferAttribute(o,c),l&&(Pm.fromBufferAttribute(e,c),Ki.add(Pm)),i=Math.max(i,r.distanceToSquared(Ki))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Al(new Float32Array(4*r.count),4));let a=this.getAttribute("tangent"),o=[],l=[];for(let D=0;D<r.count;D++)o[D]=new xe,l[D]=new xe;let c=new xe,f=new xe,p=new xe,m=new or,_=new or,y=new or,E=new xe,S=new xe;function w(D,L,B){c.fromBufferAttribute(r,D),f.fromBufferAttribute(r,L),p.fromBufferAttribute(r,B),m.fromBufferAttribute(s,D),_.fromBufferAttribute(s,L),y.fromBufferAttribute(s,B),f.sub(c),p.sub(c),_.sub(m),y.sub(m);let ee=1/(_.x*y.y-y.x*_.y);isFinite(ee)&&(E.copy(f).multiplyScalar(y.y).addScaledVector(p,-_.y).multiplyScalar(ee),S.copy(p).multiplyScalar(_.x).addScaledVector(f,-y.x).multiplyScalar(ee),o[D].add(E),o[L].add(E),o[B].add(E),l[D].add(S),l[L].add(S),l[B].add(S))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let D=0,L=R.length;D<L;++D){let B=R[D],ee=B.start,te=B.count;for(let ne=ee,H=ee+te;ne<H;ne+=3)w(e.getX(ne+0),e.getX(ne+1),e.getX(ne+2))}let C=new xe,k=new xe,M=new xe,N=new xe;function O(D){M.fromBufferAttribute(i,D),N.copy(M);let L=o[D];C.copy(L),C.sub(M.multiplyScalar(M.dot(L))).normalize(),k.crossVectors(N,L);let B=k.dot(l[D])<0?-1:1;a.setXYZW(D,C.x,C.y,C.z,B)}for(let D=0,L=R.length;D<L;++D){let B=R[D],ee=B.start,te=B.count;for(let ne=ee,H=ee+te;ne<H;ne+=3)O(e.getX(ne+0)),O(e.getX(ne+1)),O(e.getX(ne+2))}}computeVertexNormals(){let e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Al(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let m=0,_=r.count;m<_;m++)r.setXYZ(m,0,0,0);let i=new xe,s=new xe,a=new xe,o=new xe,l=new xe,c=new xe,f=new xe,p=new xe;if(e)for(let m=0,_=e.count;m<_;m+=3){let y=e.getX(m+0),E=e.getX(m+1),S=e.getX(m+2);i.fromBufferAttribute(n,y),s.fromBufferAttribute(n,E),a.fromBufferAttribute(n,S),f.subVectors(a,s),p.subVectors(i,s),f.cross(p),o.fromBufferAttribute(r,y),l.fromBufferAttribute(r,E),c.fromBufferAttribute(r,S),o.add(f),l.add(f),c.add(f),r.setXYZ(y,o.x,o.y,o.z),r.setXYZ(E,l.x,l.y,l.z),r.setXYZ(S,c.x,c.y,c.z)}else for(let m=0,_=n.count;m<_;m+=3)i.fromBufferAttribute(n,m+0),s.fromBufferAttribute(n,m+1),a.fromBufferAttribute(n,m+2),f.subVectors(a,s),p.subVectors(i,s),f.cross(p),r.setXYZ(m+0,f.x,f.y,f.z),r.setXYZ(m+1,f.x,f.y,f.z),r.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Ki.fromBufferAttribute(e,n),Ki.normalize(),e.setXYZ(n,Ki.x,Ki.y,Ki.z)}toNonIndexed(){function e(o,l){let c=o.array,f=o.itemSize,p=o.normalized,m=new c.constructor(l.length*f),_=0,y=0;for(let E=0,S=l.length;E<S;E++){o.isInterleavedBufferAttribute?_=l[E]*o.data.stride+o.offset:_=l[E]*f;for(let w=0;w<f;w++)m[y++]=c[_++]}return new Al(m,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let n=new vX,r=this.index.array,i=this.attributes;for(let o in i){let l=i[o],c=e(l,r);n.setAttribute(o,c)}let s=this.morphAttributes;for(let o in s){let l=[],c=s[o];for(let f=0,p=c.length;f<p;f++){let m=c[f],_=e(m,r);l.push(_)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let o=0,l=a.length;o<l;o++){let c=a[o];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});let r=this.attributes;for(let l in r){let c=r[l];e.data.attributes[l]=c.toJSON(e.data)}let i={},s=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],f=[];for(let p=0,m=c.length;p<m;p++){let _=c[p];f.push(_.toJSON(e.data))}f.length>0&&(i[l]=f,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let n={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(n));let i=e.attributes;for(let c in i){let f=i[c];this.setAttribute(c,f.clone(n))}let s=e.morphAttributes;for(let c in s){let f=[],p=s[c];for(let m=0,_=p.length;m<_;m++)f.push(p[m].clone(n));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let c=0,f=a.length;c<f;c++){let p=a[c];this.addGroup(p.start,p.count,p.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}});function RPe(t,e,n,r,i,s,a,o){let l;if(e.side===ka?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===rf,o),l===null)return null;gb.copy(o),gb.applyMatrix4(t.matrixWorld);let c=n.ray.origin.distanceTo(gb);return c<n.near||c>n.far?null:{distance:c,point:gb.clone(),object:t}}function Hx(t,e,n,r,i,s,a,o,l,c){t.getVertexPosition(o,hb),t.getVertexPosition(l,pb),t.getVertexPosition(c,mb);let f=RPe(t,e,n,r,hb,pb,mb,xL);if(f){let p=new xe;ry.getBarycoord(xL,hb,pb,mb,p),i&&(f.uv=ry.getInterpolatedAttribute(i,o,l,c,p,new or)),s&&(f.uv1=ry.getInterpolatedAttribute(s,o,l,c,p,new or)),a&&(f.normal=ry.getInterpolatedAttribute(a,o,l,c,p,new xe),f.normal.dot(r.direction)>0&&f.normal.multiplyScalar(-1));let m={a:o,b:l,c,normal:new xe,materialIndex:0};ry.getNormal(hb,pb,mb,m.normal),f.face=m,f.barycoord=p}return f}var dO,Jf,VS,fO,hb,pb,mb,Vx,GS,xL,gb,Ns,D0=Q(()=>{Jr(),_o(),XA(),xPe(),Dc(),N0(),CPe(),Pn(),p3(),ff(),dO=new ts,Jf=new mX,VS=new L0,fO=new xe,hb=new xe,pb=new xe,mb=new xe,Vx=new xe,GS=new xe,xL=new xe,gb=new xe,Ns=class extends vc{constructor(t=new Ru,e=new Py){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let n=t[e[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++){let s=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}getVertexPosition(t,e){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(i&&a){GS.set(0,0,0);for(let o=0,l=i.length;o<l;o++){let c=a[o],f=i[o];c!==0&&(Vx.fromBufferAttribute(f,t),s?GS.addScaledVector(Vx,c):GS.addScaledVector(Vx.sub(e),c))}e.add(GS)}return e}raycast(t,e){let n=this.geometry,r=this.material,i=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),VS.copy(n.boundingSphere),VS.applyMatrix4(i),Jf.copy(t.ray).recast(t.near),!(VS.containsPoint(Jf.origin)===!1&&(Jf.intersectSphere(VS,fO)===null||Jf.origin.distanceToSquared(fO)>(t.far-t.near)**2))&&(dO.copy(i).invert(),Jf.copy(t.ray).applyMatrix4(dO),!(n.boundingBox!==null&&Jf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Jf)))}_computeIntersections(t,e,n){let r,i=this.geometry,s=this.material,a=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,f=i.attributes.normal,p=i.groups,m=i.drawRange;if(a!==null)if(Array.isArray(s))for(let _=0,y=p.length;_<y;_++){let E=p[_],S=s[E.materialIndex],w=Math.max(E.start,m.start),R=Math.min(a.count,Math.min(E.start+E.count,m.start+m.count));for(let C=w,k=R;C<k;C+=3){let M=a.getX(C),N=a.getX(C+1),O=a.getX(C+2);r=Hx(this,S,t,n,l,c,f,M,N,O),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=E.materialIndex,e.push(r))}}else{let _=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let E=_,S=y;E<S;E+=3){let w=a.getX(E),R=a.getX(E+1),C=a.getX(E+2);r=Hx(this,s,t,n,l,c,f,w,R,C),r&&(r.faceIndex=Math.floor(E/3),e.push(r))}}else if(o!==void 0)if(Array.isArray(s))for(let _=0,y=p.length;_<y;_++){let E=p[_],S=s[E.materialIndex],w=Math.max(E.start,m.start),R=Math.min(o.count,Math.min(E.start+E.count,m.start+m.count));for(let C=w,k=R;C<k;C+=3){let M=C,N=C+1,O=C+2;r=Hx(this,S,t,n,l,c,f,M,N,O),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=E.materialIndex,e.push(r))}}else{let _=Math.max(0,m.start),y=Math.min(o.count,m.start+m.count);for(let E=_,S=y;E<S;E+=3){let w=E,R=E+1,C=E+2;r=Hx(this,s,t,n,l,c,f,w,R,C),r&&(r.faceIndex=Math.floor(E/3),e.push(r))}}}}}),YA,ZA=Q(()=>{ff(),Fc(),Jr(),YA=class yX extends Ru{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};let o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);let l=[],c=[],f=[],p=[],m=0,_=0;y("z","y","x",-1,-1,r,n,e,a,s,0),y("z","y","x",1,-1,r,n,-e,a,s,1),y("x","z","y",1,1,e,r,n,i,a,2),y("x","z","y",1,-1,e,r,-n,i,a,3),y("x","y","z",1,-1,e,n,r,i,s,4),y("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new la(c,3)),this.setAttribute("normal",new la(f,3)),this.setAttribute("uv",new la(p,2));function y(E,S,w,R,C,k,M,N,O,D,L){let B=k/O,ee=M/D,te=k/2,ne=M/2,H=N/2,V=O+1,W=D+1,J=0,X=0,ie=new xe;for(let pe=0;pe<W;pe++){let Z=pe*ee-ne;for(let le=0;le<V;le++){let ae=le*B-te;ie[E]=ae*R,ie[S]=Z*C,ie[w]=H,c.push(ie.x,ie.y,ie.z),ie[E]=0,ie[S]=0,ie[w]=N>0?1:-1,f.push(ie.x,ie.y,ie.z),p.push(le/O),p.push(1-pe/D),J+=1}}for(let pe=0;pe<D;pe++)for(let Z=0;Z<O;Z++){let le=m+Z+V*pe,ae=m+Z+V*(pe+1),Ee=m+(Z+1)+V*(pe+1),ke=m+(Z+1)+V*pe;l.push(le,ae,ke),l.push(ae,Ee,ke),X+=6}o.addGroup(_,X,L),_+=X,m+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yX(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}});function p0(t){let e={};for(let n in t){e[n]={};for(let r in t[n]){let i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ba(t){let e={};for(let n=0;n<t.length;n++){let r=p0(t[n]);for(let i in r)e[i]=r[i]}return e}function MPe(t){let e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function EX(t){let e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:nr.workingColorSpace}var OM,f_=Q(()=>{df(),OM={clone:p0,merge:ba}}),SX,APe=Q(()=>{SX=`
void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`}),bX,IPe=Q(()=>{bX=`
void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}
`}),Wo,U0=Q(()=>{KA(),f_(),APe(),IPe(),Wo=class extends Tw{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=SX,this.fragmentShader=bX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=p0(t.uniforms),this.uniformsGroups=MPe(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let i=this.uniforms[r].value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let n={};for(let r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}}),JA,_3=Q(()=>{Pn(),Dc(),N0(),JA=class extends vc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ts,this.projectionMatrix=new ts,this.projectionMatrixInverse=new ts,this.coordinateSystem=_c}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}}),_d,hO,pO,Sl,QA=Q(()=>{_3(),bs(),_o(),Jr(),_d=new xe,hO=new or,pO=new or,Sl=class extends JA{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=h0*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(Iy*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return h0*2*Math.atan(Math.tan(Iy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){_d.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(_d.x,_d.y).multiplyScalar(-t/_d.z),_d.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(_d.x,_d.y).multiplyScalar(-t/_d.z)}getViewSize(t,e){return this.getViewBounds(t,hO,pO),e.subVectors(pO,hO)}setViewOffset(t,e,n,r,i,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(Iy*.5*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let o=s.fullWidth,l=s.fullHeight;i+=s.offsetX*r/o,e-=s.offsetY*n/l,r*=s.width/o,n*=s.height/l}let a=this.filmOffset;a!==0&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}}),Lm,Nm,wX,kPe=Q(()=>{Pn(),N0(),QA(),Lm=-90,Nm=1,wX=class extends vc{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Sl(Lm,Nm,t,e);r.layers=this.layers,this.add(r);let i=new Sl(Lm,Nm,t,e);i.layers=this.layers,this.add(i);let s=new Sl(Lm,Nm,t,e);s.layers=this.layers,this.add(s);let a=new Sl(Lm,Nm,t,e);a.layers=this.layers,this.add(a);let o=new Sl(Lm,Nm,t,e);o.layers=this.layers,this.add(o);let l=new Sl(Lm,Nm,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[n,r,i,s,a,o]=e;for(let l of e)this.remove(l);if(t===_c)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else if(t===B1)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let l of e)this.add(l),l.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[i,s,a,o,l,c]=this.children,f=t.getRenderTarget(),p=t.getActiveCubeFace(),m=t.getActiveMipmapLevel(),_=t.xr.enabled;t.xr.enabled=!1;let y=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,i),t.setRenderTarget(n,1,r),t.render(e,s),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,o),t.setRenderTarget(n,4,r),t.render(e,l),n.texture.generateMipmaps=y,t.setRenderTarget(n,5,r),t.render(e,c),t.setRenderTarget(f,p,m),t.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}}),v3,TX=Q(()=>{Tp(),Pn(),v3=class extends Ml{constructor(t,e,n,r,i,s,a,o,l,c){t=t!==void 0?t:[],e=e!==void 0?e:Vg,super(t,e,n,r,i,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}}),xX,OPe=Q(()=>{Pn(),D0(),ZA(),U0(),f_(),P0(),kPe(),TX(),xX=class extends Ol{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new v3(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:mu}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new YA(5,5,5),i=new Wo({name:"CubemapFromEquirect",uniforms:p0(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ka,blending:zd});i.uniforms.tEquirect.value=e;let s=new Ns(r,i),a=e.minFilter;return e.minFilter===Uh&&(e.minFilter=mu),new wX(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,r){let i=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,r);t.setRenderTarget(i)}}}),sg,CX=Q(()=>{N0(),sg=class extends vc{constructor(){super(),this.isGroup=!0,this.type="Group"}}}),D8,LC,PPe=Q(()=>{Jr(),CX(),D8={type:"move"},LC=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xe),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(l&&t.hand){s=!0;for(let y of t.hand.values()){let E=e.getJointPose(y,n),S=this._getHandJoint(l,y);E!==null&&(S.matrix.fromArray(E.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=E.radius),S.visible=E!==null}let c=l.joints["index-finger-tip"],f=l.joints["thumb-tip"],p=c.position.distanceTo(f.position),m=.02,_=.005;l.inputState.pinching&&p>m+_?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&p<=m-_&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else o!==null&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,n),r===null&&i!==null&&(r=i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(D8)))}return a!==null&&(a.visible=r!==null),o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let n=new sg;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}}),y3,LPe=Q(()=>{N0(),ww(),y3=class extends vc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new hp,this.environmentIntensity=1,this.environmentRotation=new hp,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}}),RX,NPe=Q(()=>{bs(),Pn(),RX=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=kM,this.updateRanges=[],this.version=0,this.uuid=Hd()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hd()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hd()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}}),Js,ag,DPe=Q(()=>{Jr(),Fc(),bs(),Js=new xe,ag=class MX{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Js.fromBufferAttribute(this,n),Js.applyMatrix4(e),this.setXYZ(n,Js.x,Js.y,Js.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Js.fromBufferAttribute(this,n),Js.applyNormalMatrix(e),this.setXYZ(n,Js.x,Js.y,Js.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Js.fromBufferAttribute(this,n),Js.transformDirection(e),this.setXYZ(n,Js.x,Js.y,Js.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=cu(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=cu(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=cu(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=cu(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=cu(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),s=Rr(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let n=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Al(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new MX(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let n=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}}),Gx,U8,F8,ch,AX=Q(()=>{cf(),Jr(),Gx=new xe,U8=new xe,F8=new An,ch=class{constructor(t=new xe(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){let r=Gx.subVectors(n,e).cross(U8.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let n=t.delta(Gx),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){let e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let n=e||F8.getNormalMatrix(t),r=this.coplanarPoint(Gx).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}}),Qf,$S,E3,IX=Q(()=>{Pn(),Jr(),XA(),AX(),Qf=new L0,$S=new xe,E3=class{constructor(t=new ch,e=new ch,n=new ch,r=new ch,i=new ch,s=new ch){this.planes=[t,e,n,r,i,s]}set(t,e,n,r,i,s){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(t){let e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=_c){let n=this.planes,r=t.elements,i=r[0],s=r[1],a=r[2],o=r[3],l=r[4],c=r[5],f=r[6],p=r[7],m=r[8],_=r[9],y=r[10],E=r[11],S=r[12],w=r[13],R=r[14],C=r[15];if(n[0].setComponents(o-i,p-l,E-m,C-S).normalize(),n[1].setComponents(o+i,p+l,E+m,C+S).normalize(),n[2].setComponents(o+s,p+c,E+_,C+w).normalize(),n[3].setComponents(o-s,p-c,E-_,C-w).normalize(),n[4].setComponents(o-a,p-f,E-y,C-R).normalize(),e===_c)n[5].setComponents(o+a,p+f,E+y,C+R).normalize();else if(e===B1)n[5].setComponents(a,f,y,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Qf.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Qf.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Qf)}intersectsSprite(t){return Qf.center.set(0,0,0),Qf.radius=.7071067811865476,Qf.applyMatrix4(t.matrixWorld),this.intersectsSphere(Qf)}intersectsSphere(t){let e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let n=0;n<6;n++){let r=e[n];if($S.x=r.normal.x>0?t.max.x:t.min.x,$S.y=r.normal.y>0?t.max.y:t.min.y,$S.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint($S)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}}),S3,kX=Q(()=>{Tp(),Pn(),S3=class extends Ml{constructor(t,e,n,r,i,s,a,o,l,c=Tg){if(c!==Tg&&c!==Wg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Tg&&(n=fp),n===void 0&&c===Wg&&(n=$g),super(null,r,i,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:kl,this.minFilter=o!==void 0?o:kl,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}}),UPe=Q(()=>{}),FPe=Q(()=>{}),BPe=Q(()=>{}),OX,zPe=Q(()=>{ff(),Fc(),Jr(),_o(),OX=class PX extends Ru{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);let s=[],a=[],o=[],l=[],c=new xe,f=new or;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let p=0,m=3;p<=n;p++,m+=3){let _=r+p/n*i;c.x=e*Math.cos(_),c.y=e*Math.sin(_),a.push(c.x,c.y,c.z),o.push(0,0,1),f.x=(a[m]/e+1)/2,f.y=(a[m+1]/e+1)/2,l.push(f.x,f.y)}for(let p=1;p<=n;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new la(a,3)),this.setAttribute("normal",new la(o,3)),this.setAttribute("uv",new la(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PX(e.radius,e.segments,e.thetaStart,e.thetaLength)}}}),jPe=Q(()=>{}),HPe=Q(()=>{}),VPe=Q(()=>{}),GPe=Q(()=>{}),$Pe=Q(()=>{}),WPe=Q(()=>{}),qPe=Q(()=>{}),XPe=Q(()=>{}),j1,b3=Q(()=>{ff(),Fc(),j1=class LX extends Ru{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};let s=e/2,a=n/2,o=Math.floor(r),l=Math.floor(i),c=o+1,f=l+1,p=e/o,m=n/l,_=[],y=[],E=[],S=[];for(let w=0;w<f;w++){let R=w*m-a;for(let C=0;C<c;C++){let k=C*p-s;y.push(k,-R,0),E.push(0,0,1),S.push(C/o),S.push(1-w/l)}}for(let w=0;w<l;w++)for(let R=0;R<o;R++){let C=R+c*w,k=R+c*(w+1),M=R+1+c*(w+1),N=R+1+c*w;_.push(C,k,N),_.push(k,M,N)}this.setIndex(_),this.setAttribute("position",new la(y,3)),this.setAttribute("normal",new la(E,3)),this.setAttribute("uv",new la(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LX(e.width,e.height,e.widthSegments,e.heightSegments)}}}),KPe=Q(()=>{}),YPe=Q(()=>{}),ZPe=Q(()=>{}),JPe=Q(()=>{}),QPe=Q(()=>{}),eLe=Q(()=>{}),tLe=Q(()=>{});function B8(t,e,n){let r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var NX,nLe=Q(()=>{ff(),Fc(),Jr(),NX=class extends Ru{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){let e=[],n=new Set,r=new xe,i=new xe;if(t.index!==null){let s=t.attributes.position,a=t.index,o=t.groups;o.length===0&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let l=0,c=o.length;l<c;++l){let f=o[l],p=f.start,m=f.count;for(let _=p,y=p+m;_<y;_+=3)for(let E=0;E<3;E++){let S=a.getX(_+E),w=a.getX(_+(E+1)%3);r.fromBufferAttribute(s,S),i.fromBufferAttribute(s,w),B8(r,i,n)===!0&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}}else{let s=t.attributes.position;for(let a=0,o=s.count/3;a<o;a++)for(let l=0;l<3;l++){let c=3*a+l,f=3*a+(l+1)%3;r.fromBufferAttribute(s,c),i.fromBufferAttribute(s,f),B8(r,i,n)===!0&&(e.push(r.x,r.y,r.z),e.push(i.x,i.y,i.z))}}this.setAttribute("position",new la(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}}),rLe=Q(()=>{ZA(),BPe(),zPe(),HPe(),jPe(),GPe(),$Pe(),WPe(),qPe(),FPe(),XPe(),b3(),VPe(),KPe(),YPe(),ZPe(),JPe(),QPe(),eLe(),tLe(),nLe()}),DX,iLe=Q(()=>{KA(),Pn(),DX=class extends Tw{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=qq,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}}),UX,sLe=Q(()=>{KA(),UX=class extends Tw{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}}),aLe=Q(()=>{U0(),p3()}),CL,oLe=Q(()=>{CL={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}}}),z8,FX,lLe=Q(()=>{z8=class{constructor(t,e,n){let r=this,i=!1,s=0,a=0,o,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(c){a++,i===!1&&r.onStart!==void 0&&r.onStart(c,s,a),i=!0},this.itemEnd=function(c){s++,r.onProgress!==void 0&&r.onProgress(c,s,a),s===a&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return o?o(c):c},this.setURLModifier=function(c){return o=c,this},this.addHandler=function(c,f){return l.push(c,f),this},this.removeHandler=function(c){let f=l.indexOf(c);return f!==-1&&l.splice(f,2),this},this.getHandler=function(c){for(let f=0,p=l.length;f<p;f+=2){let m=l[f],_=l[f+1];if(m.global&&(m.lastIndex=0),m.test(c))return _}return null}}},FX=new z8}),PM,BX=Q(()=>{lLe(),PM=class{constructor(t){this.manager=t!==void 0?t:FX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let n=this;return new Promise(function(r,i){n.load(t,r,e,i)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}},PM.DEFAULT_MATERIAL_NAME="__DEFAULT"}),zX,uLe=Q(()=>{oLe(),BX(),d_(),zX=class extends PM{constructor(t){super(t)}load(t,e,n,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let i=this,s=CL.get(t);if(s!==void 0)return i.manager.itemStart(t),setTimeout(function(){e&&e(s),i.manager.itemEnd(t)},0),s;let a=z1("img");function o(){c(),CL.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(f){c(),r&&r(f),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}}),jX,cLe=Q(()=>{uLe(),Tp(),BX(),jX=class extends PM{constructor(t){super(t)}load(t,e,n,r){let i=new Ml,s=new zX(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){i.image=a,i.needsUpdate=!0,e!==void 0&&e(i)},n,r),i}}}),w3,HX=Q(()=>{_3(),w3=class extends JA{constructor(t=-1,e=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,s=n+t,a=r+e,o=r-e;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=l*this.view.offsetX,s=i+l*this.view.width,a-=c*this.view.offsetY,o=a-c*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}}),VX,dLe=Q(()=>{ff(),VX=class extends Ru{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}}),GX,fLe=Q(()=>{QA(),GX=class extends Sl{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}}),LM,hLe=Q(()=>{NPe(),LM=class extends RX{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){let e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){let e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}}),mO,WS,$X,pLe=Q(()=>{Jr(),bs(),mO=new xe,WS=new xe,$X=class{constructor(t=new xe,e=new xe){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){mO.subVectors(t,this.start),WS.subVectors(this.end,this.start);let n=WS.dot(WS),r=WS.dot(mO)/n;return e&&(r=Fn(r,0,1)),r}closestPointToPoint(t,e,n){let r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}});function j8(t,e,n,r){let i=mLe(r);switch(n){case e3:return t*e;case n3:return t*e;case r3:return t*e*2;case i3:return t*e/i.components*i.byteLength;case $A:return t*e/i.components*i.byteLength;case s3:return t*e*2/i.components*i.byteLength;case WA:return t*e*2/i.components*i.byteLength;case t3:return t*e*3/i.components*i.byteLength;case Rl:return t*e*4/i.components*i.byteLength;case qA:return t*e*4/i.components*i.byteLength;case Pb:case Lb:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Nb:case Db:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case aM:case lM:return Math.max(t,16)*Math.max(e,8)/4;case sM:case oM:return Math.max(t,8)*Math.max(e,8)/2;case uM:case cM:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case dM:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case fM:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case hM:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case pM:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case mM:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case gM:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case _M:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case vM:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case yM:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case EM:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case SM:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case bM:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case wM:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case TM:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case xM:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Ub:case CM:case RM:return Math.ceil(t/4)*Math.ceil(e/4)*16;case a3:case MM:return Math.ceil(t/4)*Math.ceil(e/4)*8;case AM:case IM:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function mLe(t){switch(t){case Oc:case ZD:return{byteLength:1,components:1};case f0:case JD:case u_:return{byteLength:2,components:1};case VA:case GA:return{byteLength:2,components:4};case fp:case HA:case gc:return{byteLength:4,components:1};case QD:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}var gLe=Q(()=>{Pn()}),_Le=Q(()=>{}),vLe=Q(()=>{Pn(),P0(),LPe(),D0(),CX(),rLe(),aLe(),cLe(),HX(),_3(),dLe(),ff(),DPe(),hLe(),Fc(),bs(),XA(),Dc(),f3(),pLe(),xp(),Jr(),_o(),Uc(),UPe(),Pn(),_Le(),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$R}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$R)});function WX(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}var qX=Q(()=>{});function yLe(t){let e=new WeakMap;function n(o,l){let c=o.array,f=o.usage,p=c.byteLength,m=t.createBuffer();t.bindBuffer(l,m),t.bufferData(l,c,f),o.onUploadCallback();let _;if(c instanceof Float32Array)_=t.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?_=t.HALF_FLOAT:_=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)_=t.SHORT;else if(c instanceof Uint32Array)_=t.UNSIGNED_INT;else if(c instanceof Int32Array)_=t.INT;else if(c instanceof Int8Array)_=t.BYTE;else if(c instanceof Uint8Array)_=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)_=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:m,type:_,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:p}}function r(o,l,c){let f=l.array,p=l.updateRanges;if(t.bindBuffer(c,o),p.length===0)t.bufferSubData(c,0,f);else{p.sort((_,y)=>_.start-y.start);let m=0;for(let _=1;_<p.length;_++){let y=p[m],E=p[_];E.start<=y.start+y.count+1?y.count=Math.max(y.count,E.start+E.count-y.start):(++m,p[m]=E)}p.length=m+1;for(let _=0,y=p.length;_<y;_++){let E=p[_];t.bufferSubData(c,E.start*f.BYTES_PER_ELEMENT,f,E.start,E.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);let l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){let f=e.get(o);(!f||f.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}let c=e.get(o);if(c===void 0)e.set(o,n(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}var ELe=Q(()=>{}),XX,SLe=Q(()=>{XX=`
#ifdef USE_ALPHAHASH

	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;

#endif
`}),KX,bLe=Q(()=>{KX=`
#ifdef USE_ALPHAHASH

	/**
	 * See: https://casual-effects.com/research/Wyman2017Hashed/index.html
	 */

	const float ALPHA_HASH_SCALE = 0.05; // Derived from trials only, and may be changed.

	float hash2D( vec2 value ) {

		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );

	}

	float hash3D( vec3 value ) {

		return hash2D( vec2( hash2D( value.xy ), value.z ) );

	}

	float getAlphaHashThreshold( vec3 position ) {

		// Find the discretized derivatives of our coordinates
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );

		// Find two nearest log-discretized noise scales
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);

		// Compute alpha thresholds at our two noise scales
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);

		// Factor to interpolate lerp with
		float lerpFactor = fract( log2( pixScale ) );

		// Interpolate alpha threshold from noise at two scales
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;

		// Pass into CDF to compute uniformly distrib threshold
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);

		// Find our final, uniformly distributed alpha threshold ()
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;

		// Avoids  == 0. Could also do  =1-
		return clamp( threshold , 1.0e-6, 1.0 );

	}

#endif
`}),YX,wLe=Q(()=>{YX=`
#ifdef USE_ALPHAMAP

	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;

#endif
`}),ZX,TLe=Q(()=>{ZX=`
#ifdef USE_ALPHAMAP

	uniform sampler2D alphaMap;

#endif
`}),JX,xLe=Q(()=>{JX=`
#ifdef USE_ALPHATEST

	#ifdef ALPHA_TO_COVERAGE

	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;

	#else

	if ( diffuseColor.a < alphaTest ) discard;

	#endif

#endif
`}),QX,CLe=Q(()=>{QX=`
#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif
`}),eK,RLe=Q(()=>{eK=`
#ifdef USE_AOMAP

	// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;

	reflectedLight.indirectDiffuse *= ambientOcclusion;

	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif

	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif

	#if defined( USE_ENVMAP ) && defined( STANDARD )

		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );

		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );

	#endif

#endif
`}),tK,MLe=Q(()=>{tK=`
#ifdef USE_AOMAP

	uniform sampler2D aoMap;
	uniform float aoMapIntensity;

#endif
`}),nK,ALe=Q(()=>{nK=`
#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif

	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {

		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );

	}

	float getIndirectIndex( const in int i ) {

		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );

	}

#endif

#ifdef USE_BATCHING_COLOR

	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {

		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;

	}

#endif
`}),rK,ILe=Q(()=>{rK=`
#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif
`}),iK,kLe=Q(()=>{iK=`
vec3 transformed = vec3( position );

#ifdef USE_ALPHAHASH

	vPosition = vec3( position );

#endif
`}),sK,OLe=Q(()=>{sK=`
vec3 objectNormal = vec3( normal );

#ifdef USE_TANGENT

	vec3 objectTangent = vec3( tangent.xyz );

#endif
`}),aK,PLe=Q(()=>{aK=`

float G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {

	// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)
	return 0.25;

}

float D_BlinnPhong( const in float shininess, const in float dotNH ) {

	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );

}

vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {

	vec3 halfDir = normalize( lightDir + viewDir );

	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );

	vec3 F = F_Schlick( specularColor, 1.0, dotVH );

	float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );

	float D = D_BlinnPhong( shininess, dotNH );

	return F * ( G * D );

} // validated

`}),oK,LLe=Q(()=>{oK=""}),lK,NLe=Q(()=>{lK=`
#ifdef USE_BUMPMAP

	uniform sampler2D bumpMap;
	uniform float bumpScale;

	// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen
	// https://mmikk.github.io/papers3d/mm_sfgrad_bump.pdf

	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)

	vec2 dHdxy_fwd() {

		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );

		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;

		return vec2( dBx, dBy );

	}

	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {

		// normalize is done to ensure that the bump map looks the same regardless of the texture's scale
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm; // normalized

		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );

		float fDet = dot( vSigmaX, R1 ) * faceDirection;

		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );

	}

#endif
`}),uK,DLe=Q(()=>{uK=""}),cK,ULe=Q(()=>{cK=""}),dK,FLe=Q(()=>{dK=`
#if NUM_CLIPPING_PLANES > 0

	varying vec3 vClipPosition;

#endif
`}),fK,BLe=Q(()=>{fK=`
#if NUM_CLIPPING_PLANES > 0

	vClipPosition = - mvPosition.xyz;

#endif
`}),hK,zLe=Q(()=>{hK=`
#if defined( USE_COLOR_ALPHA )

	diffuseColor *= vColor;

#elif defined( USE_COLOR )

	diffuseColor.rgb *= vColor;

#endif
`}),pK,jLe=Q(()=>{pK=`
#if defined( USE_COLOR_ALPHA )

	varying vec4 vColor;

#elif defined( USE_COLOR )

	varying vec3 vColor;

#endif
`}),mK,HLe=Q(()=>{mK=`
#if defined( USE_COLOR_ALPHA )

	varying vec4 vColor;

#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )

	varying vec3 vColor;

#endif
`}),gK,VLe=Q(()=>{gK=`
#if defined( USE_COLOR_ALPHA )

	vColor = vec4( 1.0 );

#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )

	vColor = vec3( 1.0 );

#endif

#ifdef USE_COLOR

	vColor *= color;

#endif

#ifdef USE_INSTANCING_COLOR

	vColor.xyz *= instanceColor.xyz;

#endif

#ifdef USE_BATCHING_COLOR

	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );

	vColor.xyz *= batchingColor.xyz;

#endif
`}),_K,GLe=Q(()=>{_K=`
#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6

#ifndef saturate
// <tonemapping_pars_fragment> may have defined saturate() already
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )

float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }

// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.
// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand( const in vec2 uv ) {

	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );

	return fract( sin( sn ) * c );

}

#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif

struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};

struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};

#ifdef USE_ALPHAHASH

	varying vec3 vPosition;

#endif

vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

}

vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {

	// dir can be either a direction vector or a normal vector
	// upper-left 3x3 of matrix is assumed to be orthogonal

	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );

}

mat3 transposeMat3( const in mat3 m ) {

	mat3 tmp;

	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );

	return tmp;

}

bool isPerspectiveMatrix( mat4 m ) {

	return m[ 2 ][ 3 ] == - 1.0;

}

vec2 equirectUv( in vec3 dir ) {

	// dir is assumed to be unit length

	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;

	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;

	return vec2( u, v );

}

vec3 BRDF_Lambert( const in vec3 diffuseColor ) {

	return RECIPROCAL_PI * diffuseColor;

} // validated

vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {

	// Original approximation by Christophe Schlick '94
	// float fresnel = pow( 1.0 - dotVH, 5.0 );

	// Optimized variant (presented by Epic at SIGGRAPH '13)
	// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );

	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );

} // validated

float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {

	// Original approximation by Christophe Schlick '94
	// float fresnel = pow( 1.0 - dotVH, 5.0 );

	// Optimized variant (presented by Epic at SIGGRAPH '13)
	// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );

	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );

} // validated
`}),vK,$Le=Q(()=>{vK=`
#ifdef ENVMAP_TYPE_CUBE_UV

	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0

	// These shader functions convert between the UV coordinates of a single face of
	// a cubemap, the 0-5 integer index of a cube face, and the direction vector for
	// sampling a textureCube (not generally normalized ).

	float getFace( vec3 direction ) {

		vec3 absDirection = abs( direction );

		float face = - 1.0;

		if ( absDirection.x > absDirection.z ) {

			if ( absDirection.x > absDirection.y )

				face = direction.x > 0.0 ? 0.0 : 3.0;

			else

				face = direction.y > 0.0 ? 1.0 : 4.0;

		} else {

			if ( absDirection.z > absDirection.y )

				face = direction.z > 0.0 ? 2.0 : 5.0;

			else

				face = direction.y > 0.0 ? 1.0 : 4.0;

		}

		return face;

	}

	// RH coordinate system; PMREM face-indexing convention
	vec2 getUV( vec3 direction, float face ) {

		vec2 uv;

		if ( face == 0.0 ) {

			uv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x

		} else if ( face == 1.0 ) {

			uv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y

		} else if ( face == 2.0 ) {

			uv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z

		} else if ( face == 3.0 ) {

			uv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x

		} else if ( face == 4.0 ) {

			uv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y

		} else {

			uv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z

		}

		return 0.5 * ( uv + 1.0 );

	}

	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {

		float face = getFace( direction );

		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );

		mipInt = max( mipInt, cubeUV_minMipLevel );

		float faceSize = exp2( mipInt );

		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0; // #25071

		if ( face > 2.0 ) {

			uv.y += faceSize;

			face -= 3.0;

		}

		uv.x += face * faceSize;

		uv.x += filterInt * 3.0 * cubeUV_minTileSize;

		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );

		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;

		#ifdef texture2DGradEXT

			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb; // disable anisotropic filtering

		#else

			return texture2D( envMap, uv ).rgb;

		#endif

	}

	// These defines must match with PMREMGenerator

	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0

	float roughnessToMip( float roughness ) {

		float mip = 0.0;

		if ( roughness >= cubeUV_r1 ) {

			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;

		} else if ( roughness >= cubeUV_r4 ) {

			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;

		} else if ( roughness >= cubeUV_r5 ) {

			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;

		} else if ( roughness >= cubeUV_r6 ) {

			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;

		} else {

			mip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25
		}

		return mip;

	}

	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {

		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );

		float mipF = fract( mip );

		float mipInt = floor( mip );

		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );

		if ( mipF == 0.0 ) {

			return vec4( color0, 1.0 );

		} else {

			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );

			return vec4( mix( color0, color1, mipF ), 1.0 );

		}

	}

#endif
`}),yK,WLe=Q(()=>{yK=`

vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT

	vec3 transformedTangent = objectTangent;

#endif

#ifdef USE_BATCHING

	// this is in lieu of a per-instance normal-matrix
	// shear transforms in the instance matrix are not supported

	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;

	#ifdef USE_TANGENT

		transformedTangent = bm * transformedTangent;

	#endif

#endif

#ifdef USE_INSTANCING

	// this is in lieu of a per-instance normal-matrix
	// shear transforms in the instance matrix are not supported

	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;

	#ifdef USE_TANGENT

		transformedTangent = im * transformedTangent;

	#endif

#endif

transformedNormal = normalMatrix * transformedNormal;

#ifdef FLIP_SIDED

	transformedNormal = - transformedNormal;

#endif

#ifdef USE_TANGENT

	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;

	#ifdef FLIP_SIDED

		transformedTangent = - transformedTangent;

	#endif

#endif
`}),EK,qLe=Q(()=>{EK=`
#ifdef USE_DISPLACEMENTMAP

	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;

#endif
`}),SK,XLe=Q(()=>{SK=`
#ifdef USE_DISPLACEMENTMAP

	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );

#endif
`}),bK,KLe=Q(()=>{bK=`
#ifdef USE_EMISSIVEMAP

	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );

	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE

		// use inline sRGB decode until browsers properly support SRGB8_ALPHA8 with video textures (#26516)

		emissiveColor = sRGBTransferEOTF( emissiveColor );

	#endif

	totalEmissiveRadiance *= emissiveColor.rgb;

#endif
`}),wK,YLe=Q(()=>{wK=`
#ifdef USE_EMISSIVEMAP

	uniform sampler2D emissiveMap;

#endif
`}),TK,ZLe=Q(()=>{TK=`
gl_FragColor = linearToOutputTexel( gl_FragColor );
`}),xK,JLe=Q(()=>{xK=`

vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}

vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}

vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}

`}),CK,QLe=Q(()=>{CK=`
#ifdef USE_ENVMAP

	#ifdef ENV_WORLDPOS

		vec3 cameraToFrag;

		if ( isOrthographic ) {

			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );

		} else {

			cameraToFrag = normalize( vWorldPosition - cameraPosition );

		}

		// Transforming Normal Vectors with the Inverse Transformation
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

		#ifdef ENVMAP_MODE_REFLECTION

			vec3 reflectVec = reflect( cameraToFrag, worldNormal );

		#else

			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );

		#endif

	#else

		vec3 reflectVec = vReflect;

	#endif

	#ifdef ENVMAP_TYPE_CUBE

		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );

	#else

		vec4 envColor = vec4( 0.0 );

	#endif

	#ifdef ENVMAP_BLENDING_MULTIPLY

		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_MIX )

		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );

	#elif defined( ENVMAP_BLENDING_ADD )

		outgoingLight += envColor.xyz * specularStrength * reflectivity;

	#endif

#endif
`}),RK,eNe=Q(()=>{RK=`
#ifdef USE_ENVMAP

	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;

	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif
`}),MK,tNe=Q(()=>{MK=`
#ifdef USE_ENVMAP

	uniform float reflectivity;

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )

		#define ENV_WORLDPOS

	#endif

	#ifdef ENV_WORLDPOS

		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif

#endif
`}),AK,nNe=Q(()=>{AK=`
#ifdef USE_ENVMAP

	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )

		#define ENV_WORLDPOS

	#endif

	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;

	#else

		varying vec3 vReflect;
		uniform float refractionRatio;

	#endif

#endif
`}),IK,rNe=Q(()=>{IK=""}),kK,iNe=Q(()=>{kK=`
#ifdef USE_FOG

	vFogDepth = - mvPosition.z;

#endif
`}),OK,sNe=Q(()=>{OK=`
#ifdef USE_FOG

	varying float vFogDepth;

#endif
`}),PK,aNe=Q(()=>{PK=`
#ifdef USE_FOG

	#ifdef FOG_EXP2

		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );

	#else

		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );

	#endif

	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );

#endif
`}),LK,oNe=Q(()=>{LK=`
#ifdef USE_FOG

	uniform vec3 fogColor;
	varying float vFogDepth;

	#ifdef FOG_EXP2

		uniform float fogDensity;

	#else

		uniform float fogNear;
		uniform float fogFar;

	#endif

#endif
`}),NK,lNe=Q(()=>{NK=`

#ifdef USE_GRADIENTMAP

	uniform sampler2D gradientMap;

#endif

vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {

	// dotNL will be from -1.0 to 1.0
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );

	#ifdef USE_GRADIENTMAP

		return vec3( texture2D( gradientMap, coord ).r );

	#else

		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );

	#endif

}
`}),DK,uNe=Q(()=>{DK=`
#ifdef USE_LIGHTMAP

	uniform sampler2D lightMap;
	uniform float lightMapIntensity;

#endif
`}),UK,cNe=Q(()=>{UK=`
LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;
`}),FK,dNe=Q(()=>{FK=`
varying vec3 vViewPosition;

struct LambertMaterial {

	vec3 diffuseColor;
	float specularStrength;

};

void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {

	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;

	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {

	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
`}),BK,fNe=Q(()=>{BK=""}),zK,hNe=Q(()=>{zK=`
#ifdef USE_ENVMAP

	vec3 getIBLIrradiance( const in vec3 normal ) {

		#ifdef ENVMAP_TYPE_CUBE_UV

			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );

			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );

			return PI * envMapColor.rgb * envMapIntensity;

		#else

			return vec3( 0.0 );

		#endif

	}

	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {

		#ifdef ENVMAP_TYPE_CUBE_UV

			vec3 reflectVec = reflect( - viewDir, normal );

			// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );

			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );

			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );

			return envMapColor.rgb * envMapIntensity;

		#else

			return vec3( 0.0 );

		#endif

	}

	#ifdef USE_ANISOTROPY

		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {

			#ifdef ENVMAP_TYPE_CUBE_UV

			  // https://google.github.io/filament/Filament.md.html#lighting/imagebasedlights/anisotropy
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );

				return getIBLRadiance( viewDir, bentNormal, roughness );

			#else

				return vec3( 0.0 );

			#endif

		}

	#endif

#endif
`}),jK,pNe=Q(()=>{jK=`
ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
`}),HK,mNe=Q(()=>{HK=`
varying vec3 vViewPosition;

struct ToonMaterial {

	vec3 diffuseColor;

};

void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {

	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;

	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {

	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

}

#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
`}),VK,gNe=Q(()=>{VK=`
BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`}),GK,_Ne=Q(()=>{GK=""}),$K,vNe=Q(()=>{$K=`
PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );

vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );

material.roughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.
material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );

#ifdef IOR

	material.ior = ior;

	#ifdef USE_SPECULAR

		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;

		#ifdef USE_SPECULAR_COLORMAP

			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;

		#endif

		#ifdef USE_SPECULAR_INTENSITYMAP

			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;

		#endif

		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );

	#else

		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;

	#endif

	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );

#else

	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;

#endif

#ifdef USE_CLEARCOAT

	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;

	#ifdef USE_CLEARCOATMAP

		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;

	#endif

	#ifdef USE_CLEARCOAT_ROUGHNESSMAP

		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;

	#endif

	material.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model
	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );

#endif

#ifdef USE_DISPERSION

	material.dispersion = dispersion;

#endif

#ifdef USE_IRIDESCENCE

	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;

	#ifdef USE_IRIDESCENCEMAP

		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;

	#endif

	#ifdef USE_IRIDESCENCE_THICKNESSMAP

		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;

	#else

		material.iridescenceThickness = iridescenceThicknessMaximum;

	#endif

#endif

#ifdef USE_SHEEN

	material.sheenColor = sheenColor;

	#ifdef USE_SHEEN_COLORMAP

		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;

	#endif

	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );

	#ifdef USE_SHEEN_ROUGHNESSMAP

		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;

	#endif

#endif

#ifdef USE_ANISOTROPY

	#ifdef USE_ANISOTROPYMAP

		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;

	#else

		vec2 anisotropyV = anisotropyVector;

	#endif

	material.anisotropy = length( anisotropyV );

	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}

	// Roughness along the anisotropy bitangent is the material roughness, while the tangent roughness increases with anisotropy.
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );

	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;

#endif
`}),WK,yNe=Q(()=>{WK=""}),qK,ENe=Q(()=>{qK=""}),XK,SNe=Q(()=>{XK=`
#if defined( RE_IndirectDiffuse )

	#ifdef USE_LIGHTMAP

		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;

		irradiance += lightMapIrradiance;

	#endif

	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )

		iblIrradiance += getIBLIrradiance( geometryNormal );

	#endif

#endif

#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )

	#ifdef USE_ANISOTROPY

		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );

	#else

		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );

	#endif

	#ifdef USE_CLEARCOAT

		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );

	#endif

#endif
`}),KK,bNe=Q(()=>{KK=`
#if defined( RE_IndirectDiffuse )

	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

#endif

#if defined( RE_IndirectSpecular )

	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

#endif
`}),YK,wNe=Q(()=>{YK=`
#if defined( USE_LOGDEPTHBUF )

	// Doing a strict comparison with == 1.0 can cause noise artifacts
	// on some platforms. See issue #17623.
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;

#endif
`}),ZK,TNe=Q(()=>{ZK=`
#if defined( USE_LOGDEPTHBUF )

	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;

#endif
`}),JK,xNe=Q(()=>{JK=`
#ifdef USE_LOGDEPTHBUF

	varying float vFragDepth;
	varying float vIsPerspective;

#endif
`}),QK,CNe=Q(()=>{QK=`
#ifdef USE_LOGDEPTHBUF

	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );

#endif
`}),eY,RNe=Q(()=>{eY=`
#ifdef USE_MAP

	vec4 sampledDiffuseColor = texture2D( map, vMapUv );

	#ifdef DECODE_VIDEO_TEXTURE

		// use inline sRGB decode until browsers properly support SRGB8_ALPHA8 with video textures (#26516)

		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );

	#endif

	diffuseColor *= sampledDiffuseColor;

#endif
`}),tY,MNe=Q(()=>{tY=`
#ifdef USE_MAP

	uniform sampler2D map;

#endif
`}),nY,ANe=Q(()=>{nY=`
#if defined( USE_MAP ) || defined( USE_ALPHAMAP )

	#if defined( USE_POINTS_UV )

		vec2 uv = vUv;

	#else

		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;

	#endif

#endif

#ifdef USE_MAP

	diffuseColor *= texture2D( map, uv );

#endif

#ifdef USE_ALPHAMAP

	diffuseColor.a *= texture2D( alphaMap, uv ).g;

#endif
`}),rY,INe=Q(()=>{rY=`
#if defined( USE_POINTS_UV )

	varying vec2 vUv;

#else

	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )

		uniform mat3 uvTransform;

	#endif

#endif

#ifdef USE_MAP

	uniform sampler2D map;

#endif

#ifdef USE_ALPHAMAP

	uniform sampler2D alphaMap;

#endif
`}),iY,kNe=Q(()=>{iY=`
float metalnessFactor = metalness;

#ifdef USE_METALNESSMAP

	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );

	// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
	metalnessFactor *= texelMetalness.b;

#endif
`}),sY,ONe=Q(()=>{sY=`
#ifdef USE_METALNESSMAP

	uniform sampler2D metalnessMap;

#endif
`}),aY,PNe=Q(()=>{aY=`
#ifdef USE_INSTANCING_MORPH

	float morphTargetInfluences[ MORPHTARGETS_COUNT ];

	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;

	}
#endif
`}),oY,LNe=Q(()=>{oY=`
#if defined( USE_MORPHCOLORS )

	// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:
	// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)
	// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting
	vColor *= morphTargetBaseInfluence;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		#if defined( USE_COLOR_ALPHA )

			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];

		#elif defined( USE_COLOR )

			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];

		#endif

	}

#endif
`}),lY,NNe=Q(()=>{lY=`
#ifdef USE_MORPHNORMALS

	// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:
	// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)
	// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting
	objectNormal *= morphTargetBaseInfluence;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];

	}

#endif
`}),uY,DNe=Q(()=>{uY=`
#ifdef USE_MORPHTARGETS

	#ifndef USE_INSTANCING_MORPH

		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];

	#endif

	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;

	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {

		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;

		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );

	}

#endif
`}),cY,UNe=Q(()=>{cY=`
#ifdef USE_MORPHTARGETS

	// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:
	// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)
	// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting
	transformed *= morphTargetBaseInfluence;

	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {

		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];

	}

#endif
`}),dY,FNe=Q(()=>{dY=`
float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;

#ifdef FLAT_SHADED

	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );

#else

	vec3 normal = normalize( vNormal );

	#ifdef DOUBLE_SIDED

		normal *= faceDirection;

	#endif

#endif

#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )

	#ifdef USE_TANGENT

		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

	#else

		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);

	#endif

	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;

	#endif

#endif

#ifdef USE_CLEARCOAT_NORMALMAP

	#ifdef USE_TANGENT

		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

	#else

		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );

	#endif

	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;

	#endif

#endif

// non perturbed normal for clearcoat among others

vec3 nonPerturbedNormal = normal;

`}),fY,BNe=Q(()=>{fY=`

#ifdef USE_NORMALMAP_OBJECTSPACE

	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

	#ifdef FLIP_SIDED

		normal = - normal;

	#endif

	#ifdef DOUBLE_SIDED

		normal = normal * faceDirection;

	#endif

	normal = normalize( normalMatrix * normal );

#elif defined( USE_NORMALMAP_TANGENTSPACE )

	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;

	normal = normalize( tbn * mapN );

#elif defined( USE_BUMPMAP )

	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );

#endif
`}),hY,zNe=Q(()=>{hY=`
#ifndef FLAT_SHADED

	varying vec3 vNormal;

	#ifdef USE_TANGENT

		varying vec3 vTangent;
		varying vec3 vBitangent;

	#endif

#endif
`}),pY,jNe=Q(()=>{pY=`
#ifndef FLAT_SHADED

	varying vec3 vNormal;

	#ifdef USE_TANGENT

		varying vec3 vTangent;
		varying vec3 vBitangent;

	#endif

#endif
`}),mY,HNe=Q(()=>{mY=`
#ifndef FLAT_SHADED // normal is computed with derivatives when FLAT_SHADED

	vNormal = normalize( transformedNormal );

	#ifdef USE_TANGENT

		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );

	#endif

#endif
`}),gY,VNe=Q(()=>{gY=""}),_Y,GNe=Q(()=>{_Y=`
#ifdef USE_CLEARCOAT

	vec3 clearcoatNormal = nonPerturbedNormal;

#endif
`}),vY,$Ne=Q(()=>{vY=`
#ifdef USE_CLEARCOAT_NORMALMAP

	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;

	clearcoatNormal = normalize( tbn2 * clearcoatMapN );

#endif
`}),yY,WNe=Q(()=>{yY=`

#ifdef USE_CLEARCOATMAP

	uniform sampler2D clearcoatMap;

#endif

#ifdef USE_CLEARCOAT_NORMALMAP

	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;

#endif

#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	uniform sampler2D clearcoatRoughnessMap;

#endif
`}),EY,qNe=Q(()=>{EY=`

#ifdef USE_IRIDESCENCEMAP

	uniform sampler2D iridescenceMap;

#endif

#ifdef USE_IRIDESCENCE_THICKNESSMAP

	uniform sampler2D iridescenceThicknessMap;

#endif
`}),SY,XNe=Q(()=>{SY=`
#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif

#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif

gl_FragColor = vec4( outgoingLight, diffuseColor.a );
`}),bY,KNe=Q(()=>{bY=""}),wY,YNe=Q(()=>{wY=`
#ifdef PREMULTIPLIED_ALPHA

	// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.
	gl_FragColor.rgb *= gl_FragColor.a;

#endif
`}),TY,ZNe=Q(()=>{TY=`
vec4 mvPosition = vec4( transformed, 1.0 );

#ifdef USE_BATCHING

	mvPosition = batchingMatrix * mvPosition;

#endif

#ifdef USE_INSTANCING

	mvPosition = instanceMatrix * mvPosition;

#endif

mvPosition = modelViewMatrix * mvPosition;

gl_Position = projectionMatrix * mvPosition;
`}),xY,JNe=Q(()=>{xY=`
#ifdef DITHERING

	gl_FragColor.rgb = dithering( gl_FragColor.rgb );

#endif
`}),CY,QNe=Q(()=>{CY=`
#ifdef DITHERING

	// based on https://www.shadertoy.com/view/MslGR8
	vec3 dithering( vec3 color ) {
		//Calculate grid position
		float grid_position = rand( gl_FragCoord.xy );

		//Shift the individual colors differently, thus making it even harder to see the dithering pattern
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );

		//modify shift according to grid position.
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );

		//shift the color by dither_shift
		return color + dither_shift_RGB;
	}

#endif
`}),RY,eDe=Q(()=>{RY=`
float roughnessFactor = roughness;

#ifdef USE_ROUGHNESSMAP

	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );

	// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
	roughnessFactor *= texelRoughness.g;

#endif
`}),MY,tDe=Q(()=>{MY=`
#ifdef USE_ROUGHNESSMAP

	uniform sampler2D roughnessMap;

#endif
`}),AY,nDe=Q(()=>{AY=""}),IY,rDe=Q(()=>{IY=""}),kY,iDe=Q(()=>{kY=`

#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )

	// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;

#endif

#if defined( USE_SHADOWMAP )

	#if NUM_DIR_LIGHT_SHADOWS > 0

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {

			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;

		}
		#pragma unroll_loop_end

	#endif

	#if NUM_POINT_LIGHT_SHADOWS > 0

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {

			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;

		}
		#pragma unroll_loop_end

	#endif

	/*
	#if NUM_RECT_AREA_LIGHTS > 0

		// TODO (abelnation): update vAreaShadowCoord with area light info

	#endif
	*/

#endif

// spot lights can be evaluated without active shadow mapping (when SpotLight.map is used)

#if NUM_SPOT_LIGHT_COORDS > 0

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {

		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;

	}
	#pragma unroll_loop_end

#endif


`}),OY,sDe=Q(()=>{OY=""}),PY,aDe=Q(()=>{PY=`
#ifdef USE_SKINNING

	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );

#endif
`}),LY,oDe=Q(()=>{LY=`
#ifdef USE_SKINNING

	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;

	uniform highp sampler2D boneTexture;

	mat4 getBoneMatrix( const in float i ) {

		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );

		return mat4( v1, v2, v3, v4 );

	}

#endif
`}),NY,lDe=Q(()=>{NY=`
#ifdef USE_SKINNING

	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );

	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;

	transformed = ( bindMatrixInverse * skinned ).xyz;

#endif
`}),DY,uDe=Q(()=>{DY=`
#ifdef USE_SKINNING

	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;

	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;

	#ifdef USE_TANGENT

		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;

	#endif

#endif
`}),UY,cDe=Q(()=>{UY=`
float specularStrength;

#ifdef USE_SPECULARMAP

	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;

#else

	specularStrength = 1.0;

#endif
`}),FY,dDe=Q(()=>{FY=`
#ifdef USE_SPECULARMAP

	uniform sampler2D specularMap;

#endif
`}),BY,fDe=Q(()=>{BY=`
#if defined( TONE_MAPPING )

	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );

#endif
`}),zY,hDe=Q(()=>{zY=`
#ifndef saturate
// <common> may have defined saturate() already
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif

uniform float toneMappingExposure;

// exposure only
vec3 LinearToneMapping( vec3 color ) {

	return saturate( toneMappingExposure * color );

}

// source: https://www.cs.utah.edu/docs/techreports/2002/pdf/UUCS-02-001.pdf
vec3 ReinhardToneMapping( vec3 color ) {

	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );

}

// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/
vec3 CineonToneMapping( vec3 color ) {

	// filmic operator by Jim Hejl and Richard Burgess-Dawson
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );

}

// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs
vec3 RRTAndODTFit( vec3 v ) {

	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;

}

// this implementation of ACES is modified to accommodate a brighter viewing environment.
// the scale factor of 1/0.6 is subjective. see discussion in #19621.

vec3 ACESFilmicToneMapping( vec3 color ) {

	// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ), // transposed from source
		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);

	// ODT_SAT => XYZ => D60_2_D65 => sRGB
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ), // transposed from source
		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);

	color *= toneMappingExposure / 0.6;

	color = ACESInputMat * color;

	// Apply RRT and ODT
	color = RRTAndODTFit( color );

	color = ACESOutputMat * color;

	// Clamp to [0, 1]
	return saturate( color );

}

// Matrices for rec 2020 <> rec 709 color space conversion
// matrix provided in row-major order so it has been transposed
// https://www.itu.int/pub/R-REP-BT.2407-2017
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);

const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);

// https://iolite-engine.com/blog_posts/minimal_agx_implementation
// Mean error^2: 3.6705141e-06
vec3 agxDefaultContrastApprox( vec3 x ) {

	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;

	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;

}

// AgX Tone Mapping implementation based on Filament, which in turn is based
// on Blender's implementation using rec 2020 primaries
// https://github.com/google/filament/pull/7236
// Inputs and outputs are encoded as Linear-sRGB.

vec3 AgXToneMapping( vec3 color ) {

	// AgX constants
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);

	// explicit AgXOutsetMatrix generated from Filaments AgXOutsetMatrixInv
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);

	// LOG2_MIN      = -10.0
	// LOG2_MAX      =  +6.5
	// MIDDLE_GRAY   =  0.18
	const float AgxMinEv = - 12.47393;  // log2( pow( 2, LOG2_MIN ) * MIDDLE_GRAY )
	const float AgxMaxEv = 4.026069;    // log2( pow( 2, LOG2_MAX ) * MIDDLE_GRAY )

	color *= toneMappingExposure;

	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;

	color = AgXInsetMatrix * color;

	// Log2 encoding
	color = max( color, 1e-10 ); // avoid 0 or negative numbers for log2
	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );

	color = clamp( color, 0.0, 1.0 );

	// Apply sigmoid
	color = agxDefaultContrastApprox( color );

	// Apply AgX look
	// v = agxLook(v, look);

	color = AgXOutsetMatrix * color;

	// Linearize
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );

	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;

	// Gamut mapping. Simple clamp for now.
	color = clamp( color, 0.0, 1.0 );

	return color;

}

// https://modelviewer.dev/examples/tone-mapping

vec3 NeutralToneMapping( vec3 color ) {

	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;

	color *= toneMappingExposure;

	float x = min( color.r, min( color.g, color.b ) );

	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;

	color -= offset;

	float peak = max( color.r, max( color.g, color.b ) );

	if ( peak < StartCompression ) return color;

	float d = 1. - StartCompression;

	float newPeak = 1. - d * d / ( peak + d - StartCompression );

	color *= newPeak / peak;

	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );

	return mix( color, vec3( newPeak ), g );

}

vec3 CustomToneMapping( vec3 color ) { return color; }
`}),jY,pDe=Q(()=>{jY=`
#ifdef USE_TRANSMISSION

	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;

	#ifdef USE_TRANSMISSIONMAP

		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;

	#endif

	#ifdef USE_THICKNESSMAP

		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;

	#endif

	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );

	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );

	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );

	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );

#endif
`}),HY,mDe=Q(()=>{HY=`
#ifdef USE_TRANSMISSION

	// Transmission code is based on glTF-Sampler-Viewer
	// https://github.com/KhronosGroup/glTF-Sample-Viewer

	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;

	#ifdef USE_TRANSMISSIONMAP

		uniform sampler2D transmissionMap;

	#endif

	#ifdef USE_THICKNESSMAP

		uniform sampler2D thicknessMap;

	#endif

	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;

	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;

	varying vec3 vWorldPosition;

	// Mipped Bicubic Texture Filtering by N8
	// https://www.shadertoy.com/view/Dl2SDW

	float w0( float a ) {

		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );

	}

	float w1( float a ) {

		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );

	}

	float w2( float a ){

		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );

	}

	float w3( float a ) {

		return ( 1.0 / 6.0 ) * ( a * a * a );

	}

	// g0 and g1 are the two amplitude functions
	float g0( float a ) {

		return w0( a ) + w1( a );

	}

	float g1( float a ) {

		return w2( a ) + w3( a );

	}

	// h0 and h1 are the two offset functions
	float h0( float a ) {

		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );

	}

	float h1( float a ) {

		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );

	}

	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {

		uv = uv * texelSize.zw + 0.5;

		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );

		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );

		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;

		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );

	}

	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {

		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );

	}

	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {

		// Direction of refracted light.
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );

		// Compute rotation-independent scaling of the model matrix.
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		// The thickness is specified in local space.
		return normalize( refractionVector ) * thickness * modelScale;

	}

	float applyIorToRoughness( const in float roughness, const in float ior ) {

		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );

	}

	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {

		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );

	}

	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {

		if ( isinf( attenuationDistance ) ) {

			// Attenuation distance is +, i.e. the transmitted color is not attenuated at all.
			return vec3( 1.0 );

		} else {

			// Compute light attenuation using Beer's law.
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
			return transmittance;

		}

	}

	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {

		vec4 transmittedLight;
		vec3 transmittance;

		#ifdef USE_DISPERSION

			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );

			for ( int i = 0; i < 3; i ++ ) {

				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;

				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];

			}

			transmittedLight.a /= 3.0;

		#else

			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;

			// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;

			// Sample framebuffer to get pixel the refracted ray hits.
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );

		#endif

		vec3 attenuatedColor = transmittance * transmittedLight.rgb;

		// Get the specular component.
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );

		// As less light is transmitted, the opacity should be increased. This simple approximation does a decent job
		// of modulating a CSS background, and has no effect when the buffer is opaque, due to a solid object or clear color.
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;

		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );

	}
#endif
`}),VY,gDe=Q(()=>{VY=`
#if defined( USE_UV ) || defined( USE_ANISOTROPY )

	varying vec2 vUv;

#endif
#ifdef USE_MAP

	varying vec2 vMapUv;

#endif
#ifdef USE_ALPHAMAP

	varying vec2 vAlphaMapUv;

#endif
#ifdef USE_LIGHTMAP

	varying vec2 vLightMapUv;

#endif
#ifdef USE_AOMAP

	varying vec2 vAoMapUv;

#endif
#ifdef USE_BUMPMAP

	varying vec2 vBumpMapUv;

#endif
#ifdef USE_NORMALMAP

	varying vec2 vNormalMapUv;

#endif
#ifdef USE_EMISSIVEMAP

	varying vec2 vEmissiveMapUv;

#endif
#ifdef USE_METALNESSMAP

	varying vec2 vMetalnessMapUv;

#endif
#ifdef USE_ROUGHNESSMAP

	varying vec2 vRoughnessMapUv;

#endif
#ifdef USE_ANISOTROPYMAP

	varying vec2 vAnisotropyMapUv;

#endif
#ifdef USE_CLEARCOATMAP

	varying vec2 vClearcoatMapUv;

#endif
#ifdef USE_CLEARCOAT_NORMALMAP

	varying vec2 vClearcoatNormalMapUv;

#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	varying vec2 vClearcoatRoughnessMapUv;

#endif
#ifdef USE_IRIDESCENCEMAP

	varying vec2 vIridescenceMapUv;

#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP

	varying vec2 vIridescenceThicknessMapUv;

#endif
#ifdef USE_SHEEN_COLORMAP

	varying vec2 vSheenColorMapUv;

#endif
#ifdef USE_SHEEN_ROUGHNESSMAP

	varying vec2 vSheenRoughnessMapUv;

#endif
#ifdef USE_SPECULARMAP

	varying vec2 vSpecularMapUv;

#endif
#ifdef USE_SPECULAR_COLORMAP

	varying vec2 vSpecularColorMapUv;

#endif
#ifdef USE_SPECULAR_INTENSITYMAP

	varying vec2 vSpecularIntensityMapUv;

#endif
#ifdef USE_TRANSMISSIONMAP

	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;

#endif
#ifdef USE_THICKNESSMAP

	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;

#endif
`}),GY,_De=Q(()=>{GY=`
#if defined( USE_UV ) || defined( USE_ANISOTROPY )

	varying vec2 vUv;

#endif
#ifdef USE_MAP

	uniform mat3 mapTransform;
	varying vec2 vMapUv;

#endif
#ifdef USE_ALPHAMAP

	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;

#endif
#ifdef USE_LIGHTMAP

	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;

#endif
#ifdef USE_AOMAP

	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;

#endif
#ifdef USE_BUMPMAP

	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;

#endif
#ifdef USE_NORMALMAP

	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;

#endif
#ifdef USE_DISPLACEMENTMAP

	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;

#endif
#ifdef USE_EMISSIVEMAP

	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;

#endif
#ifdef USE_METALNESSMAP

	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;

#endif
#ifdef USE_ROUGHNESSMAP

	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;

#endif
#ifdef USE_ANISOTROPYMAP

	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;

#endif
#ifdef USE_CLEARCOATMAP

	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;

#endif
#ifdef USE_CLEARCOAT_NORMALMAP

	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;

#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;

#endif
#ifdef USE_SHEEN_COLORMAP

	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;

#endif
#ifdef USE_SHEEN_ROUGHNESSMAP

	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;

#endif
#ifdef USE_IRIDESCENCEMAP

	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;

#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP

	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;

#endif
#ifdef USE_SPECULARMAP

	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;

#endif
#ifdef USE_SPECULAR_COLORMAP

	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;

#endif
#ifdef USE_SPECULAR_INTENSITYMAP

	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;

#endif
#ifdef USE_TRANSMISSIONMAP

	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;

#endif
#ifdef USE_THICKNESSMAP

	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;

#endif
`}),$Y,vDe=Q(()=>{$Y=`
#if defined( USE_UV ) || defined( USE_ANISOTROPY )

	vUv = vec3( uv, 1 ).xy;

#endif
#ifdef USE_MAP

	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;

#endif
#ifdef USE_ALPHAMAP

	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_LIGHTMAP

	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_AOMAP

	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_BUMPMAP

	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_NORMALMAP

	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_DISPLACEMENTMAP

	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_EMISSIVEMAP

	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_METALNESSMAP

	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_ROUGHNESSMAP

	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_ANISOTROPYMAP

	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_CLEARCOATMAP

	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_CLEARCOAT_NORMALMAP

	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP

	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_IRIDESCENCEMAP

	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP

	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SHEEN_COLORMAP

	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SHEEN_ROUGHNESSMAP

	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SPECULARMAP

	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SPECULAR_COLORMAP

	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_SPECULAR_INTENSITYMAP

	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_TRANSMISSIONMAP

	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;

#endif
#ifdef USE_THICKNESSMAP

	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;

#endif
`}),WY,yDe=Q(()=>{WY=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0

	vec4 worldPosition = vec4( transformed, 1.0 );

	#ifdef USE_BATCHING

		worldPosition = batchingMatrix * worldPosition;

	#endif

	#ifdef USE_INSTANCING

		worldPosition = instanceMatrix * worldPosition;

	#endif

	worldPosition = modelMatrix * worldPosition;

#endif
`}),qY,XY,EDe=Q(()=>{qY=`
varying vec2 vUv;
uniform mat3 uvTransform;

void main() {

	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;

	gl_Position = vec4( position.xy, 1.0, 1.0 );

}
`,XY=`
uniform sampler2D t2D;
uniform float backgroundIntensity;

varying vec2 vUv;

void main() {

	vec4 texColor = texture2D( t2D, vUv );

	#ifdef DECODE_VIDEO_TEXTURE

		// use inline sRGB decode until browsers properly support SRGB8_APLHA8 with video textures

		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );

	#endif

	texColor.rgb *= backgroundIntensity;

	gl_FragColor = texColor;

	#include <tonemapping_fragment>
	#include <colorspace_fragment>

}
`}),KY,YY,SDe=Q(()=>{KY=`
varying vec3 vWorldDirection;

#include <common>

void main() {

	vWorldDirection = transformDirection( position, modelMatrix );

	#include <begin_vertex>
	#include <project_vertex>

	gl_Position.z = gl_Position.w; // set z to camera.far

}
`,YY=`

#ifdef ENVMAP_TYPE_CUBE

	uniform samplerCube envMap;

#elif defined( ENVMAP_TYPE_CUBE_UV )

	uniform sampler2D envMap;

#endif

uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;

varying vec3 vWorldDirection;

#include <cube_uv_reflection_fragment>

void main() {

	#ifdef ENVMAP_TYPE_CUBE

		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );

	#elif defined( ENVMAP_TYPE_CUBE_UV )

		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );

	#else

		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );

	#endif

	texColor.rgb *= backgroundIntensity;

	gl_FragColor = texColor;

	#include <tonemapping_fragment>
	#include <colorspace_fragment>

}
`}),ZY,JY,bDe=Q(()=>{ZY=`
varying vec3 vWorldDirection;

#include <common>

void main() {

	vWorldDirection = transformDirection( position, modelMatrix );

	#include <begin_vertex>
	#include <project_vertex>

	gl_Position.z = gl_Position.w; // set z to camera.far

}
`,JY=`
uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;

varying vec3 vWorldDirection;

void main() {

	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );

	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;

	#include <tonemapping_fragment>
	#include <colorspace_fragment>

}
`}),QY,eZ,wDe=Q(()=>{QY=`
`,eZ=""}),tZ,nZ,TDe=Q(()=>{tZ=`
`,nZ=""}),rZ,iZ,xDe=Q(()=>{rZ=`
`,iZ=""}),sZ,aZ,CDe=Q(()=>{sZ=`
uniform float scale;
attribute float lineDistance;

varying float vLineDistance;

#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	vLineDistance = scale * lineDistance;

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>

}
`,aZ=`
uniform vec3 diffuse;
uniform float opacity;

uniform float dashSize;
uniform float totalSize;

varying float vLineDistance;

#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	if ( mod( vLineDistance, totalSize ) > dashSize ) {

		discard;

	}

	vec3 outgoingLight = vec3( 0.0 );

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>

	outgoingLight = diffuseColor.rgb; // simple shader

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>

}
`}),oZ,lZ,RDe=Q(()=>{oZ=`
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )

		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>

	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>

}
`,lZ=`
uniform vec3 diffuse;
uniform float opacity;

#ifndef FLAT_SHADED

	varying vec3 vNormal;

#endif

#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>

	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );

	// accumulation (baked indirect lighting only)
	#ifdef USE_LIGHTMAP

		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;

	#else

		reflectedLight.indirectDiffuse += vec3( 1.0 );

	#endif

	// modulation
	#include <aomap_fragment>

	reflectedLight.indirectDiffuse *= diffuseColor.rgb;

	vec3 outgoingLight = reflectedLight.indirectDiffuse;

	#include <envmap_fragment>

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>

}
`}),uZ,cZ,MDe=Q(()=>{uZ=`
`,cZ=""}),dZ,fZ,ADe=Q(()=>{dZ=`
`,fZ=""}),hZ,pZ,IDe=Q(()=>{hZ=`
#define NORMAL

#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )

	varying vec3 vViewPosition;

#endif

#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	#include <uv_vertex>
	#include <batching_vertex>

	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )

	vViewPosition = - mvPosition.xyz;

#endif

}
`,pZ=`
#define NORMAL

uniform float opacity;

#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )

	varying vec3 vViewPosition;

#endif

#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );

	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>

	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );

	#ifdef OPAQUE

		gl_FragColor.a = 1.0;

	#endif

}
`}),mZ,gZ,kDe=Q(()=>{mZ=`
`,gZ=""}),_Z,vZ,ODe=Q(()=>{_Z=`
`,vZ=""}),yZ,EZ,PDe=Q(()=>{yZ=`
`,EZ=""}),SZ,bZ,LDe=Q(()=>{SZ=`
`,bZ=""}),wZ,TZ,NDe=Q(()=>{wZ=`
`,TZ=""}),xZ,CZ,DDe=Q(()=>{xZ=`
`,CZ=""}),xn,RZ=Q(()=>{SLe(),bLe(),wLe(),TLe(),xLe(),CLe(),RLe(),MLe(),ALe(),ILe(),kLe(),OLe(),PLe(),LLe(),NLe(),DLe(),ULe(),FLe(),BLe(),zLe(),jLe(),HLe(),VLe(),GLe(),$Le(),WLe(),qLe(),XLe(),KLe(),YLe(),ZLe(),JLe(),QLe(),eNe(),tNe(),nNe(),rNe(),iNe(),sNe(),aNe(),oNe(),lNe(),uNe(),cNe(),dNe(),fNe(),hNe(),pNe(),mNe(),gNe(),_Ne(),vNe(),yNe(),ENe(),SNe(),bNe(),wNe(),TNe(),xNe(),CNe(),RNe(),MNe(),ANe(),INe(),kNe(),ONe(),PNe(),LNe(),NNe(),DNe(),UNe(),FNe(),BNe(),zNe(),jNe(),HNe(),VNe(),GNe(),$Ne(),WNe(),qNe(),XNe(),KNe(),YNe(),ZNe(),JNe(),QNe(),eDe(),tDe(),nDe(),rDe(),iDe(),sDe(),aDe(),oDe(),lDe(),uDe(),cDe(),dDe(),fDe(),hDe(),pDe(),mDe(),gDe(),_De(),vDe(),yDe(),EDe(),SDe(),bDe(),wDe(),TDe(),xDe(),CDe(),RDe(),MDe(),ADe(),IDe(),kDe(),ODe(),PDe(),LDe(),NDe(),DDe(),xn={alphahash_fragment:XX,alphahash_pars_fragment:KX,alphamap_fragment:YX,alphamap_pars_fragment:ZX,alphatest_fragment:JX,alphatest_pars_fragment:QX,aomap_fragment:eK,aomap_pars_fragment:tK,batching_pars_vertex:nK,batching_vertex:rK,begin_vertex:iK,beginnormal_vertex:sK,bsdfs:aK,iridescence_fragment:oK,bumpmap_pars_fragment:lK,clipping_planes_fragment:uK,clipping_planes_pars_fragment:cK,clipping_planes_pars_vertex:dK,clipping_planes_vertex:fK,color_fragment:hK,color_pars_fragment:pK,color_pars_vertex:mK,color_vertex:gK,common:_K,cube_uv_reflection_fragment:vK,defaultnormal_vertex:yK,displacementmap_pars_vertex:EK,displacementmap_vertex:SK,emissivemap_fragment:bK,emissivemap_pars_fragment:wK,colorspace_fragment:TK,colorspace_pars_fragment:xK,envmap_fragment:CK,envmap_common_pars_fragment:RK,envmap_pars_fragment:MK,envmap_pars_vertex:AK,envmap_physical_pars_fragment:zK,envmap_vertex:IK,fog_vertex:kK,fog_pars_vertex:OK,fog_fragment:PK,fog_pars_fragment:LK,gradientmap_pars_fragment:NK,lightmap_pars_fragment:DK,lights_lambert_fragment:UK,lights_lambert_pars_fragment:FK,lights_pars_begin:BK,lights_toon_fragment:jK,lights_toon_pars_fragment:HK,lights_phong_fragment:VK,lights_phong_pars_fragment:GK,lights_physical_fragment:$K,lights_physical_pars_fragment:WK,lights_fragment_begin:qK,lights_fragment_maps:XK,lights_fragment_end:KK,logdepthbuf_fragment:YK,logdepthbuf_pars_fragment:ZK,logdepthbuf_pars_vertex:JK,logdepthbuf_vertex:QK,map_fragment:eY,map_pars_fragment:tY,map_particle_fragment:nY,map_particle_pars_fragment:rY,metalnessmap_fragment:iY,metalnessmap_pars_fragment:sY,morphinstance_vertex:aY,morphcolor_vertex:oY,morphnormal_vertex:lY,morphtarget_pars_vertex:uY,morphtarget_vertex:cY,normal_fragment_begin:dY,normal_fragment_maps:fY,normal_pars_fragment:hY,normal_pars_vertex:pY,normal_vertex:mY,normalmap_pars_fragment:gY,clearcoat_normal_fragment_begin:_Y,clearcoat_normal_fragment_maps:vY,clearcoat_pars_fragment:yY,iridescence_pars_fragment:EY,opaque_fragment:SY,packing:bY,premultiplied_alpha_fragment:wY,project_vertex:TY,dithering_fragment:xY,dithering_pars_fragment:CY,roughnessmap_fragment:RY,roughnessmap_pars_fragment:MY,shadowmap_pars_fragment:AY,shadowmap_pars_vertex:IY,shadowmap_vertex:kY,shadowmask_pars_fragment:OY,skinbase_vertex:PY,skinning_pars_vertex:LY,skinning_vertex:NY,skinnormal_vertex:DY,specularmap_fragment:UY,specularmap_pars_fragment:FY,tonemapping_fragment:BY,tonemapping_pars_fragment:zY,transmission_fragment:jY,transmission_pars_fragment:HY,uv_pars_fragment:VY,uv_pars_vertex:GY,uv_vertex:$Y,worldpos_vertex:WY,background_vert:qY,background_frag:XY,backgroundCube_vert:KY,backgroundCube_frag:YY,cube_vert:ZY,cube_frag:JY,depth_vert:QY,depth_frag:eZ,distanceRGBA_vert:tZ,distanceRGBA_frag:nZ,equirect_vert:rZ,equirect_frag:iZ,linedashed_vert:sZ,linedashed_frag:aZ,meshbasic_vert:oZ,meshbasic_frag:lZ,meshlambert_vert:uZ,meshlambert_frag:cZ,meshmatcap_vert:dZ,meshmatcap_frag:fZ,meshnormal_vert:hZ,meshnormal_frag:pZ,meshphong_vert:mZ,meshphong_frag:gZ,meshphysical_vert:_Z,meshphysical_frag:vZ,meshtoon_vert:yZ,meshtoon_frag:EZ,points_vert:SZ,points_frag:bZ,shadow_vert:wZ,shadow_frag:TZ,sprite_vert:xZ,sprite_frag:CZ}}),ft,T3=Q(()=>{Uc(),_o(),cf(),ft={common:{diffuse:{value:new Wn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new An},alphaMap:{value:null},alphaMapTransform:{value:new An},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new An}},envmap:{envMap:{value:null},envMapRotation:{value:new An},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new An}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new An}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new An},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new An},normalScale:{value:new or(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new An},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new An}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new An}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new An}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Wn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Wn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new An},alphaTest:{value:0},uvTransform:{value:new An}},sprite:{diffuse:{value:new Wn(16777215)},opacity:{value:1},center:{value:new or(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new An},alphaMap:{value:null},alphaMapTransform:{value:new An},alphaTest:{value:0}}}}),Ra,x3=Q(()=>{RZ(),f_(),_o(),Jr(),T3(),Uc(),cf(),Ra={basic:{uniforms:ba([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.fog]),vertexShader:xn.meshbasic_vert,fragmentShader:xn.meshbasic_frag},lambert:{uniforms:ba([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new Wn(0)}}]),vertexShader:xn.meshlambert_vert,fragmentShader:xn.meshlambert_frag},phong:{uniforms:ba([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new Wn(0)},specular:{value:new Wn(1118481)},shininess:{value:30}}]),vertexShader:xn.meshphong_vert,fragmentShader:xn.meshphong_frag},standard:{uniforms:ba([ft.common,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.roughnessmap,ft.metalnessmap,ft.fog,ft.lights,{emissive:{value:new Wn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},toon:{uniforms:ba([ft.common,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.gradientmap,ft.fog,ft.lights,{emissive:{value:new Wn(0)}}]),vertexShader:xn.meshtoon_vert,fragmentShader:xn.meshtoon_frag},matcap:{uniforms:ba([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,{matcap:{value:null}}]),vertexShader:xn.meshmatcap_vert,fragmentShader:xn.meshmatcap_frag},points:{uniforms:ba([ft.points,ft.fog]),vertexShader:xn.points_vert,fragmentShader:xn.points_frag},dashed:{uniforms:ba([ft.common,ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xn.linedashed_vert,fragmentShader:xn.linedashed_frag},depth:{uniforms:ba([ft.common,ft.displacementmap]),vertexShader:xn.depth_vert,fragmentShader:xn.depth_frag},normal:{uniforms:ba([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,{opacity:{value:1}}]),vertexShader:xn.meshnormal_vert,fragmentShader:xn.meshnormal_frag},sprite:{uniforms:ba([ft.sprite,ft.fog]),vertexShader:xn.sprite_vert,fragmentShader:xn.sprite_frag},background:{uniforms:{uvTransform:{value:new An},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xn.background_vert,fragmentShader:xn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new An}},vertexShader:xn.backgroundCube_vert,fragmentShader:xn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xn.cube_vert,fragmentShader:xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xn.equirect_vert,fragmentShader:xn.equirect_frag},distanceRGBA:{uniforms:ba([ft.common,ft.displacementmap,{referencePosition:{value:new xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xn.distanceRGBA_vert,fragmentShader:xn.distanceRGBA_frag},shadow:{uniforms:ba([ft.lights,ft.fog,{color:{value:new Wn(0)},opacity:{value:1}}]),vertexShader:xn.shadow_vert,fragmentShader:xn.shadow_frag}},Ra.physical={uniforms:ba([Ra.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new An},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new An},clearcoatNormalScale:{value:new or(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new An},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new An},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new An},sheen:{value:0},sheenColor:{value:new Wn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new An},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new An},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new An},transmissionSamplerSize:{value:new or},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new An},attenuationDistance:{value:0},attenuationColor:{value:new Wn(0)},specularColor:{value:new Wn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new An},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new An},anisotropyVector:{value:new or},anisotropyMap:{value:null},anisotropyMapTransform:{value:new An}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag}});function UDe(t,e,n,r,i,s,a){let o=new Wn(0),l=s===!0?0:1,c,f,p=null,m=0,_=null;function y(C){let k=C.isScene===!0?C.background:null;return k&&k.isTexture&&(k=(C.backgroundBlurriness>0?n:e).get(k)),k}function E(C){let k=!1,M=y(C);M===null?w(o,l):M&&M.isColor&&(w(M,1),k=!0);let N=t.xr.getEnvironmentBlendMode();N==="additive"?r.buffers.color.setClear(0,0,0,1,a):N==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||k)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function S(C,k){let M=y(k);M&&(M.isCubeTexture||M.mapping===bw)?(f===void 0&&(f=new Ns(new YA(1,1,1),new Wo({name:"BackgroundCubeMaterial",uniforms:p0(Ra.backgroundCube.uniforms),vertexShader:Ra.backgroundCube.vertexShader,fragmentShader:Ra.backgroundCube.fragmentShader,side:ka,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(N,O,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),ah.copy(k.backgroundRotation),ah.x*=-1,ah.y*=-1,ah.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(ah.y*=-1,ah.z*=-1),f.material.uniforms.envMap.value=M,f.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(MZ.makeRotationFromEuler(ah)),f.material.toneMapped=nr.getTransfer(M.colorSpace)!==Cr,(p!==M||m!==M.version||_!==t.toneMapping)&&(f.material.needsUpdate=!0,p=M,m=M.version,_=t.toneMapping),f.layers.enableAll(),C.unshift(f,f.geometry,f.material,0,0,null)):M&&M.isTexture&&(c===void 0&&(c=new Ns(new j1(2,2),new Wo({name:"BackgroundMaterial",uniforms:p0(Ra.background.uniforms),vertexShader:Ra.background.vertexShader,fragmentShader:Ra.background.fragmentShader,side:rf,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,c.material.toneMapped=nr.getTransfer(M.colorSpace)!==Cr,M.matrixAutoUpdate===!0&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(p!==M||m!==M.version||_!==t.toneMapping)&&(c.material.needsUpdate=!0,p=M,m=M.version,_=t.toneMapping),c.layers.enableAll(),C.unshift(c,c.geometry,c.material,0,0,null))}function w(C,k){C.getRGB(_b,EX(t)),r.buffers.color.setClear(_b.r,_b.g,_b.b,k,a)}function R(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(C,k=1){o.set(C),l=k,w(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(C){l=C,w(o,l)},render:E,addToRenderList:S,dispose:R}}var _b,ah,MZ,FDe=Q(()=>{Pn(),ZA(),b3(),U0(),Uc(),df(),ww(),Dc(),D0(),x3(),f_(),_b={r:0,b:0,g:0},ah=new hp,MZ=new ts});function BDe(t,e){let n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=m(null),s=i,a=!1;function o(B,ee,te,ne,H){let V=!1,W=p(ne,te,ee);s!==W&&(s=W,c(s.object)),V=_(B,ne,te,H),V&&y(B,ne,te,H),H!==null&&e.update(H,t.ELEMENT_ARRAY_BUFFER),(V||a)&&(a=!1,k(B,ee,te,ne),H!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(H).buffer))}function l(){return t.createVertexArray()}function c(B){return t.bindVertexArray(B)}function f(B){return t.deleteVertexArray(B)}function p(B,ee,te){let ne=te.wireframe===!0,H=r[B.id];H===void 0&&(H={},r[B.id]=H);let V=H[ee.id];V===void 0&&(V={},H[ee.id]=V);let W=V[ne];return W===void 0&&(W=m(l()),V[ne]=W),W}function m(B){let ee=[],te=[],ne=[];for(let H=0;H<n;H++)ee[H]=0,te[H]=0,ne[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ee,enabledAttributes:te,attributeDivisors:ne,object:B,attributes:{},index:null}}function _(B,ee,te,ne){let H=s.attributes,V=ee.attributes,W=0,J=te.getAttributes();for(let X in J)if(J[X].location>=0){let ie=H[X],pe=V[X];if(pe===void 0&&(X==="instanceMatrix"&&B.instanceMatrix&&(pe=B.instanceMatrix),X==="instanceColor"&&B.instanceColor&&(pe=B.instanceColor)),ie===void 0||ie.attribute!==pe||pe&&ie.data!==pe.data)return!0;W++}return s.attributesNum!==W||s.index!==ne}function y(B,ee,te,ne){let H={},V=ee.attributes,W=0,J=te.getAttributes();for(let X in J)if(J[X].location>=0){let ie=V[X];ie===void 0&&(X==="instanceMatrix"&&B.instanceMatrix&&(ie=B.instanceMatrix),X==="instanceColor"&&B.instanceColor&&(ie=B.instanceColor));let pe={};pe.attribute=ie,ie&&ie.data&&(pe.data=ie.data),H[X]=pe,W++}s.attributes=H,s.attributesNum=W,s.index=ne}function E(){let B=s.newAttributes;for(let ee=0,te=B.length;ee<te;ee++)B[ee]=0}function S(B){w(B,0)}function w(B,ee){let te=s.newAttributes,ne=s.enabledAttributes,H=s.attributeDivisors;te[B]=1,ne[B]===0&&(t.enableVertexAttribArray(B),ne[B]=1),H[B]!==ee&&(t.vertexAttribDivisor(B,ee),H[B]=ee)}function R(){let B=s.newAttributes,ee=s.enabledAttributes;for(let te=0,ne=ee.length;te<ne;te++)ee[te]!==B[te]&&(t.disableVertexAttribArray(te),ee[te]=0)}function C(B,ee,te,ne,H,V,W){W===!0?t.vertexAttribIPointer(B,ee,te,H,V):t.vertexAttribPointer(B,ee,te,ne,H,V)}function k(B,ee,te,ne){E();let H=ne.attributes,V=te.getAttributes(),W=ee.defaultAttributeValues;for(let J in V){let X=V[J];if(X.location>=0){let ie=H[J];if(ie===void 0&&(J==="instanceMatrix"&&B.instanceMatrix&&(ie=B.instanceMatrix),J==="instanceColor"&&B.instanceColor&&(ie=B.instanceColor)),ie!==void 0){let pe=ie.normalized,Z=ie.itemSize,le=e.get(ie);if(le===void 0)continue;let ae=le.buffer,Ee=le.type,ke=le.bytesPerElement,$e=Ee===t.INT||Ee===t.UNSIGNED_INT||ie.gpuType===HA;if(ie.isInterleavedBufferAttribute){let Le=ie.data,We=Le.stride,ot=ie.offset;if(Le.isInstancedInterleavedBuffer){for(let Mt=0;Mt<X.locationSize;Mt++)w(X.location+Mt,Le.meshPerAttribute);B.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let Mt=0;Mt<X.locationSize;Mt++)S(X.location+Mt);t.bindBuffer(t.ARRAY_BUFFER,ae);for(let Mt=0;Mt<X.locationSize;Mt++)C(X.location+Mt,Z/X.locationSize,Ee,pe,We*ke,(ot+Z/X.locationSize*Mt)*ke,$e)}else{if(ie.isInstancedBufferAttribute){for(let Le=0;Le<X.locationSize;Le++)w(X.location+Le,ie.meshPerAttribute);B.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let Le=0;Le<X.locationSize;Le++)S(X.location+Le);t.bindBuffer(t.ARRAY_BUFFER,ae);for(let Le=0;Le<X.locationSize;Le++)C(X.location+Le,Z/X.locationSize,Ee,pe,Z*ke,Z/X.locationSize*Le*ke,$e)}}else if(W!==void 0){let pe=W[J];if(pe!==void 0)switch(pe.length){case 2:t.vertexAttrib2fv(X.location,pe);break;case 3:t.vertexAttrib3fv(X.location,pe);break;case 4:t.vertexAttrib4fv(X.location,pe);break;default:t.vertexAttrib1fv(X.location,pe)}}}}R()}function M(){D();for(let B in r){let ee=r[B];for(let te in ee){let ne=ee[te];for(let H in ne)f(ne[H].object),delete ne[H];delete ee[te]}delete r[B]}}function N(B){if(r[B.id]===void 0)return;let ee=r[B.id];for(let te in ee){let ne=ee[te];for(let H in ne)f(ne[H].object),delete ne[H];delete ee[te]}delete r[B.id]}function O(B){for(let ee in r){let te=r[ee];if(te[B.id]===void 0)continue;let ne=te[B.id];for(let H in ne)f(ne[H].object),delete ne[H];delete te[B.id]}}function D(){L(),a=!0,s!==i&&(s=i,c(s.object))}function L(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:D,resetDefaultState:L,dispose:M,releaseStatesOfGeometry:N,releaseStatesOfProgram:O,initAttributes:E,enableAttribute:S,disableUnusedAttributes:R}}var zDe=Q(()=>{Pn()});function jDe(t,e,n){let r;function i(c){r=c}function s(c,f){t.drawArrays(r,c,f),n.update(f,r,1)}function a(c,f,p){p!==0&&(t.drawArraysInstanced(r,c,f,p),n.update(f,r,p))}function o(c,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,f,0,p);let m=0;for(let _=0;_<p;_++)m+=f[_];n.update(m,r,1)}function l(c,f,p,m){if(p===0)return;let _=e.get("WEBGL_multi_draw");if(_===null)for(let y=0;y<c.length;y++)a(c[y],f[y],m[y]);else{_.multiDrawArraysInstancedWEBGL(r,c,0,f,0,m,0,p);let y=0;for(let E=0;E<p;E++)y+=f[E]*m[E];n.update(y,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}var HDe=Q(()=>{});function VDe(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){let O=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(O){return!(O!==Rl&&r.convert(O)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(O){let D=O===u_&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==Oc&&r.convert(O)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==gc&&!D)}function l(O){if(O==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp",f=l(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);let p=n.logarithmicDepthBuffer===!0,m=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),_=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=t.getParameter(t.MAX_TEXTURE_SIZE),S=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),w=t.getParameter(t.MAX_VERTEX_ATTRIBS),R=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),C=t.getParameter(t.MAX_VARYING_VECTORS),k=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),M=y>0,N=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:p,reverseDepthBuffer:m,maxTextures:_,maxVertexTextures:y,maxTextureSize:E,maxCubemapSize:S,maxAttributes:w,maxVertexUniforms:R,maxVaryings:C,maxFragmentUniforms:k,vertexTextures:M,maxSamples:N}}var GDe=Q(()=>{Pn()});function $De(t){let e=this,n=null,r=0,i=!1,s=!1,a=new ch,o=new An,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){let _=p.length!==0||m||r!==0||i;return i=m,r=p.length,_},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){n=f(p,m,0)},this.setState=function(p,m,_){let y=p.clippingPlanes,E=p.clipIntersection,S=p.clipShadows,w=t.get(p);if(!i||y===null||y.length===0||s&&!S)s?f(null):c();else{let R=s?0:r,C=R*4,k=w.clippingState||null;l.value=k,k=f(y,m,C,_);for(let M=0;M!==C;++M)k[M]=n[M];w.clippingState=k,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=R}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function f(p,m,_,y){let E=p!==null?p.length:0,S=null;if(E!==0){if(S=l.value,y!==!0||S===null){let w=_+E*4,R=m.matrixWorldInverse;o.getNormalMatrix(R),(S===null||S.length<w)&&(S=new Float32Array(w));for(let C=0,k=_;C!==E;++C,k+=4)a.copy(p[C]).applyMatrix4(R,o),a.normal.toArray(S,k),S[k+3]=a.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,S}}var WDe=Q(()=>{cf(),AX()});function qDe(t){let e=new WeakMap;function n(a,o){return o===tM?a.mapping=Vg:o===nM&&(a.mapping=Gg),a}function r(a){if(a&&a.isTexture){let o=a.mapping;if(o===tM||o===nM)if(e.has(a)){let l=e.get(a).texture;return n(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let c=new xX(l.height);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){let o=a.target;o.removeEventListener("dispose",i);let l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}var XDe=Q(()=>{Pn(),OPe()});function KDe(t){let e=[],n=[],r=[],i=t,s=t-og+1+RL.length;for(let a=0;a<s;a++){let o=Math.pow(2,i);n.push(o);let l=1/o;a>t-og?l=RL[a-t+og-1]:a===0&&(l=0),r.push(l);let c=1/(o-2),f=-c,p=1+c,m=[f,f,p,f,p,p,f,f,p,p,f,p],_=6,y=6,E=3,S=2,w=1,R=new Float32Array(E*y*_),C=new Float32Array(S*y*_),k=new Float32Array(w*y*_);for(let N=0;N<_;N++){let O=N%3*2/3-1,D=N>2?0:-1,L=[O,D,0,O+2/3,D,0,O+2/3,D+1,0,O,D,0,O+2/3,D+1,0,O,D+1,0];R.set(L,E*y*N),C.set(m,S*y*N);let B=[N,N,N,N,N,N];k.set(B,w*y*N)}let M=new Ru;M.setAttribute("position",new Al(R,E)),M.setAttribute("uv",new Al(C,S)),M.setAttribute("faceIndex",new Al(k,w)),e.push(M),i>og&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function H8(t,e,n){let r=new Ol(t,e,n);return r.texture.mapping=bw,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function $x(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function YDe(t,e,n){let r=new Float32Array(dh),i=new xe(0,1,0);return new Wo({name:"SphericalGaussianBlur",defines:{n:dh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:C3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:zd,depthTest:!1,depthWrite:!1})}function V8(){return new Wo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:C3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:zd,depthTest:!1,depthWrite:!1})}function G8(){return new Wo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:C3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:zd,depthTest:!1,depthWrite:!1})}function C3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}var og,RL,dh,Wx,gO,qx,Xx,Kx,Yx,eh,Dm,_O,ML,ZDe=Q(()=>{Pn(),Fc(),ff(),D0(),HX(),QA(),U0(),Jr(),Uc(),P0(),p3(),ZA(),og=4,RL=[.125,.215,.35,.446,.526,.582],dh=20,Wx=new w3,gO=new Wn,qx=null,Xx=0,Kx=0,Yx=!1,eh=(1+Math.sqrt(5))/2,Dm=1/eh,_O=[new xe(-eh,Dm,0),new xe(eh,Dm,0),new xe(-Dm,0,eh),new xe(Dm,0,eh),new xe(0,eh,-Dm),new xe(0,eh,Dm),new xe(-1,1,-1),new xe(1,1,-1),new xe(-1,1,1),new xe(1,1,1)],ML=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){qx=this._renderer.getRenderTarget(),Xx=this._renderer.getActiveCubeFace(),Kx=this._renderer.getActiveMipmapLevel(),Yx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=G8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=V8(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(qx,Xx,Kx),this._renderer.xr.enabled=Yx,t.scissorTest=!1,$x(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Vg||t.mapping===Gg?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),qx=this._renderer.getRenderTarget(),Xx=this._renderer.getActiveCubeFace(),Kx=this._renderer.getActiveMipmapLevel(),Yx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:mu,minFilter:mu,generateMipmaps:!1,type:u_,format:Rl,colorSpace:qg,depthBuffer:!1},r=H8(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=H8(t,e,n);let{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=KDe(i)),this._blurMaterial=YDe(i,t,e)}return r}_compileMaterial(t){let e=new Ns(this._lodPlanes[0],t);this._renderer.compile(e,Wx)}_sceneToCubeUV(t,e,n,r){let i=new Sl(90,1,e,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(gO),o.toneMapping=jd,o.autoClear=!1;let f=new Py({name:"PMREM.Background",side:ka,depthWrite:!1,depthTest:!1}),p=new Ns(new YA,f),m=!1,_=t.background;_?_.isColor&&(f.color.copy(_),t.background=null,m=!0):(f.color.copy(gO),m=!0);for(let y=0;y<6;y++){let E=y%3;E===0?(i.up.set(0,s[y],0),i.lookAt(a[y],0,0)):E===1?(i.up.set(0,0,s[y]),i.lookAt(0,a[y],0)):(i.up.set(0,s[y],0),i.lookAt(0,0,a[y]));let S=this._cubeSize;$x(r,E*S,y>2?S:0,S,S),o.setRenderTarget(r),m&&o.render(p,i),o.render(t,i)}p.geometry.dispose(),p.material.dispose(),o.toneMapping=c,o.autoClear=l,t.background=_}_textureToCubeUV(t,e){let n=this._renderer,r=t.mapping===Vg||t.mapping===Gg;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=G8()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=V8());let i=r?this._cubemapMaterial:this._equirectMaterial,s=new Ns(this._lodPlanes[0],i),a=i.uniforms;a.envMap.value=t;let o=this._cubeSize;$x(e,0,0,3*o,2*o),n.setRenderTarget(e),n.render(s,Wx)}_applyPMREM(t){let e=this._renderer,n=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let i=1;i<r;i++){let s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=_O[(r-i-1)%_O.length];this._blur(t,i-1,i,s,a)}e.autoClear=n}_blur(t,e,n,r,i){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,r,"latitudinal",i),this._halfBlur(s,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,s,a){let o=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,f=new Ns(this._lodPlanes[r],l),p=l.uniforms,m=this._sizeLods[n]-1,_=isFinite(i)?Math.PI/(2*m):2*Math.PI/(2*dh-1),y=i/_,E=isFinite(i)?1+Math.floor(c*y):dh;E>dh&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${dh}`);let S=[],w=0;for(let N=0;N<dh;++N){let O=N/y,D=Math.exp(-O*O/2);S.push(D),N===0?w+=D:N<E&&(w+=2*D)}for(let N=0;N<S.length;N++)S[N]=S[N]/w;p.envMap.value=t.texture,p.samples.value=E,p.weights.value=S,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a);let{_lodMax:R}=this;p.dTheta.value=_,p.mipInt.value=R-n;let C=this._sizeLods[r],k=3*C*(r>R-og?r-R+og:0),M=4*(this._cubeSize-C);$x(e,k,M,3*C,2*C),o.setRenderTarget(e),o.render(f,Wx)}}});function JDe(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){let l=o.mapping,c=l===tM||l===nM,f=l===Vg||l===Gg;if(c||f){let p=e.get(o),m=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==m)return n===null&&(n=new ML(t)),p=c?n.fromEquirectangular(o,p):n.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{let _=o.image;return c&&_&&_.height>0||f&&_&&i(_)?(n===null&&(n=new ML(t)),p=c?n.fromEquirectangular(o):n.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",s),p.texture):null}}}return o}function i(o){let l=0,c=6;for(let f=0;f<c;f++)o[f]!==void 0&&l++;return l===c}function s(o){let l=o.target;l.removeEventListener("dispose",s);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}var QDe=Q(()=>{Pn(),ZDe()});function e3e(t){let e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){let i=n(r);return i===null&&ny("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}var t3e=Q(()=>{d_()});function n3e(t,e,n,r){let i={},s=new WeakMap;function a(p){let m=p.target;m.index!==null&&e.remove(m.index);for(let y in m.attributes)e.remove(m.attributes[y]);m.removeEventListener("dispose",a),delete i[m.id];let _=s.get(m);_&&(e.remove(_),s.delete(m)),r.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,n.memory.geometries--}function o(p,m){return i[m.id]===!0||(m.addEventListener("dispose",a),i[m.id]=!0,n.memory.geometries++),m}function l(p){let m=p.attributes;for(let _ in m)e.update(m[_],t.ARRAY_BUFFER)}function c(p){let m=[],_=p.index,y=p.attributes.position,E=0;if(_!==null){let R=_.array;E=_.version;for(let C=0,k=R.length;C<k;C+=3){let M=R[C+0],N=R[C+1],O=R[C+2];m.push(M,N,N,O,O,M)}}else if(y!==void 0){let R=y.array;E=y.version;for(let C=0,k=R.length/3-1;C<k;C+=3){let M=C+0,N=C+1,O=C+2;m.push(M,N,N,O,O,M)}}else return;let S=new(oX(m)?g3:m3)(m,1);S.version=E;let w=s.get(p);w&&e.remove(w),s.set(p,S)}function f(p){let m=s.get(p);if(m){let _=p.index;_!==null&&m.version<_.version&&c(p)}else c(p);return s.get(p)}return{get:o,update:l,getWireframeAttribute:f}}var r3e=Q(()=>{Fc(),d_()});function i3e(t,e,n){let r;function i(m){r=m}let s,a;function o(m){s=m.type,a=m.bytesPerElement}function l(m,_){t.drawElements(r,_,s,m*a),n.update(_,r,1)}function c(m,_,y){y!==0&&(t.drawElementsInstanced(r,_,s,m*a,y),n.update(_,r,y))}function f(m,_,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,_,0,s,m,0,y);let E=0;for(let S=0;S<y;S++)E+=_[S];n.update(E,r,1)}function p(m,_,y,E){if(y===0)return;let S=e.get("WEBGL_multi_draw");if(S===null)for(let w=0;w<m.length;w++)c(m[w]/a,_[w],E[w]);else{S.multiDrawElementsInstancedWEBGL(r,_,0,s,m,0,E,0,y);let w=0;for(let R=0;R<y;R++)w+=_[R]*E[R];n.update(w,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=f,this.renderMultiDrawInstances=p}var s3e=Q(()=>{});function a3e(t){let e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}var o3e=Q(()=>{});function l3e(t,e,n){let r=new WeakMap,i=new Zr;function s(a,o,l){let c=a.morphTargetInfluences,f=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=f!==void 0?f.length:0,m=r.get(o);if(m===void 0||m.count!==p){let _=function(){D.dispose(),r.delete(o),o.removeEventListener("dispose",_)};m!==void 0&&m.texture.dispose();let y=o.morphAttributes.position!==void 0,E=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,w=o.morphAttributes.position||[],R=o.morphAttributes.normal||[],C=o.morphAttributes.color||[],k=0;y===!0&&(k=1),E===!0&&(k=2),S===!0&&(k=3);let M=o.attributes.position.count*k,N=1;M>e.maxTextureSize&&(N=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);let O=new Float32Array(M*N*4*p),D=new c3(O,M,N,p);D.type=gc,D.needsUpdate=!0;let L=k*4;for(let B=0;B<p;B++){let ee=w[B],te=R[B],ne=C[B],H=M*N*4*B;for(let V=0;V<ee.count;V++){let W=V*L;y===!0&&(i.fromBufferAttribute(ee,V),O[H+W+0]=i.x,O[H+W+1]=i.y,O[H+W+2]=i.z,O[H+W+3]=0),E===!0&&(i.fromBufferAttribute(te,V),O[H+W+4]=i.x,O[H+W+5]=i.y,O[H+W+6]=i.z,O[H+W+7]=0),S===!0&&(i.fromBufferAttribute(ne,V),O[H+W+8]=i.x,O[H+W+9]=i.y,O[H+W+10]=i.z,O[H+W+11]=ne.itemSize===4?i.w:1)}}m={count:p,texture:D,size:new or(M,N)},r.set(o,m),o.addEventListener("dispose",_)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",a.morphTexture,n);else{let _=0;for(let E=0;E<c.length;E++)_+=c[E];let y=o.morphTargetsRelative?1:1-_;l.getUniforms().setValue(t,"morphTargetBaseInfluence",y),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}return{update:s}}var u3e=Q(()=>{Pn(),fX(),xp(),_o()});function c3e(t,e,n,r){let i=new WeakMap;function s(l){let c=r.render.frame,f=l.geometry,p=e.get(l,f);if(i.get(p)!==c&&(e.update(p),i.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){let m=l.skeleton;i.get(m)!==c&&(m.update(),i.set(m,c))}return p}function a(){i=new WeakMap}function o(l){let c=l.target;c.removeEventListener("dispose",o),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:a}}var d3e=Q(()=>{});function F0(t,e,n){let r=t[0];if(r<=0||r>0)return t;let i=e*n,s=IL[i];if(s===void 0&&(s=new Float32Array(i),IL[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function rs(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function is(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function eI(t,e){let n=kL[e];n===void 0&&(n=new Int32Array(e),kL[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function f3e(t,e){let n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function h3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(rs(n,e))return;t.uniform2fv(this.addr,e),is(n,e)}}function p3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(rs(n,e))return;t.uniform3fv(this.addr,e),is(n,e)}}function m3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(rs(n,e))return;t.uniform4fv(this.addr,e),is(n,e)}}function g3e(t,e){let n=this.cache,r=e.elements;if(r===void 0){if(rs(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),is(n,e)}else{if(rs(n,r))return;LL.set(r),t.uniformMatrix2fv(this.addr,!1,LL),is(n,r)}}function _3e(t,e){let n=this.cache,r=e.elements;if(r===void 0){if(rs(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),is(n,e)}else{if(rs(n,r))return;PL.set(r),t.uniformMatrix3fv(this.addr,!1,PL),is(n,r)}}function v3e(t,e){let n=this.cache,r=e.elements;if(r===void 0){if(rs(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),is(n,e)}else{if(rs(n,r))return;OL.set(r),t.uniformMatrix4fv(this.addr,!1,OL),is(n,r)}}function y3e(t,e){let n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function E3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(rs(n,e))return;t.uniform2iv(this.addr,e),is(n,e)}}function S3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(rs(n,e))return;t.uniform3iv(this.addr,e),is(n,e)}}function b3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(rs(n,e))return;t.uniform4iv(this.addr,e),is(n,e)}}function w3e(t,e){let n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function T3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(rs(n,e))return;t.uniform2uiv(this.addr,e),is(n,e)}}function x3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(rs(n,e))return;t.uniform3uiv(this.addr,e),is(n,e)}}function C3e(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(rs(n,e))return;t.uniform4uiv(this.addr,e),is(n,e)}}function R3e(t,e,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(AL.compareFunction=o3,s=AL):s=R3,n.setTexture2D(e||s,i)}function M3e(t,e,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||A3,i)}function A3e(t,e,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||I3,i)}function I3e(t,e,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||M3,i)}function k3e(t){switch(t){case 5126:return f3e;case 35664:return h3e;case 35665:return p3e;case 35666:return m3e;case 35674:return g3e;case 35675:return _3e;case 35676:return v3e;case 5124:case 35670:return y3e;case 35667:case 35671:return E3e;case 35668:case 35672:return S3e;case 35669:case 35673:return b3e;case 5125:return w3e;case 36294:return T3e;case 36295:return x3e;case 36296:return C3e;case 35678:case 36198:case 36298:case 36306:case 35682:return R3e;case 35679:case 36299:case 36307:return M3e;case 35680:case 36300:case 36308:case 36293:return A3e;case 36289:case 36303:case 36311:case 36292:return I3e}}function O3e(t,e){t.uniform1fv(this.addr,e)}function P3e(t,e){let n=F0(e,this.size,2);t.uniform2fv(this.addr,n)}function L3e(t,e){let n=F0(e,this.size,3);t.uniform3fv(this.addr,n)}function N3e(t,e){let n=F0(e,this.size,4);t.uniform4fv(this.addr,n)}function D3e(t,e){let n=F0(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function U3e(t,e){let n=F0(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function F3e(t,e){let n=F0(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function B3e(t,e){t.uniform1iv(this.addr,e)}function z3e(t,e){t.uniform2iv(this.addr,e)}function j3e(t,e){t.uniform3iv(this.addr,e)}function H3e(t,e){t.uniform4iv(this.addr,e)}function V3e(t,e){t.uniform1uiv(this.addr,e)}function G3e(t,e){t.uniform2uiv(this.addr,e)}function $3e(t,e){t.uniform3uiv(this.addr,e)}function W3e(t,e){t.uniform4uiv(this.addr,e)}function q3e(t,e,n){let r=this.cache,i=e.length,s=eI(n,i);rs(r,s)||(t.uniform1iv(this.addr,s),is(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||R3,s[a])}function X3e(t,e,n){let r=this.cache,i=e.length,s=eI(n,i);rs(r,s)||(t.uniform1iv(this.addr,s),is(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||A3,s[a])}function K3e(t,e,n){let r=this.cache,i=e.length,s=eI(n,i);rs(r,s)||(t.uniform1iv(this.addr,s),is(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||I3,s[a])}function Y3e(t,e,n){let r=this.cache,i=e.length,s=eI(n,i);rs(r,s)||(t.uniform1iv(this.addr,s),is(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||M3,s[a])}function Z3e(t){switch(t){case 5126:return O3e;case 35664:return P3e;case 35665:return L3e;case 35666:return N3e;case 35674:return D3e;case 35675:return U3e;case 35676:return F3e;case 5124:case 35670:return B3e;case 35667:case 35671:return z3e;case 35668:case 35672:return j3e;case 35669:case 35673:return H3e;case 5125:return V3e;case 36294:return G3e;case 36295:return $3e;case 36296:return W3e;case 35678:case 36198:case 36298:case 36306:case 35682:return q3e;case 35679:case 36299:case 36307:return X3e;case 35680:case 36300:case 36308:case 36293:return K3e;case 36289:case 36303:case 36311:case 36292:return Y3e}}function $8(t,e){t.seq.push(e),t.map[e.id]=e}function J3e(t,e,n){let r=t.name,i=r.length;for(NC.lastIndex=0;;){let s=NC.exec(r),a=NC.lastIndex,o=s[1],l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){$8(n,c===void 0?new AZ(o,t,e):new IZ(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new kZ(o),$8(n,f)),n=f}}}var R3,AL,M3,A3,I3,IL,kL,OL,PL,LL,AZ,IZ,kZ,NC,Bb,OZ=Q(()=>{TX(),Tp(),fX(),TPe(),kX(),Pn(),R3=new Ml,AL=new S3(1,1),M3=new c3,A3=new hX,I3=new v3,IL=[],kL=[],OL=new Float32Array(16),PL=new Float32Array(9),LL=new Float32Array(4),AZ=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=k3e(e.type)}},IZ=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=Z3e(e.type)}},kZ=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){let r=this.seq;for(let i=0,s=r.length;i!==s;++i){let a=r[i];a.setValue(t,e[a.id],n)}}},NC=/(\w+)(\])?(\[|\.)?/g,Bb=class{constructor(t,e){this.seq=[],this.map={};let n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let i=t.getActiveUniform(e,r),s=t.getUniformLocation(e,i.name);J3e(i,s,this)}}setValue(t,e,n,r){let i=this.map[e];i!==void 0&&i.setValue(t,n,r)}setOptional(t,e,n){let r=e[n];r!==void 0&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,s=e.length;i!==s;++i){let a=e[i],o=n[a.id];o.needsUpdate!==!1&&a.setValue(t,o.value,r)}}static seqWithValue(t,e){let n=[];for(let r=0,i=t.length;r!==i;++r){let s=t[r];s.id in e&&n.push(s)}return n}}});function W8(t,e,n){let r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}var Q3e=Q(()=>{});function eUe(t,e){let n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){let o=a+1;r.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return r.join(`
`)}function tUe(t){nr._getMatrix(DL,nr.workingColorSpace,t);let e=`mat3( ${DL.elements.map(n=>n.toFixed(4))} )`;switch(nr.getTransfer(t)){case F1:return[e,"LinearTransferOETF"];case Cr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function q8(t,e,n){let r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";let s=/ERROR: 0:(\d+)/.exec(i);if(s){let a=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+eUe(t.getShaderSource(e),a)}else return i}function nUe(t,e){let n=tUe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function rUe(t,e){let n;switch(e){case Bq:n="Linear";break;case zq:n="Reinhard";break;case jq:n="Cineon";break;case Hq:n="ACESFilmic";break;case Gq:n="AgX";break;case $q:n="Neutral";break;case Vq:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function iUe(){nr.getLuminanceCoefficients(yb);let t=yb.x.toFixed(4),e=yb.y.toFixed(4),n=yb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function sUe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(vb).join(`
`)}function aUe(t){let e=[];for(let n in t){let r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function oUe(t,e){let n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let s=t.getActiveAttrib(e,i),a=s.name,o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function vb(t){return t!==""}function X8(t,e){let n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function K8(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function NL(t){return t.replace(NZ,lUe)}function lUe(t,e){let n=xn[e];if(n===void 0){let r=DZ.get(e);if(r!==void 0)n=xn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return NL(n)}function Y8(t){return t.replace(UZ,uUe)}function uUe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Z8(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function cUe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===KD?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===vq?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===sc&&(e="SHADOWMAP_TYPE_VSM"),e}function dUe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Vg:case Gg:e="ENVMAP_TYPE_CUBE";break;case bw:e="ENVMAP_TYPE_CUBE_UV";break}return e}function fUe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Gg:e="ENVMAP_MODE_REFRACTION";break}return e}function hUe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case YD:e="ENVMAP_BLENDING_MULTIPLY";break;case Uq:e="ENVMAP_BLENDING_MIX";break;case Fq:e="ENVMAP_BLENDING_ADD";break}return e}function pUe(t){let e=t.envMapCubeUVHeight;if(e===null)return null;let n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function mUe(t,e,n,r){let i=t.getContext(),s=n.defines,a=n.vertexShader,o=n.fragmentShader,l=cUe(n),c=dUe(n),f=fUe(n),p=hUe(n),m=pUe(n),_=sUe(n),y=aUe(s),E=i.createProgram(),S,w,R=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(vb).join(`
`),S.length>0&&(S+=`
`),w=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y].filter(vb).join(`
`),w.length>0&&(w+=`
`)):(S=[Z8(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vb).join(`
`),w=[Z8(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==jd?"#define TONE_MAPPING":"",n.toneMapping!==jd?xn.tonemapping_pars_fragment:"",n.toneMapping!==jd?rUe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",xn.colorspace_pars_fragment,nUe("linearToOutputTexel",n.outputColorSpace),iUe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(vb).join(`
`)),a=NL(a),a=X8(a,n),a=K8(a,n),o=NL(o),o=X8(o,n),o=K8(o,n),a=Y8(a),o=Y8(o),n.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,S=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,w=["#define varying in",n.glslVersion===yL?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===yL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);let C=R+S+a,k=R+w+o,M=W8(i,i.VERTEX_SHADER,C),N=W8(i,i.FRAGMENT_SHADER,k);i.attachShader(E,M),i.attachShader(E,N),n.index0AttributeName!==void 0?i.bindAttribLocation(E,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E);function O(ee){if(t.debug.checkShaderErrors){let te=i.getProgramInfoLog(E).trim(),ne=i.getShaderInfoLog(M).trim(),H=i.getShaderInfoLog(N).trim(),V=!0,W=!0;if(i.getProgramParameter(E,i.LINK_STATUS)===!1)if(V=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,E,M,N);else{let J=q8(i,M,"vertex"),X=q8(i,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+`

Material Name: `+ee.name+`
Material Type: `+ee.type+`

Program Info Log: `+te+`
`+J+`
`+X)}else te!==""?console.warn("THREE.WebGLProgram: Program Info Log:",te):(ne===""||H==="")&&(W=!1);W&&(ee.diagnostics={runnable:V,programLog:te,vertexShader:{log:ne,prefix:S},fragmentShader:{log:H,prefix:w}})}i.deleteShader(M),i.deleteShader(N),D=new Bb(i,E),L=oUe(i,E)}let D;this.getUniforms=function(){return D===void 0&&O(this),D};let L;this.getAttributes=function(){return L===void 0&&O(this),L};let B=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return B===!1&&(B=i.getProgramParameter(E,PZ)),B},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=LZ++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=M,this.fragmentShader=N,this}var PZ,LZ,DL,yb,NZ,DZ,UZ,gUe=Q(()=>{OZ(),Q3e(),RZ(),Pn(),df(),Jr(),cf(),PZ=37297,LZ=0,DL=new An,yb=new xe,NZ=/^[ \t]*#include +<([\w\d./]+)>/gm,DZ=new Map,UZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g}),J8,FZ,Q8,_Ue=Q(()=>{J8=0,FZ=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(i)===!1&&(s.add(i),i.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){let e=this.shaderCache,n=e.get(t);return n===void 0&&(n=new Q8(t),e.set(t,n)),n}},Q8=class{constructor(t){this.id=J8++,this.code=t,this.usedTimes=0}}});function vUe(t,e,n,r,i,s,a){let o=new h3,l=new FZ,c=new Set,f=[],p=i.logarithmicDepthBuffer,m=i.vertexTextures,_=i.precision,y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(L){return c.add(L),L===0?"uv":`uv${L}`}function S(L,B,ee,te,ne){let H=te.fog,V=ne.geometry,W=L.isMeshStandardMaterial?te.environment:null,J=(L.isMeshStandardMaterial?n:e).get(L.envMap||W),X=J&&J.mapping===bw?J.image.height:null,ie=y[L.type];L.precision!==null&&(_=i.getMaxPrecision(L.precision),_!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",_,"instead."));let pe=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,Z=pe!==void 0?pe.length:0,le=0;V.morphAttributes.position!==void 0&&(le=1),V.morphAttributes.normal!==void 0&&(le=2),V.morphAttributes.color!==void 0&&(le=3);let ae,Ee,ke,$e;if(ie){let he=Ra[ie];ae=he.vertexShader,Ee=he.fragmentShader}else ae=L.vertexShader,Ee=L.fragmentShader,l.update(L),ke=l.getVertexShaderID(L),$e=l.getFragmentShaderID(L);let Le=t.getRenderTarget(),We=t.state.buffers.depth.getReversed(),ot=ne.isInstancedMesh===!0,Mt=ne.isBatchedMesh===!0,Wt=!!L.map,ir=!!L.matcap,ue=!!J,vn=!!L.aoMap,pn=!!L.lightMap,Cn=!!L.bumpMap,ut=!!L.normalMap,Qn=!!L.displacementMap,Dt=!!L.emissiveMap,Ie=!!L.metalnessMap,Y=!!L.roughnessMap,j=L.anisotropy>0,_e=L.clearcoat>0,Ue=L.dispersion>0,Be=L.iridescence>0,Oe=L.sheen>0,Et=L.transmission>0,st=j&&!!L.anisotropyMap,yt=_e&&!!L.clearcoatMap,Ut=_e&&!!L.clearcoatNormalMap,Qe=_e&&!!L.clearcoatRoughnessMap,gt=Be&&!!L.iridescenceMap,cn=Be&&!!L.iridescenceThicknessMap,Kt=Oe&&!!L.sheenColorMap,wt=Oe&&!!L.sheenRoughnessMap,Yt=!!L.specularMap,an=!!L.specularColorMap,er=!!L.specularIntensityMap,ve=Et&&!!L.transmissionMap,tt=Et&&!!L.thicknessMap,De=!!L.gradientMap,ze=!!L.alphaMap,ht=L.alphaTest>0,lt=!!L.alphaHash,Rn=!!L.extensions,wr=jd;L.toneMapped&&(Le===null||Le.isXRRenderTarget===!0)&&(wr=t.toneMapping);let oe={shaderID:ie,shaderType:L.type,shaderName:L.name,vertexShader:ae,fragmentShader:Ee,defines:L.defines,customVertexShaderID:ke,customFragmentShaderID:$e,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:_,batching:Mt,batchingColor:Mt&&ne._colorsTexture!==null,instancing:ot,instancingColor:ot&&ne.instanceColor!==null,instancingMorph:ot&&ne.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Le===null?t.outputColorSpace:Le.isXRRenderTarget===!0?Le.texture.colorSpace:qg,alphaToCoverage:!!L.alphaToCoverage,map:Wt,matcap:ir,envMap:ue,envMapMode:ue&&J.mapping,envMapCubeUVHeight:X,aoMap:vn,lightMap:pn,bumpMap:Cn,normalMap:ut,displacementMap:m&&Qn,emissiveMap:Dt,normalMapObjectSpace:ut&&L.normalMapType===Yq,normalMapTangentSpace:ut&&L.normalMapType===Kq,metalnessMap:Ie,roughnessMap:Y,anisotropy:j,anisotropyMap:st,clearcoat:_e,clearcoatMap:yt,clearcoatNormalMap:Ut,clearcoatRoughnessMap:Qe,dispersion:Ue,iridescence:Be,iridescenceMap:gt,iridescenceThicknessMap:cn,sheen:Oe,sheenColorMap:Kt,sheenRoughnessMap:wt,specularMap:Yt,specularColorMap:an,specularIntensityMap:er,transmission:Et,transmissionMap:ve,thicknessMap:tt,gradientMap:De,opaque:L.transparent===!1&&L.blending===wg&&L.alphaToCoverage===!1,alphaMap:ze,alphaTest:ht,alphaHash:lt,combine:L.combine,mapUv:Wt&&E(L.map.channel),aoMapUv:vn&&E(L.aoMap.channel),lightMapUv:pn&&E(L.lightMap.channel),bumpMapUv:Cn&&E(L.bumpMap.channel),normalMapUv:ut&&E(L.normalMap.channel),displacementMapUv:Qn&&E(L.displacementMap.channel),emissiveMapUv:Dt&&E(L.emissiveMap.channel),metalnessMapUv:Ie&&E(L.metalnessMap.channel),roughnessMapUv:Y&&E(L.roughnessMap.channel),anisotropyMapUv:st&&E(L.anisotropyMap.channel),clearcoatMapUv:yt&&E(L.clearcoatMap.channel),clearcoatNormalMapUv:Ut&&E(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Qe&&E(L.clearcoatRoughnessMap.channel),iridescenceMapUv:gt&&E(L.iridescenceMap.channel),iridescenceThicknessMapUv:cn&&E(L.iridescenceThicknessMap.channel),sheenColorMapUv:Kt&&E(L.sheenColorMap.channel),sheenRoughnessMapUv:wt&&E(L.sheenRoughnessMap.channel),specularMapUv:Yt&&E(L.specularMap.channel),specularColorMapUv:an&&E(L.specularColorMap.channel),specularIntensityMapUv:er&&E(L.specularIntensityMap.channel),transmissionMapUv:ve&&E(L.transmissionMap.channel),thicknessMapUv:tt&&E(L.thicknessMap.channel),alphaMapUv:ze&&E(L.alphaMap.channel),vertexTangents:!!V.attributes.tangent&&(ut||j),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,pointsUvs:ne.isPoints===!0&&!!V.attributes.uv&&(Wt||ze),fog:!!H,useFog:L.fog===!0,fogExp2:!!H&&H.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:We,skinning:ne.isSkinnedMesh===!0,morphTargets:V.morphAttributes.position!==void 0,morphNormals:V.morphAttributes.normal!==void 0,morphColors:V.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:le,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numLightProbes:B.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:L.dithering,shadowMapEnabled:t.shadowMap.enabled&&ee.length>0,shadowMapType:t.shadowMap.type,toneMapping:wr,decodeVideoTexture:Wt&&L.map.isVideoTexture===!0&&nr.getTransfer(L.map.colorSpace)===Cr,decodeVideoTextureEmissive:Dt&&L.emissiveMap.isVideoTexture===!0&&nr.getTransfer(L.emissiveMap.colorSpace)===Cr,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===hc,flipSided:L.side===ka,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Rn&&L.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Rn&&L.extensions.multiDraw===!0||Mt)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return oe.vertexUv1s=c.has(1),oe.vertexUv2s=c.has(2),oe.vertexUv3s=c.has(3),c.clear(),oe}function w(L){let B=[];if(L.shaderID?B.push(L.shaderID):(B.push(L.customVertexShaderID),B.push(L.customFragmentShaderID)),L.defines!==void 0)for(let ee in L.defines)B.push(ee),B.push(L.defines[ee]);return L.isRawShaderMaterial===!1&&(R(B,L),C(B,L),B.push(t.outputColorSpace)),B.push(L.customProgramCacheKey),B.join()}function R(L,B){L.push(B.precision),L.push(B.outputColorSpace),L.push(B.envMapMode),L.push(B.envMapCubeUVHeight),L.push(B.mapUv),L.push(B.alphaMapUv),L.push(B.lightMapUv),L.push(B.aoMapUv),L.push(B.bumpMapUv),L.push(B.normalMapUv),L.push(B.displacementMapUv),L.push(B.emissiveMapUv),L.push(B.metalnessMapUv),L.push(B.roughnessMapUv),L.push(B.anisotropyMapUv),L.push(B.clearcoatMapUv),L.push(B.clearcoatNormalMapUv),L.push(B.clearcoatRoughnessMapUv),L.push(B.iridescenceMapUv),L.push(B.iridescenceThicknessMapUv),L.push(B.sheenColorMapUv),L.push(B.sheenRoughnessMapUv),L.push(B.specularMapUv),L.push(B.specularColorMapUv),L.push(B.specularIntensityMapUv),L.push(B.transmissionMapUv),L.push(B.thicknessMapUv),L.push(B.combine),L.push(B.fogExp2),L.push(B.sizeAttenuation),L.push(B.morphTargetsCount),L.push(B.morphAttributeCount),L.push(B.numDirLights),L.push(B.numPointLights),L.push(B.numSpotLights),L.push(B.numSpotLightMaps),L.push(B.numHemiLights),L.push(B.numRectAreaLights),L.push(B.numDirLightShadows),L.push(B.numPointLightShadows),L.push(B.numSpotLightShadows),L.push(B.numSpotLightShadowsWithMaps),L.push(B.numLightProbes),L.push(B.shadowMapType),L.push(B.toneMapping),L.push(B.numClippingPlanes),L.push(B.numClipIntersection),L.push(B.depthPacking)}function C(L,B){o.disableAll(),B.supportsVertexTextures&&o.enable(0),B.instancing&&o.enable(1),B.instancingColor&&o.enable(2),B.instancingMorph&&o.enable(3),B.matcap&&o.enable(4),B.envMap&&o.enable(5),B.normalMapObjectSpace&&o.enable(6),B.normalMapTangentSpace&&o.enable(7),B.clearcoat&&o.enable(8),B.iridescence&&o.enable(9),B.alphaTest&&o.enable(10),B.vertexColors&&o.enable(11),B.vertexAlphas&&o.enable(12),B.vertexUv1s&&o.enable(13),B.vertexUv2s&&o.enable(14),B.vertexUv3s&&o.enable(15),B.vertexTangents&&o.enable(16),B.anisotropy&&o.enable(17),B.alphaHash&&o.enable(18),B.batching&&o.enable(19),B.dispersion&&o.enable(20),B.batchingColor&&o.enable(21),L.push(o.mask),o.disableAll(),B.fog&&o.enable(0),B.useFog&&o.enable(1),B.flatShading&&o.enable(2),B.logarithmicDepthBuffer&&o.enable(3),B.reverseDepthBuffer&&o.enable(4),B.skinning&&o.enable(5),B.morphTargets&&o.enable(6),B.morphNormals&&o.enable(7),B.morphColors&&o.enable(8),B.premultipliedAlpha&&o.enable(9),B.shadowMapEnabled&&o.enable(10),B.doubleSided&&o.enable(11),B.flipSided&&o.enable(12),B.useDepthPacking&&o.enable(13),B.dithering&&o.enable(14),B.transmission&&o.enable(15),B.sheen&&o.enable(16),B.opaque&&o.enable(17),B.pointsUvs&&o.enable(18),B.decodeVideoTexture&&o.enable(19),B.decodeVideoTextureEmissive&&o.enable(20),B.alphaToCoverage&&o.enable(21),L.push(o.mask)}function k(L){let B=y[L.type],ee;if(B){let te=Ra[B];ee=OM.clone(te.uniforms)}else ee=L.uniforms;return ee}function M(L,B){let ee;for(let te=0,ne=f.length;te<ne;te++){let H=f[te];if(H.cacheKey===B){ee=H,++ee.usedTimes;break}}return ee===void 0&&(ee=new mUe(t,B,L,s),f.push(ee)),ee}function N(L){if(--L.usedTimes===0){let B=f.indexOf(L);f[B]=f[f.length-1],f.pop(),L.destroy()}}function O(L){l.remove(L)}function D(){l.dispose()}return{getParameters:S,getProgramCacheKey:w,getUniforms:k,acquireProgram:M,releaseProgram:N,releaseShaderCache:O,programs:f,dispose:D}}var yUe=Q(()=>{Pn(),_X(),gUe(),_Ue(),x3(),f_(),df()});function EUe(){let t=new WeakMap;function e(a){return t.has(a)}function n(a){let o=t.get(a);return o===void 0&&(o={},t.set(a,o)),o}function r(a){t.delete(a)}function i(a,o,l){t.get(a)[o]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}var SUe=Q(()=>{});function bUe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function e7(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function t7(){let t=[],e=0,n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(p,m,_,y,E,S){let w=t[e];return w===void 0?(w={id:p.id,object:p,geometry:m,material:_,groupOrder:y,renderOrder:p.renderOrder,z:E,group:S},t[e]=w):(w.id=p.id,w.object=p,w.geometry=m,w.material=_,w.groupOrder=y,w.renderOrder=p.renderOrder,w.z=E,w.group=S),e++,w}function o(p,m,_,y,E,S){let w=a(p,m,_,y,E,S);_.transmission>0?r.push(w):_.transparent===!0?i.push(w):n.push(w)}function l(p,m,_,y,E,S){let w=a(p,m,_,y,E,S);_.transmission>0?r.unshift(w):_.transparent===!0?i.unshift(w):n.unshift(w)}function c(p,m){n.length>1&&n.sort(p||bUe),r.length>1&&r.sort(m||e7),i.length>1&&i.sort(m||e7)}function f(){for(let p=e,m=t.length;p<m;p++){let _=t[p];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:f,sort:c}}function wUe(){let t=new WeakMap;function e(r,i){let s=t.get(r),a;return s===void 0?(a=new t7,t.set(r,[a])):i>=s.length?(a=new t7,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}var TUe=Q(()=>{});function xUe(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new xe,color:new Wn};break;case"SpotLight":n={position:new xe,direction:new xe,color:new Wn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new xe,color:new Wn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new xe,skyColor:new Wn,groundColor:new Wn};break;case"RectAreaLight":n={color:new Wn,position:new xe,halfWidth:new xe,halfHeight:new xe};break}return t[e.id]=n,n}}}function CUe(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new or};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new or};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new or,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}function RUe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function MUe(t){let e=new xUe,n=CUe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new xe);let i=new xe,s=new ts,a=new ts;function o(c){let f=0,p=0,m=0;for(let L=0;L<9;L++)r.probe[L].set(0,0,0);let _=0,y=0,E=0,S=0,w=0,R=0,C=0,k=0,M=0,N=0,O=0;c.sort(RUe);for(let L=0,B=c.length;L<B;L++){let ee=c[L],te=ee.color,ne=ee.intensity,H=ee.distance,V=ee.shadow&&ee.shadow.map?ee.shadow.map.texture:null;if(ee.isAmbientLight)f+=te.r*ne,p+=te.g*ne,m+=te.b*ne;else if(ee.isLightProbe){for(let W=0;W<9;W++)r.probe[W].addScaledVector(ee.sh.coefficients[W],ne);O++}else if(ee.isDirectionalLight){let W=e.get(ee);if(W.color.copy(ee.color).multiplyScalar(ee.intensity),ee.castShadow){let J=ee.shadow,X=n.get(ee);X.shadowIntensity=J.intensity,X.shadowBias=J.bias,X.shadowNormalBias=J.normalBias,X.shadowRadius=J.radius,X.shadowMapSize=J.mapSize,r.directionalShadow[_]=X,r.directionalShadowMap[_]=V,r.directionalShadowMatrix[_]=ee.shadow.matrix,R++}r.directional[_]=W,_++}else if(ee.isSpotLight){let W=e.get(ee);W.position.setFromMatrixPosition(ee.matrixWorld),W.color.copy(te).multiplyScalar(ne),W.distance=H,W.coneCos=Math.cos(ee.angle),W.penumbraCos=Math.cos(ee.angle*(1-ee.penumbra)),W.decay=ee.decay,r.spot[E]=W;let J=ee.shadow;if(ee.map&&(r.spotLightMap[M]=ee.map,M++,J.updateMatrices(ee),ee.castShadow&&N++),r.spotLightMatrix[E]=J.matrix,ee.castShadow){let X=n.get(ee);X.shadowIntensity=J.intensity,X.shadowBias=J.bias,X.shadowNormalBias=J.normalBias,X.shadowRadius=J.radius,X.shadowMapSize=J.mapSize,r.spotShadow[E]=X,r.spotShadowMap[E]=V,k++}E++}else if(ee.isRectAreaLight){let W=e.get(ee);W.color.copy(te).multiplyScalar(ne),W.halfWidth.set(ee.width*.5,0,0),W.halfHeight.set(0,ee.height*.5,0),r.rectArea[S]=W,S++}else if(ee.isPointLight){let W=e.get(ee);if(W.color.copy(ee.color).multiplyScalar(ee.intensity),W.distance=ee.distance,W.decay=ee.decay,ee.castShadow){let J=ee.shadow,X=n.get(ee);X.shadowIntensity=J.intensity,X.shadowBias=J.bias,X.shadowNormalBias=J.normalBias,X.shadowRadius=J.radius,X.shadowMapSize=J.mapSize,X.shadowCameraNear=J.camera.near,X.shadowCameraFar=J.camera.far,r.pointShadow[y]=X,r.pointShadowMap[y]=V,r.pointShadowMatrix[y]=ee.shadow.matrix,C++}r.point[y]=W,y++}else if(ee.isHemisphereLight){let W=e.get(ee);W.skyColor.copy(ee.color).multiplyScalar(ne),W.groundColor.copy(ee.groundColor).multiplyScalar(ne),r.hemi[w]=W,w++}}S>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ft.LTC_FLOAT_1,r.rectAreaLTC2=ft.LTC_FLOAT_2):(r.rectAreaLTC1=ft.LTC_HALF_1,r.rectAreaLTC2=ft.LTC_HALF_2)),r.ambient[0]=f,r.ambient[1]=p,r.ambient[2]=m;let D=r.hash;(D.directionalLength!==_||D.pointLength!==y||D.spotLength!==E||D.rectAreaLength!==S||D.hemiLength!==w||D.numDirectionalShadows!==R||D.numPointShadows!==C||D.numSpotShadows!==k||D.numSpotMaps!==M||D.numLightProbes!==O)&&(r.directional.length=_,r.spot.length=E,r.rectArea.length=S,r.point.length=y,r.hemi.length=w,r.directionalShadow.length=R,r.directionalShadowMap.length=R,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=k,r.spotShadowMap.length=k,r.directionalShadowMatrix.length=R,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=k+M-N,r.spotLightMap.length=M,r.numSpotLightShadowsWithMaps=N,r.numLightProbes=O,D.directionalLength=_,D.pointLength=y,D.spotLength=E,D.rectAreaLength=S,D.hemiLength=w,D.numDirectionalShadows=R,D.numPointShadows=C,D.numSpotShadows=k,D.numSpotMaps=M,D.numLightProbes=O,r.version=BZ++)}function l(c,f){let p=0,m=0,_=0,y=0,E=0,S=f.matrixWorldInverse;for(let w=0,R=c.length;w<R;w++){let C=c[w];if(C.isDirectionalLight){let k=r.directional[p];k.direction.setFromMatrixPosition(C.matrixWorld),i.setFromMatrixPosition(C.target.matrixWorld),k.direction.sub(i),k.direction.transformDirection(S),p++}else if(C.isSpotLight){let k=r.spot[_];k.position.setFromMatrixPosition(C.matrixWorld),k.position.applyMatrix4(S),k.direction.setFromMatrixPosition(C.matrixWorld),i.setFromMatrixPosition(C.target.matrixWorld),k.direction.sub(i),k.direction.transformDirection(S),_++}else if(C.isRectAreaLight){let k=r.rectArea[y];k.position.setFromMatrixPosition(C.matrixWorld),k.position.applyMatrix4(S),a.identity(),s.copy(C.matrixWorld),s.premultiply(S),a.extractRotation(s),k.halfWidth.set(C.width*.5,0,0),k.halfHeight.set(0,C.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),y++}else if(C.isPointLight){let k=r.point[m];k.position.setFromMatrixPosition(C.matrixWorld),k.position.applyMatrix4(S),m++}else if(C.isHemisphereLight){let k=r.hemi[E];k.direction.setFromMatrixPosition(C.matrixWorld),k.direction.transformDirection(S),E++}}}return{setup:o,setupView:l,state:r}}var BZ,AUe=Q(()=>{Uc(),Dc(),_o(),Jr(),T3(),BZ=0});function n7(t){let e=new MUe(t),n=[],r=[];function i(f){c.camera=f,n.length=0,r.length=0}function s(f){n.push(f)}function a(f){r.push(f)}function o(){e.setup(n)}function l(f){e.setupView(n,f)}let c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function IUe(t){let e=new WeakMap;function n(i,s=0){let a=e.get(i),o;return a===void 0?(o=new n7(t),e.set(i,[o])):s>=a.length?(o=new n7(t),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:n,dispose:r}}var kUe=Q(()=>{AUe()}),zZ,jZ,OUe=Q(()=>{zZ=`
`,jZ=""});function PUe(t,e,n){let r=new E3,i=new or,s=new or,a=new Zr,o=new DX({depthPacking:Xq}),l=new UX,c={},f=n.maxTextureSize,p={[rf]:ka,[ka]:rf,[hc]:hc},m=new Wo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new or},radius:{value:4}},vertexShader:zZ,fragmentShader:jZ}),_=m.clone();_.defines.HORIZONTAL_PASS=1;let y=new Ru;y.setAttribute("position",new Al(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let E=new Ns(y,m),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=KD;let w=this.type;this.render=function(N,O,D){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||N.length===0)return;let L=t.getRenderTarget(),B=t.getActiveCubeFace(),ee=t.getActiveMipmapLevel(),te=t.state;te.setBlending(zd),te.buffers.color.setClear(1,1,1,1),te.buffers.depth.setTest(!0),te.setScissorTest(!1);let ne=w!==sc&&this.type===sc,H=w===sc&&this.type!==sc;for(let V=0,W=N.length;V<W;V++){let J=N[V],X=J.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;i.copy(X.mapSize);let ie=X.getFrameExtents();if(i.multiply(ie),s.copy(X.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(s.x=Math.floor(f/ie.x),i.x=s.x*ie.x,X.mapSize.x=s.x),i.y>f&&(s.y=Math.floor(f/ie.y),i.y=s.y*ie.y,X.mapSize.y=s.y)),X.map===null||ne===!0||H===!0){let Z=this.type!==sc?{minFilter:kl,magFilter:kl}:{};X.map!==null&&X.map.dispose(),X.map=new Ol(i.x,i.y,Z),X.map.texture.name=J.name+".shadowMap",X.camera.updateProjectionMatrix()}t.setRenderTarget(X.map),t.clear();let pe=X.getViewportCount();for(let Z=0;Z<pe;Z++){let le=X.getViewport(Z);a.set(s.x*le.x,s.y*le.y,s.x*le.z,s.y*le.w),te.viewport(a),X.updateMatrices(J,Z),r=X.getFrustum(),k(O,D,X.camera,J,this.type)}X.isPointLightShadow!==!0&&this.type===sc&&R(X,D),X.needsUpdate=!1}w=this.type,S.needsUpdate=!1,t.setRenderTarget(L,B,ee)};function R(N,O){let D=e.update(E);m.defines.VSM_SAMPLES!==N.blurSamples&&(m.defines.VSM_SAMPLES=N.blurSamples,_.defines.VSM_SAMPLES=N.blurSamples,m.needsUpdate=!0,_.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Ol(i.x,i.y)),m.uniforms.shadow_pass.value=N.map.texture,m.uniforms.resolution.value=N.mapSize,m.uniforms.radius.value=N.radius,t.setRenderTarget(N.mapPass),t.clear(),t.renderBufferDirect(O,null,D,m,E,null),_.uniforms.shadow_pass.value=N.mapPass.texture,_.uniforms.resolution.value=N.mapSize,_.uniforms.radius.value=N.radius,t.setRenderTarget(N.map),t.clear(),t.renderBufferDirect(O,null,D,_,E,null)}function C(N,O,D,L){let B=null,ee=D.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(ee!==void 0)B=ee;else if(B=D.isPointLight===!0?l:o,t.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0){let te=B.uuid,ne=O.uuid,H=c[te];H===void 0&&(H={},c[te]=H);let V=H[ne];V===void 0&&(V=B.clone(),H[ne]=V,O.addEventListener("dispose",M)),B=V}if(B.visible=O.visible,B.wireframe=O.wireframe,L===sc?B.side=O.shadowSide!==null?O.shadowSide:O.side:B.side=O.shadowSide!==null?O.shadowSide:p[O.side],B.alphaMap=O.alphaMap,B.alphaTest=O.alphaTest,B.map=O.map,B.clipShadows=O.clipShadows,B.clippingPlanes=O.clippingPlanes,B.clipIntersection=O.clipIntersection,B.displacementMap=O.displacementMap,B.displacementScale=O.displacementScale,B.displacementBias=O.displacementBias,B.wireframeLinewidth=O.wireframeLinewidth,B.linewidth=O.linewidth,D.isPointLight===!0&&B.isMeshDistanceMaterial===!0){let te=t.properties.get(B);te.light=D}return B}function k(N,O,D,L,B){if(N.visible===!1)return;if(N.layers.test(O.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&B===sc)&&(!N.frustumCulled||r.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,N.matrixWorld);let te=e.update(N),ne=N.material;if(Array.isArray(ne)){let H=te.groups;for(let V=0,W=H.length;V<W;V++){let J=H[V],X=ne[J.materialIndex];if(X&&X.visible){let ie=C(N,X,L,B);N.onBeforeShadow(t,N,O,D,te,ie,J),t.renderBufferDirect(D,null,te,ie,N,J),N.onAfterShadow(t,N,O,D,te,ie,J)}}}else if(ne.visible){let H=C(N,ne,L,B);N.onBeforeShadow(t,N,O,D,te,H,null),t.renderBufferDirect(D,null,te,H,N,null),N.onAfterShadow(t,N,O,D,te,H,null)}}let ee=N.children;for(let te=0,ne=ee.length;te<ne;te++)k(ee[te],O,D,L,B)}function M(N){N.target.removeEventListener("dispose",M);for(let O in c){let D=c[O],L=N.target.uuid;L in D&&(D[L].dispose(),delete D[L])}}}var LUe=Q(()=>{Pn(),P0(),iLe(),sLe(),U0(),Fc(),ff(),D0(),xp(),_o(),IX(),OUe()});function NUe(t,e){function n(){let ve=!1,tt=new Zr,De=null,ze=new Zr(0,0,0,0);return{setMask:function(ht){De!==ht&&!ve&&(t.colorMask(ht,ht,ht,ht),De=ht)},setLocked:function(ht){ve=ht},setClear:function(ht,lt,Rn,wr,oe){oe===!0&&(ht*=wr,lt*=wr,Rn*=wr),tt.set(ht,lt,Rn,wr),ze.equals(tt)===!1&&(t.clearColor(ht,lt,Rn,wr),ze.copy(tt))},reset:function(){ve=!1,De=null,ze.set(-1,0,0,0)}}}function r(){let ve=!1,tt=!1,De=null,ze=null,ht=null;return{setReversed:function(lt){if(tt!==lt){let Rn=e.get("EXT_clip_control");tt?Rn.clipControlEXT(Rn.LOWER_LEFT_EXT,Rn.ZERO_TO_ONE_EXT):Rn.clipControlEXT(Rn.LOWER_LEFT_EXT,Rn.NEGATIVE_ONE_TO_ONE_EXT);let wr=ht;ht=null,this.setClear(wr)}tt=lt},getReversed:function(){return tt},setTest:function(lt){lt?Le(t.DEPTH_TEST):We(t.DEPTH_TEST)},setMask:function(lt){De!==lt&&!ve&&(t.depthMask(lt),De=lt)},setFunc:function(lt){if(tt&&(lt=HZ[lt]),ze!==lt){switch(lt){case XR:t.depthFunc(t.NEVER);break;case KR:t.depthFunc(t.ALWAYS);break;case YR:t.depthFunc(t.LESS);break;case Hg:t.depthFunc(t.LEQUAL);break;case ZR:t.depthFunc(t.EQUAL);break;case JR:t.depthFunc(t.GEQUAL);break;case QR:t.depthFunc(t.GREATER);break;case eM:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ze=lt}},setLocked:function(lt){ve=lt},setClear:function(lt){ht!==lt&&(tt&&(lt=1-lt),t.clearDepth(lt),ht=lt)},reset:function(){ve=!1,De=null,ze=null,ht=null,tt=!1}}}function i(){let ve=!1,tt=null,De=null,ze=null,ht=null,lt=null,Rn=null,wr=null,oe=null;return{setTest:function(he){ve||(he?Le(t.STENCIL_TEST):We(t.STENCIL_TEST))},setMask:function(he){tt!==he&&!ve&&(t.stencilMask(he),tt=he)},setFunc:function(he,Ce,Ve){(De!==he||ze!==Ce||ht!==Ve)&&(t.stencilFunc(he,Ce,Ve),De=he,ze=Ce,ht=Ve)},setOp:function(he,Ce,Ve){(lt!==he||Rn!==Ce||wr!==Ve)&&(t.stencilOp(he,Ce,Ve),lt=he,Rn=Ce,wr=Ve)},setLocked:function(he){ve=he},setClear:function(he){oe!==he&&(t.clearStencil(he),oe=he)},reset:function(){ve=!1,tt=null,De=null,ze=null,ht=null,lt=null,Rn=null,wr=null,oe=null}}}let s=new n,a=new r,o=new i,l=new WeakMap,c=new WeakMap,f={},p={},m=new WeakMap,_=[],y=null,E=!1,S=null,w=null,R=null,C=null,k=null,M=null,N=null,O=new Wn(0,0,0),D=0,L=!1,B=null,ee=null,te=null,ne=null,H=null,V=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),W=!1,J=0,X=t.getParameter(t.VERSION);X.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(X)[1]),W=J>=1):X.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),W=J>=2);let ie=null,pe={},Z=t.getParameter(t.SCISSOR_BOX),le=t.getParameter(t.VIEWPORT),ae=new Zr().fromArray(Z),Ee=new Zr().fromArray(le);function ke(ve,tt,De,ze){let ht=new Uint8Array(4),lt=t.createTexture();t.bindTexture(ve,lt),t.texParameteri(ve,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ve,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Rn=0;Rn<De;Rn++)ve===t.TEXTURE_3D||ve===t.TEXTURE_2D_ARRAY?t.texImage3D(tt,0,t.RGBA,1,1,ze,0,t.RGBA,t.UNSIGNED_BYTE,ht):t.texImage2D(tt+Rn,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ht);return lt}let $e={};$e[t.TEXTURE_2D]=ke(t.TEXTURE_2D,t.TEXTURE_2D,1),$e[t.TEXTURE_CUBE_MAP]=ke(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),$e[t.TEXTURE_2D_ARRAY]=ke(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),$e[t.TEXTURE_3D]=ke(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),Le(t.DEPTH_TEST),a.setFunc(Hg),Cn(!1),ut(hL),Le(t.CULL_FACE),vn(zd);function Le(ve){f[ve]!==!0&&(t.enable(ve),f[ve]=!0)}function We(ve){f[ve]!==!1&&(t.disable(ve),f[ve]=!1)}function ot(ve,tt){return p[ve]!==tt?(t.bindFramebuffer(ve,tt),p[ve]=tt,ve===t.DRAW_FRAMEBUFFER&&(p[t.FRAMEBUFFER]=tt),ve===t.FRAMEBUFFER&&(p[t.DRAW_FRAMEBUFFER]=tt),!0):!1}function Mt(ve,tt){let De=_,ze=!1;if(ve){De=m.get(tt),De===void 0&&(De=[],m.set(tt,De));let ht=ve.textures;if(De.length!==ht.length||De[0]!==t.COLOR_ATTACHMENT0){for(let lt=0,Rn=ht.length;lt<Rn;lt++)De[lt]=t.COLOR_ATTACHMENT0+lt;De.length=ht.length,ze=!0}}else De[0]!==t.BACK&&(De[0]=t.BACK,ze=!0);ze&&t.drawBuffers(De)}function Wt(ve){return y!==ve?(t.useProgram(ve),y=ve,!0):!1}let ir={[yh]:t.FUNC_ADD,[Eq]:t.FUNC_SUBTRACT,[Sq]:t.FUNC_REVERSE_SUBTRACT};ir[bq]=t.MIN,ir[wq]=t.MAX;let ue={[Tq]:t.ZERO,[xq]:t.ONE,[Cq]:t.SRC_COLOR,[WR]:t.SRC_ALPHA,[Oq]:t.SRC_ALPHA_SATURATE,[Iq]:t.DST_COLOR,[Mq]:t.DST_ALPHA,[Rq]:t.ONE_MINUS_SRC_COLOR,[qR]:t.ONE_MINUS_SRC_ALPHA,[kq]:t.ONE_MINUS_DST_COLOR,[Aq]:t.ONE_MINUS_DST_ALPHA,[Pq]:t.CONSTANT_COLOR,[Lq]:t.ONE_MINUS_CONSTANT_COLOR,[Nq]:t.CONSTANT_ALPHA,[Dq]:t.ONE_MINUS_CONSTANT_ALPHA};function vn(ve,tt,De,ze,ht,lt,Rn,wr,oe,he){if(ve===zd){E===!0&&(We(t.BLEND),E=!1);return}if(E===!1&&(Le(t.BLEND),E=!0),ve!==yq){if(ve!==S||he!==L){if((w!==yh||k!==yh)&&(t.blendEquation(t.FUNC_ADD),w=yh,k=yh),he)switch(ve){case wg:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case pL:t.blendFunc(t.ONE,t.ONE);break;case mL:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case gL:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}else switch(ve){case wg:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case pL:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case mL:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case gL:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}R=null,C=null,M=null,N=null,O.set(0,0,0),D=0,S=ve,L=he}return}ht=ht||tt,lt=lt||De,Rn=Rn||ze,(tt!==w||ht!==k)&&(t.blendEquationSeparate(ir[tt],ir[ht]),w=tt,k=ht),(De!==R||ze!==C||lt!==M||Rn!==N)&&(t.blendFuncSeparate(ue[De],ue[ze],ue[lt],ue[Rn]),R=De,C=ze,M=lt,N=Rn),(wr.equals(O)===!1||oe!==D)&&(t.blendColor(wr.r,wr.g,wr.b,oe),O.copy(wr),D=oe),S=ve,L=!1}function pn(ve,tt){ve.side===hc?We(t.CULL_FACE):Le(t.CULL_FACE);let De=ve.side===ka;tt&&(De=!De),Cn(De),ve.blending===wg&&ve.transparent===!1?vn(zd):vn(ve.blending,ve.blendEquation,ve.blendSrc,ve.blendDst,ve.blendEquationAlpha,ve.blendSrcAlpha,ve.blendDstAlpha,ve.blendColor,ve.blendAlpha,ve.premultipliedAlpha),a.setFunc(ve.depthFunc),a.setTest(ve.depthTest),a.setMask(ve.depthWrite),s.setMask(ve.colorWrite);let ze=ve.stencilWrite;o.setTest(ze),ze&&(o.setMask(ve.stencilWriteMask),o.setFunc(ve.stencilFunc,ve.stencilRef,ve.stencilFuncMask),o.setOp(ve.stencilFail,ve.stencilZFail,ve.stencilZPass)),Dt(ve.polygonOffset,ve.polygonOffsetFactor,ve.polygonOffsetUnits),ve.alphaToCoverage===!0?Le(t.SAMPLE_ALPHA_TO_COVERAGE):We(t.SAMPLE_ALPHA_TO_COVERAGE)}function Cn(ve){B!==ve&&(ve?t.frontFace(t.CW):t.frontFace(t.CCW),B=ve)}function ut(ve){ve!==gq?(Le(t.CULL_FACE),ve!==ee&&(ve===hL?t.cullFace(t.BACK):ve===_q?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):We(t.CULL_FACE),ee=ve}function Qn(ve){ve!==te&&(W&&t.lineWidth(ve),te=ve)}function Dt(ve,tt,De){ve?(Le(t.POLYGON_OFFSET_FILL),(ne!==tt||H!==De)&&(t.polygonOffset(tt,De),ne=tt,H=De)):We(t.POLYGON_OFFSET_FILL)}function Ie(ve){ve?Le(t.SCISSOR_TEST):We(t.SCISSOR_TEST)}function Y(ve){ve===void 0&&(ve=t.TEXTURE0+V-1),ie!==ve&&(t.activeTexture(ve),ie=ve)}function j(ve,tt,De){De===void 0&&(ie===null?De=t.TEXTURE0+V-1:De=ie);let ze=pe[De];ze===void 0&&(ze={type:void 0,texture:void 0},pe[De]=ze),(ze.type!==ve||ze.texture!==tt)&&(ie!==De&&(t.activeTexture(De),ie=De),t.bindTexture(ve,tt||$e[ve]),ze.type=ve,ze.texture=tt)}function _e(){let ve=pe[ie];ve!==void 0&&ve.type!==void 0&&(t.bindTexture(ve.type,null),ve.type=void 0,ve.texture=void 0)}function Ue(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Be(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Oe(){try{t.texSubImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Et(){try{t.texSubImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function st(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function yt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Ut(){try{t.texStorage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Qe(){try{t.texStorage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function gt(){try{t.texImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function cn(){try{t.texImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Kt(ve){ae.equals(ve)===!1&&(t.scissor(ve.x,ve.y,ve.z,ve.w),ae.copy(ve))}function wt(ve){Ee.equals(ve)===!1&&(t.viewport(ve.x,ve.y,ve.z,ve.w),Ee.copy(ve))}function Yt(ve,tt){let De=c.get(tt);De===void 0&&(De=new WeakMap,c.set(tt,De));let ze=De.get(ve);ze===void 0&&(ze=t.getUniformBlockIndex(tt,ve.name),De.set(ve,ze))}function an(ve,tt){let De=c.get(tt).get(ve);l.get(tt)!==De&&(t.uniformBlockBinding(tt,De,ve.__bindingPointIndex),l.set(tt,De))}function er(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),a.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},ie=null,pe={},p={},m=new WeakMap,_=[],y=null,E=!1,S=null,w=null,R=null,C=null,k=null,M=null,N=null,O=new Wn(0,0,0),D=0,L=!1,B=null,ee=null,te=null,ne=null,H=null,ae.set(0,0,t.canvas.width,t.canvas.height),Ee.set(0,0,t.canvas.width,t.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:Le,disable:We,bindFramebuffer:ot,drawBuffers:Mt,useProgram:Wt,setBlending:vn,setMaterial:pn,setFlipSided:Cn,setCullFace:ut,setLineWidth:Qn,setPolygonOffset:Dt,setScissorTest:Ie,activeTexture:Y,bindTexture:j,unbindTexture:_e,compressedTexImage2D:Ue,compressedTexImage3D:Be,texImage2D:gt,texImage3D:cn,updateUBOMapping:Yt,uniformBlockBinding:an,texStorage2D:Ut,texStorage3D:Qe,texSubImage2D:Oe,texSubImage3D:Et,compressedTexSubImage2D:st,compressedTexSubImage3D:yt,scissor:Kt,viewport:wt,reset:er}}var HZ,DUe=Q(()=>{Pn(),Uc(),xp(),HZ={[XR]:KR,[YR]:QR,[ZR]:eM,[Hg]:JR,[KR]:XR,[QR]:YR,[eM]:ZR,[JR]:Hg}});function UUe(t,e,n,r,i,s,a){let o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new or,f=new WeakMap,p,m=new WeakMap,_=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(Y,j){return _?new OffscreenCanvas(Y,j):z1("canvas")}function E(Y,j,_e){let Ue=1,Be=Ie(Y);if((Be.width>_e||Be.height>_e)&&(Ue=_e/Math.max(Be.width,Be.height)),Ue<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){let Oe=Math.floor(Ue*Be.width),Et=Math.floor(Ue*Be.height);p===void 0&&(p=y(Oe,Et));let st=j?y(Oe,Et):p;return st.width=Oe,st.height=Et,st.getContext("2d").drawImage(Y,0,0,Oe,Et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Be.width+"x"+Be.height+") to ("+Oe+"x"+Et+")."),st}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Be.width+"x"+Be.height+")."),Y;return Y}function S(Y){return Y.generateMipmaps}function w(Y){t.generateMipmap(Y)}function R(Y){return Y.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?t.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function C(Y,j,_e,Ue,Be=!1){if(Y!==null){if(t[Y]!==void 0)return t[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Oe=j;if(j===t.RED&&(_e===t.FLOAT&&(Oe=t.R32F),_e===t.HALF_FLOAT&&(Oe=t.R16F),_e===t.UNSIGNED_BYTE&&(Oe=t.R8)),j===t.RED_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Oe=t.R8UI),_e===t.UNSIGNED_SHORT&&(Oe=t.R16UI),_e===t.UNSIGNED_INT&&(Oe=t.R32UI),_e===t.BYTE&&(Oe=t.R8I),_e===t.SHORT&&(Oe=t.R16I),_e===t.INT&&(Oe=t.R32I)),j===t.RG&&(_e===t.FLOAT&&(Oe=t.RG32F),_e===t.HALF_FLOAT&&(Oe=t.RG16F),_e===t.UNSIGNED_BYTE&&(Oe=t.RG8)),j===t.RG_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Oe=t.RG8UI),_e===t.UNSIGNED_SHORT&&(Oe=t.RG16UI),_e===t.UNSIGNED_INT&&(Oe=t.RG32UI),_e===t.BYTE&&(Oe=t.RG8I),_e===t.SHORT&&(Oe=t.RG16I),_e===t.INT&&(Oe=t.RG32I)),j===t.RGB_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Oe=t.RGB8UI),_e===t.UNSIGNED_SHORT&&(Oe=t.RGB16UI),_e===t.UNSIGNED_INT&&(Oe=t.RGB32UI),_e===t.BYTE&&(Oe=t.RGB8I),_e===t.SHORT&&(Oe=t.RGB16I),_e===t.INT&&(Oe=t.RGB32I)),j===t.RGBA_INTEGER&&(_e===t.UNSIGNED_BYTE&&(Oe=t.RGBA8UI),_e===t.UNSIGNED_SHORT&&(Oe=t.RGBA16UI),_e===t.UNSIGNED_INT&&(Oe=t.RGBA32UI),_e===t.BYTE&&(Oe=t.RGBA8I),_e===t.SHORT&&(Oe=t.RGBA16I),_e===t.INT&&(Oe=t.RGBA32I)),j===t.RGB&&_e===t.UNSIGNED_INT_5_9_9_9_REV&&(Oe=t.RGB9_E5),j===t.RGBA){let Et=Be?F1:nr.getTransfer(Ue);_e===t.FLOAT&&(Oe=t.RGBA32F),_e===t.HALF_FLOAT&&(Oe=t.RGBA16F),_e===t.UNSIGNED_BYTE&&(Oe=Et===Cr?t.SRGB8_ALPHA8:t.RGBA8),_e===t.UNSIGNED_SHORT_4_4_4_4&&(Oe=t.RGBA4),_e===t.UNSIGNED_SHORT_5_5_5_1&&(Oe=t.RGB5_A1)}return(Oe===t.R16F||Oe===t.R32F||Oe===t.RG16F||Oe===t.RG32F||Oe===t.RGBA16F||Oe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function k(Y,j){let _e;return Y?j===null||j===fp||j===$g?_e=t.DEPTH24_STENCIL8:j===gc?_e=t.DEPTH32F_STENCIL8:j===f0&&(_e=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):j===null||j===fp||j===$g?_e=t.DEPTH_COMPONENT24:j===gc?_e=t.DEPTH_COMPONENT32F:j===f0&&(_e=t.DEPTH_COMPONENT16),_e}function M(Y,j){return S(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==kl&&Y.minFilter!==mu?Math.log2(Math.max(j.width,j.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?j.mipmaps.length:1}function N(Y){let j=Y.target;j.removeEventListener("dispose",N),D(j),j.isVideoTexture&&f.delete(j)}function O(Y){let j=Y.target;j.removeEventListener("dispose",O),B(j)}function D(Y){let j=r.get(Y);if(j.__webglInit===void 0)return;let _e=Y.source,Ue=m.get(_e);if(Ue){let Be=Ue[j.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&L(Y),Object.keys(Ue).length===0&&m.delete(_e)}r.remove(Y)}function L(Y){let j=r.get(Y);t.deleteTexture(j.__webglTexture);let _e=Y.source,Ue=m.get(_e);delete Ue[j.__cacheKey],a.memory.textures--}function B(Y){let j=r.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),r.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++){if(Array.isArray(j.__webglFramebuffer[Ue]))for(let Be=0;Be<j.__webglFramebuffer[Ue].length;Be++)t.deleteFramebuffer(j.__webglFramebuffer[Ue][Be]);else t.deleteFramebuffer(j.__webglFramebuffer[Ue]);j.__webglDepthbuffer&&t.deleteRenderbuffer(j.__webglDepthbuffer[Ue])}else{if(Array.isArray(j.__webglFramebuffer))for(let Ue=0;Ue<j.__webglFramebuffer.length;Ue++)t.deleteFramebuffer(j.__webglFramebuffer[Ue]);else t.deleteFramebuffer(j.__webglFramebuffer);if(j.__webglDepthbuffer&&t.deleteRenderbuffer(j.__webglDepthbuffer),j.__webglMultisampledFramebuffer&&t.deleteFramebuffer(j.__webglMultisampledFramebuffer),j.__webglColorRenderbuffer)for(let Ue=0;Ue<j.__webglColorRenderbuffer.length;Ue++)j.__webglColorRenderbuffer[Ue]&&t.deleteRenderbuffer(j.__webglColorRenderbuffer[Ue]);j.__webglDepthRenderbuffer&&t.deleteRenderbuffer(j.__webglDepthRenderbuffer)}let _e=Y.textures;for(let Ue=0,Be=_e.length;Ue<Be;Ue++){let Oe=r.get(_e[Ue]);Oe.__webglTexture&&(t.deleteTexture(Oe.__webglTexture),a.memory.textures--),r.remove(_e[Ue])}r.remove(Y)}let ee=0;function te(){ee=0}function ne(){let Y=ee;return Y>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+i.maxTextures),ee+=1,Y}function H(Y){let j=[];return j.push(Y.wrapS),j.push(Y.wrapT),j.push(Y.wrapR||0),j.push(Y.magFilter),j.push(Y.minFilter),j.push(Y.anisotropy),j.push(Y.internalFormat),j.push(Y.format),j.push(Y.type),j.push(Y.generateMipmaps),j.push(Y.premultiplyAlpha),j.push(Y.flipY),j.push(Y.unpackAlignment),j.push(Y.colorSpace),j.join()}function V(Y,j){let _e=r.get(Y);if(Y.isVideoTexture&&Qn(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&_e.__version!==Y.version){let Ue=Y.image;if(Ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ee(_e,Y,j);return}}n.bindTexture(t.TEXTURE_2D,_e.__webglTexture,t.TEXTURE0+j)}function W(Y,j){let _e=r.get(Y);if(Y.version>0&&_e.__version!==Y.version){Ee(_e,Y,j);return}n.bindTexture(t.TEXTURE_2D_ARRAY,_e.__webglTexture,t.TEXTURE0+j)}function J(Y,j){let _e=r.get(Y);if(Y.version>0&&_e.__version!==Y.version){Ee(_e,Y,j);return}n.bindTexture(t.TEXTURE_3D,_e.__webglTexture,t.TEXTURE0+j)}function X(Y,j){let _e=r.get(Y);if(Y.version>0&&_e.__version!==Y.version){ke(_e,Y,j);return}n.bindTexture(t.TEXTURE_CUBE_MAP,_e.__webglTexture,t.TEXTURE0+j)}let ie={[rM]:t.REPEAT,[Dh]:t.CLAMP_TO_EDGE,[iM]:t.MIRRORED_REPEAT},pe={[kl]:t.NEAREST,[Wq]:t.NEAREST_MIPMAP_NEAREST,[fb]:t.NEAREST_MIPMAP_LINEAR,[mu]:t.LINEAR,[kC]:t.LINEAR_MIPMAP_NEAREST,[Uh]:t.LINEAR_MIPMAP_LINEAR},Z={[Zq]:t.NEVER,[rX]:t.ALWAYS,[Jq]:t.LESS,[o3]:t.LEQUAL,[Qq]:t.EQUAL,[nX]:t.GEQUAL,[eX]:t.GREATER,[tX]:t.NOTEQUAL};function le(Y,j){if(j.type===gc&&e.has("OES_texture_float_linear")===!1&&(j.magFilter===mu||j.magFilter===kC||j.magFilter===fb||j.magFilter===Uh||j.minFilter===mu||j.minFilter===kC||j.minFilter===fb||j.minFilter===Uh)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Y,t.TEXTURE_WRAP_S,ie[j.wrapS]),t.texParameteri(Y,t.TEXTURE_WRAP_T,ie[j.wrapT]),(Y===t.TEXTURE_3D||Y===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Y,t.TEXTURE_WRAP_R,ie[j.wrapR]),t.texParameteri(Y,t.TEXTURE_MAG_FILTER,pe[j.magFilter]),t.texParameteri(Y,t.TEXTURE_MIN_FILTER,pe[j.minFilter]),j.compareFunction&&(t.texParameteri(Y,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Y,t.TEXTURE_COMPARE_FUNC,Z[j.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(j.magFilter===kl||j.minFilter!==fb&&j.minFilter!==Uh||j.type===gc&&e.has("OES_texture_float_linear")===!1)return;if(j.anisotropy>1||r.get(j).__currentAnisotropy){let _e=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Y,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(j.anisotropy,i.getMaxAnisotropy())),r.get(j).__currentAnisotropy=j.anisotropy}}}function ae(Y,j){let _e=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,j.addEventListener("dispose",N));let Ue=j.source,Be=m.get(Ue);Be===void 0&&(Be={},m.set(Ue,Be));let Oe=H(j);if(Oe!==Y.__cacheKey){Be[Oe]===void 0&&(Be[Oe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,_e=!0),Be[Oe].usedTimes++;let Et=Be[Y.__cacheKey];Et!==void 0&&(Be[Y.__cacheKey].usedTimes--,Et.usedTimes===0&&L(j)),Y.__cacheKey=Oe,Y.__webglTexture=Be[Oe].texture}return _e}function Ee(Y,j,_e){let Ue=t.TEXTURE_2D;(j.isDataArrayTexture||j.isCompressedArrayTexture)&&(Ue=t.TEXTURE_2D_ARRAY),j.isData3DTexture&&(Ue=t.TEXTURE_3D);let Be=ae(Y,j),Oe=j.source;n.bindTexture(Ue,Y.__webglTexture,t.TEXTURE0+_e);let Et=r.get(Oe);if(Oe.version!==Et.__version||Be===!0){n.activeTexture(t.TEXTURE0+_e);let st=nr.getPrimaries(nr.workingColorSpace),yt=j.colorSpace===Ad?null:nr.getPrimaries(j.colorSpace),Ut=j.colorSpace===Ad||st===yt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,j.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,j.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ut);let Qe=E(j.image,!1,i.maxTextureSize);Qe=Dt(j,Qe);let gt=s.convert(j.format,j.colorSpace),cn=s.convert(j.type),Kt=C(j.internalFormat,gt,cn,j.colorSpace,j.isVideoTexture);le(Ue,j);let wt,Yt=j.mipmaps,an=j.isVideoTexture!==!0,er=Et.__version===void 0||Be===!0,ve=Oe.dataReady,tt=M(j,Qe);if(j.isDepthTexture)Kt=k(j.format===Wg,j.type),er&&(an?n.texStorage2D(t.TEXTURE_2D,1,Kt,Qe.width,Qe.height):n.texImage2D(t.TEXTURE_2D,0,Kt,Qe.width,Qe.height,0,gt,cn,null));else if(j.isDataTexture)if(Yt.length>0){an&&er&&n.texStorage2D(t.TEXTURE_2D,tt,Kt,Yt[0].width,Yt[0].height);for(let De=0,ze=Yt.length;De<ze;De++)wt=Yt[De],an?ve&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,wt.width,wt.height,gt,cn,wt.data):n.texImage2D(t.TEXTURE_2D,De,Kt,wt.width,wt.height,0,gt,cn,wt.data);j.generateMipmaps=!1}else an?(er&&n.texStorage2D(t.TEXTURE_2D,tt,Kt,Qe.width,Qe.height),ve&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Qe.width,Qe.height,gt,cn,Qe.data)):n.texImage2D(t.TEXTURE_2D,0,Kt,Qe.width,Qe.height,0,gt,cn,Qe.data);else if(j.isCompressedTexture)if(j.isCompressedArrayTexture){an&&er&&n.texStorage3D(t.TEXTURE_2D_ARRAY,tt,Kt,Yt[0].width,Yt[0].height,Qe.depth);for(let De=0,ze=Yt.length;De<ze;De++)if(wt=Yt[De],j.format!==Rl)if(gt!==null)if(an){if(ve)if(j.layerUpdates.size>0){let ht=j8(wt.width,wt.height,j.format,j.type);for(let lt of j.layerUpdates){let Rn=wt.data.subarray(lt*ht/wt.data.BYTES_PER_ELEMENT,(lt+1)*ht/wt.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,lt,wt.width,wt.height,1,gt,Rn)}j.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,0,wt.width,wt.height,Qe.depth,gt,wt.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,De,Kt,wt.width,wt.height,Qe.depth,0,wt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else an?ve&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,0,wt.width,wt.height,Qe.depth,gt,cn,wt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,De,Kt,wt.width,wt.height,Qe.depth,0,gt,cn,wt.data)}else{an&&er&&n.texStorage2D(t.TEXTURE_2D,tt,Kt,Yt[0].width,Yt[0].height);for(let De=0,ze=Yt.length;De<ze;De++)wt=Yt[De],j.format!==Rl?gt!==null?an?ve&&n.compressedTexSubImage2D(t.TEXTURE_2D,De,0,0,wt.width,wt.height,gt,wt.data):n.compressedTexImage2D(t.TEXTURE_2D,De,Kt,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):an?ve&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,wt.width,wt.height,gt,cn,wt.data):n.texImage2D(t.TEXTURE_2D,De,Kt,wt.width,wt.height,0,gt,cn,wt.data)}else if(j.isDataArrayTexture)if(an){if(er&&n.texStorage3D(t.TEXTURE_2D_ARRAY,tt,Kt,Qe.width,Qe.height,Qe.depth),ve)if(j.layerUpdates.size>0){let De=j8(Qe.width,Qe.height,j.format,j.type);for(let ze of j.layerUpdates){let ht=Qe.data.subarray(ze*De/Qe.data.BYTES_PER_ELEMENT,(ze+1)*De/Qe.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ze,Qe.width,Qe.height,1,gt,cn,ht)}j.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Qe.width,Qe.height,Qe.depth,gt,cn,Qe.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Kt,Qe.width,Qe.height,Qe.depth,0,gt,cn,Qe.data);else if(j.isData3DTexture)an?(er&&n.texStorage3D(t.TEXTURE_3D,tt,Kt,Qe.width,Qe.height,Qe.depth),ve&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Qe.width,Qe.height,Qe.depth,gt,cn,Qe.data)):n.texImage3D(t.TEXTURE_3D,0,Kt,Qe.width,Qe.height,Qe.depth,0,gt,cn,Qe.data);else if(j.isFramebufferTexture){if(er)if(an)n.texStorage2D(t.TEXTURE_2D,tt,Kt,Qe.width,Qe.height);else{let De=Qe.width,ze=Qe.height;for(let ht=0;ht<tt;ht++)n.texImage2D(t.TEXTURE_2D,ht,Kt,De,ze,0,gt,cn,null),De>>=1,ze>>=1}}else if(Yt.length>0){if(an&&er){let De=Ie(Yt[0]);n.texStorage2D(t.TEXTURE_2D,tt,Kt,De.width,De.height)}for(let De=0,ze=Yt.length;De<ze;De++)wt=Yt[De],an?ve&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,gt,cn,wt):n.texImage2D(t.TEXTURE_2D,De,Kt,gt,cn,wt);j.generateMipmaps=!1}else if(an){if(er){let De=Ie(Qe);n.texStorage2D(t.TEXTURE_2D,tt,Kt,De.width,De.height)}ve&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,gt,cn,Qe)}else n.texImage2D(t.TEXTURE_2D,0,Kt,gt,cn,Qe);S(j)&&w(Ue),Et.__version=Oe.version,j.onUpdate&&j.onUpdate(j)}Y.__version=j.version}function ke(Y,j,_e){if(j.image.length!==6)return;let Ue=ae(Y,j),Be=j.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Y.__webglTexture,t.TEXTURE0+_e);let Oe=r.get(Be);if(Be.version!==Oe.__version||Ue===!0){n.activeTexture(t.TEXTURE0+_e);let Et=nr.getPrimaries(nr.workingColorSpace),st=j.colorSpace===Ad?null:nr.getPrimaries(j.colorSpace),yt=j.colorSpace===Ad||Et===st?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,j.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,j.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);let Ut=j.isCompressedTexture||j.image[0].isCompressedTexture,Qe=j.image[0]&&j.image[0].isDataTexture,gt=[];for(let ze=0;ze<6;ze++)!Ut&&!Qe?gt[ze]=E(j.image[ze],!0,i.maxCubemapSize):gt[ze]=Qe?j.image[ze].image:j.image[ze],gt[ze]=Dt(j,gt[ze]);let cn=gt[0],Kt=s.convert(j.format,j.colorSpace),wt=s.convert(j.type),Yt=C(j.internalFormat,Kt,wt,j.colorSpace),an=j.isVideoTexture!==!0,er=Oe.__version===void 0||Ue===!0,ve=Be.dataReady,tt=M(j,cn);le(t.TEXTURE_CUBE_MAP,j);let De;if(Ut){an&&er&&n.texStorage2D(t.TEXTURE_CUBE_MAP,tt,Yt,cn.width,cn.height);for(let ze=0;ze<6;ze++){De=gt[ze].mipmaps;for(let ht=0;ht<De.length;ht++){let lt=De[ht];j.format!==Rl?Kt!==null?an?ve&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht,0,0,lt.width,lt.height,Kt,lt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht,Yt,lt.width,lt.height,0,lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):an?ve&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht,0,0,lt.width,lt.height,Kt,wt,lt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht,Yt,lt.width,lt.height,0,Kt,wt,lt.data)}}}else{if(De=j.mipmaps,an&&er){De.length>0&&tt++;let ze=Ie(gt[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,tt,Yt,ze.width,ze.height)}for(let ze=0;ze<6;ze++)if(Qe){an?ve&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,gt[ze].width,gt[ze].height,Kt,wt,gt[ze].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,Yt,gt[ze].width,gt[ze].height,0,Kt,wt,gt[ze].data);for(let ht=0;ht<De.length;ht++){let lt=De[ht].image[ze].image;an?ve&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht+1,0,0,lt.width,lt.height,Kt,wt,lt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht+1,Yt,lt.width,lt.height,0,Kt,wt,lt.data)}}else{an?ve&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,Kt,wt,gt[ze]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,Yt,Kt,wt,gt[ze]);for(let ht=0;ht<De.length;ht++){let lt=De[ht];an?ve&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht+1,0,0,Kt,wt,lt.image[ze]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ht+1,Yt,Kt,wt,lt.image[ze])}}}S(j)&&w(t.TEXTURE_CUBE_MAP),Oe.__version=Be.version,j.onUpdate&&j.onUpdate(j)}Y.__version=j.version}function $e(Y,j,_e,Ue,Be,Oe){let Et=s.convert(_e.format,_e.colorSpace),st=s.convert(_e.type),yt=C(_e.internalFormat,Et,st,_e.colorSpace),Ut=r.get(j),Qe=r.get(_e);if(Qe.__renderTarget=j,!Ut.__hasExternalTextures){let gt=Math.max(1,j.width>>Oe),cn=Math.max(1,j.height>>Oe);Be===t.TEXTURE_3D||Be===t.TEXTURE_2D_ARRAY?n.texImage3D(Be,Oe,yt,gt,cn,j.depth,0,Et,st,null):n.texImage2D(Be,Oe,yt,gt,cn,0,Et,st,null)}n.bindFramebuffer(t.FRAMEBUFFER,Y),ut(j)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Ue,Be,Qe.__webglTexture,0,Cn(j)):(Be===t.TEXTURE_2D||Be>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Ue,Be,Qe.__webglTexture,Oe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Le(Y,j,_e){if(t.bindRenderbuffer(t.RENDERBUFFER,Y),j.depthBuffer){let Ue=j.depthTexture,Be=Ue&&Ue.isDepthTexture?Ue.type:null,Oe=k(j.stencilBuffer,Be),Et=j.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,st=Cn(j);ut(j)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,st,Oe,j.width,j.height):_e?t.renderbufferStorageMultisample(t.RENDERBUFFER,st,Oe,j.width,j.height):t.renderbufferStorage(t.RENDERBUFFER,Oe,j.width,j.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Et,t.RENDERBUFFER,Y)}else{let Ue=j.textures;for(let Be=0;Be<Ue.length;Be++){let Oe=Ue[Be],Et=s.convert(Oe.format,Oe.colorSpace),st=s.convert(Oe.type),yt=C(Oe.internalFormat,Et,st,Oe.colorSpace),Ut=Cn(j);_e&&ut(j)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ut,yt,j.width,j.height):ut(j)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ut,yt,j.width,j.height):t.renderbufferStorage(t.RENDERBUFFER,yt,j.width,j.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function We(Y,j){if(j&&j.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Y),!(j.depthTexture&&j.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let _e=r.get(j.depthTexture);_e.__renderTarget=j,(!_e.__webglTexture||j.depthTexture.image.width!==j.width||j.depthTexture.image.height!==j.height)&&(j.depthTexture.image.width=j.width,j.depthTexture.image.height=j.height,j.depthTexture.needsUpdate=!0),V(j.depthTexture,0);let Ue=_e.__webglTexture,Be=Cn(j);if(j.depthTexture.format===Tg)ut(j)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ue,0,Be):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Ue,0);else if(j.depthTexture.format===Wg)ut(j)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ue,0,Be):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Ue,0);else throw new Error("Unknown depthTexture format")}function ot(Y){let j=r.get(Y),_e=Y.isWebGLCubeRenderTarget===!0;if(j.__boundDepthTexture!==Y.depthTexture){let Ue=Y.depthTexture;if(j.__depthDisposeCallback&&j.__depthDisposeCallback(),Ue){let Be=()=>{delete j.__boundDepthTexture,delete j.__depthDisposeCallback,Ue.removeEventListener("dispose",Be)};Ue.addEventListener("dispose",Be),j.__depthDisposeCallback=Be}j.__boundDepthTexture=Ue}if(Y.depthTexture&&!j.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");We(j.__webglFramebuffer,Y)}else if(_e){j.__webglDepthbuffer=[];for(let Ue=0;Ue<6;Ue++)if(n.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer[Ue]),j.__webglDepthbuffer[Ue]===void 0)j.__webglDepthbuffer[Ue]=t.createRenderbuffer(),Le(j.__webglDepthbuffer[Ue],Y,!1);else{let Be=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Oe=j.__webglDepthbuffer[Ue];t.bindRenderbuffer(t.RENDERBUFFER,Oe),t.framebufferRenderbuffer(t.FRAMEBUFFER,Be,t.RENDERBUFFER,Oe)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,j.__webglFramebuffer),j.__webglDepthbuffer===void 0)j.__webglDepthbuffer=t.createRenderbuffer(),Le(j.__webglDepthbuffer,Y,!1);else{let Ue=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Be=j.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Be),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ue,t.RENDERBUFFER,Be)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Mt(Y,j,_e){let Ue=r.get(Y);j!==void 0&&$e(Ue.__webglFramebuffer,Y,Y.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),_e!==void 0&&ot(Y)}function Wt(Y){let j=Y.texture,_e=r.get(Y),Ue=r.get(j);Y.addEventListener("dispose",O);let Be=Y.textures,Oe=Y.isWebGLCubeRenderTarget===!0,Et=Be.length>1;if(Et||(Ue.__webglTexture===void 0&&(Ue.__webglTexture=t.createTexture()),Ue.__version=j.version,a.memory.textures++),Oe){_e.__webglFramebuffer=[];for(let st=0;st<6;st++)if(j.mipmaps&&j.mipmaps.length>0){_e.__webglFramebuffer[st]=[];for(let yt=0;yt<j.mipmaps.length;yt++)_e.__webglFramebuffer[st][yt]=t.createFramebuffer()}else _e.__webglFramebuffer[st]=t.createFramebuffer()}else{if(j.mipmaps&&j.mipmaps.length>0){_e.__webglFramebuffer=[];for(let st=0;st<j.mipmaps.length;st++)_e.__webglFramebuffer[st]=t.createFramebuffer()}else _e.__webglFramebuffer=t.createFramebuffer();if(Et)for(let st=0,yt=Be.length;st<yt;st++){let Ut=r.get(Be[st]);Ut.__webglTexture===void 0&&(Ut.__webglTexture=t.createTexture(),a.memory.textures++)}if(Y.samples>0&&ut(Y)===!1){_e.__webglMultisampledFramebuffer=t.createFramebuffer(),_e.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,_e.__webglMultisampledFramebuffer);for(let st=0;st<Be.length;st++){let yt=Be[st];_e.__webglColorRenderbuffer[st]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,_e.__webglColorRenderbuffer[st]);let Ut=s.convert(yt.format,yt.colorSpace),Qe=s.convert(yt.type),gt=C(yt.internalFormat,Ut,Qe,yt.colorSpace,Y.isXRRenderTarget===!0),cn=Cn(Y);t.renderbufferStorageMultisample(t.RENDERBUFFER,cn,gt,Y.width,Y.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+st,t.RENDERBUFFER,_e.__webglColorRenderbuffer[st])}t.bindRenderbuffer(t.RENDERBUFFER,null),Y.depthBuffer&&(_e.__webglDepthRenderbuffer=t.createRenderbuffer(),Le(_e.__webglDepthRenderbuffer,Y,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Oe){n.bindTexture(t.TEXTURE_CUBE_MAP,Ue.__webglTexture),le(t.TEXTURE_CUBE_MAP,j);for(let st=0;st<6;st++)if(j.mipmaps&&j.mipmaps.length>0)for(let yt=0;yt<j.mipmaps.length;yt++)$e(_e.__webglFramebuffer[st][yt],Y,j,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+st,yt);else $e(_e.__webglFramebuffer[st],Y,j,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+st,0);S(j)&&w(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Et){for(let st=0,yt=Be.length;st<yt;st++){let Ut=Be[st],Qe=r.get(Ut);n.bindTexture(t.TEXTURE_2D,Qe.__webglTexture),le(t.TEXTURE_2D,Ut),$e(_e.__webglFramebuffer,Y,Ut,t.COLOR_ATTACHMENT0+st,t.TEXTURE_2D,0),S(Ut)&&w(t.TEXTURE_2D)}n.unbindTexture()}else{let st=t.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(st=Y.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(st,Ue.__webglTexture),le(st,j),j.mipmaps&&j.mipmaps.length>0)for(let yt=0;yt<j.mipmaps.length;yt++)$e(_e.__webglFramebuffer[yt],Y,j,t.COLOR_ATTACHMENT0,st,yt);else $e(_e.__webglFramebuffer,Y,j,t.COLOR_ATTACHMENT0,st,0);S(j)&&w(st),n.unbindTexture()}Y.depthBuffer&&ot(Y)}function ir(Y){let j=Y.textures;for(let _e=0,Ue=j.length;_e<Ue;_e++){let Be=j[_e];if(S(Be)){let Oe=R(Y),Et=r.get(Be).__webglTexture;n.bindTexture(Oe,Et),w(Oe),n.unbindTexture()}}}let ue=[],vn=[];function pn(Y){if(Y.samples>0){if(ut(Y)===!1){let j=Y.textures,_e=Y.width,Ue=Y.height,Be=t.COLOR_BUFFER_BIT,Oe=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Et=r.get(Y),st=j.length>1;if(st)for(let yt=0;yt<j.length;yt++)n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+yt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+yt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Et.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Et.__webglFramebuffer);for(let yt=0;yt<j.length;yt++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(Be|=t.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(Be|=t.STENCIL_BUFFER_BIT)),st){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Et.__webglColorRenderbuffer[yt]);let Ut=r.get(j[yt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ut,0)}t.blitFramebuffer(0,0,_e,Ue,0,0,_e,Ue,Be,t.NEAREST),l===!0&&(ue.length=0,vn.length=0,ue.push(t.COLOR_ATTACHMENT0+yt),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(ue.push(Oe),vn.push(Oe),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,vn)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ue))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),st)for(let yt=0;yt<j.length;yt++){n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+yt,t.RENDERBUFFER,Et.__webglColorRenderbuffer[yt]);let Ut=r.get(j[yt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+yt,t.TEXTURE_2D,Ut,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Et.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&l){let j=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[j])}}}function Cn(Y){return Math.min(i.maxSamples,Y.samples)}function ut(Y){let j=r.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&j.__useRenderToTexture!==!1}function Qn(Y){let j=a.render.frame;f.get(Y)!==j&&(f.set(Y,j),Y.update())}function Dt(Y,j){let _e=Y.colorSpace,Ue=Y.format,Be=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||_e!==qg&&_e!==Ad&&(nr.getTransfer(_e)===Cr?(Ue!==Rl||Be!==Oc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_e)),j}function Ie(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(c.width=Y.naturalWidth||Y.width,c.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(c.width=Y.displayWidth,c.height=Y.displayHeight):(c.width=Y.width,c.height=Y.height),c}this.allocateTextureUnit=ne,this.resetTextureUnits=te,this.setTexture2D=V,this.setTexture2DArray=W,this.setTexture3D=J,this.setTextureCube=X,this.rebindTextures=Mt,this.setupRenderTarget=Wt,this.updateRenderTargetMipmap=ir,this.updateMultisampleRenderTarget=pn,this.setupDepthRenderbuffer=ot,this.setupFrameBufferTexture=$e,this.useMultisampledRTT=ut}var FUe=Q(()=>{Pn(),d_(),df(),_o(),gLe()});function BUe(t,e){function n(r,i=Ad){let s,a=nr.getTransfer(i);if(r===Oc)return t.UNSIGNED_BYTE;if(r===VA)return t.UNSIGNED_SHORT_4_4_4_4;if(r===GA)return t.UNSIGNED_SHORT_5_5_5_1;if(r===QD)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===ZD)return t.BYTE;if(r===JD)return t.SHORT;if(r===f0)return t.UNSIGNED_SHORT;if(r===HA)return t.INT;if(r===fp)return t.UNSIGNED_INT;if(r===gc)return t.FLOAT;if(r===u_)return t.HALF_FLOAT;if(r===e3)return t.ALPHA;if(r===t3)return t.RGB;if(r===Rl)return t.RGBA;if(r===n3)return t.LUMINANCE;if(r===r3)return t.LUMINANCE_ALPHA;if(r===Tg)return t.DEPTH_COMPONENT;if(r===Wg)return t.DEPTH_STENCIL;if(r===i3)return t.RED;if(r===$A)return t.RED_INTEGER;if(r===s3)return t.RG;if(r===WA)return t.RG_INTEGER;if(r===qA)return t.RGBA_INTEGER;if(r===Pb||r===Lb||r===Nb||r===Db)if(a===Cr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Pb)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Lb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Nb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Db)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Pb)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Lb)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Nb)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Db)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===sM||r===aM||r===oM||r===lM)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===sM)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===aM)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===oM)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===lM)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===uM||r===cM||r===dM)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===uM||r===cM)return a===Cr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===dM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===fM||r===hM||r===pM||r===mM||r===gM||r===_M||r===vM||r===yM||r===EM||r===SM||r===bM||r===wM||r===TM||r===xM)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===fM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===hM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===pM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===mM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===gM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===_M)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===vM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===yM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===EM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===SM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===bM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===wM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===TM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===xM)return a===Cr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Ub||r===CM||r===RM)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Ub)return a===Cr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===CM)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===RM)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===a3||r===MM||r===AM||r===IM)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Ub)return s.COMPRESSED_RED_RGTC1_EXT;if(r===MM)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===AM)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===IM)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===$g?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}var zUe=Q(()=>{Pn(),df()}),r7,i7,VZ,jUe=Q(()=>{b3(),U0(),D0(),Tp(),r7=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,i7=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,VZ=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){let r=new Ml,i=t.properties.get(r);i.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,n=new Wo({vertexShader:r7,fragmentShader:i7,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Ns(new j1(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}}),GZ,HUe=Q(()=>{fLe(),O0(),QA(),_o(),Jr(),xp(),bs(),qX(),P0(),PPe(),kX(),Pn(),jUe(),GZ=class extends c_{constructor(t,e){super();let n=this,r=null,i=1,s=null,a="local-floor",o=1,l=null,c=null,f=null,p=null,m=null,_=null,y=new VZ,E=e.getContextAttributes(),S=null,w=null,R=[],C=[],k=new or,M=null,N=new Sl;N.viewport=new Zr;let O=new Sl;O.viewport=new Zr;let D=[N,O],L=new GX,B=null,ee=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let Ee=R[ae];return Ee===void 0&&(Ee=new LC,R[ae]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(ae){let Ee=R[ae];return Ee===void 0&&(Ee=new LC,R[ae]=Ee),Ee.getGripSpace()},this.getHand=function(ae){let Ee=R[ae];return Ee===void 0&&(Ee=new LC,R[ae]=Ee),Ee.getHandSpace()};function te(ae){let Ee=C.indexOf(ae.inputSource);if(Ee===-1)return;let ke=R[Ee];ke!==void 0&&(ke.update(ae.inputSource,ae.frame,l||s),ke.dispatchEvent({type:ae.type,data:ae.inputSource}))}function ne(){r.removeEventListener("select",te),r.removeEventListener("selectstart",te),r.removeEventListener("selectend",te),r.removeEventListener("squeeze",te),r.removeEventListener("squeezestart",te),r.removeEventListener("squeezeend",te),r.removeEventListener("end",ne),r.removeEventListener("inputsourceschange",H);for(let ae=0;ae<R.length;ae++){let Ee=C[ae];Ee!==null&&(C[ae]=null,R[ae].disconnect(Ee))}B=null,ee=null,y.reset(),t.setRenderTarget(S),m=null,p=null,f=null,r=null,w=null,le.stop(),n.isPresenting=!1,t.setPixelRatio(M),t.setSize(k.width,k.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){i=ae,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){a=ae,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(ae){l=ae},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(ae){if(r=ae,r!==null){if(S=t.getRenderTarget(),r.addEventListener("select",te),r.addEventListener("selectstart",te),r.addEventListener("selectend",te),r.addEventListener("squeeze",te),r.addEventListener("squeezestart",te),r.addEventListener("squeezeend",te),r.addEventListener("end",ne),r.addEventListener("inputsourceschange",H),E.xrCompatible!==!0&&await e.makeXRCompatible(),M=t.getPixelRatio(),t.getSize(k),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ee=null,ke=null,$e=null;E.depth&&($e=E.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ee=E.stencil?Wg:Tg,ke=E.stencil?$g:fp);let Le={colorFormat:e.RGBA8,depthFormat:$e,scaleFactor:i};f=new XRWebGLBinding(r,e),p=f.createProjectionLayer(Le),r.updateRenderState({layers:[p]}),t.setPixelRatio(1),t.setSize(p.textureWidth,p.textureHeight,!1),w=new Ol(p.textureWidth,p.textureHeight,{format:Rl,type:Oc,depthTexture:new S3(p.textureWidth,p.textureHeight,ke,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:E.stencil,colorSpace:t.outputColorSpace,samples:E.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}else{let Ee={antialias:E.antialias,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:i};m=new XRWebGLLayer(r,e,Ee),r.updateRenderState({baseLayer:m}),t.setPixelRatio(1),t.setSize(m.framebufferWidth,m.framebufferHeight,!1),w=new Ol(m.framebufferWidth,m.framebufferHeight,{format:Rl,type:Oc,colorSpace:t.outputColorSpace,stencilBuffer:E.stencil})}w.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await r.requestReferenceSpace(a),le.setContext(r),le.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function H(ae){for(let Ee=0;Ee<ae.removed.length;Ee++){let ke=ae.removed[Ee],$e=C.indexOf(ke);$e>=0&&(C[$e]=null,R[$e].disconnect(ke))}for(let Ee=0;Ee<ae.added.length;Ee++){let ke=ae.added[Ee],$e=C.indexOf(ke);if($e===-1){for(let We=0;We<R.length;We++)if(We>=C.length){C.push(ke),$e=We;break}else if(C[We]===null){C[We]=ke,$e=We;break}if($e===-1)break}let Le=R[$e];Le&&Le.connect(ke)}}let V=new xe,W=new xe;function J(ae,Ee,ke){V.setFromMatrixPosition(Ee.matrixWorld),W.setFromMatrixPosition(ke.matrixWorld);let $e=V.distanceTo(W),Le=Ee.projectionMatrix.elements,We=ke.projectionMatrix.elements,ot=Le[14]/(Le[10]-1),Mt=Le[14]/(Le[10]+1),Wt=(Le[9]+1)/Le[5],ir=(Le[9]-1)/Le[5],ue=(Le[8]-1)/Le[0],vn=(We[8]+1)/We[0],pn=ot*ue,Cn=ot*vn,ut=$e/(-ue+vn),Qn=ut*-ue;if(Ee.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(Qn),ae.translateZ(ut),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert(),Le[10]===-1)ae.projectionMatrix.copy(Ee.projectionMatrix),ae.projectionMatrixInverse.copy(Ee.projectionMatrixInverse);else{let Dt=ot+ut,Ie=Mt+ut,Y=pn-Qn,j=Cn+($e-Qn),_e=Wt*Mt/Ie*Dt,Ue=ir*Mt/Ie*Dt;ae.projectionMatrix.makePerspective(Y,j,_e,Ue,Dt,Ie),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}}function X(ae,Ee){Ee===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(Ee.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(r===null)return;let Ee=ae.near,ke=ae.far;y.texture!==null&&(y.depthNear>0&&(Ee=y.depthNear),y.depthFar>0&&(ke=y.depthFar)),L.near=O.near=N.near=Ee,L.far=O.far=N.far=ke,(B!==L.near||ee!==L.far)&&(r.updateRenderState({depthNear:L.near,depthFar:L.far}),B=L.near,ee=L.far),N.layers.mask=ae.layers.mask|2,O.layers.mask=ae.layers.mask|4,L.layers.mask=N.layers.mask|O.layers.mask;let $e=ae.parent,Le=L.cameras;X(L,$e);for(let We=0;We<Le.length;We++)X(Le[We],$e);Le.length===2?J(L,N,O):L.projectionMatrix.copy(N.projectionMatrix),ie(ae,L,$e)};function ie(ae,Ee,ke){ke===null?ae.matrix.copy(Ee.matrixWorld):(ae.matrix.copy(ke.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(Ee.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(Ee.projectionMatrix),ae.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=h0*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(p===null&&m===null))return o},this.setFoveation=function(ae){o=ae,p!==null&&(p.fixedFoveation=ae),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ae)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(L)};let pe=null;function Z(ae,Ee){if(c=Ee.getViewerPose(l||s),_=Ee,c!==null){let ke=c.views;m!==null&&(t.setRenderTargetFramebuffer(w,m.framebuffer),t.setRenderTarget(w));let $e=!1;ke.length!==L.cameras.length&&(L.cameras.length=0,$e=!0);for(let We=0;We<ke.length;We++){let ot=ke[We],Mt=null;if(m!==null)Mt=m.getViewport(ot);else{let ir=f.getViewSubImage(p,ot);Mt=ir.viewport,We===0&&(t.setRenderTargetTextures(w,ir.colorTexture,p.ignoreDepthValues?void 0:ir.depthStencilTexture),t.setRenderTarget(w))}let Wt=D[We];Wt===void 0&&(Wt=new Sl,Wt.layers.enable(We),Wt.viewport=new Zr,D[We]=Wt),Wt.matrix.fromArray(ot.transform.matrix),Wt.matrix.decompose(Wt.position,Wt.quaternion,Wt.scale),Wt.projectionMatrix.fromArray(ot.projectionMatrix),Wt.projectionMatrixInverse.copy(Wt.projectionMatrix).invert(),Wt.viewport.set(Mt.x,Mt.y,Mt.width,Mt.height),We===0&&(L.matrix.copy(Wt.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),$e===!0&&L.cameras.push(Wt)}let Le=r.enabledFeatures;if(Le&&Le.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&f){let We=f.getDepthInformation(ke[0]);We&&We.isValid&&We.texture&&y.init(t,We,r.renderState)}}for(let ke=0;ke<R.length;ke++){let $e=C[ke],Le=R[ke];$e!==null&&Le!==void 0&&Le.update($e,Ee,l||s)}pe&&pe(ae,Ee),Ee.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ee}),_=null}let le=new WX;le.setAnimationLoop(Z),this.setAnimationLoop=function(ae){pe=ae},this.dispose=function(){}}}});function VUe(t,e){function n(S,w){S.matrixAutoUpdate===!0&&S.updateMatrix(),w.value.copy(S.matrix)}function r(S,w){w.color.getRGB(S.fogColor.value,EX(t)),w.isFog?(S.fogNear.value=w.near,S.fogFar.value=w.far):w.isFogExp2&&(S.fogDensity.value=w.density)}function i(S,w,R,C,k){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(S,w):w.isMeshToonMaterial?(s(S,w),p(S,w)):w.isMeshPhongMaterial?(s(S,w),f(S,w)):w.isMeshStandardMaterial?(s(S,w),m(S,w),w.isMeshPhysicalMaterial&&_(S,w,k)):w.isMeshMatcapMaterial?(s(S,w),y(S,w)):w.isMeshDepthMaterial?s(S,w):w.isMeshDistanceMaterial?(s(S,w),E(S,w)):w.isMeshNormalMaterial?s(S,w):w.isLineBasicMaterial?(a(S,w),w.isLineDashedMaterial&&o(S,w)):w.isPointsMaterial?l(S,w,R,C):w.isSpriteMaterial?c(S,w):w.isShadowMaterial?(S.color.value.copy(w.color),S.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(S,w){S.opacity.value=w.opacity,w.color&&S.diffuse.value.copy(w.color),w.emissive&&S.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(S.map.value=w.map,n(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,n(w.alphaMap,S.alphaMapTransform)),w.bumpMap&&(S.bumpMap.value=w.bumpMap,n(w.bumpMap,S.bumpMapTransform),S.bumpScale.value=w.bumpScale,w.side===ka&&(S.bumpScale.value*=-1)),w.normalMap&&(S.normalMap.value=w.normalMap,n(w.normalMap,S.normalMapTransform),S.normalScale.value.copy(w.normalScale),w.side===ka&&S.normalScale.value.negate()),w.displacementMap&&(S.displacementMap.value=w.displacementMap,n(w.displacementMap,S.displacementMapTransform),S.displacementScale.value=w.displacementScale,S.displacementBias.value=w.displacementBias),w.emissiveMap&&(S.emissiveMap.value=w.emissiveMap,n(w.emissiveMap,S.emissiveMapTransform)),w.specularMap&&(S.specularMap.value=w.specularMap,n(w.specularMap,S.specularMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest);let R=e.get(w),C=R.envMap,k=R.envMapRotation;C&&(S.envMap.value=C,oh.copy(k),oh.x*=-1,oh.y*=-1,oh.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(oh.y*=-1,oh.z*=-1),S.envMapRotation.value.setFromMatrix4($Z.makeRotationFromEuler(oh)),S.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=w.reflectivity,S.ior.value=w.ior,S.refractionRatio.value=w.refractionRatio),w.lightMap&&(S.lightMap.value=w.lightMap,S.lightMapIntensity.value=w.lightMapIntensity,n(w.lightMap,S.lightMapTransform)),w.aoMap&&(S.aoMap.value=w.aoMap,S.aoMapIntensity.value=w.aoMapIntensity,n(w.aoMap,S.aoMapTransform))}function a(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,w.map&&(S.map.value=w.map,n(w.map,S.mapTransform))}function o(S,w){S.dashSize.value=w.dashSize,S.totalSize.value=w.dashSize+w.gapSize,S.scale.value=w.scale}function l(S,w,R,C){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.size.value=w.size*R,S.scale.value=C*.5,w.map&&(S.map.value=w.map,n(w.map,S.uvTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,n(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function c(S,w){S.diffuse.value.copy(w.color),S.opacity.value=w.opacity,S.rotation.value=w.rotation,w.map&&(S.map.value=w.map,n(w.map,S.mapTransform)),w.alphaMap&&(S.alphaMap.value=w.alphaMap,n(w.alphaMap,S.alphaMapTransform)),w.alphaTest>0&&(S.alphaTest.value=w.alphaTest)}function f(S,w){S.specular.value.copy(w.specular),S.shininess.value=Math.max(w.shininess,1e-4)}function p(S,w){w.gradientMap&&(S.gradientMap.value=w.gradientMap)}function m(S,w){S.metalness.value=w.metalness,w.metalnessMap&&(S.metalnessMap.value=w.metalnessMap,n(w.metalnessMap,S.metalnessMapTransform)),S.roughness.value=w.roughness,w.roughnessMap&&(S.roughnessMap.value=w.roughnessMap,n(w.roughnessMap,S.roughnessMapTransform)),w.envMap&&(S.envMapIntensity.value=w.envMapIntensity)}function _(S,w,R){S.ior.value=w.ior,w.sheen>0&&(S.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),S.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(S.sheenColorMap.value=w.sheenColorMap,n(w.sheenColorMap,S.sheenColorMapTransform)),w.sheenRoughnessMap&&(S.sheenRoughnessMap.value=w.sheenRoughnessMap,n(w.sheenRoughnessMap,S.sheenRoughnessMapTransform))),w.clearcoat>0&&(S.clearcoat.value=w.clearcoat,S.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(S.clearcoatMap.value=w.clearcoatMap,n(w.clearcoatMap,S.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,n(w.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(S.clearcoatNormalMap.value=w.clearcoatNormalMap,n(w.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===ka&&S.clearcoatNormalScale.value.negate())),w.dispersion>0&&(S.dispersion.value=w.dispersion),w.iridescence>0&&(S.iridescence.value=w.iridescence,S.iridescenceIOR.value=w.iridescenceIOR,S.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(S.iridescenceMap.value=w.iridescenceMap,n(w.iridescenceMap,S.iridescenceMapTransform)),w.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=w.iridescenceThicknessMap,n(w.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),w.transmission>0&&(S.transmission.value=w.transmission,S.transmissionSamplerMap.value=R.texture,S.transmissionSamplerSize.value.set(R.width,R.height),w.transmissionMap&&(S.transmissionMap.value=w.transmissionMap,n(w.transmissionMap,S.transmissionMapTransform)),S.thickness.value=w.thickness,w.thicknessMap&&(S.thicknessMap.value=w.thicknessMap,n(w.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=w.attenuationDistance,S.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(S.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(S.anisotropyMap.value=w.anisotropyMap,n(w.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=w.specularIntensity,S.specularColor.value.copy(w.specularColor),w.specularColorMap&&(S.specularColorMap.value=w.specularColorMap,n(w.specularColorMap,S.specularColorMapTransform)),w.specularIntensityMap&&(S.specularIntensityMap.value=w.specularIntensityMap,n(w.specularIntensityMap,S.specularIntensityMapTransform))}function y(S,w){w.matcap&&(S.matcap.value=w.matcap)}function E(S,w){let R=e.get(w).light;S.referencePosition.value.setFromMatrixPosition(R.matrixWorld),S.nearDistance.value=R.shadow.camera.near,S.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}var oh,$Z,GUe=Q(()=>{Pn(),f_(),ww(),Dc(),oh=new hp,$Z=new ts});function $Ue(t,e,n,r){let i={},s={},a=[],o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(R,C){let k=C.program;r.uniformBlockBinding(R,k)}function c(R,C){let k=i[R.id];k===void 0&&(y(R),k=f(R),i[R.id]=k,R.addEventListener("dispose",S));let M=C.program;r.updateUBOMapping(R,M);let N=e.render.frame;s[R.id]!==N&&(m(R),s[R.id]=N)}function f(R){let C=p();R.__bindingPointIndex=C;let k=t.createBuffer(),M=R.__size,N=R.usage;return t.bindBuffer(t.UNIFORM_BUFFER,k),t.bufferData(t.UNIFORM_BUFFER,M,N),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,C,k),k}function p(){for(let R=0;R<o;R++)if(a.indexOf(R)===-1)return a.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(R){let C=i[R.id],k=R.uniforms,M=R.__cache;t.bindBuffer(t.UNIFORM_BUFFER,C);for(let N=0,O=k.length;N<O;N++){let D=Array.isArray(k[N])?k[N]:[k[N]];for(let L=0,B=D.length;L<B;L++){let ee=D[L];if(_(ee,N,L,M)===!0){let te=ee.__offset,ne=Array.isArray(ee.value)?ee.value:[ee.value],H=0;for(let V=0;V<ne.length;V++){let W=ne[V],J=E(W);typeof W=="number"||typeof W=="boolean"?(ee.__data[0]=W,t.bufferSubData(t.UNIFORM_BUFFER,te+H,ee.__data)):W.isMatrix3?(ee.__data[0]=W.elements[0],ee.__data[1]=W.elements[1],ee.__data[2]=W.elements[2],ee.__data[3]=0,ee.__data[4]=W.elements[3],ee.__data[5]=W.elements[4],ee.__data[6]=W.elements[5],ee.__data[7]=0,ee.__data[8]=W.elements[6],ee.__data[9]=W.elements[7],ee.__data[10]=W.elements[8],ee.__data[11]=0):(W.toArray(ee.__data,H),H+=J.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,te,ee.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function _(R,C,k,M){let N=R.value,O=C+"_"+k;if(M[O]===void 0)return typeof N=="number"||typeof N=="boolean"?M[O]=N:M[O]=N.clone(),!0;{let D=M[O];if(typeof N=="number"||typeof N=="boolean"){if(D!==N)return M[O]=N,!0}else if(D.equals(N)===!1)return D.copy(N),!0}return!1}function y(R){let C=R.uniforms,k=0,M=16;for(let O=0,D=C.length;O<D;O++){let L=Array.isArray(C[O])?C[O]:[C[O]];for(let B=0,ee=L.length;B<ee;B++){let te=L[B],ne=Array.isArray(te.value)?te.value:[te.value];for(let H=0,V=ne.length;H<V;H++){let W=ne[H],J=E(W),X=k%M,ie=X%J.boundary,pe=X+ie;k+=ie,pe!==0&&M-pe<J.storage&&(k+=M-pe),te.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),te.__offset=k,k+=J.storage}}}let N=k%M;return N>0&&(k+=M-N),R.__size=k,R.__cache={},this}function E(R){let C={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(C.boundary=4,C.storage=4):R.isVector2?(C.boundary=8,C.storage=8):R.isVector3||R.isColor?(C.boundary=16,C.storage=12):R.isVector4?(C.boundary=16,C.storage=16):R.isMatrix3?(C.boundary=48,C.storage=48):R.isMatrix4?(C.boundary=64,C.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),C}function S(R){let C=R.target;C.removeEventListener("dispose",S);let k=a.indexOf(C.__bindingPointIndex);a.splice(k,1),t.deleteBuffer(i[C.id]),delete i[C.id],delete s[C.id]}function w(){for(let R in i)t.deleteBuffer(i[R]);a=[],i={},s={}}return{bind:l,update:c,dispose:w}}var WUe=Q(()=>{}),k3,qUe=Q(()=>{Pn(),Uc(),IX(),Dc(),Jr(),xp(),qX(),ELe(),FDe(),zDe(),HDe(),GDe(),WDe(),XDe(),QDe(),t3e(),r3e(),s3e(),o3e(),u3e(),d3e(),yUe(),SUe(),TUe(),kUe(),P0(),LUe(),DUe(),FUe(),OZ(),zUe(),HUe(),GUe(),WUe(),d_(),df(),k3=class{constructor(t={}){let{canvas:e=_Pe(),context:n=null,depth:r=!0,stencil:i=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:p=!1}=t;this.isWebGLRenderer=!0;let m;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=n.getContextAttributes().alpha}else m=s;let _=new Uint32Array(4),y=new Int32Array(4),E=null,S=null,w=[],R=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ca,this.toneMapping=jd,this.toneMappingExposure=1;let C=this,k=!1,M=0,N=0,O=null,D=-1,L=null,B=new Zr,ee=new Zr,te=null,ne=new Wn(0),H=0,V=e.width,W=e.height,J=1,X=null,ie=null,pe=new Zr(0,0,V,W),Z=new Zr(0,0,V,W),le=!1,ae=new E3,Ee=!1,ke=!1;this.transmissionResolutionScale=1;let $e=new ts,Le=new ts,We=new xe,ot=new Zr,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Wt=!1;function ir(){return O===null?J:1}let ue=n;function vn($,ge){return e.getContext($,ge)}try{let $={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${$R}`),e.addEventListener("webglcontextlost",De,!1),e.addEventListener("webglcontextrestored",ze,!1),e.addEventListener("webglcontextcreationerror",ht,!1),ue===null){let ge="webgl2";if(ue=vn(ge,$),ue===null)throw vn(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let pn,Cn,ut,Qn,Dt,Ie,Y,j,_e,Ue,Be,Oe,Et,st,yt,Ut,Qe,gt,cn,Kt,wt,Yt,an,er;function ve(){pn=new e3e(ue),pn.init(),Yt=new BUe(ue,pn),Cn=new VDe(ue,pn,t,Yt),ut=new NUe(ue,pn),Cn.reverseDepthBuffer&&p&&ut.buffers.depth.setReversed(!0),Qn=new a3e(ue),Dt=new EUe,Ie=new UUe(ue,pn,ut,Dt,Cn,Yt,Qn),Y=new qDe(C),j=new JDe(C),_e=new yLe(ue),an=new BDe(ue,_e),Ue=new n3e(ue,_e,Qn,an),Be=new c3e(ue,Ue,_e,Qn),cn=new l3e(ue,Cn,Ie),Ut=new $De(Dt),Oe=new vUe(C,Y,j,pn,Cn,an,Ut),Et=new VUe(C,Dt),st=new wUe,yt=new IUe(pn),gt=new UDe(C,Y,j,ut,Be,m,o),Qe=new PUe(C,Be,Cn),er=new $Ue(ue,Qn,Cn,ut),Kt=new jDe(ue,pn,Qn),wt=new i3e(ue,pn,Qn),Qn.programs=Oe.programs,C.capabilities=Cn,C.extensions=pn,C.properties=Dt,C.renderLists=st,C.shadowMap=Qe,C.state=ut,C.info=Qn}ve();let tt=new GZ(C,ue);this.xr=tt,this.getContext=function(){return ue},this.getContextAttributes=function(){return ue.getContextAttributes()},this.forceContextLoss=function(){let $=pn.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){let $=pn.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function($){$!==void 0&&(J=$,this.setSize(V,W,!1))},this.getSize=function($){return $.set(V,W)},this.setSize=function($,ge,Te=!0){if(tt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=$,W=ge,e.width=Math.floor($*J),e.height=Math.floor(ge*J),Te===!0&&(e.style.width=$+"px",e.style.height=ge+"px"),this.setViewport(0,0,$,ge)},this.getDrawingBufferSize=function($){return $.set(V*J,W*J).floor()},this.setDrawingBufferSize=function($,ge,Te){V=$,W=ge,J=Te,e.width=Math.floor($*Te),e.height=Math.floor(ge*Te),this.setViewport(0,0,$,ge)},this.getCurrentViewport=function($){return $.copy(B)},this.getViewport=function($){return $.copy(pe)},this.setViewport=function($,ge,Te,Me){$.isVector4?pe.set($.x,$.y,$.z,$.w):pe.set($,ge,Te,Me),ut.viewport(B.copy(pe).multiplyScalar(J).round())},this.getScissor=function($){return $.copy(Z)},this.setScissor=function($,ge,Te,Me){$.isVector4?Z.set($.x,$.y,$.z,$.w):Z.set($,ge,Te,Me),ut.scissor(ee.copy(Z).multiplyScalar(J).round())},this.getScissorTest=function(){return le},this.setScissorTest=function($){ut.setScissorTest(le=$)},this.setOpaqueSort=function($){X=$},this.setTransparentSort=function($){ie=$},this.getClearColor=function($){return $.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor.apply(gt,arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha.apply(gt,arguments)},this.clear=function($=!0,ge=!0,Te=!0){let Me=0;if($){let ce=!1;if(O!==null){let Xe=O.texture.format;ce=Xe===qA||Xe===WA||Xe===$A}if(ce){let Xe=O.texture.type,pt=Xe===Oc||Xe===fp||Xe===f0||Xe===$g||Xe===VA||Xe===GA,Ze=gt.getClearColor(),ct=gt.getClearAlpha(),Zt=Ze.r,$t=Ze.g,Tt=Ze.b;pt?(_[0]=Zt,_[1]=$t,_[2]=Tt,_[3]=ct,ue.clearBufferuiv(ue.COLOR,0,_)):(y[0]=Zt,y[1]=$t,y[2]=Tt,y[3]=ct,ue.clearBufferiv(ue.COLOR,0,y))}else Me|=ue.COLOR_BUFFER_BIT}ge&&(Me|=ue.DEPTH_BUFFER_BIT),Te&&(Me|=ue.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ue.clear(Me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",De,!1),e.removeEventListener("webglcontextrestored",ze,!1),e.removeEventListener("webglcontextcreationerror",ht,!1),gt.dispose(),st.dispose(),yt.dispose(),Dt.dispose(),Y.dispose(),j.dispose(),Be.dispose(),an.dispose(),er.dispose(),Oe.dispose(),tt.dispose(),tt.removeEventListener("sessionstart",Ve),tt.removeEventListener("sessionend",dt),zt.stop()};function De($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function ze(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;let $=Qn.autoReset,ge=Qe.enabled,Te=Qe.autoUpdate,Me=Qe.needsUpdate,ce=Qe.type;ve(),Qn.autoReset=$,Qe.enabled=ge,Qe.autoUpdate=Te,Qe.needsUpdate=Me,Qe.type=ce}function ht($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function lt($){let ge=$.target;ge.removeEventListener("dispose",lt),Rn(ge)}function Rn($){wr($),Dt.remove($)}function wr($){let ge=Dt.get($).programs;ge!==void 0&&(ge.forEach(function(Te){Oe.releaseProgram(Te)}),$.isShaderMaterial&&Oe.releaseShaderCache($))}this.renderBufferDirect=function($,ge,Te,Me,ce,Xe){ge===null&&(ge=Mt);let pt=ce.isMesh&&ce.matrixWorld.determinant()<0,Ze=Ar($,ge,Te,Me,ce);ut.setMaterial(Me,pt);let ct=Te.index,Zt=1;if(Me.wireframe===!0){if(ct=Ue.getWireframeAttribute(Te),ct===void 0)return;Zt=2}let $t=Te.drawRange,Tt=Te.attributes.position,tn=$t.start*Zt,jn=($t.start+$t.count)*Zt;Xe!==null&&(tn=Math.max(tn,Xe.start*Zt),jn=Math.min(jn,(Xe.start+Xe.count)*Zt)),ct!==null?(tn=Math.max(tn,0),jn=Math.min(jn,ct.count)):Tt!=null&&(tn=Math.max(tn,0),jn=Math.min(jn,Tt.count));let Hn=jn-tn;if(Hn<0||Hn===1/0)return;an.setup(ce,Me,Ze,Te,ct);let tr,lr=Kt;if(ct!==null&&(tr=_e.get(ct),lr=wt,lr.setIndex(tr)),ce.isMesh)Me.wireframe===!0?(ut.setLineWidth(Me.wireframeLinewidth*ir()),lr.setMode(ue.LINES)):lr.setMode(ue.TRIANGLES);else if(ce.isLine){let Xt=Me.linewidth;Xt===void 0&&(Xt=1),ut.setLineWidth(Xt*ir()),ce.isLineSegments?lr.setMode(ue.LINES):ce.isLineLoop?lr.setMode(ue.LINE_LOOP):lr.setMode(ue.LINE_STRIP)}else ce.isPoints?lr.setMode(ue.POINTS):ce.isSprite&&lr.setMode(ue.TRIANGLES);if(ce.isBatchedMesh)if(ce._multiDrawInstances!==null)lr.renderMultiDrawInstances(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount,ce._multiDrawInstances);else if(pn.get("WEBGL_multi_draw"))lr.renderMultiDraw(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount);else{let Xt=ce._multiDrawStarts,Qr=ce._multiDrawCounts,Fa=ce._multiDrawCount,Di=ct?_e.get(ct).bytesPerElement:1,zs=Dt.get(Me).currentProgram.getUniforms();for(let ss=0;ss<Fa;ss++)zs.setValue(ue,"_gl_DrawID",ss),lr.render(Xt[ss]/Di,Qr[ss])}else if(ce.isInstancedMesh)lr.renderInstances(tn,Hn,ce.count);else if(Te.isInstancedBufferGeometry){let Xt=Te._maxInstanceCount!==void 0?Te._maxInstanceCount:1/0,Qr=Math.min(Te.instanceCount,Xt);lr.renderInstances(tn,Hn,Qr)}else lr.render(tn,Hn)};function oe($,ge,Te){$.transparent===!0&&$.side===hc&&$.forceSinglePass===!1?($.side=ka,$.needsUpdate=!0,qt($,ge,Te),$.side=rf,$.needsUpdate=!0,qt($,ge,Te),$.side=hc):qt($,ge,Te)}this.compile=function($,ge,Te=null){Te===null&&(Te=$),S=yt.get(Te),S.init(ge),R.push(S),Te.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ge.layers)&&(S.pushLight(ce),ce.castShadow&&S.pushShadow(ce))}),$!==Te&&$.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ge.layers)&&(S.pushLight(ce),ce.castShadow&&S.pushShadow(ce))}),S.setupLights();let Me=new Set;return $.traverse(function(ce){if(!(ce.isMesh||ce.isPoints||ce.isLine||ce.isSprite))return;let Xe=ce.material;if(Xe)if(Array.isArray(Xe))for(let pt=0;pt<Xe.length;pt++){let Ze=Xe[pt];oe(Ze,Te,ce),Me.add(Ze)}else oe(Xe,Te,ce),Me.add(Xe)}),R.pop(),S=null,Me},this.compileAsync=function($,ge,Te=null){let Me=this.compile($,ge,Te);return new Promise(ce=>{function Xe(){if(Me.forEach(function(pt){Dt.get(pt).currentProgram.isReady()&&Me.delete(pt)}),Me.size===0){ce($);return}setTimeout(Xe,10)}pn.get("KHR_parallel_shader_compile")!==null?Xe():setTimeout(Xe,10)})};let he=null;function Ce($){he&&he($)}function Ve(){zt.stop()}function dt(){zt.start()}let zt=new WX;zt.setAnimationLoop(Ce),typeof self<"u"&&zt.setContext(self),this.setAnimationLoop=function($){he=$,tt.setAnimationLoop($),$===null?zt.stop():zt.start()},tt.addEventListener("sessionstart",Ve),tt.addEventListener("sessionend",dt),this.render=function($,ge){if(ge!==void 0&&ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),tt.enabled===!0&&tt.isPresenting===!0&&(tt.cameraAutoUpdate===!0&&tt.updateCamera(ge),ge=tt.getCamera()),$.isScene===!0&&$.onBeforeRender(C,$,ge,O),S=yt.get($,R.length),S.init(ge),R.push(S),Le.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),ae.setFromProjectionMatrix(Le),ke=this.localClippingEnabled,Ee=Ut.init(this.clippingPlanes,ke),E=st.get($,w.length),E.init(),w.push(E),tt.enabled===!0&&tt.isPresenting===!0){let Xe=C.xr.getDepthSensingMesh();Xe!==null&&Gt(Xe,ge,-1/0,C.sortObjects)}Gt($,ge,0,C.sortObjects),E.finish(),C.sortObjects===!0&&E.sort(X,ie),Wt=tt.enabled===!1||tt.isPresenting===!1||tt.hasDepthSensing()===!1,Wt&&gt.addToRenderList(E,$),this.info.render.frame++,Ee===!0&&Ut.beginShadows();let Te=S.state.shadowsArray;Qe.render(Te,$,ge),Ee===!0&&Ut.endShadows(),this.info.autoReset===!0&&this.info.reset();let Me=E.opaque,ce=E.transmissive;if(S.setupLights(),ge.isArrayCamera){let Xe=ge.cameras;if(ce.length>0)for(let pt=0,Ze=Xe.length;pt<Ze;pt++){let ct=Xe[pt];Ft(Me,ce,$,ct)}Wt&&gt.render($);for(let pt=0,Ze=Xe.length;pt<Ze;pt++){let ct=Xe[pt];At(E,$,ct,ct.viewport)}}else ce.length>0&&Ft(Me,ce,$,ge),Wt&&gt.render($),At(E,$,ge);O!==null&&N===0&&(Ie.updateMultisampleRenderTarget(O),Ie.updateRenderTargetMipmap(O)),$.isScene===!0&&$.onAfterRender(C,$,ge),an.resetDefaultState(),D=-1,L=null,R.pop(),R.length>0?(S=R[R.length-1],Ee===!0&&Ut.setGlobalState(C.clippingPlanes,S.state.camera)):S=null,w.pop(),w.length>0?E=w[w.length-1]:E=null};function Gt($,ge,Te,Me){if($.visible===!1)return;if($.layers.test(ge.layers)){if($.isGroup)Te=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(ge);else if($.isLight)S.pushLight($),$.castShadow&&S.pushShadow($);else if($.isSprite){if(!$.frustumCulled||ae.intersectsSprite($)){Me&&ot.setFromMatrixPosition($.matrixWorld).applyMatrix4(Le);let Xe=Be.update($),pt=$.material;pt.visible&&E.push($,Xe,pt,Te,ot.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||ae.intersectsObject($))){let Xe=Be.update($),pt=$.material;if(Me&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),ot.copy($.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),ot.copy(Xe.boundingSphere.center)),ot.applyMatrix4($.matrixWorld).applyMatrix4(Le)),Array.isArray(pt)){let Ze=Xe.groups;for(let ct=0,Zt=Ze.length;ct<Zt;ct++){let $t=Ze[ct],Tt=pt[$t.materialIndex];Tt&&Tt.visible&&E.push($,Xe,Tt,Te,ot.z,$t)}}else pt.visible&&E.push($,Xe,pt,Te,ot.z,null)}}let ce=$.children;for(let Xe=0,pt=ce.length;Xe<pt;Xe++)Gt(ce[Xe],ge,Te,Me)}function At($,ge,Te,Me){let ce=$.opaque,Xe=$.transmissive,pt=$.transparent;S.setupLightsView(Te),Ee===!0&&Ut.setGlobalState(C.clippingPlanes,Te),Me&&ut.viewport(B.copy(Me)),ce.length>0&&mt(ce,ge,Te),Xe.length>0&&mt(Xe,ge,Te),pt.length>0&&mt(pt,ge,Te),ut.buffers.depth.setTest(!0),ut.buffers.depth.setMask(!0),ut.buffers.color.setMask(!0),ut.setPolygonOffset(!1)}function Ft($,ge,Te,Me){if((Te.isScene===!0?Te.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Me.id]===void 0&&(S.state.transmissionRenderTarget[Me.id]=new Ol(1,1,{generateMipmaps:!0,type:pn.has("EXT_color_buffer_half_float")||pn.has("EXT_color_buffer_float")?u_:Oc,minFilter:Uh,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:nr.workingColorSpace}));let ce=S.state.transmissionRenderTarget[Me.id],Xe=Me.viewport||B;ce.setSize(Xe.z*C.transmissionResolutionScale,Xe.w*C.transmissionResolutionScale);let pt=C.getRenderTarget();C.setRenderTarget(ce),C.getClearColor(ne),H=C.getClearAlpha(),H<1&&C.setClearColor(16777215,.5),C.clear(),Wt&&gt.render(Te);let Ze=C.toneMapping;C.toneMapping=jd;let ct=Me.viewport;if(Me.viewport!==void 0&&(Me.viewport=void 0),S.setupLightsView(Me),Ee===!0&&Ut.setGlobalState(C.clippingPlanes,Me),mt($,Te,Me),Ie.updateMultisampleRenderTarget(ce),Ie.updateRenderTargetMipmap(ce),pn.has("WEBGL_multisampled_render_to_texture")===!1){let Zt=!1;for(let $t=0,Tt=ge.length;$t<Tt;$t++){let tn=ge[$t],jn=tn.object,Hn=tn.geometry,tr=tn.material,lr=tn.group;if(tr.side===hc&&jn.layers.test(Me.layers)){let Xt=tr.side;tr.side=ka,tr.needsUpdate=!0,Bt(jn,Te,Me,Hn,tr,lr),tr.side=Xt,tr.needsUpdate=!0,Zt=!0}}Zt===!0&&(Ie.updateMultisampleRenderTarget(ce),Ie.updateRenderTargetMipmap(ce))}C.setRenderTarget(pt),C.setClearColor(ne,H),ct!==void 0&&(Me.viewport=ct),C.toneMapping=Ze}function mt($,ge,Te){let Me=ge.isScene===!0?ge.overrideMaterial:null;for(let ce=0,Xe=$.length;ce<Xe;ce++){let pt=$[ce],Ze=pt.object,ct=pt.geometry,Zt=Me===null?pt.material:Me,$t=pt.group;Ze.layers.test(Te.layers)&&Bt(Ze,ge,Te,ct,Zt,$t)}}function Bt($,ge,Te,Me,ce,Xe){$.onBeforeRender(C,ge,Te,Me,ce,Xe),$.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ce.onBeforeRender(C,ge,Te,Me,$,Xe),ce.transparent===!0&&ce.side===hc&&ce.forceSinglePass===!1?(ce.side=ka,ce.needsUpdate=!0,C.renderBufferDirect(Te,ge,Me,ce,$,Xe),ce.side=rf,ce.needsUpdate=!0,C.renderBufferDirect(Te,ge,Me,ce,$,Xe),ce.side=hc):C.renderBufferDirect(Te,ge,Me,ce,$,Xe),$.onAfterRender(C,ge,Te,Me,ce,Xe)}function qt($,ge,Te){ge.isScene!==!0&&(ge=Mt);let Me=Dt.get($),ce=S.state.lights,Xe=S.state.shadowsArray,pt=ce.state.version,Ze=Oe.getParameters($,ce.state,Xe,ge,Te),ct=Oe.getProgramCacheKey(Ze),Zt=Me.programs;Me.environment=$.isMeshStandardMaterial?ge.environment:null,Me.fog=ge.fog,Me.envMap=($.isMeshStandardMaterial?j:Y).get($.envMap||Me.environment),Me.envMapRotation=Me.environment!==null&&$.envMap===null?ge.environmentRotation:$.envMapRotation,Zt===void 0&&($.addEventListener("dispose",lt),Zt=new Map,Me.programs=Zt);let $t=Zt.get(ct);if($t!==void 0){if(Me.currentProgram===$t&&Me.lightsStateVersion===pt)return Tr($,Ze),$t}else Ze.uniforms=Oe.getUniforms($),$.onBeforeCompile(Ze,C),$t=Oe.acquireProgram(Ze,ct),Zt.set(ct,$t),Me.uniforms=Ze.uniforms;let Tt=Me.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(Tt.clippingPlanes=Ut.uniform),Tr($,Ze),Me.needsLights=xr($),Me.lightsStateVersion=pt,Me.needsLights&&(Tt.ambientLightColor.value=ce.state.ambient,Tt.lightProbe.value=ce.state.probe,Tt.directionalLights.value=ce.state.directional,Tt.directionalLightShadows.value=ce.state.directionalShadow,Tt.spotLights.value=ce.state.spot,Tt.spotLightShadows.value=ce.state.spotShadow,Tt.rectAreaLights.value=ce.state.rectArea,Tt.ltc_1.value=ce.state.rectAreaLTC1,Tt.ltc_2.value=ce.state.rectAreaLTC2,Tt.pointLights.value=ce.state.point,Tt.pointLightShadows.value=ce.state.pointShadow,Tt.hemisphereLights.value=ce.state.hemi,Tt.directionalShadowMap.value=ce.state.directionalShadowMap,Tt.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,Tt.spotShadowMap.value=ce.state.spotShadowMap,Tt.spotLightMatrix.value=ce.state.spotLightMatrix,Tt.spotLightMap.value=ce.state.spotLightMap,Tt.pointShadowMap.value=ce.state.pointShadowMap,Tt.pointShadowMatrix.value=ce.state.pointShadowMatrix),Me.currentProgram=$t,Me.uniformsList=null,$t}function On($){if($.uniformsList===null){let ge=$.currentProgram.getUniforms();$.uniformsList=Bb.seqWithValue(ge.seq,$.uniforms)}return $.uniformsList}function Tr($,ge){let Te=Dt.get($);Te.outputColorSpace=ge.outputColorSpace,Te.batching=ge.batching,Te.batchingColor=ge.batchingColor,Te.instancing=ge.instancing,Te.instancingColor=ge.instancingColor,Te.instancingMorph=ge.instancingMorph,Te.skinning=ge.skinning,Te.morphTargets=ge.morphTargets,Te.morphNormals=ge.morphNormals,Te.morphColors=ge.morphColors,Te.morphTargetsCount=ge.morphTargetsCount,Te.numClippingPlanes=ge.numClippingPlanes,Te.numIntersection=ge.numClipIntersection,Te.vertexAlphas=ge.vertexAlphas,Te.vertexTangents=ge.vertexTangents,Te.toneMapping=ge.toneMapping}function Ar($,ge,Te,Me,ce){ge.isScene!==!0&&(ge=Mt),Ie.resetTextureUnits();let Xe=ge.fog,pt=Me.isMeshStandardMaterial?ge.environment:null,Ze=O===null?C.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:qg,ct=(Me.isMeshStandardMaterial?j:Y).get(Me.envMap||pt),Zt=Me.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,$t=!!Te.attributes.tangent&&(!!Me.normalMap||Me.anisotropy>0),Tt=!!Te.morphAttributes.position,tn=!!Te.morphAttributes.normal,jn=!!Te.morphAttributes.color,Hn=jd;Me.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(Hn=C.toneMapping);let tr=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,lr=tr!==void 0?tr.length:0,Xt=Dt.get(Me),Qr=S.state.lights;if(Ee===!0&&(ke===!0||$!==L)){let qr=$===L&&Me.id===D;Ut.setState(Me,$,qr)}let Fa=!1;Me.version===Xt.__version?(Xt.needsLights&&Xt.lightsStateVersion!==Qr.state.version||Xt.outputColorSpace!==Ze||ce.isBatchedMesh&&Xt.batching===!1||!ce.isBatchedMesh&&Xt.batching===!0||ce.isBatchedMesh&&Xt.batchingColor===!0&&ce.colorTexture===null||ce.isBatchedMesh&&Xt.batchingColor===!1&&ce.colorTexture!==null||ce.isInstancedMesh&&Xt.instancing===!1||!ce.isInstancedMesh&&Xt.instancing===!0||ce.isSkinnedMesh&&Xt.skinning===!1||!ce.isSkinnedMesh&&Xt.skinning===!0||ce.isInstancedMesh&&Xt.instancingColor===!0&&ce.instanceColor===null||ce.isInstancedMesh&&Xt.instancingColor===!1&&ce.instanceColor!==null||ce.isInstancedMesh&&Xt.instancingMorph===!0&&ce.morphTexture===null||ce.isInstancedMesh&&Xt.instancingMorph===!1&&ce.morphTexture!==null||Xt.envMap!==ct||Me.fog===!0&&Xt.fog!==Xe||Xt.numClippingPlanes!==void 0&&(Xt.numClippingPlanes!==Ut.numPlanes||Xt.numIntersection!==Ut.numIntersection)||Xt.vertexAlphas!==Zt||Xt.vertexTangents!==$t||Xt.morphTargets!==Tt||Xt.morphNormals!==tn||Xt.morphColors!==jn||Xt.toneMapping!==Hn||Xt.morphTargetsCount!==lr)&&(Fa=!0):(Fa=!0,Xt.__version=Me.version);let Di=Xt.currentProgram;Fa===!0&&(Di=qt(Me,ge,ce));let zs=!1,ss=!1,Bc=!1,ur=Di.getUniforms(),as=Xt.uniforms;if(ut.useProgram(Di.program)&&(zs=!0,ss=!0,Bc=!0),Me.id!==D&&(D=Me.id,ss=!0),zs||L!==$){ut.buffers.depth.getReversed()?($e.copy($.projectionMatrix),yPe($e),EPe($e),ur.setValue(ue,"projectionMatrix",$e)):ur.setValue(ue,"projectionMatrix",$.projectionMatrix),ur.setValue(ue,"viewMatrix",$.matrixWorldInverse);let qr=ur.map.cameraPosition;qr!==void 0&&qr.setValue(ue,We.setFromMatrixPosition($.matrixWorld)),Cn.logarithmicDepthBuffer&&ur.setValue(ue,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial)&&ur.setValue(ue,"isOrthographic",$.isOrthographicCamera===!0),L!==$&&(L=$,ss=!0,Bc=!0)}if(ce.isSkinnedMesh){ur.setOptional(ue,ce,"bindMatrix"),ur.setOptional(ue,ce,"bindMatrixInverse");let qr=ce.skeleton;qr&&(qr.boneTexture===null&&qr.computeBoneTexture(),ur.setValue(ue,"boneTexture",qr.boneTexture,Ie))}ce.isBatchedMesh&&(ur.setOptional(ue,ce,"batchingTexture"),ur.setValue(ue,"batchingTexture",ce._matricesTexture,Ie),ur.setOptional(ue,ce,"batchingIdTexture"),ur.setValue(ue,"batchingIdTexture",ce._indirectTexture,Ie),ur.setOptional(ue,ce,"batchingColorTexture"),ce._colorsTexture!==null&&ur.setValue(ue,"batchingColorTexture",ce._colorsTexture,Ie));let Ui=Te.morphAttributes;if((Ui.position!==void 0||Ui.normal!==void 0||Ui.color!==void 0)&&cn.update(ce,Te,Di),(ss||Xt.receiveShadow!==ce.receiveShadow)&&(Xt.receiveShadow=ce.receiveShadow,ur.setValue(ue,"receiveShadow",ce.receiveShadow)),Me.isMeshGouraudMaterial&&Me.envMap!==null&&(as.envMap.value=ct,as.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),Me.isMeshStandardMaterial&&Me.envMap===null&&ge.environment!==null&&(as.envMapIntensity.value=ge.environmentIntensity),ss&&(ur.setValue(ue,"toneMappingExposure",C.toneMappingExposure),Xt.needsLights&&Ir(as,Bc),Xe&&Me.fog===!0&&Et.refreshFogUniforms(as,Xe),Et.refreshMaterialUniforms(as,Me,J,W,S.state.transmissionRenderTarget[$.id]),Bb.upload(ue,On(Xt),as,Ie)),Me.isShaderMaterial&&Me.uniformsNeedUpdate===!0&&(Bb.upload(ue,On(Xt),as,Ie),Me.uniformsNeedUpdate=!1),Me.isSpriteMaterial&&ur.setValue(ue,"center",ce.center),ur.setValue(ue,"modelViewMatrix",ce.modelViewMatrix),ur.setValue(ue,"normalMatrix",ce.normalMatrix),ur.setValue(ue,"modelMatrix",ce.matrixWorld),Me.isShaderMaterial||Me.isRawShaderMaterial){let qr=Me.uniformsGroups;for(let js=0,Fl=qr.length;js<Fl;js++){let bn=qr[js];er.update(bn,Di),er.bind(bn,Di)}}return Di}function Ir($,ge){$.ambientLightColor.needsUpdate=ge,$.lightProbe.needsUpdate=ge,$.directionalLights.needsUpdate=ge,$.directionalLightShadows.needsUpdate=ge,$.pointLights.needsUpdate=ge,$.pointLightShadows.needsUpdate=ge,$.spotLights.needsUpdate=ge,$.spotLightShadows.needsUpdate=ge,$.rectAreaLights.needsUpdate=ge,$.hemisphereLights.needsUpdate=ge}function xr($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function($,ge,Te){Dt.get($.texture).__webglTexture=ge,Dt.get($.depthTexture).__webglTexture=Te;let Me=Dt.get($);Me.__hasExternalTextures=!0,Me.__autoAllocateDepthBuffer=Te===void 0,Me.__autoAllocateDepthBuffer||pn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Me.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function($,ge){let Te=Dt.get($);Te.__webglFramebuffer=ge,Te.__useDefaultFramebuffer=ge===void 0};let Wr=ue.createFramebuffer();this.setRenderTarget=function($,ge=0,Te=0){O=$,M=ge,N=Te;let Me=!0,ce=null,Xe=!1,pt=!1;if($){let Ze=Dt.get($);if(Ze.__useDefaultFramebuffer!==void 0)ut.bindFramebuffer(ue.FRAMEBUFFER,null),Me=!1;else if(Ze.__webglFramebuffer===void 0)Ie.setupRenderTarget($);else if(Ze.__hasExternalTextures)Ie.rebindTextures($,Dt.get($.texture).__webglTexture,Dt.get($.depthTexture).__webglTexture);else if($.depthBuffer){let $t=$.depthTexture;if(Ze.__boundDepthTexture!==$t){if($t!==null&&Dt.has($t)&&($.width!==$t.image.width||$.height!==$t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ie.setupDepthRenderbuffer($)}}let ct=$.texture;(ct.isData3DTexture||ct.isDataArrayTexture||ct.isCompressedArrayTexture)&&(pt=!0);let Zt=Dt.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Zt[ge])?ce=Zt[ge][Te]:ce=Zt[ge],Xe=!0):$.samples>0&&Ie.useMultisampledRTT($)===!1?ce=Dt.get($).__webglMultisampledFramebuffer:Array.isArray(Zt)?ce=Zt[Te]:ce=Zt,B.copy($.viewport),ee.copy($.scissor),te=$.scissorTest}else B.copy(pe).multiplyScalar(J).floor(),ee.copy(Z).multiplyScalar(J).floor(),te=le;if(Te!==0&&(ce=Wr),ut.bindFramebuffer(ue.FRAMEBUFFER,ce)&&Me&&ut.drawBuffers($,ce),ut.viewport(B),ut.scissor(ee),ut.setScissorTest(te),Xe){let Ze=Dt.get($.texture);ue.framebufferTexture2D(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Ze.__webglTexture,Te)}else if(pt){let Ze=Dt.get($.texture),ct=ge;ue.framebufferTextureLayer(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,Ze.__webglTexture,Te,ct)}else if($!==null&&Te!==0){let Ze=Dt.get($.texture);ue.framebufferTexture2D(ue.FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_2D,Ze.__webglTexture,Te)}D=-1},this.readRenderTargetPixels=function($,ge,Te,Me,ce,Xe,pt){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ze=Dt.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&pt!==void 0&&(Ze=Ze[pt]),Ze){ut.bindFramebuffer(ue.FRAMEBUFFER,Ze);try{let ct=$.texture,Zt=ct.format,$t=ct.type;if(!Cn.textureFormatReadable(Zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Cn.textureTypeReadable($t)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=$.width-Me&&Te>=0&&Te<=$.height-ce&&ue.readPixels(ge,Te,Me,ce,Yt.convert(Zt),Yt.convert($t),Xe)}finally{let ct=O!==null?Dt.get(O).__webglFramebuffer:null;ut.bindFramebuffer(ue.FRAMEBUFFER,ct)}}},this.readRenderTargetPixelsAsync=async function($,ge,Te,Me,ce,Xe,pt){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ze=Dt.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&pt!==void 0&&(Ze=Ze[pt]),Ze){let ct=$.texture,Zt=ct.format,$t=ct.type;if(!Cn.textureFormatReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Cn.textureTypeReadable($t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ge>=0&&ge<=$.width-Me&&Te>=0&&Te<=$.height-ce){ut.bindFramebuffer(ue.FRAMEBUFFER,Ze);let Tt=ue.createBuffer();ue.bindBuffer(ue.PIXEL_PACK_BUFFER,Tt),ue.bufferData(ue.PIXEL_PACK_BUFFER,Xe.byteLength,ue.STREAM_READ),ue.readPixels(ge,Te,Me,ce,Yt.convert(Zt),Yt.convert($t),0);let tn=O!==null?Dt.get(O).__webglFramebuffer:null;ut.bindFramebuffer(ue.FRAMEBUFFER,tn);let jn=ue.fenceSync(ue.SYNC_GPU_COMMANDS_COMPLETE,0);return ue.flush(),await vPe(ue,jn,4),ue.bindBuffer(ue.PIXEL_PACK_BUFFER,Tt),ue.getBufferSubData(ue.PIXEL_PACK_BUFFER,0,Xe),ue.deleteBuffer(Tt),ue.deleteSync(jn),Xe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function($,ge=null,Te=0){$.isTexture!==!0&&(ny("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ge=arguments[0]||null,$=arguments[1]);let Me=Math.pow(2,-Te),ce=Math.floor($.image.width*Me),Xe=Math.floor($.image.height*Me),pt=ge!==null?ge.x:0,Ze=ge!==null?ge.y:0;Ie.setTexture2D($,0),ue.copyTexSubImage2D(ue.TEXTURE_2D,Te,0,0,pt,Ze,ce,Xe),ut.unbindTexture()};let yo=ue.createFramebuffer(),Ko=ue.createFramebuffer();this.copyTextureToTexture=function($,ge,Te=null,Me=null,ce=0,Xe=null){$.isTexture!==!0&&(ny("WebGLRenderer: copyTextureToTexture function signature has changed."),Me=arguments[0]||null,$=arguments[1],ge=arguments[2],Xe=arguments[3]||0,Te=null),Xe===null&&(ce!==0?(ny("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Xe=ce,ce=0):Xe=0);let pt,Ze,ct,Zt,$t,Tt,tn,jn,Hn,tr=$.isCompressedTexture?$.mipmaps[Xe]:$.image;if(Te!==null)pt=Te.max.x-Te.min.x,Ze=Te.max.y-Te.min.y,ct=Te.isBox3?Te.max.z-Te.min.z:1,Zt=Te.min.x,$t=Te.min.y,Tt=Te.isBox3?Te.min.z:0;else{let Ui=Math.pow(2,-ce);pt=Math.floor(tr.width*Ui),Ze=Math.floor(tr.height*Ui),$.isDataArrayTexture?ct=tr.depth:$.isData3DTexture?ct=Math.floor(tr.depth*Ui):ct=1,Zt=0,$t=0,Tt=0}Me!==null?(tn=Me.x,jn=Me.y,Hn=Me.z):(tn=0,jn=0,Hn=0);let lr=Yt.convert(ge.format),Xt=Yt.convert(ge.type),Qr;ge.isData3DTexture?(Ie.setTexture3D(ge,0),Qr=ue.TEXTURE_3D):ge.isDataArrayTexture||ge.isCompressedArrayTexture?(Ie.setTexture2DArray(ge,0),Qr=ue.TEXTURE_2D_ARRAY):(Ie.setTexture2D(ge,0),Qr=ue.TEXTURE_2D),ue.pixelStorei(ue.UNPACK_FLIP_Y_WEBGL,ge.flipY),ue.pixelStorei(ue.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),ue.pixelStorei(ue.UNPACK_ALIGNMENT,ge.unpackAlignment);let Fa=ue.getParameter(ue.UNPACK_ROW_LENGTH),Di=ue.getParameter(ue.UNPACK_IMAGE_HEIGHT),zs=ue.getParameter(ue.UNPACK_SKIP_PIXELS),ss=ue.getParameter(ue.UNPACK_SKIP_ROWS),Bc=ue.getParameter(ue.UNPACK_SKIP_IMAGES);ue.pixelStorei(ue.UNPACK_ROW_LENGTH,tr.width),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,tr.height),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,Zt),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,$t),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,Tt);let ur=$.isDataArrayTexture||$.isData3DTexture,as=ge.isDataArrayTexture||ge.isData3DTexture;if($.isDepthTexture){let Ui=Dt.get($),qr=Dt.get(ge),js=Dt.get(Ui.__renderTarget),Fl=Dt.get(qr.__renderTarget);ut.bindFramebuffer(ue.READ_FRAMEBUFFER,js.__webglFramebuffer),ut.bindFramebuffer(ue.DRAW_FRAMEBUFFER,Fl.__webglFramebuffer);for(let bn=0;bn<ct;bn++)ur&&(ue.framebufferTextureLayer(ue.READ_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,Dt.get($).__webglTexture,ce,Tt+bn),ue.framebufferTextureLayer(ue.DRAW_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,Dt.get(ge).__webglTexture,Xe,Hn+bn)),ue.blitFramebuffer(Zt,$t,pt,Ze,tn,jn,pt,Ze,ue.DEPTH_BUFFER_BIT,ue.NEAREST);ut.bindFramebuffer(ue.READ_FRAMEBUFFER,null),ut.bindFramebuffer(ue.DRAW_FRAMEBUFFER,null)}else if(ce!==0||$.isRenderTargetTexture||Dt.has($)){let Ui=Dt.get($),qr=Dt.get(ge);ut.bindFramebuffer(ue.READ_FRAMEBUFFER,yo),ut.bindFramebuffer(ue.DRAW_FRAMEBUFFER,Ko);for(let js=0;js<ct;js++)ur?ue.framebufferTextureLayer(ue.READ_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,Ui.__webglTexture,ce,Tt+js):ue.framebufferTexture2D(ue.READ_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_2D,Ui.__webglTexture,ce),as?ue.framebufferTextureLayer(ue.DRAW_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,qr.__webglTexture,Xe,Hn+js):ue.framebufferTexture2D(ue.DRAW_FRAMEBUFFER,ue.COLOR_ATTACHMENT0,ue.TEXTURE_2D,qr.__webglTexture,Xe),ce!==0?ue.blitFramebuffer(Zt,$t,pt,Ze,tn,jn,pt,Ze,ue.COLOR_BUFFER_BIT,ue.NEAREST):as?ue.copyTexSubImage3D(Qr,Xe,tn,jn,Hn+js,Zt,$t,pt,Ze):ue.copyTexSubImage2D(Qr,Xe,tn,jn,Zt,$t,pt,Ze);ut.bindFramebuffer(ue.READ_FRAMEBUFFER,null),ut.bindFramebuffer(ue.DRAW_FRAMEBUFFER,null)}else as?$.isDataTexture||$.isData3DTexture?ue.texSubImage3D(Qr,Xe,tn,jn,Hn,pt,Ze,ct,lr,Xt,tr.data):ge.isCompressedArrayTexture?ue.compressedTexSubImage3D(Qr,Xe,tn,jn,Hn,pt,Ze,ct,lr,tr.data):ue.texSubImage3D(Qr,Xe,tn,jn,Hn,pt,Ze,ct,lr,Xt,tr):$.isDataTexture?ue.texSubImage2D(ue.TEXTURE_2D,Xe,tn,jn,pt,Ze,lr,Xt,tr.data):$.isCompressedTexture?ue.compressedTexSubImage2D(ue.TEXTURE_2D,Xe,tn,jn,tr.width,tr.height,lr,tr.data):ue.texSubImage2D(ue.TEXTURE_2D,Xe,tn,jn,pt,Ze,lr,Xt,tr);ue.pixelStorei(ue.UNPACK_ROW_LENGTH,Fa),ue.pixelStorei(ue.UNPACK_IMAGE_HEIGHT,Di),ue.pixelStorei(ue.UNPACK_SKIP_PIXELS,zs),ue.pixelStorei(ue.UNPACK_SKIP_ROWS,ss),ue.pixelStorei(ue.UNPACK_SKIP_IMAGES,Bc),Xe===0&&ge.generateMipmaps&&ue.generateMipmap(Qr),ut.unbindTexture()},this.copyTextureToTexture3D=function($,ge,Te=null,Me=null,ce=0){return $.isTexture!==!0&&(ny("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Te=arguments[0]||null,Me=arguments[1]||null,$=arguments[2],ge=arguments[3],ce=arguments[4]||0),ny('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture($,ge,Te,Me,ce)},this.initRenderTarget=function($){Dt.get($).__webglFramebuffer===void 0&&Ie.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?Ie.setTextureCube($,0):$.isData3DTexture?Ie.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?Ie.setTexture2DArray($,0):Ie.setTexture2D($,0),ut.unbindTexture()},this.resetState=function(){M=0,N=0,O=null,ut.reset(),an.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _c}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorspace=nr._getDrawingBufferColorSpace(t),e.unpackColorSpace=nr._getUnpackColorSpace()}}}),vo=Q(()=>{vLe(),qUe(),x3(),T3(),f_()}),Ji,Er,xw=Q(()=>{vo(),wu(),Ji=null,xa!=null&&(console.log("%c WebGL Renderer created ","background: #222; color: #bada55"),Ji=new k3({canvas:xa,antialias:!0,alpha:!1,stencil:!1}),Ji.autoClear=!1,Ji.setPixelRatio(Nh),Ji.outputColorSpace=Ca,Ji.info.autoReset=!1,Ji.setClearColor(0,1),Ji.debug.checkShaderErrors=zA,Ji.localClippingEnabled=!1),Er=Ji}),WZ,XUe=Q(()=>{vo(),bp(),wp(),WZ=class extends w3{constructor(t=-1,e=1,n=1,r=-1,i=.1,s=2e3,a,o){super(t,e,n,r,i,s),this.position.copy(a),this.zoom=o,this.resizeEvent=this.resize.bind(this),Hi.on(Vi.RESIZE,this.resizeEvent)}resize(t,e){this.left=-t/2,this.right=t/2,this.bottom=-e/2,this.top=e/2,this.updateProjectionMatrix()}}}),s7,Uo,tI=Q(()=>{XUe(),bp(),wp(),jA(),s7=class{constructor(){var t=.001,e=Ot.currentConfig.camera.value.position.value,n=Ot.currentConfig.camera.value.zoom.value,r=Ot.currentConfig.camera.value.far.value;this.cameraPool={main:new WZ(1,1,1,1,t,r,e,n)},this.camera=null,this._current=this.cameraPool.main,this.current.zoom=Ot.currentConfig.camera.value.zoom.value,this.addEvents()}set current(t){this._current=t}get current(){return this._current}update(){Ot.currentConfig.camera.value.position.value.x=this.current.position.x,Ot.currentConfig.camera.value.position.value.y=this.current.position.y,Ot.currentConfig.camera.value.position.value.z=this.current.position.z,this.current.position.z=Ot.currentConfig.camera.value.position.value.z,this.current.zoom=Ot.currentConfig.camera.value.zoom.value,this.current.updateProjectionMatrix(),Ot.currentConfig.camera.value.far.value=this.current.far}addEvents(){Hi.on(Vi.PRE_UPDATE,this.update.bind(this))}},Uo=new s7}),a7,UL,KUe=Q(()=>{a7=function(t,e,n){return t===e?n<=t?0:1:Math.max(0,Math.min(1,(n-t)/(e-t)))},UL=a7}),vO,qS,O3,qZ=Q(()=>{vo(),vO=new Gd,qS=new xe,O3=class extends VX{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";let t=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],e=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new la(t,3)),this.setAttribute("uv",new la(e,2))}applyMatrix4(t){let e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return e!==void 0&&(e.applyMatrix4(t),n.applyMatrix4(t),e.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));let n=new LM(e,6,1);return this.setAttribute("instanceStart",new ag(n,3,0)),this.setAttribute("instanceEnd",new ag(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));let n=new LM(e,6,1);return this.setAttribute("instanceColorStart",new ag(n,3,0)),this.setAttribute("instanceColorEnd",new ag(n,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new NX(t.geometry)),this}fromLineSegments(t){let e=t.geometry;return this.setPositions(e.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gd);let t=this.attributes.instanceStart,e=this.attributes.instanceEnd;t!==void 0&&e!==void 0&&(this.boundingBox.setFromBufferAttribute(t),vO.setFromBufferAttribute(e),this.boundingBox.union(vO))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new L0),this.boundingBox===null&&this.computeBoundingBox();let t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(t!==void 0&&e!==void 0){let n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,s=t.count;i<s;i++)qS.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(qS)),qS.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(qS));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}}),nI,P3=Q(()=>{vo(),ft.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new or(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Ra.line={uniforms:OM.merge([ft.common,ft.fog,ft.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},nI=class extends Wo{constructor(t){super({type:"LineMaterial",uniforms:OM.clone(Ra.line.uniforms),vertexShader:Ra.line.vertexShader,fragmentShader:Ra.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(t)}get color(){return this.uniforms.diffuse.value}set color(t){this.uniforms.diffuse.value=t}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(t){this.uniforms.linewidth&&(this.uniforms.linewidth.value=t)}get dashed(){return"USE_DASH"in this.defines}set dashed(t){t===!0!==this.dashed&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(t){this.uniforms.dashScale.value=t}get dashSize(){return this.uniforms.dashSize.value}set dashSize(t){this.uniforms.dashSize.value=t}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(t){this.uniforms.dashOffset.value=t}get gapSize(){return this.uniforms.gapSize.value}set gapSize(t){this.uniforms.gapSize.value=t}get opacity(){return this.uniforms.opacity.value}set opacity(t){this.uniforms&&(this.uniforms.opacity.value=t)}get resolution(){return this.uniforms.resolution.value}set resolution(t){this.uniforms.resolution.value.copy(t)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(t){this.defines&&(t===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),t===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}});function o7(t,e,n){return iu.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),iu.multiplyScalar(1/iu.w),iu.x=xg/n.width,iu.y=xg/n.height,iu.applyMatrix4(t.projectionMatrixInverse),iu.multiplyScalar(1/iu.w),Math.abs(Math.max(iu.x,iu.y))}function YUe(t,e){let n=t.matrixWorld,r=t.geometry,i=r.attributes.instanceStart,s=r.attributes.instanceEnd,a=Math.min(r.instanceCount,i.count);for(let o=0,l=a;o<l;o++){vs.start.fromBufferAttribute(i,o),vs.end.fromBufferAttribute(s,o),vs.applyMatrix4(n);let c=new xe,f=new xe;pc.distanceSqToSegment(vs.start,vs.end,f,c),f.distanceTo(c)<xg*.5&&e.push({point:f,pointOnLine:c,distance:pc.origin.distanceTo(f),object:t,face:null,faceIndex:o,uv:null,uv1:null})}}function ZUe(t,e,n){let r=e.projectionMatrix,i=t.material.resolution,s=t.matrixWorld,a=t.geometry,o=a.attributes.instanceStart,l=a.attributes.instanceEnd,c=Math.min(a.instanceCount,o.count),f=-e.near;pc.at(1,ru),ru.w=1,ru.applyMatrix4(e.matrixWorldInverse),ru.applyMatrix4(r),ru.multiplyScalar(1/ru.w),ru.x*=i.x/2,ru.y*=i.y/2,ru.z=0,DC.copy(ru),UC.multiplyMatrices(e.matrixWorldInverse,s);for(let p=0,m=c;p<m;p++){if(gs.fromBufferAttribute(o,p),_s.fromBufferAttribute(l,p),gs.w=1,_s.w=1,gs.applyMatrix4(UC),_s.applyMatrix4(UC),gs.z>f&&_s.z>f)continue;if(gs.z>f){let w=gs.z-_s.z,R=(gs.z-f)/w;gs.lerp(_s,R)}else if(_s.z>f){let w=_s.z-gs.z,R=(_s.z-f)/w;_s.lerp(gs,R)}gs.applyMatrix4(r),_s.applyMatrix4(r),gs.multiplyScalar(1/gs.w),_s.multiplyScalar(1/_s.w),gs.x*=i.x/2,gs.y*=i.y/2,_s.x*=i.x/2,_s.y*=i.y/2,vs.start.copy(gs),vs.start.z=0,vs.end.copy(_s),vs.end.z=0;let _=vs.closestPointToPointParameter(DC,!0);vs.at(_,FL);let y=iX.lerp(gs.z,_s.z,_),E=y>=-1&&y<=1,S=DC.distanceTo(FL)<xg*.5;if(E&&S){vs.start.fromBufferAttribute(o,p),vs.end.fromBufferAttribute(l,p),vs.start.applyMatrix4(s),vs.end.applyMatrix4(s);let w=new xe,R=new xe;pc.distanceSqToSegment(vs.start,vs.end,R,w),n.push({point:R,pointOnLine:w,distance:pc.origin.distanceTo(R),object:t,face:null,faceIndex:p,uv:null,uv1:null})}}}var Zx,yO,EO,gs,_s,ru,DC,UC,vs,FL,XS,KS,iu,pc,xg,XZ,JUe=Q(()=>{vo(),qZ(),P3(),Zx=new Zr,yO=new xe,EO=new xe,gs=new Zr,_s=new Zr,ru=new Zr,DC=new xe,UC=new ts,vs=new $X,FL=new xe,XS=new Gd,KS=new L0,iu=new Zr,XZ=class extends Ns{constructor(t=new O3,e=new nI({color:Math.random()*16777215})){super(t,e),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){let t=this.geometry,e=t.attributes.instanceStart,n=t.attributes.instanceEnd,r=new Float32Array(2*e.count);for(let s=0,a=0,o=e.count;s<o;s++,a+=2)yO.fromBufferAttribute(e,s),EO.fromBufferAttribute(n,s),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+yO.distanceTo(EO);let i=new LM(r,2,1);return t.setAttribute("instanceDistanceStart",new ag(i,1,0)),t.setAttribute("instanceDistanceEnd",new ag(i,1,1)),this}raycast(t,e){let n=this.material.worldUnits,r=t.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');let i=t.params.Line2!==void 0&&t.params.Line2.threshold||0;pc=t.ray;let s=this.matrixWorld,a=this.geometry,o=this.material;xg=o.linewidth+i,a.boundingSphere===null&&a.computeBoundingSphere(),KS.copy(a.boundingSphere).applyMatrix4(s);let l;if(n)l=xg*.5;else{let f=Math.max(r.near,KS.distanceToPoint(pc.origin));l=o7(r,f,o.resolution)}if(KS.radius+=l,pc.intersectsSphere(KS)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),XS.copy(a.boundingBox).applyMatrix4(s);let c;if(n)c=xg*.5;else{let f=Math.max(r.near,XS.distanceToPoint(pc.origin));c=o7(r,f,o.resolution)}XS.expandByScalar(c),pc.intersectsBox(XS)!==!1&&(n?YUe(this,e):ZUe(this,r,e))}onBeforeRender(t){let e=this.material.uniforms;e&&e.resolution&&(t.getViewport(Zx),this.material.uniforms.resolution.value.set(Zx.z,Zx.w))}}}),L3,KZ=Q(()=>{qZ(),L3=class extends O3{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){let e=t.length-3,n=new Float32Array(2*e);for(let r=0;r<e;r+=3)n[2*r]=t[r],n[2*r+1]=t[r+1],n[2*r+2]=t[r+2],n[2*r+3]=t[r+3],n[2*r+4]=t[r+4],n[2*r+5]=t[r+5];return super.setPositions(n),this}setColors(t){let e=t.length-3,n=new Float32Array(2*e);for(let r=0;r<e;r+=3)n[2*r]=t[r],n[2*r+1]=t[r+1],n[2*r+2]=t[r+2],n[2*r+3]=t[r+3],n[2*r+4]=t[r+4],n[2*r+5]=t[r+5];return super.setColors(n),this}setFromPoints(t){let e=t.length-1,n=new Float32Array(6*e);for(let r=0;r<e;r++)n[6*r]=t[r].x,n[6*r+1]=t[r].y,n[6*r+2]=t[r].z||0,n[6*r+3]=t[r+1].x,n[6*r+4]=t[r+1].y,n[6*r+5]=t[r+1].z||0;return super.setPositions(n),this}fromLine(t){let e=t.geometry;return this.setPositions(e.attributes.position.array),this}}}),YZ,QUe=Q(()=>{JUe(),KZ(),P3(),YZ=class extends XZ{constructor(t=new L3,e=new nI({color:Math.random()*16777215})){super(t,e),this.isLine2=!0,this.type="Line2"}}}),l7,FC,e4e=Q(()=>{l7=function(t,e,n){return t*(1-n)+e*n},FC=l7}),u7,c7,ZZ,t4e=Q(()=>{vo(),u7=class extends Ru{constructor(){super(),this.setIndex([2,1,0]),this.setAttribute("position",new la([-1,-1,0,-1,4,0,4,-1,0],3)),this.needsUpdate=!0}},c7=new u7,ZZ=c7}),JZ,n4e=Q(()=>{JZ=`#define GLSLIFY 1
varying vec2 vUv;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;gl_Position=vec4(position,1.0);}`}),QZ,r4e=Q(()=>{QZ=`#define GLSLIFY 1
uniform sampler2D tInput;uniform vec2 direction;varying vec2 vUv;uniform vec2 resolution;vec4 blur13(sampler2D image,vec2 uv,vec2 direction){vec4 color=vec4(0.0);vec2 off1=vec2(1.411764705882353)*direction;vec2 off2=vec2(3.2941176470588234)*direction;vec2 off3=vec2(5.176470588235294)*direction;color+=texture2D(image,uv)*0.1964825501511404;color+=texture2D(image,uv+(off1/resolution))*0.2969069646728344;color+=texture2D(image,uv-(off1/resolution))*0.2969069646728344;color+=texture2D(image,uv+(off2/resolution))*0.09447039785044732;color+=texture2D(image,uv-(off2/resolution))*0.09447039785044732;color+=texture2D(image,uv+(off3/resolution))*0.010381362401148057;color+=texture2D(image,uv-(off3/resolution))*0.010381362401148057;color=min(color,vec4(1.0));return color;}void main(){vec2 uv=vUv;gl_FragColor=blur13(tInput,vUv,direction);}`}),eJ,i4e=Q(()=>{t4e(),vo(),n4e(),r4e(),xw(),eJ=class{constructor(t={}){this.blurMaterial=new Wo({vertexShader:JZ,fragmentShader:QZ,uniforms:{tInput:{value:null},direction:{value:new or(0,0)},resolution:{value:new or(0,0)}},depthTest:!1,depthWrite:!1}),this.camera=new JA,this.mesh=new Ns(ZZ,this.blurMaterial),this.mesh.frustumCulled=!1,this.mesh.matrixAutoUpdate=!1,this.scene=new y3,this.scene.matrixWorldAutoUpdate=!1,this.scene.add(this.mesh),this.tempY=null,this.needsOutputGeneration=t.generatOutput,this.outputSize=t.outputSize,t.input&&this.ensureRenderTargets(t.input)}ensureRenderTargets(t){this.tempY||(this.tempY=new Ol(t.width,t.height),this.needsOutputGeneration&&(this.outputSize?this.output=new Ol(this.outputSize.width,this.outputSize.height):this.output=new Ol(t.width,t.height))),this.tempY.height!==t.height&&(this.tempY.setSize(t.width,t.height),this.output&&(this.outputSize?this.output.setSize(this.outputSize.width,this.outputSize.height):this.output.setSize(t.width,t.height)))}blur(t,e=1){this.ensureRenderTargets(t);let n=Er.autoClear;Er.autoClear=!1;let r=Er.getRenderTarget(),i=Er.shadowMap.autoUpdate;Er.shadowMap.autoUpdate=!1,this.blurMaterial.uniforms.direction.value.set(0,e),this.blurMaterial.uniforms.tInput.value=t.texture??t,Er.setRenderTarget(this.tempY),Er.render(this.scene,this.camera),this.blurMaterial.uniforms.direction.value.set(e,0),this.blurMaterial.uniforms.tInput.value=this.tempY.texture,this.output?Er.setRenderTarget(this.output):Er.setRenderTarget(t),Er.render(this.scene,this.camera),Er.setRenderTarget(r),Er.autoClear=n,Er.shadowMap.autoUpdate=i}resize(t){this.blurMaterial.uniforms.resolution.value.set(t.width,t.height)}dispose(){this.tempY&&this.tempY.dispose(),this.blurMaterial.dispose()}}}),s4e=GOe(()=>{}),Jx,d7,SO,tJ,a4e=Q(()=>{vo(),xw(),tI(),wu(),Jx=WOe(s4e()),wp(),bp(),wu(),d7={autoUpdate:!0,autoResize:!0},SO=new Wn,tJ=class extends Ol{constructor(t,e={}){super(500,500,{type:u_}),this.camera=Uo.current,e.camera&&(this.camera=e.camera),this.opts=Object.assign(d7,e),this.scene=t,this.generateMipmaps=!1,e.clearColor&&(this.clearColor=e.clearColor),this.addEvents(),this.update()}update(){let t=Er.getRenderTarget();Er.setRenderTarget(this),Er.getClearColor(SO),this.clearColor&&Er.setClearColor(this.clearColor.color,this.clearColor.alpha),Er.clear(),Er.render(this.scene,this.camera),Er.setRenderTarget(t),Er.setClearColor(SO,1)}resize(t,e){tq&&(Jx.default.detach(this),Jx.default.attach(this,"noise offline"),Jx.default.update())}addEvents(){this.opts.autoUpdate&&Hi.on(Vi.PRE_UPDATE,this.update.bind(this)),this.opts.autoResize&&Hi.on(Vi.RESIZE,this.resize.bind(this))}}}),Qx,nJ,o4e=Q(()=>{vo(),Qx=new Ru,Qx.setIndex([2,1,0]),Qx.setAttribute("position",new la([-1,-1,0,-1,4,0,4,-1,0],3)),nJ=Qx}),f7,rJ,l4e=Q(()=>{bp(),wu(),vo(),wp(),f7=class{constructor(){this.mouse={value:new or(0,0)},this.timer={value:0},this.DPI={value:Nh},this.resY={value:0},this.aspect={value:1},this.resolution={value:new or},this.audioSum={value:0},this.audioSumRatio={value:0},this.cumulativeAudioSumRatio={value:dL},this.immediateSumRatio={value:VR},this.idleRatio={value:0},this.aiRatio={value:0},this.aiRatioLerp={value:0},this.userRatio={value:0},this.userRatioLerp={value:0},this.idleRatioLerp={value:0},this.appDelta={value:0},this.accimmediateSumRatio={value:0},this.accAudioSumRatio={value:0},this.accUserSumRatio={value:0},Hi.on(Vi.RESIZE,(t,e)=>{this.aspect.value=t/e,this.DPI.value=Nh,this.resolution.value.x=t*Nh,this.resolution.value.y=e*Nh}),Hi.on(Vi.PRE_UPDATE,t=>{this.timer.value+=t,this.appDelta.value=Math.min(t,.3)*100,this.audioSum.value+=VR,this.audioSumRatio.value=this.audioSumRatio.value*t+HR*(1-t),this.accAudioSumRatio.value+=this.audioSumRatio.value,this.immediateSumRatio.value=HR,this.accimmediateSumRatio.value+=this.immediateSumRatio.value,this.idleRatio.value=na.IDLE==ta?1:0,this.aiRatio.value=na.AI==ta?1:0,this.userRatio.value=na.USER==ta?1:0;let e=Math.min(t*3,.3);this.idleRatioLerp.value=this.idleRatioLerp.value*(1-e)+this.idleRatio.value*e,this.aiRatioLerp.value=this.aiRatioLerp.value*(1-e)+this.aiRatio.value*e,this.userRatioLerp.value=this.userRatioLerp.value*(1-e)+this.userRatio.value*e,this.accUserSumRatio.value=U1})}},rJ=new f7});async function bO(t){return iJ.loadAsync(t)}function h7(t){let e=t.x,n=t.y,r=pu.w,i=pu.h,s=Uo.current.zoom,a=i/s,o=r/s,l=e/r*2-1,c=-(n/i)*2+1,f=l*o/2,p=c*a/2;return{x:f,y:p}}var iJ,u4e=Q(()=>{vo(),wu(),tI(),iJ=new jX}),Lo,YS,sJ,c4e=Q(()=>{vo(),bp(),wp(),xw(),jA(),tI(),wu(),KUe(),QUe(),P3(),KZ(),e4e(),i4e(),a4e(),o4e(),l4e(),u4e(),Lo=new Wn,YS=new Wn,sJ=class extends sg{constructor(){super();kt(this,"timer",0);kt(this,"sinTimer",0);kt(this,"currentUserAudio",0);kt(this,"currentAiAudio",0);kt(this,"currentTimer",0);kt(this,"state","void");kt(this,"connectionDuration",1);kt(this,"accUserAudio",0);kt(this,"lines",[]);kt(this,"vector1",new xe);kt(this,"vector2",new xe);this.defaultTextPosition={moved:!1,x:Ot.currentConfig.text.value.position.value.x,y:Ot.currentConfig.text.value.position.value.y},this.defaultTextMeshPosition={moved:!1,x:Ot.currentConfig.nameText.value.position.value.x,y:Ot.currentConfig.nameText.value.position.value.y}}async preload(){await this.createScene(),this.addEvents()}async setState(e,n){}async createScene(){this.blurPass=new eJ,this.gradientMesh=this.createGradientMesh(),this.offline=new tJ(this.gradientMesh,{autoUpdate:!1,autoResize:!1}),this.blurOffline();let e=new OX(1,64),n=new Wo({uniforms:{map:{value:this.offline.texture},colorMixer:{value:0},gradientMixer:{value:0},color:{value:new Wn(16711680)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
            `,fragmentShader:`
                uniform sampler2D map;
                varying vec2 vUv;
                uniform float colorMixer;

                uniform float gradientMixer;

                uniform vec3 color;

                void main() {

                    vec3 texColor = texture2D( map, vUv ).rgb;
                    gl_FragColor = vec4(

                        mix( color, texColor, colorMixer * gradientMixer ),

                    1.0);
                    #include <colorspace_fragment>
                }
            `});this.ringBase=new Ns(e,n),this.add(this.ringBase);let r=new Py({transparent:!0});this.outerRing=new Ns(e,r),this.outerRing.scale.set(1.5,1.5,1.5),this.add(this.outerRing),this.outerRing.position.z=-1;let i=[],s=1,a=[],o=Math.PI*2,l=100;for(let m=0;m<l;m++){let _=Math.sin(m/l*o)*s,y=Math.cos(m/l*o)*s,E=0;m==0&&(a=[_,y,E]),i.push(_),i.push(y),i.push(E)}i.push(a[0],a[1],a[2]);let c=new L3;c.setPositions(i),this.linegeometry=c;let f=await bO(cL),p=f.source.data.width/f.source.data.height;f.anisotropy=Er.capabilities.getMaxAnisotropy(),f.needsUpdate=!0,this.textMesh=new Ns(new j1(1,1),new Py({alphaTest:0,transparent:!0,map:f})),this.textMesh.geometry.computeBoundingBox(),this.textMesh.scaleRatio=p,this.nameTexs={maya:await bO(jR.maya),miles:await bO(jR.miles)},this.textNameMesh=new Ns(new j1(1,1),new Py({alphaTest:0,transparent:!0,map:f})),this.textNameMesh.geometry.computeBoundingBox(),this.textNameMesh.scaleRatio=p,this.add(this.textMesh),this.add(this.textNameMesh)}connect(e=1){return this.state="connected",this.connectionDuration=1/e,new Promise(n=>{this.stateResolve=n})}disconnect(e=1){return this.state="disconnected",this.connectionDuration=1/e,new Promise(n=>{this.stateResolve=n})}update(e){let n=Ot.currentConfig.preset.value.preset.value;if(this.textNameMesh.material.map=this.nameTexs[n],this.textNameMesh.scaleRatio=this.nameTexs[n].source.data.width/this.nameTexs[n].source.data.height,this.textMesh)if((Ot.currentConfig.text.value.position.value.x!=this.defaultTextPosition.x||Ot.currentConfig.text.value.position.value.y!=this.defaultTextPosition.y)&&(this.defaultTextPosition.moved=!0),this.defaultTextPosition.moved){this.textMesh.visible=!1;let y=h7(Ot.currentConfig.text.value.position.value);this.textMesh.position.x=y.x,this.textMesh.position.y=y.y,this.textMesh.scale.x=this.textMesh.scaleRatio*Ot.currentConfig.text.value.scale.value,this.textMesh.scale.y=Ot.currentConfig.text.value.scale.value,this.textMesh.scale.multiplyScalar(1/Uo.current.zoom)}else this.textMesh.visible=!1;if(this.textNameMesh)if((Ot.currentConfig.nameText.value.position.value.x!=this.defaultTextMeshPosition.x||Ot.currentConfig.nameText.value.position.value.y!=this.defaultTextMeshPosition.y)&&(this.defaultTextMeshPosition.moved=!0),this.defaultTextMeshPosition.moved){this.textNameMesh.visible=!1;let y=h7(Ot.currentConfig.nameText.value.position.value);this.textNameMesh.position.x=y.x,this.textNameMesh.position.y=y.y,this.textNameMesh.scale.x=this.textNameMesh.scaleRatio*Ot.currentConfig.nameText.value.scale.value,this.textNameMesh.scale.y=Ot.currentConfig.nameText.value.scale.value,this.textNameMesh.scale.multiplyScalar(1/Uo.current.zoom)}else this.textNameMesh.visible=!1;Ot.currentConfig.general.value.gradientMixer.value>0&&this.blurOffline();let r=Ot.currentConfig[n].value;this.ringBase.material.uniforms.gradientMixer.value=Ot.currentConfig.general.value.gradientMixer.value,this.state=="connected"&&(this.ringBase.material.uniforms.colorMixer.value+=e*this.connectionDuration,this.ringBase.material.uniforms.colorMixer.value>=1&&(this.state="void",this.stateResolve&&(this.stateResolve(),this.stateResolve=null))),this.state=="disconnected"&&(this.ringBase.material.uniforms.colorMixer.value-=e*this.connectionDuration,this.ringBase.material.uniforms.colorMixer.value<=0&&(this.state="void",this.stateResolve&&(this.stateResolve(),this.stateResolve=null))),this.ringBase.material.uniforms.colorMixer.value=Math.max(0,Math.min(this.ringBase.material.uniforms.colorMixer.value,1));let i=Ot.currentConfig.general.value.flipAiAndUser.value,s=i?GR:U1,a=i?U1:GR,o=Math.min(.3,e);Lo.set(Ot.currentConfig.background.value.backgroundcolor.value),Er.setClearColor(Lo,1),YS.copy(Lo),Lo.set(r.gradientBlurBase.value),this.ringBase.material.uniforms.color.value.set(Lo),Lo.set(r.outerRingColor.value),this.outerRing.material.color.set(Lo),this.outerRing.material.opacity=r.outerRingOpacity.value;let l=o*Ot.currentConfig.general.value.userSmooth.value;this.currentUserAudio=this.currentUserAudio*(1-l)+l*UL(Ot.currentConfig.general.value.userNoiseThreshold.value,1,s),this.accUserAudio+=this.currentUserAudio*.01,this.gradientMesh.material.uniforms.accUserAudio.value=this.accUserAudio;var c=1+this.currentUserAudio*Ot.currentConfig.general.value.userMaxScale.value;this.ringBase.scale.set(c,c,1);let f=o*Ot.currentConfig.general.value.aiSmooth.value;this.currentAiAudio=this.currentAiAudio*(1-f)+f*a,c=(Ot.currentConfig.general.value.cumulativeMode.value?c:1)+Ot.currentConfig.general.value.aiMinScale.value+this.currentAiAudio*Ot.currentConfig.general.value.aiMaxScale.value,this.outerRing.scale.set(c,c,1),this.currentTimer+=o;let p=Ot.currentConfig.general.value.rippleSpawnRate.value;this.currentTimer>p&&this.currentAiAudio>.1&&(this.currentTimer=0,this.createLine(this.outerRing.scale.x)),Lo.set(r.rippleColor.value).convertSRGBToLinear();let m=0;for(;m<this.lines.length;){let y=this.lines[m];if(y.visible){var _=Math.max(y.scale.x,this.outerRing.scale.x);_+=o,y.scale.set(_,_,1);let E=(1-UL(y.startScale,y.startScale+1.5,_))*y.startingAlpha;y.material.color.set(Lo),y.material.linewidth=Ot.currentConfig.general.value.rippleLineWidth.value,y.material.color.r=FC(Lo.r,YS.r,1-E),y.material.color.g=FC(Lo.g,YS.g,1-E),y.material.color.b=FC(Lo.b,YS.b,1-E),E<=0&&(y.visible=!1)}m++}}createLine(e){let n=0,r=null;for(;n<this.lines.length;){let i=this.lines[n];i.visible==!1&&(r=i,n=this.lines.length),n++}if(r==null){let i=new nI({color:255,side:0,linewidth:3,opacity:1,dashed:!1,alphaTest:.001,depthTest:!1,depthWrite:!1}),s=new YZ(this.linegeometry,i);s.computeLineDistances(),s.scale.set(1,1,1),this.add(s),s.position.z=.1,this.lines.push(s),r=s}return r.scale.set(e,e,e),r.startScale=e,r.startingAlpha=Ot.currentConfig.general.value.rippleOpacity.value,r.visible=!0,this.add(r),r}createGradientMesh(){let e=nJ,n=new Wo({uniforms:{color1:{value:new Wn(16777215)},color2:{value:new Wn(16777215)},timer:rJ.timer,accUserAudio:{value:0},uvDomainGradientNoise:Ot.currentConfig.general.value.uvDomainGradientNoise,gradientDisplacement:Ot.currentConfig.general.value.gradientDisplacement},vertexShader:`
                varying vec2 vUv;
                varying vec2 vPosition;

                void main() {

                    vUv = vec2(0.5)+(position.xy)*0.5;

                    vPosition = position.xy;

                    gl_Position = vec4( position.xy, 0.0,  1.0 );
                }
            `,fragmentShader:`
                uniform vec3 color1;
                uniform vec3 color2;
                varying vec2 vUv;
                uniform float timer;
                uniform float accUserAudio;
                uniform float uvDomainGradientNoise;

                uniform vec2 gradientDisplacement;

                float rand(vec2 co){
                    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
                }

                vec3 random3(vec3 c) {
                    float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
                    vec3 r;
                    r.z = fract(512.0*j);
                    j *= .125;
                    r.x = fract(512.0*j);
                    j *= .125;
                    r.y = fract(512.0*j);
                    return r-0.5;
                }

                const float F3 =  0.3333333;
                const float G3 =  0.1666667;
                float snoise(vec3 p) {

                    vec3 s = floor(p + dot(p, vec3(F3)));
                    vec3 x = p - s + dot(s, vec3(G3));
                    
                    vec3 e = step(vec3(0.0), x - x.yzx);
                    vec3 i1 = e*(1.0 - e.zxy);
                    vec3 i2 = 1.0 - e.zxy*(1.0 - e);
                        
                    vec3 x1 = x - i1 + G3;
                    vec3 x2 = x - i2 + 2.0*G3;
                    vec3 x3 = x - 1.0 + 3.0*G3;
                    
                    vec4 w, d;
                    
                    w.x = dot(x, x);
                    w.y = dot(x1, x1);
                    w.z = dot(x2, x2);
                    w.w = dot(x3, x3);
                    
                    w = max(0.6 - w, 0.0);
                    
                    d.x = dot(random3(s), x);
                    d.y = dot(random3(s + i1), x1);
                    d.z = dot(random3(s + i2), x2);
                    d.w = dot(random3(s + 1.0), x3);
                    
                    w *= w;
                    w *= w;
                    d *= w;
                    
                    return dot(d, vec4(52.0));
                }

                float snoiseFractal(vec3 m) {
                    return   0.5333333* snoise(m)
                                +0.2666667* snoise(2.0*m)
                                +0.1333333* snoise(4.0*m)
                                +0.0666667* snoise(8.0*m);
                }


                void main() {

                    float def = 0.01;

                    float t =  timer * 0.25 + accUserAudio * 2.0;

                    vec2 v = vec2(
                        // vUv.x  + gradientDisplacement.x + sin(t) * 0.1, 
                        // vUv.y + gradientDisplacement.y - cos(t + 43.0) * 0.1

                        vUv.x  + gradientDisplacement.x, 
                        vUv.y + gradientDisplacement.y 
                    );

                    float dist =   length( v - vec2(0.5) );
                    float distance = smoothstep( 
                        0.3, 
                        1.5, 
                        dist
                    );

                    distance += (rand(vUv * 5.0) - 0.5) * def;

                    distance = clamp(0.0, 1.0, distance);

                    float n = snoise(vec3(vUv * uvDomainGradientNoise , t)) * 0.33 ;

                    float finalD =  max( 0.0, min(distance + (n ) , 1.0)) ;

                    gl_FragColor = vec4( mix( color1, color2, finalD ), 1.0 );
                }
            `});return new Ns(e,n)}blurOffline(){let e=Ot.currentConfig.preset.value.preset.value,n=Ot.currentConfig[e].value;this.gradientMesh.material.uniforms.color1.value.set(n.gradientBlurColor.value),this.gradientMesh.material.uniforms.color2.value.set(n.gradientBlurBase.value),this.offline.update(),this.blurForce=15;let r=3,i=0;for(;i<r;){var s=(r-i-1)*this.blurForce;this.blurPass.blur(this.offline,s),i++}}setPreset(e){Ot.currentConfig.preset.value.preset.value=e}getTextSize(){let e=this.textMesh.geometry.boundingBox,n=this.vector1.copy(e.min).applyMatrix4(this.textMesh.matrixWorld),r=this.vector2.copy(e.max).applyMatrix4(this.textMesh.matrixWorld),i=n.project(Uo.current),s=r.project(Uo.current),a=(s.x-i.x)*pu.w/2,o=(s.y-i.y)*pu.h/2;return{width:a,height:o}}getNameTextSize(){let e=this.textNameMesh.geometry.boundingBox,n=this.vector1.copy(e.min).applyMatrix4(this.textNameMesh.matrixWorld),r=this.vector2.copy(e.max).applyMatrix4(this.textNameMesh.matrixWorld),i=n.project(Uo.current),s=r.project(Uo.current),a=(s.x-i.x)*pu.w/2,o=(s.y-i.y)*pu.h/2;return{width:a,height:o}}resize(){let e=0;for(;e<this.lines.length;)this.lines[e],e++;this.blurPass.resize(this.offline)}addEvents(){Hi.on(Vi.PRE_UPDATE,this.update.bind(this)),Hi.on(Vi.RESIZE,this.resize.bind(this))}}}),aJ,d4e=Q(()=>{vo(),c4e(),aJ=class extends sg{constructor(){super(),this.currentMode=-1,this.scene=new sJ,this.add(this.scene)}preload(){return this.scene.preload()}start(){}setPreset(t){return this.scene.setPreset(t)}getTextSize(){return this.scene.getTextSize()}getNameTextSize(){return this.scene.getNameTextSize()}connect(t){return this.scene.connect(t)}disconnect(t){return this.scene.disconnect(t)}stateDone(t,e,n){return new Promise(r=>{var i=[];Promise.all(i).then(()=>{r(i)})})}}}),p7,BL,f4e=Q(()=>{vo(),wu(),p7=class extends y3{constructor(){super(),zA&&(window.scene=this),this.matrixAutoUpdate=!1,this.matrixWorldAutoUpdate=!0}},BL=new p7}),oJ={};$Oe(oJ,{default:()=>lJ});var lJ,h4e=Q(()=>{d4e(),bp(),wp(),xw(),f4e(),tI(),pq(),jA(),lJ=class{constructor(){this.renderer=Er}forceContextLoss(){Er.getContext().getExtension("WEBGL_lose_context").loseContext()}async preload(){this.root=new aJ,await this.root.preload(),BL.add(this.root)}async start(){let t=Ot.currentConfig.general.value.size.value;await gy.resize({w:t.x,h:t.y}),this.root.start(),this.addEvents()}setPreset(t){return this.root.setPreset(t)}connect(t){return this.root.connect(t)}disconnect(t){return this.root.disconnect(t)}update(){Er.clear(),Er.render(BL,Uo.current)}addEvents(){this.updateEvent=this.update.bind(this),Hi.on(Vi.UPDATE,this.updateEvent),this.resizeEvent=this.resize.bind(this),Hi.on(Vi.RESIZE,this.resizeEvent)}resize(t,e){Er.setSize(t,e)}setTextOption(t){t.position&&t.position.x&&(Ot.currentConfig.text.value.position.value.x=t.position.x),t.position&&t.position.y&&(Ot.currentConfig.text.value.position.value.y=t.position.y),t.scale&&(Ot.currentConfig.text.value.scale.value=t.scale)}getTextOption(){let t=this.root.getTextSize();return{position:{x:Ot.currentConfig.text.value.position.value.x,y:Ot.currentConfig.text.value.position.value.y},scale:Ot.currentConfig.text.value.scale.value,size:t}}setNameTextOption(t){t.position&&t.position.x&&(Ot.currentConfig.nameText.value.position.value.x=t.position.x),t.position&&t.position.y&&(Ot.currentConfig.nameText.value.position.value.y=t.position.y),t.scale&&(Ot.currentConfig.nameText.value.scale.value=t.scale)}getNameTextOption(){let t=this.root.getNameTextSize();return{position:{x:Ot.currentConfig.text.value.position.value.x,y:Ot.currentConfig.text.value.position.value.y},scale:Ot.currentConfig.text.value.scale.value,size:t}}setZoom(t){Ot.currentConfig.camera.value.zoom.value=t,Uo.current.zoom=t,Uo.current.updateProjectionMatrix()}getZoom(){return Uo.current.zoom}setGradientMixer(t){Ot.currentConfig.general.value.gradientMixer.value=t}getGradientMixer(){return Ot.currentConfig.general.value.gradientMixer.value}}});pq();bp();wp();wu();jA();var p4e=class{constructor(){kt(this,"accu",0);kt(this,"now",0)}init(t){this.CURRENT_STATE=na.IDLE,this.noiseThreshold=Ot.currentConfig.audio.value.userSumNoiseThreshold.value,this.soundStateSustainInSeconds=Ot.currentConfig.audio.value.soundStateSustainInSeconds.value,this.currentSum=0,this.currentHighFreqSum=0,this.highFilter=8,this.minFilter=20}stop(){db(na.IDLE),this.CURRENT_STATE=ta,!(!this.audio||!this.isPlaying)&&(this.audio.stop(),this.isPlaying=!1,this.removeEvents(),uL&&this.canvas&&document.body.removeChild(this.canvas))}addEvents(){this.analyseEvent==null&&(this.analyseEvent=this.update.bind(this),Hi.on(Vi.PRE_UPDATE,this.analyseEvent))}removeEvents(){this.analyseEvent!=null&&(Hi.off(Vi.PRE_UPDATE,this.analyseEvent),this.analyseEvent=null)}updateAnalyse(t,e){let n=Date.now(),r=Math.min((n-this.now)/1e3,1),i=r*6;if(this.noiseThreshold=Ot.currentConfig.audio.value.userSumNoiseThreshold.value,this.dataTextureLeft){let _=0,y=0;for(;_<t.length;)y=_*4,this.dataTextureLeft.image.data[y],this.dataTextureLeft.image.data[y],this.dataTextureLeft.image.data[y]=this.dataTextureLeft.image.data[y]*(1-i)+t[_]*i,this.dataTextureRight.image.data[y]=this.dataTextureRight.image.data[y]*(1-i)+e[_]*i,_++;this.dataTextureLeft.needsUpdate=!0,this.dataTextureRight.needsUpdate=!0}let s=0,a=0,o=0,l=0,c=0;for(;c<t.length;)s+=t[c],a+=e[c],c>this.highFilter&&(o+=t[c],l+=e[c]),c++;let f=ta,p=t.length*255/Ot.currentConfig.general.value.audioInfluence.value;cq(s,p),isNaN(a)||dq(a,p),ta!=na.IDLE&&this.accu<this.soundStateSustainInSeconds||(this.accu=0,a>50?db(na.AI):s>this.noiseThreshold?db(na.USER):db(na.IDLE)),ta==na.AI?this.currentSum=a:ta==na.USER?this.currentSum=s:this.currentSum=0,f==ta?(ta==na.USER,fL(IC+this.currentSum*r)):fL(0),hq({left:t,right:e}),fq(this.currentSum),this.CURRENT_STATE=ta,this.accu+=r;let m=document.getElementById("debug-audio-bars");uL&&m&&m.checked,f!=ta&&Hi.emit(Vi.AUDIO_STATE_CHANGE,ta),this.now=n}},m4e=new p4e;wu();var g4e=function(){var t=document.createElement("canvas"),e=!0,n;try{t.addEventListener("webglcontextlost",()=>{e=!1},!1),t.addEventListener("webglcontextcreationerror",()=>{e=!1},!1),n=t.getContext("webgl2")}catch{e=!1}if(n){let r=n.getExtension("WEBGL_lose_context");r&&r.loseContext()}return t=null,e},_4e=g4e,v4e=class{constructor(){kt(this,"preloaded",!1);console.log("%c WebGL Visualisation created ","background: #222; color: #bada55"),window.x=this}isCapable(){return _4e()}init(t={}){t.canvas!=null?(xa!==null&&xa!==t.canvas?(this.preloaded=!1,this.world&&(this.world.renderer.dispose(),this.world=null)):t.canvas,AC(t.canvas),xw(),Ji=new k3({canvas:xa,antialias:!0,alpha:!1,stencil:!1}),Ji.autoClear=!1,Ji.setPixelRatio(Nh),Ji.outputColorSpace=Ca,Ji.info.autoReset=!1,Ji.setClearColor(0,1),Ji.debug.checkShaderErrors=zA,Ji.localClippingEnabled=!1,Er=Ji):(t.canvas,AC(t.canvas)),t.logo&&lq(t.logo),t.nameImages&&uq(t.nameImages),t.contextLossCallback&&(this.contextLossCallback=t.contextLossCallback)}audioFeed(t,e){this.world&&m4e.updateAnalyse(t,e)}visualize(t){let e=()=>{let{input:n,output:r}=t.getFrequencies();if(this.audioFeed(n,r),t.isCallActive())requestAnimationFrame(e);else return};e()}async preload(){if(this.preloaded==!1){let t=(h4e(),qOe(oJ)).default;this.world=new t,await this.world.preload(),this.preloaded=!0,this.world.renderer.domElement.addEventListener("webglcontextlost",e=>{this.contextLossCallback&&this.contextLossCallback()})}else xa&&this.world&&this.world.renderer.domElement!==xa&&(this.world.renderer.setSize(pu.w,pu.h),this.world.renderer.domElement=xa)}async start(){await this.world.start()}async play(){await gy.play()}async pause(){await gy.pause()}async resize(t,e){await gy.resize({w:t,h:e})}connect(t=1){return this.world.connect(t)}disconnect(t=1){return this.world.disconnect(t)}get paused(){return!gy._isPlaying}setTextOption(t){this.world.setTextOption(t)}getTextOption(){return this.world.getTextOption()}setNameTextOption(t){this.world.setNameTextOption(t)}getNameTextOption(){return this.world.getNameTextOption()}set gradientMixer(t){this.world.setGradientMixer(t)}get gradientMixer(){return this.world.getGradientMixer()}set zoom(t){this.world.setZoom(t)}get zoom(){return this.world.getZoom()}setPreset(t){return this.world.setPreset(t)}},y4e=new v4e;const E4e=t=>{const e=P.useRef(t);return P.useEffect(()=>{e.current=t},[t]),e},BC=new Set,S4e=t=>{BC.forEach(e=>{var n;(n=e.current)==null||n.call(e,t)})};let wO;const b4e=()=>{let t=!1;const{navigator:e}=window;if("maxTouchPoints"in e)t=e.maxTouchPoints>0;else if("msMaxTouchPoints"in e)t=e.msMaxTouchPoints>0;else{const n=window.matchMedia&&window.matchMedia("(pointer:coarse)");if(n&&n.media==="(pointer:coarse)")t=!!n.matches;else if("orientation"in window)t=!0;else{const r=e.userAgent;t=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(r)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(r)}}return t&&window.innerWidth<Qg.MD},Ly={width:0,height:0};let m7;const w4e=1,g7=()=>{clearTimeout(m7),m7=window.setTimeout(()=>{wO===void 0&&(wO=b4e());const t={width:window.innerWidth,height:window.innerHeight},e=wO&&Ly.width===t.width;Ly.width=t.width,Ly.height=t.height,!e&&S4e(t)},w4e)};let TO=!1;const _7="resize",T4e=(t,{fireOnInitialRender:e=!1}={})=>{const n=E4e(t);P.useEffect(()=>(BC.add(n),TO||(Ly.width=window.innerWidth,Ly.height=window.innerHeight,window.addEventListener(_7,g7),TO=!0),e&&n.current(Ly),()=>{BC.delete(n),BC.size===0&&(window.removeEventListener(_7,g7),TO=!1)}),[n,e])},x4e="https://storage.googleapis.com/sesame-dev-public/images/maya_text.png",C4e="https://storage.googleapis.com/sesame-dev-public/images/miles_text.png",R4e="https://storage.googleapis.com/sesame-dev-public/images/sesame_text.png",xO=1,M4e=({callAnimationWebGLAppRef:t,webGLAppSizerHeightRef:e,canvasContainerWidthRef:n,glCanvasRef:r})=>{const i=P.useRef(null),s=P.useRef(null),a=P.useRef(!1),{webClient:o}=P.useContext(gw),[l,c]=P.useState(void 0),f=zn(k=>k.mayaIsInitialized),p=zn(k=>k.setMayaIsInitialized),m=zn(k=>k.setCallWarning),_=zn(k=>k.callState),y=zn(k=>k.lastSelectedCharacter),E=IA(_);P.useLayoutEffect(()=>{if(s.current==null)return;const k=new ResizeObserver(()=>{if(s.current!=null){const{height:M}=s.current.getBoundingClientRect();e.current=M;const N=M*.5;t.current!=null&&Bd.to(t.current,{zoom:N,duration:.01,onComplete:()=>{}})}});return k.observe(s.current),()=>k.disconnect()},[s,e,t]),P.useLayoutEffect(()=>{if(i.current==null)return;const{width:k}=i.current.getBoundingClientRect();n.current=k},[i,n]),T4e(({width:k})=>{c(k)},{fireOnInitialRender:!0});const S=P.useCallback((k,M)=>{var L;if(k==null||t.current==null||!t.current.preloaded||!i.current)return;const{width:N,height:O}=M??i.current.getBoundingClientRect(),D=r.current;D!=null&&(D.style.transform=`scale(${1/xO})`),(L=t.current)==null||L.resize(N*xO,O*xO)},[t,r]);P.useEffect(()=>{if(_===Hr.CONNECTING&&E!==Hr.CONNECTING){const k=y,M=t.current;if(M!=null){const N=i.current;if(N!=null){const{width:O}=N.getBoundingClientRect();M.setPreset(k.toLocaleLowerCase()),M.play(),M.zoom=O}}}},[_,E,y,t]);const[w,R]=P.useState({width:0,height:0});P.useEffect(()=>{if(i.current==null)return;const k=new ResizeObserver(()=>{if(i.current!=null){const{width:M,height:N}=i.current.getBoundingClientRect();R({width:M,height:N})}});return k.observe(i.current),()=>k.disconnect()},[R]);const C=P.useCallback(async()=>{var k,M;await((k=t.current)==null?void 0:k.preload()),await((M=t.current)==null?void 0:M.start()),S(l,void 0)},[t,l,S]);return P.useEffect(()=>{S(l,w)},[l,S,w,C]),P.useEffect(()=>{var N,O;if(!f||r.current!=null)return;const k=document.createElement("canvas");k.id="dat-canvas",k.style.width="100%",k.style.height="100%",k.classList.add("initialized"),r.current=k,(N=i.current)==null||N.append(k),a.current=!0;const M=y4e;t.current=M,(O=t.current)==null||O.init({assetRoot:"public/",canvas:k,logo:R4e,nameImages:{maya:x4e,miles:C4e},contextLossCallback:()=>{o==null||o.analyticsManager.track(new Id("WEBGL_CONTEXT_LOSS","WebGL context lost")),m(nt.webglContextLost);const D=t.current;D==null||D.disconnect(0),D==null||D.pause(),t.current=void 0,t.current=void 0}}),C().catch(D=>{t.current=void 0,m(nt.webglUnavailable);let L;try{D instanceof Error?L=JSON.stringify({message:D.message,name:D.name,stack:D.stack,cause:D.cause}):D instanceof Event?L=JSON.stringify({type:D.type,isTrusted:D.isTrusted,target:D.target?String(D.target):null,eventPhase:D.eventPhase,timeStamp:D.timeStamp}):L=JSON.stringify(D,Object.getOwnPropertyNames(D))}catch(B){L=`Failed to stringify error: ${String(D)}. Stringify error: ${String(B)}`}o==null||o.analyticsManager.track(new Id("WEBGL_ERROR",L))})},[f,o,t,r,C,m,p]),U.jsxs("div",{className:di("absolute w-full h-full z-0 top-0"),children:[U.jsx("span",{className:di("aspect-square rounded-full z-10 absolute","w-[37%] h-[37%]"),ref:s}),U.jsx("div",{className:"w-full h-full rounded-full z-0 absolute translate-x-[-50%] translate-y-[-50%] top-[50%] left-[50%]",ref:i})]})},A4e=()=>U.jsxs("span",{className:"flex gap-1",children:[U.jsx("span",{className:"h-2 w-2 rounded-full bg-green2 block",style:{animation:"pulse 1.5s infinite"}}),U.jsx("span",{className:"h-2 w-2 rounded-full bg-green2 block",style:{animation:"pulse 1.5s .3s infinite"}}),U.jsx("span",{className:"h-2 w-2 rounded-full bg-green2 block",style:{animation:"pulse 1.5s .6s infinite"}}),U.jsx("style",{children:`
                @keyframes pulse {
                    0%{
                        opacity: 0.2;
                    }
                    50%{
                        opacity: 1;
                    }
                    100%{
                        opacity: 0.2;
                    }
                }

            `})]}),zb=Fe.forwardRef(({character:t,delay:e,children:n},r)=>{const i=P.useRef(null),s=o=>{i.current&&Bd.to(i.current,{opacity:0,duration:.3,onComplete:o})};P.useImperativeHandle(r,()=>({fadeOut:s}));const a=Fe.useMemo(()=>({animation:`fadeIn ${e!=null&&e>0?`${e}s`:".2s"} forwards`}),[e]);return U.jsx("div",{className:di("flex z-50 w-full h-full justify-center items-center p-4",t==="Maya"?"bg-mayaBase":"bg-milesBase"),children:U.jsx("div",{className:"flex w-full h-full items-center justify-center p-6 text-center",ref:i,children:U.jsx(Li,{className:"text-md sm:text-xl text-green2 opacity-0",style:a,weight:m9.BOLD,children:n})})})});zb.displayName="ButtonWarningView";const I4e=({className:t="",width:e=24,height:n=24})=>U.jsx("svg",{className:t,fill:"none",height:n,viewBox:"0 0 19 19",width:e,xmlns:"http://www.w3.org/2000/svg",children:U.jsx("path",{d:"M5.4082 13.373C2.58594 10.5605.447266 7.16211.447266 4.35938c0-1.24024.419922-2.36329 1.367184-3.27149C2.39062.53125 3.05469.238281 3.69922.238281c.52734 0 1.01562.205078 1.34766.673828l2.0996 2.958981c.33204.45899.48829.83985.48829 1.19141 0 .44922-.26368.83984-.69336 1.28906l-.69336.71289c-.10743.10743-.14649.23438-.14649.36133 0 .14649.0586.2832.10742.39063.3125.60547 1.20118 1.64062 2.15821 2.59769.96679.957 2.00191 1.8457 2.60741 2.1679.0977.0489.2442.1075.3906.1075.127 0 .2637-.0489.3711-.1563l.6934-.6836c.4492-.4394.8496-.6934 1.2891-.6934.3515 0 .7421.1563 1.1914.4688l2.998 2.1289c.459.332.6445.8008.6445 1.2891 0 .664-.3222 1.3379-.8398 1.914-.8887.9766-1.9922 1.416-3.252 1.416-2.8027 0-6.23043-2.1777-9.0527-5Z",fill:"currentColor"})}),k4e=({character:t,onAnimationEnd:e})=>{const n=P.useRef(null),r=P.useRef(null),i=P.useRef(null),s=P.useRef(null),a=P.useRef(null),o=P.useCallback(()=>{const l=t==="Maya"?i:a,c=t==="Maya"?r:s;Bd.to(n.current,{opacity:1,duration:.3,delay:.1,onComplete:()=>{const f=Bd.timeline({delay:.01});f.to(l.current,{scaleY:.5,duration:.5},0),f.to(c.current,{opacity:1,duration:.5},0),f.call(()=>{e()})}})},[t,e]);return P.useEffect(()=>{const l=t==="Maya"?r:s;Bd.set([n.current,l.current],{opacity:0,autoAlpha:1}),o()},[o,t]),U.jsxs("div",{className:"absolute inset-0 invisible",ref:n,children:[U.jsx("div",{className:di("absolute top-0 w-full origin-top bg-mayaBase",t==="Maya"?"h-full":"h-[50%]"),ref:i,style:{zIndex:t==="Maya"?30:0}}),U.jsx("div",{className:di("absolute bottom-0 w-full origin-bottom bg-milesBase",t==="Miles"?"h-full":"h-[50%]"),ref:a,style:{zIndex:t==="Miles"?30:0}}),U.jsxs("div",{className:di("absolute bottom-[25%] left-[50%] flex items-center text-green2 translate-x-[-50%] translate-y-[50%]",t==="Miles"&&"invisible"),ref:s,style:{zIndex:t==="Miles"?40:10},children:[U.jsx(NM,{}),U.jsx(DM,{character:"Miles"})]}),U.jsxs("div",{className:di("absolute top-[25%] left-[50%] flex items-center text-green2 translate-x-[-50%] translate-y-[-50%]",t==="Maya"&&"invisible"),ref:r,style:{zIndex:t==="Maya"?40:10},children:[U.jsx(NM,{}),U.jsx(DM,{character:"Maya"})]})]})},O4e=({onClickChoice:t,onOutroEnd:e,animateIntro:n,character:r,onIntroEnd:i})=>{const s=P.useRef(null),a=P.useRef(!1),o=P.useRef(null),l=P.useRef(null),c=P.useRef(null),f=P.useRef(null),p=S=>{if(a.current||(a.current=!0,t(S),o==null||l==null))return;const w=s.current;if(w==null)return;const R=S==="Maya"?o.current:c.current,C=S==="Maya"?l.current:f.current,k=S==="Maya"?1:-1;if(R==null||C==null||w==null)return;R.style.transform="scaleY(2)",R.style.zIndex="10",C.style.zIndex="11";const{height:M}=w.getBoundingClientRect();C.style.transform=`translate(-50%, calc(${M*.5*.5*k}px - 50%))`,C.style.opacity="0",setTimeout(()=>{C.style.transitionDuration="0.2s",C.style.opacity="0",setTimeout(()=>{e(S)},200)},500)},m=P.useCallback(()=>{if("ontouchstart"in window||navigator.maxTouchPoints||a.current)return;const w=o.current,R=l.current,C=c.current,k=f.current;w==null||R==null||C==null||k==null||(C.style.transform="scale(1)",k.style.transform="translate(-50%,50%)",R.style.transform="translate(-50%,-50%)",w.style.transform="scale(1)")},[]),_=P.useCallback(S=>{if(a.current||"ontouchstart"in window||navigator.maxTouchPoints)return;const R=o.current,C=l.current,k=c.current,M=f.current,N=s.current;if(R==null||C==null||k==null||M==null||N==null)return;const{height:O}=N.getBoundingClientRect(),D=S==="Maya"?R:k,L=S==="Maya"?k:R,B=S==="Maya"?C:M,ee=S==="Maya"?M:C,te=S==="Maya"?1:-1,ne=S==="Maya"?"-50%":"50%",H=S==="Maya"?"50%":"-50%";D.style.transform="scaleY(1.2)",B.style.transform=`translate(-50%,calc(${ne} + ${O*.5*.1*te}px))`,L.style.transform="scaleY(0.8)",ee.style.transform=`translate(-50%,calc(${H} + ${O*.5*.1*te}px))`},[]),y=P.useCallback(()=>{_("Maya")},[_]),E=P.useCallback(()=>{_("Miles")},[_]);return U.jsxs("div",{className:"w-full h-full absolute",ref:s,onMouseLeave:m,children:[U.jsx("div",{"aria-label":"Maya",className:di("h-[50%] transition-transform origin-top duration-500 bg-mayaBase","flex justify-center items-center cursor-pointer","absolute w-full top-0"),"data-testid":"maya-button",ref:o,role:"button",style:{zIndex:"0"},tabIndex:0,onClick:()=>p("Maya"),onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&p("Maya")},onMouseEnter:y}),U.jsxs("div",{className:"absolute left-[50%] top-[25%] flex items-center justify-center text-green2 transition-[transform,opacity] origin-top duration-500 pointer-events-none will-change-transform",ref:l,style:{transform:"translate(-50%,-50%)",zIndex:"1"},children:[U.jsx(NM,{}),U.jsx(DM,{character:"Maya"})]}),U.jsx("div",{"aria-label":"Miles",className:di("h-[50%] transition-transform origin-bottom duration-500 bg-milesBase","flex justify-center items-center cursor-pointer","absolute w-full bottom-0"),ref:c,role:"button",style:{zIndex:"0"},tabIndex:0,onClick:()=>p("Miles"),onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&p("Miles")},onMouseEnter:E}),U.jsxs("div",{className:"absolute left-[50%] bottom-[25%] flex items-center justify-center text-green2 pointer-events-none transition-[transform,opacity] origin-bottom duration-500 will-change-transform",ref:f,style:{transform:"translate(-50%,50%)",zIndex:"1"},children:[U.jsx(NM,{}),U.jsx(DM,{character:"Miles"})]}),n?U.jsxs(U.Fragment,{children:[U.jsx("div",{className:di("w-full h-full absolute z-[98]",r==="Maya"?"bg-mayaBase":"bg-milesBase")}),U.jsx("div",{children:U.jsx("div",{className:"w-full h-full absolute z-[99]",children:U.jsx(k4e,{character:r,onAnimationEnd:()=>{i&&i()}},r)})})]}):null]})},NM=()=>U.jsx(I4e,{className:"w-5 h-5 md:w-7 md:h-7 me-3 md:me-4"}),DM=({character:t})=>{const e=t==="Maya"?nt.maya:nt.miles;return U.jsx("p",{className:"text-sidebar text-xl md:text-3xl select-none font-medium",children:e})},P4e=()=>{const t=zn(e=>e.callWarning);return t==null||t===""?null:U.jsx(Li,{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 block text-md text-center text-green2 opacity-40 max-w-40",children:t})},uJ=()=>U.jsxs("svg",{height:"24",viewBox:"0 0 32 32",width:"24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[U.jsxs("g",{transform:"matrix(.036771 0 0 .036771 3 0)",children:[U.jsxs("defs",{children:[U.jsx("path",{d:"M0 0h708.7v870.3H0z",id:"A"}),U.jsx("path",{d:"M591.8 462.4c-1-110.1 90-163 94.1-165.6-51.2-74.9-130.8-85.1-159.2-86.3-67.7-6.9-132.2 39.9-166.6 39.9s-87.4-38.9-143.6-37.8c-73.9 1.1-142 42.9-180.1 109.1-76.7 133-19.6 330.3 55.2 438.4 36.6 52.8 80.1 112.3 137.4 110.1 55.2-2.2 76-35.7 142.6-35.7s85.4 35.7 143.6 34.6c59.3-1.2 96.9-54 133.2-107 41.9-61.3 59.2-120.7 60.2-123.8-1.3-.5-115.6-44.3-116.8-175.9",id:"B"})]}),U.jsx("clipPath",{id:"C",children:U.jsx("use",{xlinkHref:"#A"})}),U.jsx("g",{clipPath:"url(#C)",children:U.jsx("use",{xlinkHref:"#B"})}),U.jsx("path",{d:"M482.3 139c30.4-36.8 50.9-88 45.3-139-43.8 1.8-96.8 29.2-128.2 66-28.1 32.5-52.8 84.6-46.1 134.6 48.7 3.8 98.6-24.9 129-61.6"})]}),U.jsx("g",{clipPath:"url(#C)",transform:"matrix(.098524 0 0 .098524 89.579758 -18.770519)",children:U.jsx("use",{xlinkHref:"#B"})}),U.jsx("path",{d:"M137.098-5.076c2.995-3.626 5.015-8.67 4.463-13.695-4.315.177-9.537 2.877-12.63 6.503-2.77 3.202-5.202 8.335-4.542 13.26 4.798.374 9.714-2.453 12.71-6.07"}),U.jsx("path",{d:"M185.7 37.457l-4.966 15.045h-6.384l16.247-47.824h7.448l16.316 47.824h-6.6l-5.113-15.045zm15.685-4.828l-4.68-13.764c-1.064-3.123-1.773-5.96-2.483-8.73h-.138l-2.414 8.66L187 32.63z",enableBackground:"new "}),U.jsx("path",{d:"M219.208 29.368c0-4.394-.138-7.95-.286-11.212h5.606l.286 5.892h.138c2.552-4.187 6.6-6.67 12.207-6.67 8.306 0 14.542 7.025 14.542 17.458 0 12.345-7.517 18.444-15.606 18.444-4.542 0-8.512-2-10.572-5.4h-.138v18.66h-6.177zm6.168 9.153c0 .926.138 1.773.286 2.552 1.133 4.325 4.897 7.3 9.37 7.3 6.6 0 10.434-5.4 10.434-13.27 0-6.887-3.616-12.77-10.217-12.77-4.256 0-8.227 3.054-9.44 7.734-.217.778-.424 1.704-.424 2.552v5.892zm32.778-9.153c0-4.394-.138-7.95-.286-11.212h5.606l.286 5.892h.138c2.552-4.187 6.6-6.67 12.207-6.67 8.306 0 14.542 7.025 14.542 17.458 0 12.345-7.517 18.444-15.606 18.444-4.542 0-8.512-2-10.572-5.4h-.138v18.66h-6.177zm6.177 9.153c0 .926.138 1.773.286 2.552 1.133 4.325 4.897 7.3 9.37 7.3 6.6 0 10.434-5.4 10.434-13.27 0-6.887-3.616-12.77-10.217-12.77-4.256 0-8.227 3.054-9.44 7.734-.217.778-.424 1.704-.424 2.552v5.892zM297.1 2.126h6.246V52.5H297.1zm18.8 34.336c.138 8.444 5.537 11.92 11.774 11.92 4.473 0 7.163-.778 9.508-1.773l1.064 4.473c-2.197.995-5.96 2.128-11.42 2.128-10.572 0-16.887-6.956-16.887-17.3s6.1-18.523 16.1-18.523c11.212 0 14.187 9.862 14.187 16.178 0 1.28-.138 2.266-.217 2.906zm18.306-4.473c.07-3.97-1.635-10.148-8.66-10.148-6.315 0-9.084 5.823-9.577 10.148z",enableBackground:"new "})]}),cJ=({fillColor:t})=>U.jsxs("svg",{height:"24px",version:"1.1",viewBox:"0 0 48 48",width:"24px",xmlns:"http://www.w3.org/2000/svg",children:[U.jsx("path",{d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z",fill:t??"#EA4335"}),U.jsx("path",{d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z",fill:t??"#4285F4"}),U.jsx("path",{d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z",fill:t??"#FBBC05"}),U.jsx("path",{d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z",fill:t??"#34A853"}),U.jsx("path",{d:"M0 0h48v48H0z",fill:"none"})]}),zL=mD(t=>({shouldCallWidgetWaitForAuthLoading:!1,setShouldCallWidgetWaitForAuthLoading:e=>t({shouldCallWidgetWaitForAuthLoading:e})}));function dJ(){const t=uf(),e=zL(s=>s.setShouldCallWidgetWaitForAuthLoading),n=P.useCallback(()=>{e(!0)},[e]),r=P.useCallback(async()=>{await En.getState().signInWithGoogle(),n(),t(Qd)},[t,n]),i=P.useCallback(async()=>{await En.getState().signInWithApple(),n(),t(Qd)},[t,n]);return{onGoogleLoginClick:r,onAppleLoginClick:i}}const L4e=({children:t,disabled:e,...n})=>U.jsxs("button",{...n,className:di("py-4 flex-1 relative group",n.className),disabled:e,children:[U.jsx("span",{className:di("hidden-touch absolute inset-0 z-0 group-disabled:hidden bg-green1 opacity-0 transition-opacity duration-200",!e&&"group-hover:opacity-100")}),U.jsx("span",{className:"relative z-10",children:t})]}),N4e=({rating:t,onRatingChange:e,maxStars:n=5,starSize:r,numberTextSizeClassName:i="text-md"})=>U.jsx("div",{className:"flex items-center space-x-1 gap-2",children:Array.from({length:n}).map((s,a)=>{const o=a+1,l=o<=t;return U.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[U.jsx("button",{"aria-label":`Rate ${o} out of ${n} stars`,className:"focus:outline-none",type:"button",onClick:()=>e(o),children:l?U.jsx(Zoe,{className:"text-secondary",starSize:r}):U.jsx(Joe,{className:"text-secondary",starSize:r})}),U.jsx("p",{className:`text-tertiary ${i}`,children:a+1})]},`star-rating-${o}`)})}),ZS=364,D4e=({onSkip:t,character:e,callId:n})=>{const r=P.useRef(null),i=P.useRef(null),s=En(c=>c.isLoggedInUser),a=En(c=>c.loadingFailed),o=IA(s),l=P.useCallback(()=>{i.current!=null&&(i.current.style.zIndex="20"),Bd.to(i.current,{opacity:1,duration:.3,onComplete:()=>{t()}})},[t]);return P.useEffect(()=>{const c=l;return up.subscribe(ef.SKIP_POST_CALL,c),()=>{up.unsubscribe(ef.SKIP_POST_CALL,c)}},[l]),P.useEffect(()=>{o===!1&&s===!0&&l()},[o,s,l]),U.jsxs("div",{className:di("absolute w-full h-full flex flex-col",e==="Maya"?"bg-mayaBase":"bg-milesBase"),ref:r,children:[s||a?U.jsx(U4e,{callId:n,onSkipToCompanionSelection:l}):U.jsx(F4e,{}),U.jsx("div",{className:di("absolute inset-0 invisible",e==="Maya"?"bg-mayaBase":"bg-milesBase"),ref:i,style:{zIndex:"-1"}})]})},U4e=({onSkipToCompanionSelection:t,callId:e})=>{const{width:n,height:r}=zn(R=>R.callVisualizerOuterContainerDimensions),i=Math.min(n,r),[s,a]=P.useState(0),[o,l]=P.useState(void 0),[c,f]=P.useState("STAR_RATING"),{mutateAsync:p}=X2e(),m=P.useCallback(()=>{if(s>0){const R=lf.getAnalyticsManager();R==null||R.track(new _le(s,o)),e!=null&&c==="STAR_RATING"&&p({requestBody:{rating:s,call_id:e}})}},[s,o,p,e,c]),_=P.useCallback(()=>{if(c==="STAR_RATING"){m(),f("STAR_RATING_SUBMITTED");return}if(c==="STAR_RATING_SUBMITTED"){f("FREE_FORM_TEXT");return}c==="FREE_FORM_TEXT"&&o!=null&&o.length>0&&m(),t()},[c,m,o,t]),y=c==="STAR_RATING_SUBMITTED"?nt.postCallShareMore:nt.submit;let E=null;const S=lp({maxWidth:Qg.SM});let w=Ps.H2;switch(S?w=Ps.H5:i<ZS&&(w=Ps.H3),c){case"STAR_RATING":{E=U.jsxs("div",{className:"flex flex-1 flex-col justify-center items-center gap-5 sm:gap-10 py-2",children:[U.jsx(lo,{className:"text-center",fontVariant:pg.SEASON_SANS,level:i>ZS?Ps.H2:Ps.H3,children:nt.postCallStarRatingLabel}),U.jsx("div",{className:"flex items-center justify-center",children:U.jsx(N4e,{numberTextSizeClassName:i>ZS?"text-md":"text-sm",rating:s,starSize:i>ZS?36:24,onRatingChange:a})})]});break}case"STAR_RATING_SUBMITTED":{E=U.jsxs("div",{className:"flex flex-1 flex-col justify-center items-center gap-6 py-2",children:[U.jsx(lo,{className:"text-center",fontVariant:pg.SEASON_SANS,level:i>ZS?Ps.H2:Ps.H3,children:nt.postCallFeedbackSubmittedHeader}),U.jsx(Li,{className:"text-center text-secondary max-w-[240px]",children:yu(nt.postCallFeedbackSubmittedSubtext)})]});break}case"FREE_FORM_TEXT":{E=U.jsxs("div",{className:"flex flex-1 flex-col justify-center items-center gap-6 py-2",children:[U.jsx(lo,{fontVariant:pg.SEASON_SANS,level:w,children:nt.postCallFreeFormFeedbackHeader}),U.jsx("textarea",{className:"w-full p-5 rounded resize-none focus:outline-none bg-green19 placeholder:text-secondary mb-2",maxLength:1e3,placeholder:nt.postCallFreeFormFeedbackTextInputHint,rows:S?2:5,onChange:R=>l(R.target.value)})]});break}}return U.jsxs(U.Fragment,{children:[U.jsx("div",{className:"flex w-full h-[56px]"}),U.jsx("div",{className:"px-8 flex flex-col flex-1",children:E}),U.jsx("div",{className:di("w-full border-solid border-t border-divider",s===0?"invisible":"visible")}),U.jsx("div",{className:"w-full flex relative z-10 h-[56px]",children:s===0?null:U.jsx(L4e,{onClick:_,children:U.jsx(Li,{className:"text-secondary",fontSizeClassName:"text-base",children:y})},c)})]})},F4e=()=>{const{onGoogleLoginClick:t,onAppleLoginClick:e}=dJ(),n=lp({minWidth:400}),r=lp({minWidth:400});return U.jsxs("div",{className:"p-12 flex flex-col flex-1",children:[U.jsxs("div",{className:"flex flex-col items-center",children:[U.jsx(lo,{className:"text-center mb-6",fontVariant:pg.SEASON_SANS,level:Ps.H2,children:yu(nt.logInPageHeader)}),n?U.jsx(Li,{className:"text-center text-body text-tertiary max-w-[272px] mb-6",children:yu(nt.logInPageSubtext)}):null]}),U.jsxs("div",{className:"flex flex-col gap-3 mt-3",children:[U.jsx(Qi,{fullWidth:!0,iconStart:U.jsx(cJ,{}),label:r?nt.googleLoginButtonLabel:nt.googleLoginButtonLabelShort,variant:vi.PRIMARY,onClick:t}),U.jsx(Qi,{fullWidth:!0,iconStart:U.jsx(uJ,{}),label:r?nt.appleLoginButtonLabel:nt.appleLoginButtonLabelShort,variant:vi.PRIMARY,onClick:e})]})]})},B4e=({micAccess:t,setMicAccess:e,handleCallButtonClick:n,micPromptWarningRef:r,lastCallId:i,onSkip:s})=>{const a=zn(S=>S.callView),o=zn(S=>S.setLastSelectedCharacter),l=zn(S=>S.setMayaIsInitialized),c=zn(S=>S.lastSelectedCharacter),f=zn(S=>S.callState),p=zn(S=>S.animateCompanionSelectionIntro),m=zn(S=>S.setAnimateCompanionSelectionIntro),_=P.useCallback(S=>{o(S),l(!0)},[o,l]),y=P.useCallback(()=>{m(!1)},[m]),E=P.useCallback(async S=>{var R;let w;if(navigator.permissions&&typeof navigator.permissions.query=="function"&&(w=await navigator.permissions.query({name:"microphone"})),w)if(w.state==="prompt"){e("prompt");try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(k=>k.stop()),(R=r.current)==null||R.fadeOut(()=>{n(S),e("granted")})}catch{r.current?r.current.fadeOut(()=>{e("denied")}):e("denied")}}else w.state==="granted"?(e("granted"),n(S)):w.state==="denied"&&e("denied");else e("denied")},[n,r,e]);switch(a){case li.SELECT_COMPANION:return U.jsxs(U.Fragment,{children:[U.jsx(O4e,{animateIntro:p,character:c,onClickChoice:_,onIntroEnd:y,onOutroEnd:E},p?"withIntro":"withoutIntro"),t==="prompt"?U.jsx(zb,{character:c,ref:r,children:yu(xl(nt.microphoneAccessPrompt,{character:c}))}):null,t==="denied"?U.jsx(zb,{character:c,children:yu(nt.microphoneAccessDenied)}):null,f===Hr.CONNECTING?U.jsx(zb,{character:c,delay:.7,children:U.jsxs("span",{className:"flex gap-3 items-center",children:[U.jsx("span",{className:"block",children:yu(xl(nt.connecting,{character:c}))}),U.jsx(A4e,{})]})}):null]});case li.CONNECTING:return null;case li.CONNECTED:return U.jsx(P4e,{});case li.POST_CALL:return U.jsx(D4e,{callId:i??void 0,character:c,onSkip:s});default:return null}},v7=(t,e)=>t instanceof yy?xl(nt.unavailableMessage,{character:e}):t instanceof JO?nt.micInputNotDetected:t instanceof R9?nt.callDropped:xl(nt.unavailableMessage,{character:e}),y7="https://storage.googleapis.com/sesame-dev-public/audio/set_14_12_connect_07.mp3",E7="https://storage.googleapis.com/sesame-dev-public/audio/set_14_12_disconnect.mp3",z4e={padding:"0px"},j4e=P.forwardRef(({callAnimationWebGLAppRef:t,stopCall:e},n)=>{const r=P.useRef(!0),i=P.useRef(!1),[s,a]=P.useState(void 0),[o,l]=P.useState(Date.now()),[c,f]=P.useState(0),[p,m]=P.useState(void 0),_=P.useRef(void 0),y=zn(Ie=>Ie.callWarning),E=zn(Ie=>Ie.setCallWarning),S=zn(Ie=>Ie.setCallState),w=zn(Ie=>Ie.lastSelectedCharacter),R=zn(Ie=>Ie.setCallId),C=P.useRef(0),k=P.useRef(0),M=zn(Ie=>Ie.setCallLimitReached),N=zn(Ie=>Ie.callView),O=zn(Ie=>Ie.setCallView),D=zn(Ie=>Ie.setAnimateCompanionSelectionIntro),[L,B]=P.useState(void 0),ee=P.useRef(null),te=P.useRef(null),ne=P.useRef(null),[H]=e2e(),V=P.useRef(null),{webClient:W,maybeInitClient:J}=P.useContext(gw),X=Tke(W),ie=zn(Ie=>Ie.setMayaIsInitialized),pe=En(Ie=>Ie.sesameUser),Z=En(Ie=>Ie.loadingFailed),{mutateAsync:le}=q$(),{logger:ae}=AA();P.useEffect(()=>()=>{ie(!1),E(void 0),S(Hr.DISCONNECTED),O(li.SELECT_COMPANION)},[ie,E,S,O]),P.useEffect(()=>{O(li.SELECT_COMPANION)},[O]),P.useEffect(()=>{_.current=(async()=>await X())()},[X]),P.useEffect(()=>{N===li.POST_CALL&&W!=null&&W.endCallLoggingContext()},[N,W]);const Ee=P.useCallback(()=>{const Ie=k.current,Y=t.current;return new Promise(j=>{Y==null?(r.current=!0,j()):Bd.to(Y,{zoom:Ie*.75,duration:.7,onComplete:()=>{r.current=!0,j()}})})},[t]);P.useImperativeHandle(n,()=>({animateMayaOutro:Ee}));const ke=P.useCallback(()=>{O(li.POST_CALL)},[O]);P.useEffect(()=>{var Y,j;try{(Y=W==null?void 0:W.notification)==null||Y.precacheAudio(y7)}catch(_e){ae==null||ae.warn("Failed to precache audio for connected chime",_e)}try{(j=W==null?void 0:W.notification)==null||j.precacheAudio(E7)}catch(_e){ae==null||ae.warn("Failed to precache audio for disconnected chime",_e)}const Ie=t.current;return()=>{var _e;(_e=W==null?void 0:W.getSession())!=null&&_e.isCallActive()&&(Ie!=null&&(Ie.disconnect(0),Ie.pause()),e())}},[W,e,t,ae]),P.useEffect(()=>{y===nt.warnSafari175||y===nt.webglContextLost||y===nt.webglUnavailable||(W!=null&&c>W.getPoorRttThresholdMs()?(E(nt.poorConnection),l(Date.now())):y&&Date.now()-o>5e3&&E(void 0))},[c,W,y,o,E]);const $e=P.useCallback(Ie=>{const Y=()=>{var Ue;const{input:j,output:_e}=Ie.getFrequencies();(Ue=t.current)==null||Ue.audioFeed(j,_e),Ie.isCallActive()&&requestAnimationFrame(Y)};Y()},[t]),Le=P.useCallback(()=>{const Ie=C.current;r.current=!0;const Y=Ie*.5;return new Promise(j=>{const _e=t.current;_e==null?(r.current=!1,j()):Bd.to(_e,{zoom:Y,duration:.7,onComplete:()=>{r.current=!1,j()}})})},[C,t]),We=P.useCallback(Ie=>{if(document.visibilityState==="visible")Ie();else{const Y=()=>{document.visibilityState==="visible"&&(Ie(),document.removeEventListener("visibilitychange",Y))};document.addEventListener("visibilitychange",Y)}},[]),ot=P.useCallback((Ie,Y,j)=>{i.current||(i.current=!0,(async()=>{const _e=t.current;_e==null||_e.play(),_e==null||_e.disconnect(.3),await Ee(),_e==null||_e.pause(),Ie instanceof x9?(M(!0),ke()):Ie instanceof rA?ke():(a(v7(Ie,Y)),(Ie instanceof JO||Ie instanceof m4||Ie instanceof ea)&&j.stopCall(),setTimeout(()=>{var Ue;(Ue=te.current)==null||Ue.fadeOut(()=>{a(void 0),D(!0),O(li.SELECT_COMPANION)})},2e3))})())},[Ee,M,O,ke,t,D]),Mt=P.useCallback(Ie=>{a(Ie),Ie!=null&&setTimeout(()=>{var Y;(Y=te.current)==null||Y.fadeOut(()=>{var j;a(void 0),D(!0),O(li.SELECT_COMPANION),(j=t.current)==null||j.pause()})},2e3)},[O,t,D]),Wt=P.useCallback((Ie,Y)=>{Ie instanceof JO||Ie instanceof m4?Y.analyticsManager.track(new f4(Ie.code,Ie.message,Ie.details)):Ie instanceof fi?Y.analyticsManager.track(new h4(Ie.code,Ie.message,Ie.details)):Y.analyticsManager.track(new h4("unknown",Ie.message,Ie.stack))},[]),ir=P.useCallback(async Ie=>{var Be;J();let Y;if(_.current!=null&&(Y=await _.current),Y==null)return;if(pe==null&&!Z)try{await le({requestBody:{}})}catch(Oe){ae==null||ae.warn("Failed to put user; trying to connect to call anyways",Oe)}const j=_ke,_e=(Be=H.get("preset"))==null?void 0:Be.toLowerCase(),Ue=_e!=null&&_e in $B?$B[_e]:_e;a(void 0),i.current=!1,M(!1);try{S(Hr.CONNECTING);const Oe=await Y.startCall({character:Ie,preset:Ue,onError:Et=>{if(Et instanceof QO){E(nt.warnSafari175);return}Wt(Et,Y),We(()=>{ot(Et,Ie,Y)})},onConnectionQualityChange:f,onCallStateChange:Et=>{var yt;S(Et);const{audioSession:st}=navigator;if(Et===Hr.CONNECTED){const Ut=(yt=Y.getSession())==null?void 0:yt.getCallId();Ut!=null&&(m(Ut),R(Ut)),st&&(st.type="play-and-record"),navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata({title:Ie,artist:"Sesame"})),B(void 0)}else navigator.mediaSession&&(navigator.mediaSession.metadata=null),st&&(st.type="auto")},audioOptions:{...j,connectedChime:y7,disconnectedChime:E7,enableRecording:!1},chimeTask:async()=>{var Et;S(Hr.CONNECTED),O(li.CONNECTED),await Le(),(Et=t.current)==null||Et.connect()}});$e(Oe)}catch(Oe){S(Hr.DISCONNECTED),Oe instanceof fi&&Y.analyticsManager.track(new f4(Oe.code,Oe.message,Oe.details)),We(()=>{Oe instanceof Error&&Mt(v7(Oe,Ie))})}},[We,J,ot,H,Mt,M,S,E,Wt,O,Le,t,$e,le,pe,Z,ae,R]),ue=async Ie=>{const Y=W==null?void 0:await W.getSession();Y==null||!Y.isCallActive()?await ir(Ie):await e()},vn=P.useCallback(async()=>{var Ie;(Ie=W==null?void 0:W.getSession())==null||Ie.setMuteOutput(!0),await e()},[W,e]),pn=P.useCallback(()=>{D(!0),M(!1),O(li.SELECT_COMPANION)},[M,O,D]);P.useEffect(()=>{if(L==="denied"){const Ie=lf.getAnalyticsManager();Ie==null||Ie.track(new cle(b9.MicPermissionDenied))}},[L]);let Cn="bg-[transparent]";(N===li.CONNECTING||N===li.SELECT_COMPANION||L==="prompt"||L==="denied")&&(w==="Maya"?Cn="bg-mayaBase":Cn="bg-milesBase");const ut=zn(Ie=>Ie.callVisualizerOuterContainerDimensions),Qn=zn(Ie=>Ie.setCallVisualizerOuterContainerDimensions);P.useEffect(()=>{if(ne.current==null)return;const Ie=new ResizeObserver(()=>{if(ne.current!=null){const{width:Y,height:j}=ne.current.getBoundingClientRect();Qn({width:Y,height:j})}});return Ie.observe(ne.current),()=>Ie.disconnect()},[Qn]);const Dt=P.useMemo(()=>{const{width:Ie}=ut,{height:Y}=ut;return Ie>Y?{padding:`0px ${(Ie-Y)/2}px`}:Y>Ie?{padding:`${(Y-Ie)/2}px 0px`}:z4e},[ut]);return U.jsx("div",{className:"flex flex-1 flex-col gap-4 w-full max-w-full h-full items-center justify-center",children:U.jsx("div",{className:"flex flex-1 h-full w-full relative overflow-hidden min-w-[300px] max-w-[536px] min-h-[300px] max-h-[536px] justify-center items-center",ref:ne,children:U.jsx("div",{className:"flex flex-1 h-full w-full",style:Dt,children:U.jsxs("div",{className:di("flex flex-1 relative h-full w-full overflow-hidden rounded-lg justify-center",Cn),children:[U.jsx(M4e,{callAnimationWebGLAppRef:t,canvasContainerWidthRef:k,glCanvasRef:V,webGLAppSizerHeightRef:C}),U.jsx(B4e,{client:W,handleCallButtonClick:ue,handleStopButtonClick:vn,lastCallId:p,micAccess:L,micPromptWarningRef:ee,setMicAccess:B,onSkip:pn}),s!=null&&s!==""?U.jsx(zb,{character:w,ref:te,children:yu(s)}):null]})})})})}),H4e=()=>U.jsx("div",{className:"h-[140px] lg:h-[152px]"}),V4e=()=>{const t=Fe.useRef(null),e=MA(),[n,r]=Fe.useState(!1),i=zn(O=>O.callState===Hr.CONNECTED),s=zn(O=>O.callId),a=zn(O=>O.callView),o=zn(O=>O.setCallView),{webClient:l}=Fe.useContext(gw),c=En(O=>O.isLoading),f=En(O=>O.isLoggedInUser),p=Fe.useRef(null),m=Fe.useRef(void 0),{onMute:_,onUnmute:y}=Fe.useContext(J$),[E,S]=Fe.useState(!1),w=e==null?void 0:e.isEnabled(wb.SHOW_CALL_INFO),R=async()=>{s&&(await navigator.clipboard.writeText(s.toString()),S(!0),setTimeout(()=>{S(!1)},2e3))};Fe.useEffect(()=>{const O=t.current;O!=null&&(i?setTimeout(()=>{O.classList.add("active")},400):O.classList.remove("active"))},[i]);const C=Fe.useCallback(async()=>{await(l==null?void 0:l.stopCall({chimeTask:async()=>{var D;const O=m.current;O==null||O.disconnect(.3),await((D=p.current)==null?void 0:D.animateMayaOutro()),O==null||O.pause(),o(li.POST_CALL)}}))},[l,o]),k=Fe.useCallback(()=>{const O=t.current;O==null||O.classList.remove("active"),setTimeout(async()=>{var D;(D=l==null?void 0:l.getSession())==null||D.setMuteOutput(!0),await C()},700)},[l,C]),M=Fe.useCallback(()=>{up.dispatch(ef.SKIP_POST_CALL)},[]),N=lp({maxWidth:Qg.SM});return U.jsxs("div",{className:"flex flex-col w-full h-full",children:[U.jsx("div",{className:"flex flex-1 my-10",children:U.jsx(j4e,{callAnimationWebGLAppRef:m,ref:p,stopCall:C})}),U.jsxs("div",{className:di("flex flex-col relative",w?"h-[200px]":"h-[152px]"),children:[a===li.SELECT_COMPANION&&!c&&!f?U.jsx("div",{className:"absolute bottom-0 w-full",children:U.jsx(Li,{className:"text-center max-w-[324px] mx-auto mb-12",children:xl(nt.termsOfUseLoggedOutCall,{termsOfUse:O=>U.jsx(KC,{openInNewTab:!0,href:y9,children:O},O),privacyPolicy:O=>U.jsx(KC,{openInNewTab:!0,href:E9,children:O},O)})})}):null,i?U.jsxs("div",{children:[U.jsx("div",{className:"flex justify-center items-center w-full",children:U.jsxs("div",{className:di("flex flex-row bg-green5 mt-8 rounded-lg overflow-hidden w-full max-w-[332px] fadeFromBottom",w?"mb-2":"mb-12"),ref:t,children:[U.jsx(XB,{className:"min-w-41",icon:n?U.jsx(bke,{height:20,width:20}):U.jsx(Ske,{height:20,width:20}),text:n?nt.unmute:nt.mute,onClick:()=>{r(O=>(O?y():_(),!O))}}),U.jsx(XB,{className:"min-wd-41",icon:U.jsx("div",{className:"bg-rose-500 rounded-sm w-4 h-4"}),text:nt.endCall,onClick:k})]})}),w&&i&&s?U.jsxs("div",{className:"flex flex-col items-center w-full my-4",children:[U.jsx(Qi,{label:E?nt.copied:xl(nt.callId,{callId:s.toString()}),size:qb.SMALL,title:E?nt.copied:nt.copyToClipboard,variant:vi.SECONDARY,onClick:R}),U.jsx(Li,{className:"text-xs mt-2",children:nt.copyToClipboard})]}):null]}):null,a===li.POST_CALL?U.jsx("div",{className:"flex justify-center items-center w-full mb-12",children:U.jsx(Qi,{fullWidth:N,iconEnd:U.jsx(RD,{height:20,width:20}),label:nt.postCallContinue,size:qb.LARGE,textClassName:"text-lg",variant:vi.BRAND,onClick:M})}):null,!i&&a!==li.POST_CALL?U.jsx(H4e,{}):null]})]})},G4e=()=>U.jsx(wke,{children:U.jsx(V4e,{})}),$4e=()=>{const t=zL(_=>_.shouldCallWidgetWaitForAuthLoading),e=zL(_=>_.setShouldCallWidgetWaitForAuthLoading),n=En(_=>_.firebaseUser),r=En(_=>_.sesameUser),i=En(_=>_.isLoading),s=En(_=>_.loadingFailed),a=Fe.useContext(fN),o=r==null?void 0:r.nickname,l=zn(_=>_.callView),c=zn(_=>_.lastSelectedCharacter),f=Fe.useMemo(()=>{if(o!=null&&o.trim().length>0){const _=new Date().getHours();return _<12?xl(nt.homeGreetingMorning,{nickname:o}):_<17?xl(nt.homeGreetingAfternoon,{nickname:o}):xl(nt.homeGreetingEvening,{nickname:o})}},[o]),{logger:p}=AA(),m=l===li.POST_CALL?xl(nt.postCallThankYou,{character:c}):f;return Fe.useEffect(()=>{a==null||a.setTitle("Home"),p==null||p.info("home_page_viewed")},[a,p]),Fe.useEffect(()=>{i||e(!1)},[i,e]),t&&i?null:!i&&!s&&n!=null&&(r==null||!y$(r))?U.jsx(TD,{replace:!0,to:hy}):U.jsxs("div",{className:"flex w-full h-full flex-col items-center justify-center flex-1 min-w-xl px-5",children:[U.jsx(lo,{className:di("text-green2 text-center min-h-8","transition-opacity duration-300 ease-in-out",m===void 0||![li.SELECT_COMPANION,li.POST_CALL].includes(l)?"opacity-0":"opacity-100"),level:Ps.H2,children:m}),U.jsx(G4e,{})]})},W4e="https://storage.googleapis.com/sesame-dev-public/images/laptop_sesame_app_background.jpg",q4e=()=>{const t=En(m=>m.isLoading),e=En(m=>m.redirectResultStatus),n=e===Vh.HANDLED,r=En(m=>m.pendingUserCredential),i=En(m=>m.sesameUser),s=r!=null&&e===Vh.NEEDS_TO_LINK_CREDENTIAL,a=uf(),{onGoogleLoginClick:o,onAppleLoginClick:l}=dJ();P.useEffect(()=>{!t&&!n&&En.getState().logOut()},[t,n]),P.useEffect(()=>{!t&&i==null&&n&&(PR.init(),PR.logOnboardingLoggedIn())},[t,i,n]);const c=P.useCallback(()=>{En.getState().linkPendingUserCredential()},[]),f=P.useCallback(()=>{a(Qd)},[a]);if(!t&&e===Vh.HANDLED)return U.jsx(TD,{to:Qd});if(t)return null;const p=s?xl(nt.logInPageSubtextLinkCredential,{email:r==null?void 0:r.email}):nt.logInPageSubtext;return U.jsx("div",{className:"flex flex-col flex-1",children:U.jsxs("div",{className:"flex flex-row flex-1 h-full w-full justify-center items-center",children:[U.jsx("div",{className:"flex flex-1 justify-center items-center",children:U.jsxs("div",{className:"flex flex-1 flex-col max-w-[460px] gap-6 p-6",children:[U.jsx("div",{className:"flex justify-center",children:U.jsx("a",{className:"flex flex-col cursor-pointer w-5 h-5",href:iC,title:ole,children:U.jsx(Y$,{})})}),U.jsx(lo,{className:"items-center justify-center text-center",fontVariant:pg.SEASON_MIX,level:Ps.H2,children:yu(nt.logInPageHeader)}),U.jsx("div",{className:"flex justify-center",children:U.jsx(Li,{className:"text-center text-body text-tertiary max-w-[272px]",children:yu(p)})}),U.jsx("div",{className:"flex flex-col gap-3 mt-6",children:s?U.jsx(Qi,{fullWidth:!0,label:nt.continue,variant:vi.PRIMARY,onClick:c}):U.jsxs(U.Fragment,{children:[U.jsx(Qi,{fullWidth:!0,iconStart:U.jsx(cJ,{}),label:nt.googleLoginButtonLabel,variant:vi.PRIMARY,onClick:o}),U.jsx(Qi,{fullWidth:!0,iconStart:U.jsx(uJ,{}),label:nt.appleLoginButtonLabel,variant:vi.PRIMARY,onClick:l})]})}),U.jsxs("div",{className:"flex flex-col",children:[U.jsx("div",{className:"w-full border-b border-divider mb-3"}),U.jsx("div",{className:"flex py-5 justify-center",children:U.jsx(Qi,{fullWidth:!0,label:nt.skipLoginButtonLabel,variant:vi.PRIMARY,onClick:f})})]})]})}),U.jsx("div",{className:"flex flex-1 h-full hidden lg:block relative bg-light2",children:U.jsx("img",{alt:"",className:"w-full h-full object-cover object-right",src:W4e})})]})})},S7=88,X4e=188,K4e=68,Y4e=16,fJ=({headerText:t=nt.notFoundPageHeader})=>{const e=uf(),[n,r]=P.useState(X4e),i=n/2,s=n-Y4e-K4e/2,a=Math.abs(s-i),o=P.useRef(null),l=P.useCallback(()=>{e(Qd)},[e]);P.useEffect(()=>{if(o.current==null)return;const m=new ResizeObserver(()=>{if(o.current!=null){const{height:_}=o.current.getBoundingClientRect();r(_)}});return m.observe(o.current),()=>m.disconnect()},[o]);const c=K$(),f=P.useMemo(()=>({marginTop:c/2-S7-n/2-a}),[c,n,a]),p=P.useMemo(()=>({width:"3340px",height:"3340px",left:"50%",transform:"translateX(-50%)",zIndex:1,top:c/2-S7,backgroundColor:"#CAD3A4",opacity:.3}),[c]);return U.jsxs("div",{className:"flex flex-col h-full relative overflow-hidden",children:[U.jsxs("div",{className:"flex flex-col items-center justify-center gap-14 p-4 relative z-10",ref:o,style:f,children:[U.jsx(lo,{className:"text-green2 text-center",level:Ps.H2,children:t}),U.jsx(Qi,{label:nt.notFoundPageButtonLabel,size:qb.LARGE,textClassName:"text-lg",variant:vi.BRAND,onClick:l})]}),U.jsx("div",{className:"absolute rounded-full",style:p})]})},eC=()=>U.jsx(fJ,{headerText:nt.errorPageHeader}),Z4e=qIe(wIe(U.jsxs(U.Fragment,{children:[U.jsx(lb,{element:U.jsx(bx,{children:U.jsx($4e,{})}),errorElement:U.jsx(eC,{}),path:Qd}),U.jsx(lb,{element:U.jsx(bx,{includeHeader:!1,children:U.jsx(q4e,{})}),errorElement:U.jsx(eC,{}),path:R1}),U.jsx(lb,{element:U.jsx(bx,{children:U.jsx(tAe,{children:U.jsx(tke,{})})}),errorElement:U.jsx(eC,{}),path:hy}),U.jsx(lb,{element:U.jsx(bx,{children:U.jsx(fJ,{headerText:nt.notFoundPageHeader})}),errorElement:U.jsx(eC,{}),path:"*"})]}))),J4e=()=>{const t=P.useContext(fN),e=t==null?void 0:t.title;return P.useEffect(()=>{e&&e!==document.title&&(document.title=e)},[e]),U.jsx("div",{className:"font-season",children:U.jsx(a2e,{router:Z4e})})};ase({dsn:"https://8c76a2abba5510ab798298c7e6185fbf@o4507352690196480.ingest.us.sentry.io/4509312291110912",sendDefaultPii:!0});ile.createRoot(document.getElementById("root")).render(U.jsx(P.StrictMode,{children:U.jsx(P.Suspense,{fallback:U.jsx(h9,{}),children:U.jsx(eAe,{children:U.jsx(GMe,{children:U.jsx(ale,{children:U.jsx(sle,{children:U.jsx(J4e,{})})})})})})}));export{sFe as A,wve as B,F2 as C,_ye as D,Pt as E,HN as F,PN as G,pFe as H,fFe as I,hFe as J,mFe as K,fve as L,Tl as M,yr as N,aa as O,n0e as P,Ua as Q,i_ as R,_0e as S,ave as T,Mc as U,uFe as a,IN as b,Bye as c,zye as d,iFe as e,o0e as f,t0e as g,lFe as h,e0e as i,aFe as j,cFe as k,oFe as l,fV as m,sw as n,np as o,r_ as p,hV as q,a0e as r,l0e as s,Us as t,LEe as u,dFe as v,ri as w,NEe as x,Mr as y,Sc as z};
//# sourceMappingURL=index-CytqvZGY.js.map
